{"title":"มาลองทำ Vector Search บน MongoDB Atlas กัน","link":"https://www.somkiat.cc/vector-search-with-mongodb-atlas/","date":1738314189000,"content":"<p><img width=\"150\" height=\"150\" src=\"https://www.somkiat.cc/wp-content/uploads/2025/01/mongodb-vector-search-150x150.jpg\" alt=\"\" loading=\"lazy\" srcset=\"https://www.somkiat.cc/wp-content/uploads/2025/01/mongodb-vector-search-150x150.jpg 150w, https://www.somkiat.cc/wp-content/uploads/2025/01/mongodb-vector-search-75x75.jpg 75w\" /></p>\n<figure><a href=\"https://www.somkiat.cc/wp-content/uploads/2025/01/mongodb-vector-search.jpg\"><img src=\"https://www.somkiat.cc/wp-content/uploads/2025/01/mongodb-vector-search.jpg\" alt=\"\" width=\"646\" height=\"364\" /></a></figure>\n\n\n\n<p>หลังจากที่ไปแบ่งปันความรู้เรื่องการพัฒนา <strong>RAG app (Retrieval-Augmented Generation)</strong> มานิดหน่อย<br />ซึ่งมีกระบวนการพื้นฐานประกอบไปด้วย</p>\n\n\n\n<ul>\n<li>Chunking</li>\n\n\n\n<li>Embedding</li>\n\n\n\n<li>บันทึกลง Vector Database</li>\n\n\n\n<li>ทำการค้นหาข้อมูลที่ใกล้เคียง</li>\n\n\n\n<li>ทำการ re-rank ผล</li>\n</ul>\n\n\n\n<p>หนึ่งในขั้นตอนที่น่าสนใจคือ <strong>Vector Database</strong> <br />เราจะใช้อะไรดี ซึ่งมีให้เลือกมากมาย ตามความเหมาะสม หรือ ความชอบก็ว่าไป<br />หนึ่งในตัวที่ถามในการแบ่งปันคือ MongoDB<br />ดังนั้นมาลองใช้งานกันหน่อย</p>\n\n\n\n<span></span>\n\n\n\n<p>โดยการเก็บข้อมูลชนิด Vector ใน MongoDB นั้น<br />จะเป็นความสามารถของ <strong><a href=\"https://www.mongodb.com/docs/atlas/atlas-vector-search/vector-search-overview/\" target=\"_blank\">MongoDB Atlas</a></strong><br />และเราสามารถทำการติดตั้งบน local เพื่อทดลองใช้งานได้เช่นเดียวกัน<br />ซึ่งทาง MongoDB ได้เตรียมการติดตั้งไว้ให้ทั้ง</p>\n\n\n\n<ul>\n<li>CLI</li>\n\n\n\n<li><a href=\"https://www.mongodb.com/docs/atlas/cli/current/atlas-cli-deploy-docker/\" target=\"_blank\">Docker</a></li>\n</ul>\n\n\n\n<p><strong>ใน Workshop นี้ผมเลือกติดตั้งด้วย Docker</strong></p>\n\n\n\n<p>ด้วยการเขียนไฟล์ docker compose ขึ้นมาดังนี้</p>\n\n\n\n[gist id=\"981a4acc3a50fcb5882c021ee4354df9\" file=\"compose.yml\"]\n\n\n\n<p>ทำการติดตั้งแบบง่าย ๆ</p>\n\n\n\n[gist id=\"981a4acc3a50fcb5882c021ee4354df9\" file=\"1.txt\"]\n\n\n\n<p><strong>จากนั้นทำการเขียน code เพื่อทำการบันทึกข้อมูลลง MonogDB Atlas</strong><br />ซึ่งก่อนจะบันทึกและค้นหาได้นั้น ต้องทำดังนี้</p>\n\n\n\n<ul>\n<li>สร้าง database และ collection สำหรับจัดเก็บข้อมูล</li>\n\n\n\n<li>ทำการ embedding ข้อมูลที่ต้องการบันทึกลอง property ที่เป็น Vector type</li>\n\n\n\n<li>ทำการสร้าง index ให้เป็น <strong>type=vectorSearch</strong> ใช้สำหรับค้นหา สามารถกำหนก similarity algorithm ได้ โดยจากตัวอย่างใช้ <strong>cosine</strong></li>\n</ul>\n\n\n\n<p><strong>ตัวอย่าง code เป็นดังนี้</strong></p>\n\n\n\n[gist id=\"981a4acc3a50fcb5882c021ee4354df9\" file=\"demo.py\"]\n\n\n\n<p><strong>จากนั้นก็สามารถทำการค้นหาข้อมูลด้วย Vector search ได้แล้ว</strong><br />เป็นอีกหนึ่งทางเลือกที่น่าสนใจ<br />จะพบว่า Database model ต่าง ๆ  จะสนับสนุน Vector type เข้ามา<br />ทั้ง MySQL, PostgreSQL, SQLite และ Elasticserch/OpenSearch เป็นต้น</p>\n\n\n\n<p><strong>Reference Websites</strong></p>\n\n\n\n<ul>\n<li><a href=\"https://www.mongodb.com/developer/products/atlas/getting-started-mongodb-atlas-local-search-experience-using-docker/\" target=\"_blank\">Getting Started with MongoDB Atlas Local Search Experience Using Docker</a></li>\n</ul>\n","author":"somkiat","siteTitle":"cc :: somkiat","siteHash":"3a23a5a4389e1e40c6fbb16520a8cc20df5b3591c25145ce72aaa18b19e48201","entryHash":"610e749169f2b769afabaf439a275deb10590112d99a81565410e6237cf227a6","category":"Thai"}