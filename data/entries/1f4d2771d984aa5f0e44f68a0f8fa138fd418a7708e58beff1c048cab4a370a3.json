{"title":"กูเกิลเล่าประสบการณ์แปลงโค้ด C/C++ เป็น Rust ในเฟิร์มแวร์ของ Android, บอกว่าทำง่าย","link":"https://www.blognone.com/node/141914","date":1725891575000,"content":"<div><div><div><p>กูเกิลเผยรายละเอียดผ่าน Google Security Blog ถึงการเปลี่ยนโค้ดเฟิร์มแวร์ Android จากของเดิมที่เป็น C/C++ มาเป็น Rust เพื่ออาศัยจุดเด่นเรื่องความปลอดภัยหน่วยความจำ (memory-safe) ที่ระดับภาษา</p>\n<p><a href=\"https://www.blognone.com/node/122065\">กูเกิลเริ่มใช้ Rust ใน Android มาตั้งแต่ปี 2021</a> และ<a href=\"https://www.blognone.com/node/131693\">ได้ผลเป็นอย่างดี</a> กรณีนี้ กูเกิลบอกว่าต้องการโชว์ให้เห็นว่าการเปลี่ยนโค้ด C/C++ มาเป็น Rust โดยตรงชนิดใช้แทนกันได้เลย (drop-in replacement) เป็นเรื่องที่สามารถทำได้จริงที่ระดับเฟิร์มแวร์</p>\n<p>กูเกิลบอกว่าเฟิร์มแวร์เป็นจุดรั่วให้โดนโจมตีได้ง่าย เพราะโค้ดระดับของเฟิร์มแวร์ขาดระบบความปลอดภัยที่ใช้กันในซอฟต์แวร์ระดับสูงขึ้น และมักเต็มไปด้วยโค้ดเก่าๆ ที่เขียนด้วย C/C++ สั่งสมกันมายาวนาน การแก้ปัญหาโดยเปลี่ยนโค้ดเป็น Rust ที่สามารถทดแทน C ได้เลยโดยไม่เสียประสิทธิภาพ (no overhead) จึงเป็นทางออกที่เหมาะสม</p>\n<p>แนวทางที่กูเกิลใช้งานคือค่อยๆ เริ่มเปลี่ยนจากโค้ดส่วนที่มีความเสี่ยงสูง (highest risk) ก่อน โดยสร้างเลเยอร์ที่ทำหน้าที่แปลง Rust API เป็น C API ของเดิม ปัญหาที่พบในระหว่างทางคือต้องแปลงโค้ด Rust ที่เรียก<a href=\"https://doc.rust-lang.org/std/\">ไลบรารี std</a> (รันบนระบบปฏิบัติการตัวเต็ม) มาเป็นสภาพแวดล้อมแบบ no_std (รันแบบ bare metal บนฮาร์ดแวร์เพียวๆ ในกรณีของเฟิร์มแวร์) ซึ่งกูเกิลได้เล่าเทคนิคการแก้ปัญหานี้ในบล็อกอย่างละเอียด</p>\n<p>กูเกิลบอกว่าการเปลี่ยนผ่านครั้งนี้ \"ง่าย\" (ใช้คำว่า easy) และได้ประโยชน์เรื่องความปลอดภัยหน่วยความจำ โดยยังรักษาประสิทธิภาพระดับเดียวกับ C เอาไว้ได้ กูเกิลจึงแนะนำให้องค์กรอื่นๆ ที่อยากเปลี่ยนผ่านโค้ดเก่าในเฟิร์มแวร์ ให้เดินตามแนวทางที่กูเกิลลองจนประสบความสำเร็จมาแล้วได้</p>\n<p>ที่มา - <a href=\"https://security.googleblog.com/2024/09/deploying-rust-in-existing-firmware.html\">Google Security Blog</a> via <a href=\"https://www.theregister.com/2024/09/06/google_rust_c_code_language/\">The Register</a></p>\n<p><img src=\"https://www.blognone.com/sites/default/files/externals/764b7f9da17c5c0234719cfa8439a354.jpg\" /></p>\n</div></div></div><div><div>Topics: </div><div><div><a href=\"/topics/rust\">Rust</a></div><div><a href=\"/topics/android\">Android</a></div><div><a href=\"/topics/google\">Google</a></div><div><a href=\"/topics/programming\">Programming</a></div><div><a href=\"/topics/c\">C</a></div><div><a href=\"/topics/c-0\">C++</a></div><div><a href=\"/topics/firmware\">Firmware</a></div></div></div>","author":"mk","siteTitle":"Blognone","siteHash":"ededadcf18490b3937e7dd89ebe8c00dc129addbdf1ebe4aff1f458146693da0","entryHash":"1f4d2771d984aa5f0e44f68a0f8fa138fd418a7708e58beff1c048cab4a370a3","category":"Thai"}