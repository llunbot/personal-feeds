{"title":"Google Pixel bug lets you “uncrop” the last four years of screenshots","link":"https://arstechnica.com/?p=1925219","date":1679333652000,"content":"<div>\n<figure>\n  <img src=\"https://cdn.arstechnica.net/wp-content/uploads/2023/03/24-800x450.jpg\" alt=\"At least the acropalypse.app tool has a pretty sweet logo. \" />\n      <p><a href=\"https://cdn.arstechnica.net/wp-content/uploads/2023/03/24.jpg\">Enlarge</a> <span>/</span> At least the acropalypse.app tool has a pretty sweet logo.  (credit: <a href=\"https://acropalypse.app/\">acropalypse.app</a>)</p>  </figure>\n\n\n\n\n\n\n<div><a name=\"page-1\"></a></div>\n<p>Back in 2018, Pixel phones gained a <a href=\"https://arstechnica.com/gadgets/2018/09/android-9-pie-thoroughly-reviewed/5/#h1\">built-in screenshot editor</a> called \"Markup\" with the release of Android 9.0 Pie. The tool pops up whenever you take a screenshot, and tapping the app's pen icon gives you access to tools like crop and a few colored drawing pens. That's very handy assuming Google's Markup tool actually does what it says, but a new vulnerability points out the edits made by this tool weren't actually destructive! It's possible to uncrop or unredact Pixel screenshots taken during the past four years.</p>\n<p>The bug was discovered by <a href=\"https://twitter.com/ItsSimonTime/status/1636857478263750656\">Simon Aarons</a> and is dubbed \"Acropalypse,\" or more formally CVE-2023-21036. There's a proof-of-concept app that can unredact Pixel screenshots at <a href=\"https://acropalypse.app/\">acropalypse.app</a>, and it works! There's also a good technical write-up <a href=\"https://www.da.vidbuchanan.co.uk/blog/exploiting-acropalypse.html\">here</a> by Aarons' collaborator, David Buchanan. The basic gist of the problem is that Google's screenshot editor overwrites the original screenshot file with your new edited screenshot, but it does not truncate or recompress that file in any way. If your edited screenshot has a smaller file size than the original—that's very easy to do with the crop tool—you end up with a PNG with a bunch of hidden junk data at the end of it. That junk data is made up of the end bits of your original screenshot, and it's actually possible to recover that data.</p>\n<p>That sounds like a bad way to write a screenshot cropping tool, but in Google's defense, the Android 9 release of the Markup tool worked correctly and truncated the overwritten file. Android 10 brought a lot of <a href=\"https://arstechnica.com/gadgets/2019/09/android-10-the-ars-technica-review/7/#h3\">dramatic \"Scoped Storage\" changes</a> to how file storage worked in Android, though. It's unclear how or why this happened, but perhaps as part of that huge wave of file-handling commits, one <a href=\"https://issuetracker.google.com/issues/180526528\">undocumented change</a> made it into the Android Framework file parser: the Framework's \"write\" mode stopped truncating overwritten files, and the bug in Markup was created. The Markup tool relied on the OS's file handling, and the way it worked changed in a later release, which it looks like nobody noticed.</p></div><p><a href=\"https://arstechnica.com/?p=1925219#p3\">Read 2 remaining paragraphs</a> | <a href=\"https://arstechnica.com/?p=1925219&amp;comments=1\">Comments</a></p>","author":"Ron Amadeo","siteTitle":"Ars Technica","siteHash":"5b0ddf6e8923e49262a7894cfd77962733e43fbcc565a103b48373820b310636","entryHash":"68396e435352bcd414e909a30f19756cea3fd63e2f678ad4611331a15c431f17","category":"Tech"}