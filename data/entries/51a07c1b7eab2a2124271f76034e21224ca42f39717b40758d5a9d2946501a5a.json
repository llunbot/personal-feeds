{"title":"การจัดการ OpenAPI ใน FastAPI แบบง่าย ๆ","link":"https://www.somkiat.cc/openapi-in-fastapi/","date":1728924841000,"content":"<p><img width=\"150\" height=\"150\" src=\"https://www.somkiat.cc/wp-content/uploads/2024/10/fastapi-doc-150x150.png\" loading=\"lazy\" srcset=\"https://www.somkiat.cc/wp-content/uploads/2024/10/fastapi-doc-150x150.png 150w, https://www.somkiat.cc/wp-content/uploads/2024/10/fastapi-doc-75x75.png 75w\" /></p>\n<figure><a href=\"https://www.somkiat.cc/wp-content/uploads/2024/10/fastapi-doc.png\"><img src=\"https://www.somkiat.cc/wp-content/uploads/2024/10/fastapi-doc.png\" width=\"555\" height=\"278\" /></a></figure>\n\n\n\n<p>เนื่องจากมีปัญหาในจัดการ <strong><a href=\"https://fastapi.tiangolo.com/tutorial/bigger-applications/\" target=\"_blank\">OpenAPI หรือ Swagger ที่คุ้นเคยใน FastAPI </a></strong>กันดังนี้</p>\n\n\n\n<ul>\n<li>ต้องการจัดกลุ่มของ API แต่ละตัวตาม</li>\n\n\n\n<li>อยากให้แยกไฟล์ของ OpenAPI ตามกลุ่มของ API</li>\n</ul>\n\n\n\n<p>เลยลองมาทำดูแบบง่ายกันหน่อย</p>\n\n\n\n<span></span>\n\n\n\n<p><strong>เรื่องที่ 1 แบ่งกลุ่มของ API ให้สวย ๆ</strong></p>\n\n\n\n<p>เรื่องนี้ไม่ยากเพียงแค่เพิ่ม tag เข้าไปตรงการกำหนด router ก็ได้เลย<br />ดูในเอกสารได้เลย<br />ตัวอย่างการใช้งานแบบง่าย ๆ</p>\n\n\n\n[gist id=\"61127a09b7531867e1bb2e87a833e1e9\" file=\"1.py\"]\n\n\n\n<p>เพื่อให้สวยงามขึ้น สร้าง class จัดการ tags กันนิดหน่อย</p>\n\n\n\n[gist id=\"61127a09b7531867e1bb2e87a833e1e9\" file=\"2.py\"]\n\n\n\n<p>แสดงผลการทำงานดังรูป</p>\n\n\n\n<figure><a href=\"https://www.somkiat.cc/wp-content/uploads/2024/10/fastapi-openapi-01.jpg\"><img src=\"https://www.somkiat.cc/wp-content/uploads/2024/10/fastapi-openapi-01.jpg\" width=\"415\" height=\"319\" /></a></figure>\n\n\n\n<p><strong>เรื่องที่ 2 แยกไฟล์ตามกลุ่มของ API ไปเลย</strong></p>\n\n\n\n<p>ในส่วนนี้ FastAPI เตรียม <a href=\"https://fastapi.tiangolo.com/advanced/sub-applications/\" target=\"_blank\">Sub application</a> ไว้ให้ใช้งาน<br />เราสามารถแบ่งไฟล์ของ OpenAPI ตามกลุ่มได้เลย</p>\n\n\n\n<p>ยกตัวอย่างเช่น ต้องการเพิ่ม extra api เข้ามา<br />สามารถทำได้ดังนี้</p>\n\n\n\n[gist id=\"61127a09b7531867e1bb2e87a833e1e9\" file=\"3.py\"]\n\n\n\n<p>สามารถเข้าดู OpenAPI ของ extra api ผ่าน url=<strong>http://127.0.0.1:8000/extra/docs</strong></p>\n\n\n\n<p>ดูเอกสารเพิ่มเติมในส่วนของ <a href=\"https://fastapi.tiangolo.com/advanced/additional-responses/\" target=\"_blank\">Advance documentation</a><br />อธิบายไว้ได้ละเอียดมาก ๆ<br />ขอให้สนุกกับการ coding</p>\n\n\n\n<p><br /></p>\n","author":"somkiat","siteTitle":"cc :: somkiat","siteHash":"3a23a5a4389e1e40c6fbb16520a8cc20df5b3591c25145ce72aaa18b19e48201","entryHash":"51a07c1b7eab2a2124271f76034e21224ca42f39717b40758d5a9d2946501a5a","category":"Thai"}