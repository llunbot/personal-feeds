{"title":"บันทึกเรื่องการเปลี่ยนมาใช้งาน TypeScript ของ Figma","link":"https://www.somkiat.cc/note-figma-change-to-typescript/","date":1715351632000,"content":"<p><img width=\"150\" height=\"150\" src=\"https://www.somkiat.cc/wp-content/uploads/2024/05/figma-typescript-150x150.png\" loading=\"lazy\" srcset=\"https://www.somkiat.cc/wp-content/uploads/2024/05/figma-typescript-150x150.png 150w, https://www.somkiat.cc/wp-content/uploads/2024/05/figma-typescript-75x75.png 75w\" /></p>\n<figure><a href=\"https://www.somkiat.cc/wp-content/uploads/2024/05/figma-typescript.png\"><img src=\"https://www.somkiat.cc/wp-content/uploads/2024/05/figma-typescript-1024x538.png\" width=\"695\" height=\"365\" /></a></figure>\n\n\n\n<p>หลังจากอ่านบทความเรื่อง <strong><a href=\"https://www.figma.com/blog/figmas-journey-to-typescript-compiling-away-our-custom-programming-language/\" target=\"_blank\">The evolution of Figma’s mobile engine: Compiling away our custom programming language</a></strong> <br />เล่าถึงการเปลี่ยนแปลง code ของระบบ mobile engine ของ Figma ด้วยภาษา <a href=\"https://evanw.github.io/skew-lang.org/\" target=\"_blank\">Skew</a><br />ทำหน้าที่ compile code ให้ทำงานได้ทั้ง web และ mobile<br />มาดูเหตุผล แนวคิดและแนวทางในการย้ายมายังภาษา TypeScript<br />ว่ามีอะไรที่น่าสนใจบ้าง</p>\n\n\n\n<span></span>\n\n\n\n<p><strong>ในช่วงแรก ๆ ของการพัฒนาระบบด้วยภาษา Skew ที่พัฒนาขึ้นมาใช้เอง</strong></p>\n\n\n\n<p>ยังคงใช้งานดี ระบบทำงานได้ดี<br />เมื่อระบบใหญ่ขึ้น ทีมใหญ่ขึ้น ปัญหาก็เริ่มตามมา<br />ซึ่งเคยลองเปลี่ยนมาใช้งานภาษา TypeScript แล้วแต่ performance ไม่ดีเท่ากับของเดิมจึงล้มเลิกไป<br />แต่เมื่อเวลาผ่านไป technology ดีขึ้น เช่น WebAssembly ที่ทำงานบน web browser ได้ <br />ทำให้ย้าย code ที่เป็นภาษา C+ มาทำงานได้เลย<br />โดยที่ performance ไม่ได้ลดลง<br />จึงทำให้มาสนใจอีกครั้ง<br />รวมทั้งมีปัญหาต่าง ๆ ตามมาเช่น</p>\n\n\n\n<ul>\n<li>การทำงานร่วมกับ library หรือเครื่องมือต่าง ๆ ยาก เพราะว่าใช้ภาษาที่สร้างใช้กันเอง</li>\n\n\n\n<li>เสียเวลาในการ training พนักงานใหม่ ๆ ที่เข้ามาเยอะมาก</li>\n</ul>\n\n\n\n<p><strong>ดังนั้นจึงมาใช้งาน TypeScript อีกครั้ง</strong><br />ซึ่งมีข้อดี เช่น</p>\n\n\n\n<ul>\n<li>เขียน code ร่วมกัน หรือ ทำงานร่วมกันทั้งภายในและภายนอกได้ง่ายขึ้น เป็น static type รวมทั้ง package management ต่าง ๆ ครบ</li>\n\n\n\n<li>มี community ที่แข็งแรงและใหญ่ ทำให้มีเครื่องมือช่วยเหลือเยอะ ทั้ง linter, bundler และ static type analysis เป็นต้น</li>\n\n\n\n<li>มีความสามารถสมัยใหม่ ๆ เช่น async-await และเรื่องของ type system ที่มีความยืดหยุ่น</li>\n\n\n\n<li>ง่ายต่อการ tranining พนักงานใหม่ ๆ ขยายทีมได้ง่าย รวมทั้งการทำงานร่วมกันระหว่างทีม </li>\n</ul>\n\n\n\n<p><strong>มาดูขั้นตอนการย้าย code มาเป็น TypeScript</strong></p>\n\n\n\n<p><strong>ขั้นตอนที่ 1 ทำการสร้าง transpiler เอง เพื่อแปลง code จาก Skew ไปยัง TypeScript</strong></p>\n\n\n\n<p>จากนั้นทำการ push ไปยัง GitHub เพื่อทำให้นักพัฒนาเห็นว่า code ของ TypeScript เป็นอย่างไร<br />ทำการ build code ด้วย esbuild<br />ส่วนผู้ใช้งานยังคงใช้งานจาก JavaScript ที่แปลงมาจาก Skew เหมือนเดิม<br /><strong><em>โดยนักพัฒนายังเขียน code ด้วย Skew</em></strong><br />แสดงดังรูป</p>\n\n\n\n<figure><a href=\"https://www.somkiat.cc/wp-content/uploads/2024/05/figma-01.jpg\"><img src=\"https://www.somkiat.cc/wp-content/uploads/2024/05/figma-01-1024x651.jpg\" width=\"512\" height=\"325\" /></a></figure>\n\n\n\n<p><strong>ขั้นตอนที่ 2 ทำการ build JavaScript จากนั้นก็ทำการ deploy</strong></p>\n\n\n\n<p>หลังจากที่ได้ code TypeScript มาก็ทำการ build<br />ทำการ run unit test ให้ผ่าน<br />จากนั้นก็ทำการ deploy ให้ผู้ใช้งานใช้ จะค่อย ๆ ทำไป<br /><strong><em>โดยนักพัฒนายังเขียน code ด้วย Skew</em></strong><br />แสดงดังรูป</p>\n\n\n\n<figure><a href=\"https://www.somkiat.cc/wp-content/uploads/2024/05/figma-02.jpg\"><img src=\"https://www.somkiat.cc/wp-content/uploads/2024/05/figma-02-1024x664.jpg\" width=\"511\" height=\"331\" /></a></figure>\n\n\n\n<p><strong>ขั้นตอนที่ 3 มาเขียน code ด้วย TypeScript</strong></p>\n\n\n\n<p>โดยจะตัดการ generate code แบบอัตโนมัติทิ้งไป<br />รวมทั้งผู้ใช้งานก็มาใช้งาน code จาก TypeScript ทั้งหมด<br />แสดงดังรูป</p>\n\n\n\n<figure><a href=\"https://www.somkiat.cc/wp-content/uploads/2024/05/figma-03.jpg\"><img src=\"https://www.somkiat.cc/wp-content/uploads/2024/05/figma-03-1024x625.jpg\" width=\"509\" height=\"310\" /></a></figure>\n\n\n\n<p>เป็นแนวคิดและแนวทางที่น่าสนใจมาก ๆ<br />ในบทความยังอธิบายเรื่องของการแปลง code ด้วย<br />ลองอ่านเพิ่มเติมกันดูครับ</p>\n\n\n\n<p><br /></p>\n","author":"somkiat","siteTitle":"cc :: somkiat","siteHash":"3a23a5a4389e1e40c6fbb16520a8cc20df5b3591c25145ce72aaa18b19e48201","entryHash":"adce7d1b796270322e95fcc8aaf62f7a6610447bf42ac4ec9d1f460c5dd5095c","category":"Thai"}