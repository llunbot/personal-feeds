{"title":"VMware vSphere Storage APIs - Data Protection กับความท้าทายในการปกป้องข้อมูลบนระบบ VMware Virtualization","link":"https://www.blognone.com/node/137868","date":1706778000000,"content":"<div><div><div><p><strong>\"Elevate data protection for Virtualization systems with Transparent Snapshot.\"</strong></p>\n<p>ในสภาวะแวดล้อมของโลกดิจิทัลที่มีเปลี่ยนแปลงอย่างรวดเร็วในปัจจุบัน ระบบงานต่าง ๆ รวมไปถึงผู้ใช้งานระบบฯ ในองค์กรมีการสร้างข้อมูลที่ใช้ในการดำเนินงานขององค์กร ด้วยเหตุนี้ องค์กรธุรกิจต้องเผชิญกับท้ายทายมากมายในการรักษาความปลอดภัยของข้อมูลขององค์กร การสำรองข้อมูลอย่างเป็นประจำสามารถลดความเสี่ยงที่เกิดจากการสูญเสียข้อมูลหรือการเสียหายลงไปได้ อย่างไรก็ตาม การปกป้องและสำรองข้อมูลในปัจจุบันโดยเฉพาะในสภาพแวดล้อมของระบบ Virtualization มีความท้าทายเป็นอย่างมากสำหรับกับแทบทุกองค์กร สืบเนื่องมาจากการการวิวัฒนาการอย่างก้าวกระโดดของเทคโนโลยี Virtualization อีกทั้งการใช้งาน Virtual Machine ในปัจจุบันมีการเปลี่ยนไปในระยะช่วงหลายปีที่ผ่านมาอย่างมีนัยยะ จากระบบที่มีความสำคัญระดับล่าง ๆ กลายเป็นระบบงานหลักของแทบทุกองค์กร จาก Virtual Machine ขนาดเล็กกลายเป็น Virtual Machine ขนาดใหญ่ที่รองรับระบบงานหลักขององค์กร ดังนั้น จึงเป็นสิ่งที่แทบทุกองค์กรต้องเผชิญกับความยุ่งยากในการปกป้องข้อมูลที่อยู่บน Virtual Machine เหล่านั้น</p>\n<p><strong>VMware vSphere Storage APIs - Data Protection กับความท้าทายในการปกป้องข้อมูลบนระบบ VMware Virtualization</strong></p>\n<p>หลาย ๆ องค์กรต้องเคยเจอปัญหางาน Backup VMs ไม่สำเร็จ เนื่องจาก Snapshots ค้าง ปัญหาดังกล่าวมักจะเกิดขึ้นกับ VMs ที่มีดิสก์ขนาดใหญ่หรือ VMs ที่มี I/O transactions เกิดขึ้นจำนวนมากขณะสำรองข้อมูล เราลองมาวิเคราะห์ถึงสาเหตุกันว่าเกิดขึ้นเพราะอะไร</p>\n<p>ในปัจจุบันรูปแบบการสำรองและกู้คืนข้อมูล VMs บนระบบ VMware โดยส่วนใหญ่แล้ว การสำรองและกู้คืนข้อมูล VMs จะทำในระดับ Hypervisor ซึ่ง 3rd Backup Software ต้องใช้ VMware vSphere Storage APIs - Data Protection หรือ VADP ในการทำงานสำรองและกู้คืนข้อมูล ซึ่ง APIs ตัวนี้เปิดบริการให้ใช้มาตั้งแต่ VMware vSphere เวอร์ชั่น 4 ในช่วงเดือน พฤษภาคม ค.ศ. 2009 จนถึงปัจจุบัน หรือราว 15 ปีมาแล้ว</p>\n<p><img alt=\"No Description\" src=\"https://www.blognone.com/sites/default/files/externals/15ba3fdec5b1bf9bd5183d9118e5a3ab.png\" /></p>\n<p>หากพิจารณาการสำรองข้อมูล VMs โดยวิเคราะห์ขั้นตอนการทำงานของ VADP ดังรูปด้านบน เราสามารถสรุปการทำงานออกเป็น 3 ระยะ ดังนี้</p>\n<p><strong><em>ระยะที่ 1 การสร้าง VM Snapshot</em></strong></p>\n<ul>\n<li>ไฟล์ VMDK ถูกนำออกจาก VM และรอการเขียนข้อมูลจาก memory ลงบนดิสก์</li>\n<li>ช่วงเวลาระหว่างการเตรียม snap จะหยุด I/O ทั้งหมดไว้ชั่วคราว</li>\n<li>ไฟล์ VMDK ที่ถูก snap จะนำเสนอให้กับ backup software</li>\n</ul>\n<p><strong><em>ระยะที่ 2 การรับส่งข้อมูล</em></strong></p>\n<ul>\n<li>อนุญาต I/O สำหรับ VM ดังกล่าวให้กลับมาใช้ได้</li>\n<li>การเขียนข้อมูลใหม่จะถูกย้ายไปเขียนที่ Redo log หรือ Child disk ในลักษณะ Redirect on Write (RoW)</li>\n<li>Proxy หรือ External agent ทำการอ่านข้อมูลทั้งหมดหรือบางส่วนของไฟล์ VMDK แล้วส่งไปที่ Backup target</li>\n</ul>\n<p><strong><em>ระยะที่ 3 การนำ Snapshot กลับคืน</em></strong></p>\n<ul>\n<li>ข้อมูลใน Redo log หรือ Child disk จะถูกนำกลับเข้าไปให้กับไฟล์ VMDK</li>\n<li>ช่วงเวลานี้จะมีการใช้ CPU และ Memory จำนวนมาก เพื่อรวมข้อมูล</li>\n<li>ระยะเวลาอาจยาวนานขึ้นอยู่กับขนาดข้อมูลใน Redo log หรือ Child disk ซึ่งอาจใช้เวลานานหลายชั่วโมง</li>\n</ul>\n<p>จะเห็นได้ว่า ตัวแปรสำคัญที่ทำให้ VM Backup Job ไม่สำเร็จ ส่วนใหญ่แล้วจะอยู่ในขั้นตอนระยะที่ 3 การนำ Snapshot กลับคืน หากการรวม Redo log หรือ Child disk เข้ากับ VMDK ไม่สำเร็จ งาน Backup VM นั้นก็จะหยุดชะงักหรือเกิด VM stun ได้ ซึ่งทำให้สถานะ Backup Job นั้น Failed ส่วนสาเหตุอาจเกิดขึ้นเพราะข้อมูลที่นำมารวมเข้ากับ VMDK มีขนาดใหญ่เมื่อการรวมข้อมูลไม่สำเร็จก็จะทำให้ไฟล์ Redo log หรือ Child disk ค้างอยู่ในระบบ และเมื่อมีการ Backup VMs เกิดขึ้นก็จะเข้าสู่ขั้นตอนการทำงานของ VADP อีกครั้ง และทำให้ไฟล์ Redo log หรือ Child disk ค้างอยู่ในระบบเพิ่มจำนวนมากขึ้น จนเป็นสาเหตุทำให้พื้นที่ดิสก์ใน Datastore ถูกใช้จนเต็ม</p>\n<p><strong>ได้เวลาปฏิวัติเพิ่มประสิทธิภาพการ Backup VMs</strong></p>\n<p>Dell Technologies คิดค้นเทคโนโลยีทันสมัยในการ Backup VMs สามารถเพิ่มประสิทธิการ Backup VMs ลดผลกระทบการใช้ทรัพยากรขณะ Backup และที่สำคัญใช้งานง่ายบนระบบ VMware ภายใต้โซลูชั่น PowerProtect Data Manager มีการทำงานร่วมกับ vSphere API for I/O Filtering (VAIO) โดยทำการติดตั้ง Transparent Snapshots Data Mover (TSDM) ผ่าน PowerProtect Data Manager VIB ลงใน VMware ESXi</p>\n<p><strong>Transparent Snapshots คืออะไร</strong></p>\n<p>Transparent Snapshot Data Mover (TSDM) เป็นกลไกที่ใช้ในการป้องกันและกู้คืนข้อมูลที่มีอยู่ใน PowerProtect Data Manager software ตั้งแต่เวอร์ชัน 19.9 โดยมีวัตถุประสงค์เพื่อขีดความสามารถในการปกป้องขัอมูลที่อยู่ในรูปแบบของ Virtual Machine (VMs) ให้มีประสิทธิภาพสูงสุด</p>\n<p><strong>Transparent Snapshots กับการป้องกันและกู้คืนข้อมูลบน VMware Virtualization</strong></p>\n<p>การทำงานของ Transparent Snapshots เพื่อสำรองข้อมูลในระดับ VM image มีวงจรการทำงานอยู่ 3 ขั้นตอน ดังนี้</p>\n<p><img alt=\"No Description\" src=\"https://i.imgur.com/mkJSh0D.jpeg\" /></p>\n<ol>\n<li>MONITOR ทำหน้าที่ตรวจสอบข้อมูลระดับ Delta ที่มีการเปลี่ยนแปลงสำหรับ VMs ที่ต้องการสำรอง มีการทำงานร่วมกับ VAIO ในแต่ละ ESXi host มีการสร้าง Snapshot Extent Store (SES) เพื่อเก็บข้อมูลก่อนเปลี่ยนแปลง Copy-on-Write และมีการตรวจสอบการเปลี่ยนแปลงข้อมูลด้วย Bitmaps บน Memory ซึ่งสามารถลด Read/Write Latency ให้กับ ESXi host ได้</li>\n<li>PROCESS ขั้นตอนนี้เป็นการขนย้ายข้อมูลในระดับ Delta ที่มีการเปลี่ยนแปลงตรงไปยัง PowerProtect Appliance ซึ่งทำงานร่วมกับ VAIO โดยตรวจสอบ Bitmaps ว่ามีข้อมูลใดบ้างที่มีการเปลี่ยนแปลงใน SES จากนั้นทำการอ่านข้อมูลที่เปลี่ยนแปลงบนดิสก์ไปยัง PowerProtect Appliance โดยตรงด้วยการทำงานของ DD Boost เมื่อเสร็จสิ้นมีการอัพเดท VM metadata ลงไปใน PowerProtect Appliance ด้วย</li>\n<li>RELEASE หลังจากเสร็จสิ้นขั้นตอนที่ 2 ถัดไปเป็นการลบข้อมูลในส่วนของ Bitmaps และ Snapshots ที่เกี่ยวข้องกับ VAIO จากนั้นทำการอัพเดทข้อมูลลงใน PowerProtect Data Manager Catalog เพื่อใช้กู้คืนข้อมูล</li>\n</ol>\n<p><img alt=\"No Description\" src=\"https://www.blognone.com/sites/default/files/externals/78c997d86bfa6cc7f8cc9a4eb97a015a.png\" /></p>\n<p>เมื่อเราเปรียบเทียบขั้นตอนการ Backup VMs ระหว่าง VADP และ Transparent Snapshots จะเห็นจุดที่แตกต่างกันอย่างชัดเจน 2 ข้อด้วยกันคือ</p>\n<ul>\n<li>ข้อที่ 1 Transparent Snapshots มีการทำงานร่วมกับ VAIO โดยสร้าง Bitmaps บน Memory และสร้าง Snapshot หรือ SES บนดิสก์ เพื่อใช้ตรวจสอบข้อมูลที่มีการเปลี่ยนแปลงในระหว่าง Backup VMs ซึ่งเป็นเทคโนโลยีการ Backup VMs ที่ทันสมัยล่าสุด ช่วยลดผลกระทบการใช้ทรัพยากรทำให้ Read/Write Latency ลดลง</li>\n<li>ข้อที่ 2 ไม่มีความเสี่ยงที่จะทำให้ Backup VMs Job failed และเสียเวลาไปกับกระบวนการรวม Redo Log เข้ากับไฟล์ VMDK ทำให้ระยะเวลาที่ใช้ในการ Backup VMs ลดลงอย่างมีนัยยะ</li>\n</ul>\n<p>ส่วนใหญ่แล้วใน VMware Environment จะมี VMs ที่มีขนาดใหญ่และบาง VMs ที่มี I/O transaction สูง ดังนั้น PowerProtect Data Manager สามารถตอบสนองและครอบคลุมความต้องการในการ Backup VMs โดยสามารถเลือกโหมดที่ต้องการ Backup VMs ได้ทั้ง 2 แบบ คือ VADP หรือ Transparent Snapshots</p>\n<p><strong>ประโยชน์ที่ได้รับจากการใช้ Transparent Snapshots เพื่อ Backup และ Restore VMs ได้ดังนี้</strong></p>\n<p><img alt=\"No Description\" src=\"https://www.blognone.com/sites/default/files/externals/a4897e1b0632f027f17e1193726c9671.png\" /></p>\n<ol>\n<li>แทบจะไม่มีผลกระทบต่อการทำงานของ VMs และทรัพยากรของ vSphere ESXi host</li>\n<li>สามารถสำรองข้อมูลได้รวดเร็วมากถึง 5 เท่า เมื่อเทียบกับรูปแบบของการปกป้องข้อมูลผ่านการใช้งาน VADP</li>\n<li>สามารถกู้คืนข้อมูลได้รวดเร็วมากถึง 6 เท่าเมื่อเทียบกับรูปแบบของการกู้คืนข้อมูลผ่านการใช้งาน VADP</li>\n<li>สามารถลด Latency ที่ส่งผลกระทบต่อ VMs ได้มากถึง 5เท่า</li>\n</ol>\n<p><strong>บทสรุป</strong></p>\n<p>Business Disruption สามารถเกิดขึ้นได้กับทุกองค์กรธุรกิจ รายงานจาก McKinsey รายงานว่า บริษัทซอฟต์แวร์หนึ่งสูญเสียรายได้ถึง 8% หลังจากที่การให้บริการเกิดขัดข้อง ดังนั้นการสำรองข้อมูลเป็นสิ่งจำเป็นสำหรับธุรกิจขนาดใหญ่หรือกำลังขยายขนาด การสำรองข้อมูลและการกู้คืนที่รวดเร็วสามารถลดจำนวนการสูญเสียในการดำเนินการทางธุรกิจ</p>\n<p>ถึงแม้ว่า ทุกองค์กรไม่ต้องการใช้งานข้อมูลที่ปกป้องไว้ แต่หากเกิดเหตุสุดวิสัยเกิดขึ้น Dell PowerProtect Data Manager ด้วย Transparent Snapshots ด้วยความประสิทธิภาพในการสำรองข้อมูลและการกู้คืน VM อย่างรวดเร็ว อาจช่วยให้ธุรกิจของคุณฟื้นฟูได้อย่างรวดเร็ว</p>\n<p>สำหรับข้อมูลเพิ่มเติมเกี่ยวกับ Dell PowerProtect Data Manager สามารถเยี่ยมชมได้ที่ https://www.dell.com/en-us/dt/data-protection/powerprotect-data-manager.htm หรือติดต่อบริษัท เอสไอเอส ดิสทริบิวชั่น (ประเทศไทย) จำกัด (มหาชน) โทร. 02-020-3001 หรือ อีเมล dell_com@sisthai.com</p>\n<p><img alt=\"No Description\" src=\"https://i.imgur.com/57dGzDh.jpeg\" /></p>\n</div></div></div><div><div>Topics: </div><div><div><a href=\"/topics/dell-technologies\">Dell Technologies</a></div><div><a href=\"/topics/vmware\">VMware</a></div><div><a href=\"/topics/advertorial\">Advertorial</a></div></div></div>","author":"sponsored","siteTitle":"Blognone","siteHash":"ededadcf18490b3937e7dd89ebe8c00dc129addbdf1ebe4aff1f458146693da0","entryHash":"935adda40832213e362b6f6ef509e3d452f4fc6f91a7dcc97655c87e73e4c0ff","category":"Thai"}