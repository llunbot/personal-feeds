{"title":"Terraform provider for Google Cloud 6.0 is now GA","link":"https://www.hashicorp.com/blog/terraform-provider-for-google-cloud-6-0-is-now-ga","date":1724763600000,"content":"<p>We are excited to announce the release of version 6.0 of the <a href=\"https://registry.terraform.io/providers/hashicorp/google/latest\">HashiCorp Terraform Google provider,</a> with updates to <em>labels</em> designed to improve usability. Users now have the ability to view resources managed by Terraform when viewing/editing such resources through other tools. This post covers the details and benefits of the updated provider, and recaps key new features released this year.</p>\n\n<h2>2024 Terraform Google provider highlights</h2>\n\n<p>As the Terraform Google provider tops 300 million downloads this year, Google and HashiCorp continue to develop new integrations to help customers work faster, get benefits from more services and features, and find developer-friendly ways to deploy cloud infrastructure. This year, we focused on listening to the community by adding oft-requested new features to the Google provider, including:</p>\n\n<ul>\n<li>Provider-defined functions</li>\n<li>Default attribution label</li>\n<li>Expanding labels model support across more resources</li>\n</ul>\n\n<h2>Provider-defined functions</h2>\n\n<p>With the release of <a href=\"https://www.hashicorp.com/blog/terraform-1-8-improves-extensibility-with-provider-defined-functions\">Terraform 1.8</a>, providers can implement custom functions that you can call from the Terraform configuration. Earlier this year we announced the <a href=\"https://developer.hashicorp.com/terraform/plugin/framework/functions/concepts\">general availability of provider-defined functions in the Google Cloud provider</a>, adding a simplified way to get regions, zones, names, and projects from the IDs of resources that aren’t managed by your Terraform configuration. Provider-defined functions can now help parse Google IDs when adding an IAM binding to a resource that’s managed outside of Terraform:</p>\n<pre><code>resource \"google_cloud_run_service_iam_member\" \"example_run_invoker_jane\" {\n\n member   = \"user:jane@example.com\"\n\n role     = \"run.invoker\"\n\n service  = provider::google::name_from_id(var.example_cloud_run_service_id)\n\n location = provider::google::location_from_id(var.example_cloud_run_service_id)\n\n project  = provider::google::project_from_id(var.example_cloud_run_service_id)\n\n}</code></pre><p>This release represents another step forward in our unique approach to ecosystem extensibility.</p>\n\n<h2>Default Terraform attribution label</h2>\n\n<p>In version 5.16 of the Google provider, a new optional <code>goog-terraform-provisioned</code> provider-level default label helps users track resources created by Terraform. Previously, users had to explicitly opt into this feature by setting the <code>add_terraform_attribution_label</code> option in the provider configuration block. In version 6.0, this attribution label is now enabled by default, and will be added to all newly created resources that support labels. This helps users easily identify and report on resources managed by Terraform when viewing/editing such resources through tools like Google Cloud Console, Cloud Billing, etc.</p>\n\n<p>Users who wish to opt out of this new default label can do so by disabling the <code>add_terraform_attribution_label</code> option in the provider block:</p>\n<pre><code>provider \"google\" {\n  # Opt out of the “goog-terraform-provisioned” default label\n  add_terraform_attribution_label = false\n}</code></pre><p>By default, the label is added to resources only upon creation. To proactively apply the label to existing resources, set the <code>terraform_attribution_label_addition_strategy</code> option to <code>PROACTIVE</code> in the provider block, which adds the label to all supported resources on the next <code>terraform apply</code>:</p>\n<pre><code>provider \"google\" {\n  # Apply the “goog-terraform-provisioned” label to existing resources\n  add_terraform_attribution_label               = true\n  terraform_attribution_label_addition_strategy = “PROACTIVE”\n}</code></pre><h2>Removing deprecated attributes and other behavior changes</h2>\n\n<p>Since the last major release, the Terraform Google provider has accumulated resources and properties that have been deprecated, renamed, or are no longer supported by Google. As version 6.0 is a major release, we have removed a number of resources and attributes that have been deprecated over the course of the provider’s lifetime. A complete list of behavior changes and removed properties can be found in the <a href=\"https://registry.terraform.io/providers/hashicorp/google/latest/docs/guides/version_6_upgrade\">Google 6.0 upgrade guide</a>.</p>\n\n<h2>Learn more about Google Cloud and HashiCorp</h2>\n\n<p>To learn the basics of Terraform using the Google provider, check out the <a href=\"https://developer.hashicorp.com/terraform/tutorials/gcp-get-started\">Get Started tutorials for Google Cloud</a>.</p>\n\n<p>When upgrading to version 6.0 of the Terraform Google provider, please consult the <a href=\"https://registry.terraform.io/providers/hashicorp/google/latest/docs/guides/version_6_upgrade\">upgrade guide on the Terraform Registry</a>, which contains a full list of the changes and upgrade considerations. Because this release introduces breaking changes, we recommend <a href=\"https://developer.hashicorp.com/terraform/language/providers/requirements#best-practices-for-provider-versions\">pinning your provider version</a> to protect against unexpected results. For a complete list of the changes in 6.0, please refer to the <a href=\"https://github.com/hashicorp/terraform-provider-google/releases/tag/v6.0.0\">Google provider changelog</a>.</p>\n\n<p>HashiCorp and Google partner on cloud infrastructure to make it easy for users to provision and manage Google Cloud resources. You can find out more about our partnership on our <a href=\"https://www.hashicorp.com/partners/cloud/google-cloud\">Google Cloud partner page</a>.</p>\n\n<p>If you are currently using Terraform Community Edition or are completely new to Terraform, <a href=\"http://hashi.co/tf-cloud-bc\">sign up for HCP Terraform</a> and get started using the free offering today.</p>\n","author":"Aurora Chun","siteTitle":"HashiCorp Blog","siteHash":"219aa6310b3388f2335eba49871f4df9581f2c58eaeb5e498363b54e835b7001","entryHash":"0160c7dea10f74c7c30210af69f68370aa03e4cbc3328b2ff2039ede14034312","category":"Tech"}