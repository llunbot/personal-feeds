{"title":"HCP Packer improves channels and furthers integration with Terraform","link":"https://www.hashicorp.com/blog/hcp-packer-improves-channels-and-furthers-integration-with-terraform","date":1684857600000,"content":"<p>HCP Packer, a powerful tool for tracking and managing image artifacts across multi-cloud environments, has just released two new features: </p>\n\n<ul>\n<li>Restricted channels</li>\n<li>Channel management with Terraform</li>\n</ul>\n\n<p><a href=\"https://developer.hashicorp.com/packer/tutorials/hcp-get-started/hcp-image-channels\">Channels</a> let you label and track image iterations and give you control over the delivery of your artifacts. These new additions provide further permissions control for your image channels and help enable a <a href=\"https://developer.hashicorp.com/packer/tutorials/cloud-production/golden-image-with-hcp-packer\">golden image pipeline</a> with Terraform.</p>\n\n<h2>Artifact management with channels</h2>\n\n<p>Teams working in software development understand the importance of versioning and tagging applications to keep track of changes and ensure their code is up to date. Similarly, it is crucial to version and tag image artifacts to maintain up-to-date infrastructure. HCP Packer channels allow you to do just that. </p>\n\n<p>With channels, you can label image iterations to describe the quality and stability of a build. By assigning iterations human-readable names, downstream consumers can easily <a href=\"https://developer.hashicorp.com/hcp/docs/packer/reference-image-metadata\">reference the images in Packer templates and Terraform configurations</a>. As you release new image versions, the iteration associated with the channel is automatically updated. This makes it simple for consumers to reference the correct version from the registry without having to update their code and ensures that the latest image version is always in use. </p>\n\n<p>Today we will cover five recent improvements to HCP Packer channels that give you further visibility and control, and simplify management of your artifact estate:</p>\n\n<ol>\n<li>Channel overview page</li>\n<li>Channel assignment history</li>\n<li>Channel rollback</li>\n<li>Restricted channels</li>\n<li>Channel management with Terraform</li>\n</ol>\n\n<h2>Channel overview</h2>\n\n<p>For HCP Packer users to ensure their infrastructure is always up to date, they need visibility and control over all image artifacts. The overview page provides high-level info for your image channels in a centralized location. From here you can review details on an iteration, such as its status, <a href=\"https://www.hashicorp.com/blog/hcp-packer-adds-ancestry-to-track-image-relationships\">image ancestry</a>, and channel assignment history.</p>\n<img src=\"https://www.datocms-assets.com/2885/1684789956-latest-channel-overview.png\" alt=\"Quick\" /><h2>Channel assignment history</h2>\n\n<p>As images are published, assigned, and revoked over time, it is important to maintain visibility into their history. <a href=\"https://www.youtube.com/watch?v=wUdf34kCdv4\">Channel assignment history</a> provides a complete record of artifact activity in a channel. You can browse any existing bucket and select a channel to see exactly which iterations have been made available to downstream consumers. From here you can view each image iteration’s channel history, the status of its parent image, and extended metadata. For plus-tier HCP subscribers, the complete history of channel iterations is tracked and saved for a full year. This page provides further visibility to platform teams, allowing them to see when all iterations were assigned and by whom.</p>\n<img src=\"https://www.datocms-assets.com/2885/1684790034-channel-history.png\" alt=\"View\" /><h2>Channel rollback</h2>\n\n<p>Channel rollback builds on the availability of channel assignment history and provides quicker remediation of released artifacts. When revoking a currently assigned iteration, you can now choose to roll back channels to their previously-assigned iteration. This also works with HCP Packer’s <a href=\"https://developer.hashicorp.com/packer/tutorials/hcp/revoke-image\">inherited revocation</a> to automatically roll back the channel assignments of any descendant images when a parent image is revoked. This workflow allows organizations to reduce their time to remediation during a security incident without impacting downstream provisioning processes.</p>\n<img src=\"https://www.datocms-assets.com/2885/1684790257-image-revoke.png\" alt=\"Immediate\" /><h2>Restricted channels</h2>\n\n<p>Image builders need to collaborate with other stakeholders to validate that new image iterations meet compliance and functionality requirements before releasing them to downstream consumers. <a href=\"https://developer.hashicorp.com/hcp/docs/packer/manage-image-use/image-channels#create-image-channels\">Restricted channels</a> provide control over the release of images by providing a means to limit channel access for other collaborators. This granular permissions control lets you ensure only the necessary users have channel access and enables the least privilege principle. This addition also helps streamline the image-validation process and prevents downstream consumers from using new image iterations before they have been validated and approved.</p>\n<img src=\"https://www.datocms-assets.com/2885/1684790357-restricted-channels.png\" alt=\"Limit\" /><h2>Better together: Channel management with Terraform</h2>\n\n<p>A golden image is an image on top of which developers can build applications, letting them focus on the application itself instead of system dependencies and patches. A typical golden image includes the most up-to-date common system, logging, monitoring tools, security patches, and application dependencies. Traditionally, operations and security teams had to cross-reference spreadsheets, personally inform downstream developers, and manually update build files when they released new golden images.</p>\n\n<p>HCP Packer and Terraform Cloud’s unified workflow enables users to simplify this process and create a successful <a href=\"https://developer.hashicorp.com/packer/tutorials/cloud-production/golden-image-with-hcp-packer\">golden image pipeline</a>. The HCP Packer registry helps users track image metadata and storage location, and provides the correct image to developers automatically through Packer and Terraform integrations.</p>\n<img src=\"https://www.datocms-assets.com/2885/1684790394-tf-and-packer.png\" alt=\"Terraform\" /><p>Previously, channel assignment relied on customers exiting Terraform to orchestrate API calls with custom scripting or workflow actions. This led to unnecessary friction during activation and difficulties incorporating HCP Packer into established infrastructure as code (IaC) workflows. With version 0.54 and newer of the <a href=\"https://registry.terraform.io/providers/hashicorp/hcp/latest\">HCP provider</a>, you can now create, delete, and update channels directly from Terraform. This new feature deepens the integration of HCP Packer and Terraform Cloud, providing a consolidated and streamlined approach to artifact image management across the two products.</p>\n\n<p>Here’s an example HCL snippet to update channels directly from Terraform:</p>\n<pre><code>resource \"hcp_packer_channel\" \"staging\" {\n  name\t\t= \"staging\"\n  bucket_name\t= \"alpine\"\n  iteration {\n    id = \"iteration-id\"\n  }\n}</code></pre><h2>Summary and resources</h2>\n\n<p>HCP Packer’s channels provide control and visibility over image artifacts and enable a golden image pipeline with Terraform. The recent improvements to channel management demonstrate HashiCorp’s commitment to simplifying artifact management across multi-cloud environments and enabling platform teams to keep their infrastructure up-to-date.</p>\n\n<p>To learn more about HCP Packer’s channels and artifact management, check out the following resources:</p>\n\n<ul>\n<li>Documentation\n\n<ul>\n<li><a href=\"https://developer.hashicorp.com/hcp/docs/packer/manage-image-use/image-channels\">Image channels</a></li>\n<li><a href=\"https://registry.terraform.io/providers/hashicorp/hcp/latest/docs/resources/packer_channel\">Channel resource in the HCP provider</a></li>\n</ul></li>\n<li>Tutorials\n\n<ul>\n<li><a href=\"https://developer.hashicorp.com/packer/tutorials/hcp/revoke-image\">Revoke an image and its descendants using inherited revocation</a></li>\n<li><a href=\"https://developer.hashicorp.com/packer/tutorials/hcp-get-started/hcp-image-channels\">Control images with channels </a></li>\n</ul></li>\n<li>Demo videos\n\n<ul>\n<li><a href=\"https://www.youtube.com/watch?v=wUdf34kCdv4&amp;list=PL81sUbsFNc5YMJ7Diq1fB54KqedNNJk1O&amp;index=5\">Channel assignment history and automated rollback</a></li>\n<li><a href=\"https://www.youtube.com/watch?v=I0dteW7M7ko&amp;list=PL81sUbsFNc5YMJ7Diq1fB54KqedNNJk1O&amp;index=9\">Tracking golden image ancestry with HCP Packer </a></li>\n</ul></li>\n</ul>\n\n<p>Get started with <a href=\"https://www.hashicorp.com/products/packer\">HCP Packer</a> for free to track and manage artifacts across all your cloud environments.</p>\n","author":"Mitchell Ross","siteTitle":"HashiCorp Blog","siteHash":"219aa6310b3388f2335eba49871f4df9581f2c58eaeb5e498363b54e835b7001","entryHash":"2ecbea91a3c397e1e4e8e38a41d9461c5e4e03d9279c469260ea9a13c27e87f3","category":"Tech"}