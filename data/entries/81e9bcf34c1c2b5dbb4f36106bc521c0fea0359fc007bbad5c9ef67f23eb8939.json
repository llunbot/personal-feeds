{"title":"Application Observability with HCP Consul and Datadog","link":"https://www.hashicorp.com/blog/application-observability-with-hcp-consul-and-datadog","date":1628179200000,"content":"<p>One of the core goals of <a href=\"https://cloud.hashicorp.com/\">HashiCorp Cloud Platform (HCP)</a> Consul is to enable developers and operators to focus less on managing the underlying infrastructure of their Consul deployments and concentrate more on enabling Consul’s <a href=\"https://www.consul.io/use-cases/service-discovery-and-health-checking\">service discovery</a> and <a href=\"https://www.consul.io/use-cases/multi-platform-service-mesh\">service mesh</a> capabilities. Service mesh in particular introduces a number of new capabilities and enhancements to how applications interact in cloud environments.</p>\n<p>Thanks to HCP, our users now have the ability to deploy production-ready Consul servers with the click of a button, but the question then becomes, “What next?” In this blog, we’ll explore some use cases that can help users looking to get greater insights into how applications registered with HCP Consul clients perform, using the <a href=\"https://www.datadoghq.com/\">application performance monitoring (APM) solution from our friends at Datadog</a>.</p>\n<h2><a href=\"#service-health-monitoring\">»</a><a></a>Service Health Monitoring</h2>\n<p>One of the first challenges that organizations tend to struggle with when moving towards <a href=\"https://www.hashicorp.com/resources/why-microservices\">microservice architectures</a> is keeping track of how many services are running and whether or not they are reachable. Consul’s service discovery is a great way to solve the first half of that challenge.</p>\n<p>Using Consul for service discovery, newly deployed or scaled services can be automatically added to a central registry in Consul, creating a consistent single source of truth for all applications running in a given environment. Consul also provides some inherent health-monitoring capabilities, but there is an assumption that you are leveraging Consul’s logs, UI, or third-party tools to monitor those statuses. Using Datadog, we can improve that health-monitoring functionality and create alerting for when things go awry.</p>\n<p>Here’s how it works: The Datadog agent is deployed alongside a Consul client and Consul is configured to send metrics to the Datadog agent. Using this data, users can configure Datadog to trigger alerts based on changes to specific specific data, including:</p>\n<ul>\n<li>Latency data</li>\n<li>Service health checks</li>\n<li>Node health checks</li>\n</ul>\n<p>The benefit of using Datadog on HCP is that organizations still get full visibility into service changes and health without having to worry about parsing through server-side data. Because the Consul servers are maintained by us at HashiCorp, organizations can customize their dashboards to focus on their applications. As they move closer to implementing a service mesh, using a Datadog dashboard for those purposes becomes even more beneficial.</p>\n<h2><a href=\"#consul-service-mesh-and-datadog\">»</a><a></a>Consul Service Mesh and Datadog</h2>\n<p>A core tenet of service mesh is to use it for improving performance capabilities, but generally services meshes aren’t great at acting as monitoring solutions. Where service meshes bring the most value is in the gathering and export of large amounts of granular application data, and Consul is no exception.</p>\n<p>Consul collects a great amount of data on its own, but the Datadog <a href=\"https://docs.datadoghq.com/integrations/consul_connect/?tab=host\">integration with Envoy</a> is how you really unlock the power of observing service mesh functionality. Using this integration, Datadog can ingest request volume, traffic flow, and span data to build a comprehensive visualization of how traffic moves through the Consul service mesh. In our blog on <a href=\"https://www.hashicorp.com/blog/enabling-distributed-tracing-with-hashicorp-consul\">Enabling Distributed Tracing with HashiCorp Consul</a>, we talked specifically about how span data can be used to implement distributed tracing, making it easier to troubleshoot errors and reducing the mean time to resolution (MTTR) of potential outages.</p>\n<p>You might be wondering how this integration is different when using a self-managed version of Consul vs. HCP Consul. The short answer is that the capabilities are exactly the same, but as a managed service, it takes a lot less work, letting operators focus on further enhancing observability within their environments. Rather than spending time on routine maintenance and management of Consul servers, organizations can trust that their servers are available and backed by HashiCorp SREs. This gives users more time to build more robust dashboards, which can be extremely valuable for organizations facing operational constraints.</p>\n<h2><a href=\"#conclusion\">»</a><a></a>Conclusion</h2>\n<p>This high-level review of the capabilities of HCP Consul and Datadog illustrates an important point: The more time that organizations spend on maintaining infrastructure, the less time they can spend improving observability dashboards and application performance. Not every organization is able to allocate specific resources to both backend management of service mesh solutions and implementing their functionality.</p>\n<p>HCP Consul is designed to alleviate that burden, letting users focus on the things that will enhance their businesses. Our friend’s at Datadog feel the same way, which is why we are working together to deliver more integrations between Datadog and HCP Consul. For more information about HCP Consul, please visit the <a href=\"https://cloud.hashicorp.com/docs/hcp\">HashiCorp Cloud Platform Overview</a>.</p>","author":"Peter McCarron","siteTitle":"HashiCorp Blog","siteHash":"219aa6310b3388f2335eba49871f4df9581f2c58eaeb5e498363b54e835b7001","entryHash":"81e9bcf34c1c2b5dbb4f36106bc521c0fea0359fc007bbad5c9ef67f23eb8939","category":"Tech"}