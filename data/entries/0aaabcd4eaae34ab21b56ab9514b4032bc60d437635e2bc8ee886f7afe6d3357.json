{"title":"ไมโครซอฟท์อธิบายเบื้องหลัง ไฟล์อัพเดต Windows 11 มีขนาดเล็กลง 40% โหลดเร็วขึ้น","link":"https://www.blognone.com/node/125263","date":1634192850000,"content":"<div><div><div><p>ไมโครซอฟท์เขียนอธิบายเบื้องหลังการปรับไฟล์อัพเดตรายเดือน (quality update) ของ Windows 11 ให้มีขนาดเล็กลง 40% ผลคือดาวน์โหลดเร็วขึ้น แต่ยังอัพเดตได้ตามปกติเหมือนเดิม</p>\n<p>จุดเปลี่ยนที่ทำให้ไฟล์เล็กลงเป็นวิธีการทำ delta ที่หาความแตกต่างระหว่างไฟล์สองเวอร์ชัน <a href=\"https://www.blognone.com/node/104823\">ไมโครซอฟท์เริ่มใช้ไฟล์อัพเดตแบบ delta มาตั้งแต่ Windows 10 v1809</a> แต่การทำ delta ต้องทำทั้งสองขา คือขาไปข้างหน้า (ไฟล์เก่า -&gt; ใหม่) และขากลับ (ไฟล์ใหม่ -&gt; เก่า) ใช้ในกรณี rollback</p>\n<p>ถึงแม้ความแตกต่างของไฟล์สองเวอร์ชันจะเหมือนกัน แต่การทำ delta ขาไปและขากลับนั้นแตกต่างกัน (ดูภาพประกอบ) ทำให้ไฟล์อัพเดตของไมโครซอฟท์ต้องเก็บ delta ทั้งสองขา (bidirectional)</p>\n<p><img src=\"https://www.blognone.com/sites/default/files/externals/75a86e307f840677026fe1045950db51.jpg\" /></p>\n<p>ไมโครซอฟท์จึงปรับวิธีการทำ delta ใหม่ แทนที่จะเปรียบเทียบไฟล์เก่า-ใหม่สองขาแบบเดิม เปลี่ยนมาเป็นตอนทำ delta ขาไป จะจดความเปลี่ยนแปลงเก็บไว้สำหรับการทำ reverse delta ด้วย (ใช้ชื่อเรียกว่า reverse mapping)</p>\n<p>สิ่งที่ไมโครซอฟท์พบคือการจดขั้นตอนเพื่อทำ reverse mapping มีเนื้อหาไฟล์ไม่ต่างจาก forward delta มากนัก ในขณะที่ประสิทธิภาพของการ apply patch ไม่ต่างจาก reverse delta แบบปกติ</p>\n<p><img src=\"https://www.blognone.com/sites/default/files/externals/4e2df2431be041b6e63fea8a24a949eb.jpg\" /></p>\n<p>ในการทำแพตช์จริงๆ จะเป็นการเปลี่ยนแปลงไฟล์ assembly ตามภาพ โดยใช้เอนจิน MSDelta หาความเปลี่ยนแปลงระหว่างไฟล์สองเวอร์ชัน</p>\n<p>สิ่งที่ไมโครซอฟท์ทำคือส่งเฉพาะไฟล์ forward delta ไปกับไฟล์อัพเดต (ทำให้ขนาดลดลงไป 40%) แล้วให้เครื่องปลายทาง apply patch พร้อมสร้าง reverse delta mapping เก็บเอาไว้เผื่อว่าจะต้อง rollback กลับไปยังสถานะเดิม</p>\n<p><img src=\"https://www.blognone.com/sites/default/files/externals/0f987d25faa200f5fd5c4e9eda4fea3d.jpg\" /></p>\n<p>ที่มา - <a href=\"https://techcommunity.microsoft.com/t5/windows-it-pro-blog/how-microsoft-reduced-windows-11-update-size-by-40/ba-p/2839794\">Microsoft</a> via <a href=\"https://www.zdnet.com/article/microsoft-heres-why-we-shrunk-windows-11-update-sizes-by-40/#ftag=RSSbaffb68\">ZDNet</a></p>\n</div></div></div><div><div>Topics: </div><div><div><a href=\"/topics/windows-11\">Windows 11</a></div><div><a href=\"/topics/microsoft\">Microsoft</a></div><div><a href=\"/topics/operating-system\">Operating System</a></div></div></div>","author":"mk","siteTitle":"Blognone","siteHash":"ededadcf18490b3937e7dd89ebe8c00dc129addbdf1ebe4aff1f458146693da0","entryHash":"0aaabcd4eaae34ab21b56ab9514b4032bc60d437635e2bc8ee886f7afe6d3357","category":"Thai"}