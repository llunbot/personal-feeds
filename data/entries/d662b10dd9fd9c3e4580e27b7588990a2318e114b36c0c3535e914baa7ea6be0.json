{"title":"อินเทลเปิดตัว Xeon \"Sapphire Rapids\" ใช้สถาปัตยกรรมแยกส่วน เพิ่ม AMX ประมวลผลเมทริกซ์","link":"https://www.blognone.com/node/124351","date":1629604936000,"content":"<div><div><div><p>นอกจากซีพียู <a href=\"https://www.blognone.com/node/124336\">Alder Lake</a> และ<a href=\"https://www.blognone.com/node/124338\">จีพียู Intel Arc ที่มี XeSS</a> อินเทลยังเปิดข้อมูลของผลิตภัณฑ์ฝั่งเซิร์ฟเวอร์ ได้แก่ซีพียู Xeon Scalable รุ่นถัดไป \"Sapphire Rapids\" และจีพียูศูนย์ข้อมูล \"Ponte Vecchio\" เพิ่มเติมด้วย</p>\n<p>โพสต์นี้เอาเฉพาะ Sapphire Rapids อย่างเดียวก่อนนะครับ</p>\n<p><img src=\"https://www.blognone.com/sites/default/files/externals/7928d2de923e3deb0352706a70f0d425.jpg\" /></p>\n<p>การเปลี่ยนแปลงสำคัญที่สุดของ Xeon \"Sapphire Rapids\" คือเปลี่ยนมาใช้สถาปัตยกรรมแบบ modular ที่อินเทลเรียกว่า multi-tile design หรือการแบ่งชิปย่อย (tile) แล้วนำมาวางต่อกันผ่านบัส interconnect แทนผลิตชิปทั้งหมดลงบนแผ่น die แผ่นเดียว (ลักษณะเดียวกับที่ AMD Zen ใช้มาสักระยะหนึ่งแล้ว เท่ากับว่าสุดท้ายอินเทลก็ต้องยอมเดินตาม AMD)</p>\n<p>ความแตกต่างคืออินเทลให้แพ็กเกจแบบวางตั้งที่เรียกว่า Embedded Multi-die Interconnect Bridge (EMIB) ซึ่งใช้กับหน่วยประมวลผลตัวอื่นๆ อย่าง Ponte Vecchio ด้วย</p>\n<p><img src=\"https://www.blognone.com/sites/default/files/externals/d6255c4da0767e2e747618cc8326c1ed.jpg\" /></p>\n<p><img src=\"https://www.blognone.com/sites/default/files/externals/d83ee90cb54dc504e98f9a31bcb2f8ec.jpg\" /></p>\n<p>ในภาพที่อินเทลนำมาให้ดู Sapphire Rapids ประกอบด้วย 4 tiles ซึ่งแต่ละ tile มีทั้งหน่วยประมวลผลหลัก, ตัวช่วยเร่งการประมวลผล (accelerator), ตัวควบคุมหน่วยความจำและ I/O แยกของตัวเอง</p>\n<p><img src=\"https://www.blognone.com/sites/default/files/externals/2a927ef8054fc128a22b70eace251b81.jpg\" /></p>\n<p>หน่วยประมวลผลหลักของ Sapphire Rapids ใช้แกน Performance Core \"Golden Cove\" ตัวเดียวกับใน Alder Lake แต่เป็นเวอร์ชันใหญ่สำหรับงานศูนย์ข้อมูล</p>\n<p><img src=\"https://www.blognone.com/sites/default/files/externals/a2d5e2675a6c6063e21a9ac2944785e6.jpg\" /></p>\n<p>ของใหม่ที่สำคัญในแกน Golden Cove เวอร์ชันศูนย์ข้อมูล คือ หน่วยประมวลผลเมทริกซ์ (ข้อมูล 2 มิติ) ชื่อว่า Advanced Matrix Extensions (AMX) โดยเป็นฮาร์ดแวร์เร่งการประมวลผลแยกจากแกนซีพียูหลัก (ตอนนี้ยังมีเฉพาะใน Sapphire Rapids ไม่ได้มีบน Alder Lake)</p>\n<p><img src=\"https://www.blognone.com/sites/default/files/externals/a92090568270a5777c2a752ab73250fb.jpg\" /></p>\n<p>AMX เป็นการขยายให้ซีพียูสามารถคำนวณเมทริกซ์ได้เยอะขึ้นในรอบสัญญาณเดียว (คำนวณเลขจำนวนเต็ม int8 ได้พร้อมกัน 2048 ชุด) เพิ่มขึ้น 8 เท่าจากชุดคำสั่งเดิม</p>\n<p>วิธีการทำงานของ AMX คือโหลดข้อมูลจากแกนซีพียูหลัก มาใส่ TILES ก่อนแล้วนำไปคำนวณด้วย TMUL อีกทีหนึ่ง</p>\n<p><img src=\"https://www.blognone.com/sites/default/files/externals/5a27d911a6f92e253e98b7f5da097ef3.jpg\" /></p>\n<p><img src=\"https://www.blognone.com/sites/default/files/externals/7488bc273313d55b332c7617ca43f39b.jpg\" /></p>\n<p>อินเทลบอกว่าสร้าง AMX ขึ้นมารองรับโหลดงานประเภทใหม่ๆ คืองานสาย AI ที่ต้องประมวลผลเมทริกซ์เยอะๆ โดยตัวเลขของอินเทลเปรียบเทียบระหว่างชุดคำสั่ง AVX-512 ของเดิม (เวกเตอร์) และ AVX ของใหม่ (เมทริกซ์) จะเห็นว่า AVX สามารถประมวลผลต่อรอบสัญญาณได้เยอะกว่ามาก (8 เท่าถ้าเป็นข้อมูลแบบ INT8)</p>\n<p>Sapphire Rapids จะมีทั้ง AVX-512 และ AMX มาให้ในตัว แต่ถ้าดูจากทิศทาง <a href=\"https://www.blognone.com/node/124344\">Alder Lake ปิดการทำงานของ AVX-512</a> ก็น่าสนใจถึงชะตากรรมของ AVX-512 ในระยะยาว</p>\n<p><img src=\"https://www.blognone.com/sites/default/files/externals/f9db92ddcf733a134caf68d06933519c.jpg\" /></p>\n<p>คลิปสาธิตการทำงานของ AMX ใน Sapphire Rapids</p>\n<p>ของใหม่อีกอย่างใน Performance Core คือ Data Streaming Accelerator (DSA) เป็นการโยกงานพื้นฐาน อย่างการย้ายตำแหน่งของข้อมูล (data movement) จากแกนซีพียูหลักไปยังหน่วยประมวลผลรอง (อินเทลใช้คำว่า Acceleration Engines) ช่วยลดโหลดงานของแกนซีพียูหลักลง</p>\n<p>การโยกงานจากแกนซีพียูหลักไปยัง AMX และ DSA จะผ่านตัวกระจายงาน (dispatch) ที่อินเทลเรียกว่า Accelerator Interfacing Architecture (AIA)</p>\n<p><img src=\"https://www.blognone.com/sites/default/files/externals/405f23782c3170f9676563d58fcf0e57.jpg\" /></p>\n<p><img src=\"https://www.blognone.com/sites/default/files/externals/a74090af4c37f1bf4da5e1e929de533b.jpg\" /></p>\n<p>ของใหม่นอกแกนซีพียูหลัก ได้แก่ การรองรับแรม HBM (High-Bandwidth Memory) ที่ฝั่ง AMD รองรับมานานแล้ว, บัส Compute eXpress Link (CXL) 1.1, Ultra Path Interconnect (UPI) 2.0, PCIe 5.0</p>\n<p><img src=\"https://www.blognone.com/sites/default/files/externals/824504ff945668e4dd88e65d75d3fa2f.jpg\" /></p>\n<p><img src=\"https://www.blognone.com/sites/default/files/externals/3ca3444eeb78fe2a0271a61f44d65bff.jpg\" /></p>\n<p>Sapphire Rapids จะผลิตโดยโรงงานของอินเทลเอง ใช้กระบวนการผลิต Intel 7 (10 นาโนเมตร) ตัวเดียวกับ Alder Lake กำหนดการวางจำหน่ายแบบคร่าวๆ คือในปี 2022</p>\n<p>สรุปของใหม่ใน Sapphire Rapids</p>\n<p><img src=\"https://www.blognone.com/sites/default/files/externals/681676d25c4d47d9e848138b95e0890b.jpg\" /></p>\n<p>ที่มา - <a href=\"https://download.intel.com/newsroom/2021/client-computing/intel-architecture-day-2021-fact-sheet.pdf\">Intel</a></p>\n</div></div></div><div><div>Topics: </div><div><div><a href=\"/topics/xeon\">Xeon</a></div><div><a href=\"/topics/intel\">Intel</a></div><div><a href=\"/topics/cpu\">CPU</a></div><div><a href=\"/topics/processor\">Processor</a></div></div></div>","author":"mk","siteTitle":"Blognone","siteHash":"ededadcf18490b3937e7dd89ebe8c00dc129addbdf1ebe4aff1f458146693da0","entryHash":"d662b10dd9fd9c3e4580e27b7588990a2318e114b36c0c3535e914baa7ea6be0","category":"Thai"}