{"title":"Time-based snapshot copy for Amazon EBS","link":"https://aws.amazon.com/blogs/aws/time-based-snapshot-copy-for-amazon-ebs/","date":1732660296000,"content":"<p>You can now specify a desired completion duration (15 minutes to 48 hours) when you copy an <a href=\"https://aws.amazon.com/ebs/\">Amazon Elastic Block Store (Amazon EBS)</a> snapshot within or between AWS Regions and/or accounts. This will help you to meet time-based compliance and business requirements for critical workloads. For example:</p> \n<p><strong>Testing</strong> – Distribute fresh data on a timely basis as part of your Test Data Management (TDM) plan.</p> \n<p><strong>Development</strong> – Provide your developers with updated snapshot data on a regular and frequent basis.</p> \n<p><strong>Disaster Recovery</strong> – Ensure that critical snapshots are copied in order to meet a Recovery Point Objective (RPO).</p> \n<p>Regardless of your use case, this new feature gives you consistent and predictable copies. This does not affect the performance or reliability of standard copies—you can choose the option and timing that works best for each situation.</p> \n<p><span><strong>Creating a Time-Based Snapshot Copy</strong></span><br /> I can create time-based snapshot copies from the <a href=\"https://console.aws.amazon.com\">AWS Management Console</a>, CLI (<code><a href=\"https://docs.aws.amazon.com/cli/latest/reference/ec2/copy-snapshot.html\">copy-snapshot</a></code>), or API (<code><a href=\"https://docs.aws.amazon.com/AWSEC2/latest/APIReference/API_CopySnapshot.html\">CopySnapshot</a></code>). While working on this post I created two EBS volumes (100 GiB and 1 TiB), filled each one with files, and created snapshots:</p> \n<p><img src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/11/02/eg_snaps_1.jpg\" width=\"894\" height=\"222\" /></p> \n<p>To create a time-based snapshot, I select the source as usual and choose <strong>Copy snapshot</strong> from the <strong>Action</strong> menu. I enter a description for the copy, choose the <strong>us-east-1</strong> AWS Region as the destination, select <strong>Enable time-based copy</strong>, and (because this is a time-critical snapshot), enter a 15 minute <strong>Completion duration</strong>:</p> \n<p><img loading=\"lazy\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/11/21/eg_copy_4.png\" width=\"893\" height=\"772\" /></p> \n<p>When I click <strong>Copy snapshot</strong>, the request will be accepted (and the copy will become <em>Pending</em>) only if my account’s throughput quotas are not already exceeded due to the throughput consumed by other active copies that I am making to the destination region. If the account level throughput quota is already exceeded, the console will display an error.</p> \n<p>I can click <strong>Launch copy duration calculator</strong> to get a better idea of the minimum achievable copy duration for the snapshot. I open the calculator, enter my account’s throughput limit, and choose an evaluation period:</p> \n<p><img loading=\"lazy\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/11/14/eg_calc_start_1.png\" width=\"855\" height=\"665\" /></p> \n<p>The calculator then uses historical data collected over the course of previous snapshot copies to tell me the minimum achievable completion duration. In this example I copied 1,800,000 MiB in the last 24 hours; with time-based copy and my current account throughput quota of 2000 MiB/second I can copy this much data in 15 minutes.</p> \n<p><img loading=\"lazy\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/11/14/eg_calc_out_1.png\" width=\"871\" height=\"183\" /></p> \n<p>While the copy is in progress, I can monitor progress using the console or by calling <code><a href=\"https://docs.aws.amazon.com/AWSEC2/latest/APIReference/API_DescribeSnapshots.html\">DescribeSnapshots</a> </code>and examining the <code>progress</code> field of the result. I can also use the following <a href=\"https://aws.amazon.com/eventbridge\">Amazon EventBridge</a> events to take actions (if the copy operation crosses regions, the event is sent in the destination region):</p> \n<p><strong><code>copySnapshot</code> </strong>– Sent after the copy operation completes.</p> \n<p><code><strong>copyMissedCompletionDuration</strong></code> – Sent if the copy is still pending when the deadline has passed.</p> \n<p><span><strong>Things to Know</strong></span><br /> And that’s just about all there is to it! Here’s what you need to know about time-based snapshot copies:</p> \n<p><strong>CloudWatch Metrics</strong> – The <strong>SnapshotCopyBytesTransferred</strong> metric is emitted in the destination region, and reflect the amount of data transferred between the source and destination region in bytes.</p> \n<p><strong>Duration</strong> – The duration can range from 15 minutes to 48 hours in 15 minute increments, and is specified on a per-copy basis.</p> \n<p><strong>Concurrency</strong> – If a snapshot is being copied and I initiate a second copy of the same snapshot to the same destination, the duration for the second one starts when the first one is completed.</p> \n<p><strong>Throughput</strong> – There is a default per-account limit of 2000 MiB/second between each source and destination pair. If you need additional throughput in order to meet your RPO you can request an increase via the <a href=\"https://console.aws.amazon.com/support/home#/\">AWS Support Center</a>. Maximum per-snapshot throughput is 500 MiB/second and cannot be increased.</p> \n<p><strong>Pricing</strong> – Refer to the <a href=\"https://aws.amazon.com/ebs/pricing/\">Amazon EBS Pricing</a> page for complete pricing information.</p> \n<p><strong>Regions</strong> – Time-based snapshot copies are available in all AWS Regions.</p> \n<p>— <a href=\"https://twitter.com/jeffbarr\">Jeff</a>;</p>","author":"Jeff Barr","siteTitle":"AWS News Blog","siteHash":"6093e072e4117ec22616e844cb857d03ca62c57a411a8affc77cb5e8b6b15bf6","entryHash":"8c94d16a06e10d88418b6069e46714cfa4be2d010ab4177461837d3f5e95996d","category":"Tech"}