{"title":"Spring Boot 3.3.0 ออกมาแล้ว","link":"https://www.somkiat.cc/update-spring-boot-3-3-0/","date":1717400738000,"content":"<p><img width=\"150\" height=\"150\" src=\"https://www.somkiat.cc/wp-content/uploads/2024/06/spring-boot-3-150x150.jpg\" loading=\"lazy\" srcset=\"https://www.somkiat.cc/wp-content/uploads/2024/06/spring-boot-3-150x150.jpg 150w, https://www.somkiat.cc/wp-content/uploads/2024/06/spring-boot-3-75x75.jpg 75w\" /></p>\n<figure><a href=\"https://www.somkiat.cc/wp-content/uploads/2024/06/spring-boot-3.jpg\"><img src=\"https://www.somkiat.cc/wp-content/uploads/2024/06/spring-boot-3-1024x598.jpg\" width=\"548\" height=\"319\" /></a></figure>\n\n\n\n<p>สัปดาห์ที่ผ่านมา <strong><a href=\"https://spring.io/blog/2024/05/23/spring-boot-3-3-0-available-now\" target=\"_blank\">Spring Boot 3.3.0</a></strong> ถูกปล่อยออกมาแล้ว<br />ใครจะไม่ upgrade แนะนำเลยครับ<br />โดยความสามารถที่น่าสนใจประกอบไปด้วย</p>\n\n\n\n<ul>\n<li>สนับสนุน CDS (Class Data Sharing) ทำให้ start เร็วขึ้น และใช้งาน memory น้อยลง</li>\n\n\n\n<li>ปรับปรุงเรื่อง observability เช่นเพิ่ม @SpanTag เข้ามา สำหรับ tracing แบบง่าย ๆ</li>\n\n\n\n<li>เพิ่ม SBOM (Software Bill of Materials) actuator endpoint เข้ามา ช่วยให้เราเห็นว่าระบบงานใช้ library อะไรบ้าง</li>\n\n\n\n<li>ทำการเปลี่ยนแปลง<a href=\"https://docs.spring.io/spring-boot/\" target=\"_blank\">เอกสาร</a>ใหม่</li>\n</ul>\n\n\n\n<span></span>\n\n\n\n<p><strong>ความสามารถที่น่าสนใจมาก ๆ คือ <a href=\"https://docs.spring.io/spring-framework/reference/integration/cds.html\" target=\"_blank\">CDS (Class Data Sharing)</a></strong></p>\n\n\n\n<p>เป็น <a href=\"https://docs.oracle.com/en/java/javase/17/vm/class-data-sharing.html\">feature ใน JVM</a> ที่มีมาตั้งแต่ Java 12<br />โดยจะทำการสร้างไฟล์สำหรับ load standard library ที่จะใช้งานขึ้นมา<br />จากนั้นในการใช้งานก็ load จากไฟล์เดียวเท่านั้น<br />ไม่ต้องไป load แบบ class-by-class เหมือนเดิม<br />รวมทั้งถ้า class ไหนใช้ซ้ำก็ใช้ที่เดียวกันไปเลย ไม่ต้อง load ใหม่<br />จึงช่วยลดการใช้งาน memory และ load เร็วขึ้นนั่นเอง</p>\n\n\n\n<p>ดังนั้นมาลองดูกันว่า เร็วขึ้น และ ใช้ memory น้อยลงจริงไหมกัน ?</p>\n\n\n\n<p><strong>เป็นการทดลองใช้งาน Spring 3.3.0 กับ 3.2.6 บน Java 22</strong></p>\n\n\n\n<p>ก่อนอื่นทำการ print การใช้งาน memory ของ app มาก่อน</p>\n\n\n\n[gist id=\"0e519e39ed0766084cb4e194c9ab6ff7\" file=\"MemoryUsageLogger.java\"]\n\n\n\n<p>จากนั้นสร้าง JAR fil แบบปกติ</p>\n\n\n\n[gist id=\"0e519e39ed0766084cb4e194c9ab6ff7\" file=\"1.txt\"]\n\n\n\n<p>ต่อจากนั้นทำการสร้าง CDS JAR file และลองใช้งาน</p>\n\n\n\n[gist id=\"0e519e39ed0766084cb4e194c9ab6ff7\" file=\"2.txt\"]\n\n\n\n<p>ผลออกมาไม่ต่างมากเท่าไร  ถ้าระบบใหญ่ ๆ น่าจะเห็นชัดมากขึ้น</p>\n\n\n\n<p><strong>อีกเรื่องคือ การเพิ่ม SBOM endpoint เข้ามา ทำงานกับ <a href=\"https://cyclonedx.org/\" target=\"_blank\">CycloneDX</a></strong></p>\n\n\n\n<p>สามารถ config เพิ่มมาได้ดังนี้</p>\n\n\n\n[gist id=\"0e519e39ed0766084cb4e194c9ab6ff7\" file=\"pom.xml\"]\n\n\n\n<p>จากนั้นเปิด management web endpoint ใน Actuator ดูได้เลย</p>\n\n\n\n<ul>\n<li>http://localhost:8080/actuator/sbom/application</li>\n</ul>\n\n\n\n<p>ตัวอย่างเช่น</p>\n\n\n\n[gist id=\"0e519e39ed0766084cb4e194c9ab6ff7\" file=\"sbom.json\"]\n\n\n\n<p>ช่วยให้เราเอาไป analyze ต่าง ๆ ได้ง่าย เช่น Security เป็นต้น</p>\n\n\n\n<figure><a href=\"https://www.somkiat.cc/wp-content/uploads/2024/06/spring-boot-3-02.jpg\"><img src=\"https://www.somkiat.cc/wp-content/uploads/2024/06/spring-boot-3-02-1024x543.jpg\" width=\"594\" height=\"315\" /></a></figure>\n\n\n\n<p></p>\n\n\n\n<p><strong>Upgrade กันได้แล้วนะ ตอนนี้ <a href=\"https://spring.io/projects/spring-boot#support\" target=\"_blank\">Spring Boot 3.1 ไม่ support</a> แล้วนะครับ</strong> !!</p>\n\n\n\n<figure><a href=\"https://www.somkiat.cc/wp-content/uploads/2024/06/Screenshot-2567-06-03-at-15.05.40.png\"><img src=\"https://www.somkiat.cc/wp-content/uploads/2024/06/Screenshot-2567-06-03-at-15.05.40-1024x390.png\" width=\"600\" height=\"228\" /></a></figure>\n","author":"somkiat","siteTitle":"cc :: somkiat","siteHash":"3a23a5a4389e1e40c6fbb16520a8cc20df5b3591c25145ce72aaa18b19e48201","entryHash":"3bfa5d0740a0d0bdee8e9799da0ff067faf9a6bc155d10213db127a6aeaf13f2","category":"Thai"}