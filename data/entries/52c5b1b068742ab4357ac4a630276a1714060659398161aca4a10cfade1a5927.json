{"title":"ตอนนี้ OpenTelemetry Spring Boot starter เป็น stable version แล้วนะ","link":"https://www.somkiat.cc/opentelemetry-with-spring-2024/","date":1730635697000,"content":"<p><img width=\"150\" height=\"150\" src=\"https://www.somkiat.cc/wp-content/uploads/2024/11/spring-boot-opentelemetry-150x150.png\" loading=\"lazy\" srcset=\"https://www.somkiat.cc/wp-content/uploads/2024/11/spring-boot-opentelemetry-150x150.png 150w, https://www.somkiat.cc/wp-content/uploads/2024/11/spring-boot-opentelemetry-75x75.png 75w\" /></p>\n<figure><a href=\"https://www.somkiat.cc/wp-content/uploads/2024/11/spring-boot-opentelemetry.png\"><img src=\"https://www.somkiat.cc/wp-content/uploads/2024/11/spring-boot-opentelemetry-1024x512.png\" width=\"606\" height=\"303\" /></a></figure>\n\n\n\n<p>ตอนนี้ Spring Boot สนับสนุน <strong>OpenTelemetry Protocol (OTLP)</strong> เต็มตัวแล้ว<br />ทั้งข้อมูล metric, trace และ log<br />โดยข้อดีของ OTLP ประกอบไปด้วย</p>\n\n\n\n<ul>\n<li>เรื่องรูปแบบข้อมูลที่เป็นมาตรฐาน</li>\n\n\n\n<li>มีความยืดหยุ่นในการใช้งาน ไม่ lock กับเครื่องมือและ technology มากนัก</li>\n</ul>\n\n\n\n<p>มาลองใช้งานกัน</p>\n\n\n\n<span></span>\n\n\n\n<p><strong>เริ่มต้นการใช้งาน ต้องมี library ต่าง ๆ ดังนี้</strong></p>\n\n\n\n<ul>\n<li>Actuator เป็นสิ่งที่ต้องมีเสมอ</li>\n\n\n\n<li>ข้อมูล metric ยังใช้งานผ่าน Micrometer ด้วย library = micrometer-registry-otlp ซึ่งโยนเข้า Prometheus Remote Write ได้เลย</li>\n\n\n\n<li>ข้อมูล trace ใช้งาน library=micrometer-tracing-bridge-brave</li>\n\n\n\n<li>ข้อมูล log โยนเข้า Loki ได้เลย</li>\n</ul>\n\n\n\n<p><strong>ตัวอย่างของ Apache Maven project</strong></p>\n\n\n\n[gist id=\"f172f267fd850e91bdefd0c7e5524da1\" file=\"pom.xml\"]\n\n\n\n<p>ตัวอย่างการ config ให้ข้อมูล metric และ trace ไปยัง OpenTelemetry collector</p>\n\n\n\n[gist id=\"f172f267fd850e91bdefd0c7e5524da1\" file=\"application.properties\"]\n\n\n\n<p>ส่วน log ก็โยนเข้า loki ไปเลย</p>\n\n\n\n[gist id=\"f172f267fd850e91bdefd0c7e5524da1\" file=\"logback.xml\"]\n\n\n\n<p>ลองนำไปใช้ดูกันครับ</p>\n\n\n\n<p><strong>Reference Websites</strong></p>\n\n\n\n<ul>\n<li><a href=\"https://opentelemetry.io/blog/2024/spring-starter-stable/\" target=\"_blank\">The OpenTelemetry Spring Boot starter is now stable</a></li>\n\n\n\n<li><a href=\"https://spring.io/blog/2024/10/28/lets-use-opentelemetry-with-spring\" target=\"_blank\">Let’s use OpenTelemetry with Spring</a></li>\n</ul>\n","author":"somkiat","siteTitle":"cc :: somkiat","siteHash":"3a23a5a4389e1e40c6fbb16520a8cc20df5b3591c25145ce72aaa18b19e48201","entryHash":"52c5b1b068742ab4357ac4a630276a1714060659398161aca4a10cfade1a5927","category":"Thai"}