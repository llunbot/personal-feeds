{"title":"รู้ไว้ใช่ว่า PostgreSQL ก็ใช้เป็น message broker ได้นะ","link":"https://www.somkiat.cc/postgesql-as-message-broker/","date":1634562882000,"content":"<div id=\"readability-page-1\" class=\"page\"><div id=\"page\"><article><div id=\"content_box\"><header><div><p><time>October 18, 2021</time> <span><a href=\"https://www.somkiat.cc/category/architecture-2/\" rel=\"category tag\">Architecture</a>, <a href=\"https://www.somkiat.cc/category/tools/\" rel=\"category tag\">Tools</a></span></p></div></header><div><p>กำลังสรุปเรื่องของ message broker สำหรับจัดการระบบงาน<br>โดยให้ทำการติดต่อสื่อสารกันแบบ asynchronous + messaging<br>ก็ไปเห็นว่า PostgreSQL ที่เป็น RDBMS สำหรับเก็บข้อมูลเชิงความสัมพันธ์<br>รวมทั้งข้อมูลในรูปแบบ JSON ก็ได้<br>แต่อีกความสามารถที่เพิ่มรู้ก็คือ <strong>pub-sub</strong><br>ก็สามารถทำงานได้เช่นกัน</p><p><strong>โดยจะใช้งานผ่าน command 2 ตัวคือ</strong></p><ul><li><a rel=\"noreferrer noopener\" href=\"https://www.postgresql.org/docs/current/sql-listen.html\" target=\"_blank\">LISTEN</a> &lt;channel&gt;</li><li><a rel=\"noreferrer noopener\" href=\"https://www.postgresql.org/docs/current/sql-notify.html\" target=\"_blank\">NOTIFY</a> &lt;channel&gt;,&lt;payload&gt;</li></ul><p><strong>ซึ่งสามารถนำมาประยุกต์ได้ดังนี้</strong></p><div><p>เมื่อมีการเปลี่ยนแปลงข้อมูลใน PostgreSQL แล้ว<br>ก็ทำการ NOTIFY ไปยัง channel ที่กำหนด<br>จากนั้นก็ต้องมีส่วน LISTEN คอย consume จาก NOTIFY นั่นเอง<br>ช่วยลด latency ของ network ลงไปได้เยอะเลย<br>เพราะว่าอยู่ใน network เดียวกัน<br>การทำงานแบบนี้จะเป้นแบบ Fire and Forget นั่นเอง<br>ซึ่งเป็นอีกทางเลือกที่น่าสนใจ</p><p>แสดงการทำงานดังรูป</p></div><figure><img src=\"https://www.somkiat.cc/wp-content/uploads/2021/10/postgresql-notify.png\" alt=\"\" srcset=\"https://www.somkiat.cc/wp-content/uploads/2021/10/postgresql-notify.png 700w, https://www.somkiat.cc/wp-content/uploads/2021/10/postgresql-notify-300x132.png 300w\" sizes=\"(max-width: 700px) 100vw, 700px\"><figcaption><a href=\"https://medium.com/geekculture/postgresql-as-a-message-broker-to-apply-a-reactive-caching-strategy-57e7f8f7dd0e\" target=\"_blank\" rel=\"noreferrer noopener\">https://medium.com/geekculture/postgresql-as-a-message-broker-to-apply-a-reactive-caching-strategy-57e7f8f7dd0e</a></figcaption></figure></div><div><p><img alt=\"\" src=\"https://secure.gravatar.com/avatar/e5cb9aad7bf4f0e43462bd51d6ff7021?s=90&amp;d=mm&amp;r=g\" srcset=\"https://secure.gravatar.com/avatar/e5cb9aad7bf4f0e43462bd51d6ff7021?s=180&amp;d=mm&amp;r=g 2x\" height=\"90\" width=\"90\"></p><h4>Article by <a href=\"https://www.facebook.com/somkiatspns\">Somkiat Puisungnoen</a></h4><p>To be Craftmanship</p></div></div></article></div></div>","author":"somkiat","siteTitle":"cc :: somkiat","siteHash":"3a23a5a4389e1e40c6fbb16520a8cc20df5b3591c25145ce72aaa18b19e48201","entryHash":"6849c95ce27bec3d92f3142d2df28f1158975a2937b68cc468a9b3bf98dc4604","category":"Thai"}