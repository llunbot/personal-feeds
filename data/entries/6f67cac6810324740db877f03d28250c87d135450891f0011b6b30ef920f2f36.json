{"title":"หัดเขียน K6 extension กันหน่อย","link":"https://www.somkiat.cc/develop-k6-extension/","date":1635777543000,"content":"<p><img src=\"https://www.somkiat.cc/wp-content/uploads/2021/11/how-to-do-performance-testing-using-k6-150x150.jpg\" /></p>\n<figure><img src=\"https://www.somkiat.cc/wp-content/uploads/2021/11/how-to-do-performance-testing-using-k6-1024x671.jpg\" /></figure>\n\n\n\n<p>K6 เป็นเครื่องมือสำหรับการทำ performance testing<br />ซึ่งเขียนอธิบายการใช้งานง่าย ๆ ไปที่ <a href=\"https://www.somkiat.cc/load-testing-with-k6/\" target=\"_blank\">Load testing with K6</a><br />โดย K6 นั้นพัฒนาด้วยภาษา Go<br />แต่เขียน script ของการทดสอบด้วยภาษา JavaScript<br />ซึ่งใช้งานผ่าน library ชื่อว่า <a href=\"https://github.com/dop251/goja\" target=\"_blank\">Goja</a> นั่นเอง</p>\n\n\n\n<span></span>\n\n\n\n<p><strong>คำถามที่น่าสนใจคือ </strong></p>\n\n\n\n<p>ถ้าต้องการเพิ่มความสามารถต่าง ๆ ของ K6 ขึ้นมาจะต้องทำอย่างไร ?<br /></p>\n\n\n\n<p><strong>คำตอบคือ K6 Extension นั่นเอง</strong></p>\n\n\n\n<p>เป็น extension หรือส่วนต่อขยายของ K6<br />โดยมี library ภาษา Go ชื่อว่า <strong><a href=\"https://github.com/grafana/xk6\">xk6</a></strong><br />ช่วยให้นักพัฒนาและ tester เพิ่มในสิ่งที่ไม่มีใน K6 ได้ง่ายขึ้น<br />ดูตัวอย่าง <a href=\"https://k6.io/docs/extensions/\" target=\"_blank\">extension ที่มีใน community</a></p>\n\n\n\n<p><strong>ดังนั้นการทำความเข้าใจมากขึ้น มาลองเขียน extesion แบบง่าย ๆ ดีกว่า</strong></p>\n\n\n\n<p>ซึ่งพัฒนาด้วยภาษา Go <br />ดังนั้นโดยมาทำ Hello World extension กัน<br /></p>\n\n\n\n<p><strong>ขั้นตอนที่ 1 ทำการติดตั้ง k6 และ xk6</strong></p>\n\n\n\n[gist id=\"50ff67e4abe33bbc64c7c9059f9ead7c\" file=\"1.txt\"]\n\n\n\n<p><strong>ขั้นตอนที่ 2 ทำการสร้าง extension ด้วยภาษา Go</strong></p>\n\n\n\n[gist id=\"50ff67e4abe33bbc64c7c9059f9ead7c\" file=\"demo.go\"]\n\n\n\n<p>จากนั้นทำการ build extension ด้วย xk6 ดังนี้</p>\n\n\n\n[gist id=\"50ff67e4abe33bbc64c7c9059f9ead7c\" file=\"2.txt\"]\n\n\n\n<p><strong>ขั้นตอนที่ 3 ทำการเขียน test script ด้วยภาษา JavaScript</strong></p>\n\n\n\n<p>โดยใช้งาน extension ชื่อว่า demo ดังนี้</p>\n\n\n\n[gist id=\"50ff67e4abe33bbc64c7c9059f9ead7c\" file=\"test.js\"]\n\n\n\n<p>จากนั้นทำการ run script ด้วย k6<br />จะได้ผลการทำงานดังนี้</p>\n\n\n\n[gist id=\"50ff67e4abe33bbc64c7c9059f9ead7c\" file=\"3.txt\"]\n\n\n\n<p>เพียงเท่านี้ก็สามารถสร้าง extension ของ K6 แบบง่าย ๆ ได้แล้ว</p>\n","author":"somkiat","siteTitle":"cc :: somkiat","siteHash":"3a23a5a4389e1e40c6fbb16520a8cc20df5b3591c25145ce72aaa18b19e48201","entryHash":"6f67cac6810324740db877f03d28250c87d135450891f0011b6b30ef920f2f36","category":"Thai"}