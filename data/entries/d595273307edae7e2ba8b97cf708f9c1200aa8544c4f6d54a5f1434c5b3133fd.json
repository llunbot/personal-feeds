{"title":"SQLite ออกเวอร์ชั่น 3.47 เพิ่มคำสั่ง sqlite3_rsync ซิงก์ฐานข้อมูลข้ามเครื่อง อ่านระหว่างซิงก์ได้","link":"https://www.blognone.com/node/142806","date":1730106171000,"content":"<div><div><div><p>SQLite ฐานข้อมูลขนาดเล็กแบบทำงานเครื่องเดียวกับแอปพลิเคชั่น ออกเวอร์ชั่น 3.47.0 ปรับแก้บั๊กเล็กน้อยจำนวนมาก แต่เพิ่มฟีเจอร์สำคัญคือคำสั่ง <code>sqlite3_rsync</code> คำสั่ง <code>rsync</code> เวอร์ชั่นพิเศษที่เข้าใจ transaction ของฐานข้อมูลเพื่อให้สามารถซิงก์ฐานข้อมูลไปยังเครื่องสำรองได้</p>\n<p>คำสั่ง <code>rsync</code> นั้นอาศัยการเทียบค่าแฮชข้อมูลทีละบล็อค หากพบว่ามีบล็อคใดที่ปลายทางมีอยู่แล้วก็ไม่ต้องส่งข้อมูลไปใหม่ ทำให้การซิงก์ไฟล์ขนาดใหญ่แต่มีความเปลี่ยนแปลงเล็กน้อย (เช่นฐานข้อมูลที่อาจจะเก็บข้อมูลมานาน แต่แต่ละวันกลับมีการเปลี่ยนแปลงไม่มากนัก) ได้เปรียบมาก อัตราการส่งข้อมูลจะลดลงมาก หากไม่มีความเปลี่ยนแปลงเลยจะใช้แบนวิดท์เพียง 0.5% ของข้อมูลเต็มเท่านั้น</p>\n<p><code>sqlite3_rsync</code> เป็นโปรแกรมที่เขียนขึ้นมาเฉพาะ ฟีเจอร์ไม่เท่ากับ <code>rsync</code> ตัวจริง แต่ความพิเศษคือมันเข้าใจไฟล์ WAL ของ SQLite ทำให้สามารถซิงก์ข้อมูลโดยไม่ทำฐานข้อมูลฝั่งใดพังเลย โดยฝั่งปลายทางของการซิงก์นั้นสามารถคิวรีข้อมูลไปได้เรื่อยๆ (แต่ห้ามเขียน) แนวทางนี้ทำให้บริการที่เน้นการอ่านข้อมูล เช่น เว็บบล็อก สามารถกระจายฐานข้อมูลไปได้ไม่จำกัด</p>\n<p>ก่อนหน้านี้มีโครงการภายนอก SQLite พยายามทำระบบซิงก์แบบนี้มาก่อนแล้ว เช่น <a href=\"https://litestream.io\">Litestream</a> แต่ครั้งนี้โครงการหลักก็ออกมาทำเครื่องมือซัพพอร์ตโดยตรง แม้จะอยู่ในสถานะทดลองเท่านั้นในช่วงแรก</p>\n<p>ที่มา - <a href=\"https://sqlite.org/draft/releaselog/3_47_0.html\">SQLite</a></p>\n<p><img alt=\"No Description\" src=\"https://www.blognone.com/sites/default/files/externals/d254a1281f8305d661334ad46da0b70e.png\" /></p>\n</div></div></div><div><div>Topics: </div><div><div><a href=\"/topics/sqlite\">SQLite</a></div><div><a href=\"/topics/database\">Database</a></div></div></div>","author":"lew","siteTitle":"Blognone","siteHash":"ededadcf18490b3937e7dd89ebe8c00dc129addbdf1ebe4aff1f458146693da0","entryHash":"d595273307edae7e2ba8b97cf708f9c1200aa8544c4f6d54a5f1434c5b3133fd","category":"Thai"}