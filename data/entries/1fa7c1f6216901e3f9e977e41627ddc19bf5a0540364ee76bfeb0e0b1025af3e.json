{"title":"ลองศึกษา HTMX กับ Go เล่น ๆ นิดหน่อย","link":"https://www.somkiat.cc/learn-htmx-and-go/","date":1707200882000,"content":"<p><img width=\"150\" height=\"150\" src=\"https://www.somkiat.cc/wp-content/uploads/2024/02/htmx-101-150x150.jpeg\" loading=\"lazy\" srcset=\"https://www.somkiat.cc/wp-content/uploads/2024/02/htmx-101-150x150.jpeg 150w, https://www.somkiat.cc/wp-content/uploads/2024/02/htmx-101-75x75.jpeg 75w\" /></p>\n<figure><a href=\"https://www.somkiat.cc/wp-content/uploads/2024/02/htmx-101.jpeg\"><img src=\"https://www.somkiat.cc/wp-content/uploads/2024/02/htmx-101-1024x538.jpeg\" width=\"565\" height=\"297\" /></a></figure>\n\n\n\n<p>ช่วงหลัง ๆ มีการพูดถึง <a href=\"https://htmx.org/\" target=\"_blank\">HTMX</a> เยอะพอสมควร<br />ก็เลยลองมาศึกษานิดหน่อย แต่พอไปอ่านเอกสารแล้วเยอะน่าดู<br />เลยลองเขียน program เล่น ๆ เพื่อศึกษาไปดีกว่า<br />โดยเลือกใช้งาน HTMX กับ Go มาพัฒนา server-side กัน<br />มาดูว่าทำอย่างไรบ้าง ?</p>\n\n\n\n<span></span>\n\n\n\n<p>จากที่อ่านเอกสารของ HTMX นั้น<br />บอกว่าจะทำการส่ง request ไปยัง server-side ให้เลย (AJAX หรือ XHR)<br />แล้วนำ response มาทำการ render ให้เลย<br /></p>\n\n\n\n<p><strong>ดังนั้นก็เลยตั้งโจทย์แรกว่า</strong></p>\n\n\n\n<p>ให้ทำการดึงข้อมูลจาก server-side ทุก ๆ  5 วินาทีไปเลย<br />สามารถเขียนได้ดังนี้</p>\n\n\n\n<p><strong>ฝั่ง Frontend ด้วย HTMX</strong></p>\n\n\n\n<p>โดยทำการดังข้อมูลผ่าน GET /data <br />กำหนด interval ใน attribute ชื่อว่า <strong>hx-trigger</strong> ทำงานแบบ <a href=\"https://htmx.org/docs/#polling\" target=\"_blank\">polling</a></p>\n\n\n\n[gist id=\"952874b663a5f7a9298dd92820071aad\" file=\"1.htmx\"]\n\n\n\n<p><strong>ฝั่ง Backend ด้วยภาษา Go</strong></p>\n\n\n\n[gist id=\"952874b663a5f7a9298dd92820071aad\" file=\"1.go\"]\n\n\n\n<p><strong>จากดึงข้อมูลก็ลองทำการ submit form ง่าย ๆ กันหน่อย</strong></p>\n\n\n\n<p>มาลองทำการ login ซึ่งฝั่ง backend จะทำการรับ request ผ่าน POST /login<br />และทำการส่งผลกลับมาคือ</p>\n\n\n\n<ul>\n<li>200 = Success</li>\n\n\n\n<li>401 = Unauthorized</li>\n</ul>\n\n\n\n<p>สามารถเขียนด้วย HTMX กับ <a href=\"https://htmx.org/extensions/response-targets/\" target=\"_blank\">extension response-targets</a> <br />เพื่อให้ง่ายต่อการแสดงผลการทำงานในแต่ละกรณี</p>\n\n\n\n[gist id=\"952874b663a5f7a9298dd92820071aad\" file=\"2.htmx\"]\n\n\n\n<p>ส่วน code ฝั่ง backend เป็นดังนี้</p>\n\n\n\n[gist id=\"952874b663a5f7a9298dd92820071aad\" file=\"2.go\"]\n\n\n\n<p>ผลการทำงาน</p>\n\n\n\n<figure><a href=\"https://www.somkiat.cc/wp-content/uploads/2024/02/Screenshot-2567-02-06-at-13.20.59.png\"><img src=\"https://www.somkiat.cc/wp-content/uploads/2024/02/Screenshot-2567-02-06-at-13.20.59-1024x256.png\" width=\"346\" height=\"87\" /></a></figure>\n\n\n\n<p>ส่วนการจัดเก็บข้อมูลการ login ก็สามารถเขียนได้เลยในฝั่ง backend<br />ทั้ง cookie หรือ session ไปได้เลย</p>\n\n\n\n[gist id=\"952874b663a5f7a9298dd92820071aad\" file=\"3.go\"]\n\n\n\n<p>จากนั้นการตรวจสอบเครื่อง authorize ก็นำไปไว้ที่ middleware ต่อไป</p>\n\n\n\n[gist id=\"952874b663a5f7a9298dd92820071aad\" file=\"4.go\"]\n\n\n\n<p>มีตัวอย่างให้ลองศึกษาเพิ่มเติมได้ที่ <a href=\"https://htmx.org/examples/\" target=\"_blank\">HTMX Example</a></p>\n\n\n\n<p>ไว้ลองเล่นเพิ่มเติม แล้วจะนำมาเล่าต่อไปครับ<br />ขอให้สนุกกับการเขียน code</p>\n","author":"somkiat","siteTitle":"cc :: somkiat","siteHash":"3a23a5a4389e1e40c6fbb16520a8cc20df5b3591c25145ce72aaa18b19e48201","entryHash":"1fa7c1f6216901e3f9e977e41627ddc19bf5a0540364ee76bfeb0e0b1025af3e","category":"Thai"}