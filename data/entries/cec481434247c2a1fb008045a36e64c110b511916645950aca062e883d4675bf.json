{"title":"Announcing HashiCorp Vault 1.9","link":"https://www.hashicorp.com/blog/vault-1-9","date":1637168400000,"content":"<p>We are pleased to announce the general availability of <a href=\"https://www.vaultproject.io/downloads\">HashiCorp Vault 1.9</a>. Vault provides secrets management, data encryption, and identity management for any application on any infrastructure.</p>\n<p>Vault 1.9 focuses on improving Vault’s core workflows and making key features production-ready to better serve your use cases. In this release, we added the ability for Vault to act as an OpenID Connect (OIDC) provider, made improvements to the <a href=\"https://www.hashicorp.com/blog/how-to-choose-a-data-protection-method\">Transform</a> data transformation feature, released Google Cloud KMS support for the key management secrets engine, and made many other improvements across the project.</p>\n<p>This release includes several key features and improvements:</p>\n<ul>\n<li><strong>Vault as an OIDC provider (tech preview)</strong>: Support for Vault to act as an <a href=\"https://www.vaultproject.io/docs/secrets/identity/oidc-provider\">OIDC provider</a> so that applications can leverage pre-existing Vault identities for authN into their applications.</li>\n<li><strong>Key management secrets engine for Google Cloud (Enterprise)</strong>: <a href=\"https://www.vaultproject.io/docs/secrets/gcpkms\">Google Cloud KMS</a> support — now generally available — to assist with automating many lifecycle operations.</li>\n<li><strong>KV secrets engine v2 patch operations (tech preview)</strong>: A <a href=\"https://www.vaultproject.io/api-docs/secret/kv/kv-v2\">patch secrets</a> ability for creating a new version of an existing secret without reading the contents of its data.</li>\n<li><strong>Transparent Data Encryption for MSSQL (Enterprise)</strong>: Support for Vault to manage encryption keys for <a href=\"https://www.vaultproject.io/docs/platform/mssql\">Transparent Data Encryption</a> (TDE) on MSSQL servers.</li>\n<li><strong>Advanced I/O handling for Transform FPE (Enterprise)</strong>: Support for <a href=\"https://learn.hashicorp.com/tutorials/vault/transform#advanced-handling\">transformation templates</a>, which can encode data that may have an optional prefix, dashes, or spaces.</li>\n<li><strong>Namespace API lock (Enterprise)</strong>: A break-glass procedure to block API access to a specific namespace via new <code>vault namespace lock</code> and <code>vault namespace unlock</code> <a href=\"https://www.vaultproject.io/docs/commands/namespace\">commands</a>.</li>\n<li><strong>KV secrets engine v2 custom metadata</strong>: The ability to set <a href=\"https://www.vaultproject.io/api/secret/kv/kv-v2\">custom metadata</a> for Vault KV v2 secrets via a map structure.</li>\n<li><strong>PKI secrets engine</strong>: Updates to the <a href=\"https://www.vaultproject.io/docs/secrets/pki\">PKI secrets engine</a> UI that display certificate metadata for common names, issue dates, expiration dates, and serial numbers.</li>\n<li><strong>User interface updates</strong>: Support for the <a href=\"https://www.vaultproject.io/docs/secrets/databases\">database secrets engines</a> web UI for Oracle, ElasticSearch, and PostgreSQL.</li>\n<li><strong>Login() support for Go client library</strong>: A new backwards-compatible <code>Login</code> function to the <a href=\"https://github.com/hashicorp/vault/tree/main/api\">Go client library</a> for Vault API, which includes support for Kubernetes, AppRole, Userpass, Amazon Web Services, Microsoft Azure, and Google Cloud authentication methods.</li>\n<li><strong>Custom HTTP response headers</strong>: Support for user-defined <a href=\"https://www.vaultproject.io/docs/configuration/listener/tcp\">custom response headers</a> for the root path (<code>/</code>) and API endpoint (<code>/v1/*</code>).</li>\n<li><strong>Client count improvements</strong>: UI improvements for displaying clients per namespace, a data export option, and an option to view client totals earlier than month’s end.</li>\n</ul>\n<p>This release also includes more new features, workflow enhancements, general improvements, and bug fixes. The Vault 1.9 <a href=\"https://github.com/hashicorp/vault/blob/master/CHANGELOG.md\">changelog</a> and <a href=\"https://www.vaultproject.io/docs/release-notes/1.9.0\">release notes</a> list all the changes. Please visit the <a href=\"https://learn.hashicorp.com/collections/vault/new-release\">Vault Learn</a> page for step-by-step tutorials demonstrating the new features.</p>\n<h2><a href=\"#vault-as-an-oidc-provider-tech-preview\">»</a><a></a>Vault as an OIDC Provider (Tech Preview)</h2>\n<p>OpenID Connect (or OIDC) is an open standard that provides an identity layer on top of OAuth to verify user identity against an authorization server. The OIDC workflow typically involves a user wanting to login to a secure system. Their browser is redirected to an external OIDC identity provider, they complete login against this third-party provider, and they are routed back once they are authenticated. Vault currently supports single sign-on (SSO) with <a href=\"https://www.vaultproject.io/docs/auth/jwt/oidc_providers\">OIDC providers</a> such as Active Directory, Auth0, Google, Okta, and others.</p>\n<p>With this release, Vault can now act as an OIDC provider itself, allowing applications to leverage pre-existing Vault identities for delegating authentication and authorization into their applications. For example, <a href=\"https://www.boundaryproject.io/\">HashiCorp Boundary</a> is utilizing Vault as an OIDC provider for delegated authN. This feature has been released as a tech preview so we can gather feedback from the community before finalizing the API.</p>\n<p>For more information on Vault as an OIDC provider, please see the <a href=\"https://www.vaultproject.io/docs/secrets/identity/oidc-provider\">Vault documentation on the identity secrets engine (API)</a> and detailed <a href=\"https://learn.hashicorp.com/tutorials/vault/oidc-identity-provider\">Learn Guide</a>.</p>\n<h2><a href=\"#custom-template-format-with-transform\">»</a><a></a>Custom Template Format with Transform</h2>\n<p>Transform is a Vault Enterprise feature that lets Vault use data transformations and tokenization to protect secrets residing in untrusted or semi-trusted systems. This includes protecting data such as social security numbers, credit card numbers, and other types of compliance-regulated data. Oftentimes, data must reside within file systems or databases for performance but must be protected in case the system in which it resides is compromised. Transform is built for these kinds of use cases.</p>\n<p>With Vault 1.9, we added support for advanced encoding and decoding template customizations for data such as Social Security or credit card numbers, where you might want to use format-preserving-encryption (FPE) to preserve whitespace or dash characters. You can now use the new <code>encode_format</code> field to specify what the encoded output should look like. Here is an example of a template for encoding Social Security numbers using a regex that can handle a prefix, whitespace, or dashes:</p>\n<pre><code> vault write transform/template/us-ssn-tmpl \\\n     type=regex \\\n     pattern='(?:SSN[: ]?|ssn[: ]?)?(\\d{3})[- ]?(\\d{2})[- ]?(\\d{4})' \\\n     encode_format='$1-$2-$3' \\\n     alphabet=builtin/numeric\n</code></pre>\n<p>For more information on advanced handling with Transform, please see our <a href=\"https://www.vaultproject.io/docs/secrets/transform\">documentation on the Transform secrets engine</a> and detailed <a href=\"https://learn.hashicorp.com/tutorials/vault/transform#advanced-handling\">Learn Guide</a>.</p>\n<h2><a href=\"#transparent-data-encryption-for-microsoft-sql-server\">»</a><a></a>Transparent Data Encryption for Microsoft SQL Server</h2>\n<p>Protecting sensitive data at rest is a fundamental task for database administrators that enables many organizations to follow industry best practices and comply with regulatory requirements. <a href=\"https://docs.microsoft.com/en-us/sql/relational-databases/security/encryption/transparent-data-encryption\">Transparent Data Encryption</a> (TDE) for Microsoft SQL Server performs real-time data and log file encryption and decryption transparently to end user applications.</p>\n<p>When using TDE to protect sensitive data, it is critical to manage the keys doing the encryption and decryption or your data could be unrecoverable. These database encryption keys (DEKs), can be protected by asymmetric key encryption keys (KEKs), managed by Vault's Transit secrets engine using SQL Server's Extensible Key Management (EKM). How this works is that you download and install a Vault EKM provider that gets installed on the Microsoft SQL Server, which then enables you to protect these encryption keys using an external Vault Enterprise cluster.</p>\n<p>For more information on using Vault as an external EKM provider for SQL Server please see our <a href=\"https://www.vaultproject.io/docs/platform/mssql\">documentation</a>.</p>\n<h2><a href=\"#key-management-secrets-engine\">»</a><a></a>Key Management Secrets Engine</h2>\n<p>Many cloud providers offer a key management service (KMS), where encryption keys can be issued and stored for maintaining a root of trust. The key management secrets engine provides an API abstraction layer and offers a standardized workflow for distribution and lifecycle management of cryptographic keys in various KMS providers. It allows organizations to greatly simplify the lifecycle management of keys Vault has distributed and maintains centralized control of those keys in Vault, while still taking advantage of cryptographic capabilities native to the KMS providers.</p>\n<p>In addition to supporting both AWS KMS and Microsoft Azure Key Vault, we are happy to announce that the key management secrets engine is now also ready for production use with Google Cloud KMS. This feature lets you use Vault to manage keys in Google Cloud KMS for automating many lifecycle operations, such as creation, reading, updating, and rotating keys. This greatly simplifies the process of bringing your own keys to a cloud provider and managing the lifecycle of those keys.</p>\n<p>For more information on the key management secrets engine, please see the <a href=\"https://www.vaultproject.io/docs/secrets/key-management\">key management secrets engine documentation</a> and detailed <a href=\"https://learn.hashicorp.com/tutorials/vault/key-management-secrets-engine-gcp-cloud-kms\">Learn Guide</a>.</p>\n<h2><a href=\"#other-features\">»</a><a></a>Other Features</h2>\n<p>There are many new features in Vault 1.9 that have been developed over the course of the 1.8.x releases. You can learn more about how to use these features in detailed, hands-on Learn Guides on the <a href=\"https://learn.hashicorp.com/collections/vault/new-release\">HashiCorp Learn</a> site. We have summarized a few of the larger features here, consult the <a href=\"https://github.com/hashicorp/vault/blob/main/CHANGELOG.md\">changelog</a> for full details:</p>\n<ul>\n<li><strong>Vault Terraform provider</strong>: We upgraded the <a href=\"https://registry.terraform.io/providers/hashicorp/vault/latest/docs\">Vault Terraform provider</a> to the latest version of the <a href=\"https://www.terraform.io/docs/extend/sdkv2-intro.html\">Terraform Plugin SDKv2</a> to leverage new features.</li>\n<li><strong>Microsoft Azure secrets engine</strong>: We added a <a href=\"https://www.vaultproject.io/api-docs/secret/azure\"><code>use_microsoft_graph_api</code></a> configuration parameter for using Microsoft Graph API, since the Azure Active Directory API is being removed on <a href=\"https://docs.microsoft.com/en-us/graph/migrate-azure-ad-graph-overview\">June 30, 2022</a>.</li>\n</ul>\n<h2><a href=\"#upgrade-details\">»</a><a></a>Upgrade Details</h2>\n<p>Vault 1.9 introduces significant new functionality. As such, please review the <a href=\"https://www.vaultproject.io/docs/upgrading/upgrade-to-1.9.0\">general upgrade instructions</a> page, as well as the <a href=\"https://www.vaultproject.io/docs/deprecation\">deprecation and plans</a> page for further details.</p>\n<p>As always, we recommend upgrading and testing new releases in an isolated environment. If you experience any issues, please report them on the <a href=\"https://github.com/hashicorp/vault/issues\">Vault GitHub issue tracker</a> or post to the <a href=\"https://discuss.hashicorp.com/c/vault/30\">Vault discussion forum</a>. As a reminder, if you believe you have found a security issue in Vault, please responsibly disclose it by emailing <a href=\"mailto:security@hashicorp.com\">security@hashicorp.com</a> — do not use the public issue tracker. For more information, please consult <a href=\"https://www.hashicorp.com/security\">our security policy and our PGP key</a>.</p>\n<p>For more information about Vault Enterprise, visit <a href=\"https://www.hashicorp.com/products/vault\">hashicorp.com/products/vault</a>. You can download the open source version of Vault at <a href=\"http://vaultproject.io\">vaultproject.io</a>.</p>\n<p>We hope you enjoy HashiCorp Vault 1.9.</p>","author":"Justin Weissig","siteTitle":"HashiCorp Blog","siteHash":"219aa6310b3388f2335eba49871f4df9581f2c58eaeb5e498363b54e835b7001","entryHash":"cec481434247c2a1fb008045a36e64c110b511916645950aca062e883d4675bf","category":"Tech"}