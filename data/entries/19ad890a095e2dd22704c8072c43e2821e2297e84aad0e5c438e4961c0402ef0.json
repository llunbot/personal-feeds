{"title":"Use New Amazon EC2 M1 Mac Instances to Build & Test Apps for iPhone, iPad, Mac, Apple Watch, and Apple TV","link":"https://aws.amazon.com/blogs/aws/use-amazon-ec2-m1-mac-instances-to-build-test-macos-ios-ipados-tvos-and-watchos-apps/","date":1638463112000,"content":"<p>Last year at AWS re:Invent, <a href=\"https://aws.amazon.com/blogs/aws/new-use-mac-instances-to-build-test-macos-ios-ipados-tvos-and-watchos-apps/\">Jeff Barr wrote about the exciting availability of </a><a href=\"https://aws.amazon.com/ec2/\">Amazon Elastic Compute Cloud (Amazon EC2)</a> Mac instances. Today, we’re announcing the preview of a new EC2 M1 Mac instance.</p> \n<p>The introduction of EC2 Mac instances brought the flexibility, scalability, and cost benefits of AWS to all Apple developers. EC2 Mac instances are dedicated Mac mini computers attached through <a href=\"https://en.wikipedia.org/wiki/Thunderbolt_(interface)\">Thunderbolt</a> to the <a href=\"https://aws.amazon.com/ec2/nitro/\">AWS Nitro System,</a> which lets the Mac mini appear and behave like another EC2 instance. It connects to your <a href=\"https://aws.amazon.com/vpc/\">Amazon Virtual Private Cloud (VPC)</a>, boot from <a href=\"https://aws.amazon.com/ebs/\">Amazon Elastic Block Store (EBS)</a> volumes, and leverage EBS snapshots, security groups and other AWS services. EC2 Mac instances let you scale your build and test fleets of Macs, paying as you go. There is no hypervisor involved, and you get full bare metal performance of the underlying Mac mini. An <a href=\"https://aws.amazon.com/ec2/dedicated-hosts/\">EC2 dedicated host</a> reserves a Mac mini for your usage.</p> \n<p>The availability (in preview) of <a href=\"https://aws.amazon.com/ec2/instance-types/mac/\">EC2 M1 Mac instances</a> lets you access machines built around the Apple-designed M1 System on Chip (SoC). If you are a Mac developer and re-architecting your apps to natively support Macs with Apple silicon, you may now build and test your apps and take advantage of all the benefits of AWS. Developers building for iPhone, iPad, Apple Watch, and Apple TV will also benefit from faster builds. EC2 M1 Mac instances deliver up to 60% better price performance over the x86-based EC2 Mac instances for iPhone and Mac app build workloads.</p> \n<p>EC2 M1 Mac instances are powered by a combination of two hardware components:</p> \n<ul> \n <li>The <a href=\"https://www.apple.com/mac-mini/\">Mac mini</a>, featuring M1 SoC with 8 CPU cores, 8 GPU cores, 16 GiB of memory, and a 16 core Apple Neural Engine.</li> \n <li>The AWS Nitro System, providing up to 10 Gbps of VPC network bandwidth and 8 Gbps of EBS storage bandwidth through a high-speed Thunderbolt connection.</li> \n</ul> \n<p><span><strong>How to Get Started<br /> </strong></span>As I explained previously, when using EC2 Mac instances, there is no virtual machine involved. These are running on bare metal servers, each hosting a Mac mini. The first step, therefore, involves grabbing a dedicated server. I open the <a href=\"https://console.aws.amazon.com\">AWS Management Console</a>, navigate to the <strong>Amazon EC2</strong> section, then I select <strong>Dedicated Hosts</strong>. I select <strong>Allocate Dedicated Host</strong> to allocate a server to my AWS account.</p> \n<p><a href=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2021/12/01/2021-12-01_09-28-58.png\"><img src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2021/12/01/2021-12-01_09-28-58-850x1024.png\" /></a></p> \n<p>Alternatively, I may use the <a href=\"https://aws.amazon.com/cli/\">AWS Command Line Interface (CLI)</a>.</p> \n<pre><code>➜  ~ aws ec2 allocate-hosts                  \\\n         --instance-type mac2.metal          \\\n         --availability-zone us-east-2b      \\\n         --quantity 1 \n{\n    \"HostIds\": [\n        \"h-0fxxxxxxx90\"\n    ]\n}\n</code></pre> \n<p>Once the host is allocated, I start an EC2 instance on it. The procedure is no different from starting any EC2 instance type. I just have to ensure I select a macOS AMI version that suits my requirements. I select the <code>mac2.metal</code> instance type and select host<strong> Tenancy</strong> and the dedicated<strong> Host</strong> I just created.</p> \n<p><a href=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2021/12/02/2021-12-02_06-33-14-1.png\"><img src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2021/12/02/2021-12-02_06-33-14-1-1024x253.png\" /></a>Alternatively, I may use the <a href=\"https://aws.amazon.com/cli/\">CLI</a>.</p> \n<pre><code>➜ ~ aws ec2 run-instances                                     \\\n\t    --instance-type mac2.metal                             \\\n        --key-name my_key                                      \\\n        --placement HostId=h-0fxxxxxxx90                       \\\n        --security-group-ids sg-01000000000000032              \\\n        --image-id AWS_OR_YOUR_AMI_ID\n{\n    \"Groups\": [],\n    \"Instances\": [\n        {\n            \"AmiLaunchIndex\": 0,\n            \"ImageId\": \"ami-01xxxxbd\",\n            \"InstanceId\": \"i-08xxxxx5c\",\n            \"InstanceType\": \"mac2.metal\",\n            \"KeyName\": \"my_key\",\n            \"LaunchTime\": \"2021-11-08T16:47:39+00:00\",\n            \"Monitoring\": {\n                \"State\": \"disabled\"\n            },\n... redacted for brevity ....\n</code></pre> \n<p>When you use EC2 Mac instances for the first time, you’re likely to ask questions such as, “How do I connect through Apple Remote Desktop?” or “How do I increase the size of the APFS file system on the EBS volume?” <a href=\"https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-mac-instances.html\">The EC2 Mac documentation</a> covers the answers for you and provides examples of commands to run on macOS to perform these common tasks.</p> \n<p>I use SSH to connect to the newly launched instance as usual.</p> \n<p><a href=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2021/12/01/2021-12-01_09-44-39-1.png\"><img src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2021/12/01/2021-12-01_09-44-39-1-1024x202.png\" /></a></p> \n<p>I may <a href=\"https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-mac-instances.html#mac-instance-vnc\">enable Apple Remote Desktop and start a VNC session</a> to the EC2 instance. The <a href=\"https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-mac-instances.html\">EC2 Mac instance documentation page</a> has the details.</p> \n<p><a href=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2021/12/01/Mac2-GUI-via-VNC.png\"><img src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2021/12/01/Mac2-GUI-via-VNC-1024x761.png\" /></a></p> \n<p><span><strong>Availability and Pricing</strong></span><br /> <a href=\"https://aws.amazon.com/ec2/instance-types/mac/\">EC2 M1 Mac instances</a> are now available in preview in US East (N. Virginia) and US West (Oregon), with other AWS Regions coming at launch.</p> \n<p>Pricing metrics are similar to the previous generation of EC2 Mac instances. You are charged per hour of reservation of the dedicated host, not for the time the instance is running, and there is a minimum charge of 24 hours for reserving a dedicated host.</p> \n<p>In the two preview Regions, the on-demand price is $0.6498 per hour. You can save up to 42 percent over the on-demand price with <a href=\"https://aws.amazon.com/savingsplans/\">Savings Plans</a>. Check our <a href=\"https://aws.amazon.com/ec2/dedicated-hosts/pricing/\" target=\"_blank\">Dedicated Host on-demand pricing page</a>, as well as the <a href=\"https://aws.amazon.com/savingsplans/compute-pricing/\" target=\"_blank\">Savings Plans page</a> to learn the details.</p> \n<p>You can <a href=\"https://pages.awscloud.com/M1MacPreview.html\"><strong>sign up for the preview of EC2 Mac M1 instances</strong></a> today!</p> \n<a href=\"https://twitter.com/sebsto\">-- seb</a>","author":"Sébastien Stormacq","siteTitle":"AWS News Blog","siteHash":"6093e072e4117ec22616e844cb857d03ca62c57a411a8affc77cb5e8b6b15bf6","entryHash":"19ad890a095e2dd22704c8072c43e2821e2297e84aad0e5c438e4961c0402ef0","category":"Tech"}