{"title":"มาดูความสามารถที่น่าสนใจของ ASP.NET Core ใน .NET 9","link":"https://www.somkiat.cc/new-feature-in-dotnet-9/","date":1731732037000,"content":"<p><img width=\"150\" height=\"150\" src=\"https://www.somkiat.cc/wp-content/uploads/2024/11/Screenshot-2567-11-16-at-10.46.11-150x150.png\" alt=\"\" loading=\"lazy\" srcset=\"https://www.somkiat.cc/wp-content/uploads/2024/11/Screenshot-2567-11-16-at-10.46.11-150x150.png 150w, https://www.somkiat.cc/wp-content/uploads/2024/11/Screenshot-2567-11-16-at-10.46.11-75x75.png 75w\" /></p>\n<figure><a href=\"https://www.somkiat.cc/wp-content/uploads/2024/11/Screenshot-2567-11-16-at-10.46.11.png\"><img src=\"https://www.somkiat.cc/wp-content/uploads/2024/11/Screenshot-2567-11-16-at-10.46.11.png\" alt=\"\" width=\"701\" height=\"407\" /></a></figure>\n\n\n\n<p>ทาง <strong><a href=\"https://devblogs.microsoft.com/dotnet/announcing-dotnet-9/\" target=\"_blank\">Microsoft เพิ่งปล่อย .NET 9</a></strong> ตัวเต็มออกมา<br />ทำการเพิ่ม feature ปรับปรุง experience และ performance หลายอย่าง<br />ดังนั้นจึงทำการ download และลองใช้งานกันดูหน่อย ว่าเป็นอย่างไร<br />มาเริ่มกันเลย </p>\n\n\n\n<span></span>\n\n\n\n<p>จะใช้งาน ASP.NET Core เป็นหลัก สำหรับการพัฒนา<br />ทั้งส่วนของ Frontend และ Backend<br />ส่วนใหญ่ผมจะใช้สำหรับพัฒนา RESTFul API ฝั่ง Backend มากกว่า</p>\n\n\n\n<p><strong>ความสามารถแรกที่น่าสนใจคือ  <a href=\"https://learn.microsoft.com/en-us/aspnet/core/release-notes/aspnetcore-9.0?view=aspnetcore-9.0#static-asset-delivery-optimization\" target=\"_blank\">ปรับปรุงเรื่อง Static file</a></strong></p>\n\n\n\n<p>ช่วย optimize ขนาดของ static file เช่น HTML, CSS, JS, image ใน assets<br />โดยใน code สามารถเพิ่ม <strong>app.MapStaticAssets();</strong><br />ซึ่งเข้ามาแทนการใช้งาน app.UseStaticFiles();<br />จะทำการบีบอัด fiile ต่าง ๆ  ให้ </p>\n\n\n\n<ul>\n<li>gzip ใน development</li>\n\n\n\n<li>gzip + brotli ในการ publish</li>\n\n\n\n<li>ใส่ Etags ให้</li>\n</ul>\n\n\n\n<p><strong>ต่อมาคือ <a href=\"https://learn.microsoft.com/en-us/aspnet/core/fundamentals/openapi/using-openapi-documents?view=aspnetcore-9.0\" target=\"_blank\">Build-in OpenAPI document</a> ให้เลย</strong></p>\n\n\n\n<p>ดังนั้นมาลองใช้งานกันหน่อย</p>\n\n\n\n<p>เริ่มด้วยการติดตั้ง และ สร้าง project</p>\n\n\n\n[gist id=\"8a3a6026bc54c7dc9a3160774ad55d5c\" file=\"1.txt\"]\n\n\n\n<p>มาดู code</p>\n\n\n\n[gist id=\"8a3a6026bc54c7dc9a3160774ad55d5c\" file=\"api.cs\"]\n\n\n\n<ul>\n<li>เพิ่ม AddOpenApi มาใน service</li>\n\n\n\n<li>เพิ่ม MapOpenAPI ใน router/endpoint</li>\n</ul>\n\n\n\n<p>ทำการติดตั้ง dependency เข้ามาคือ</p>\n\n\n\n[gist id=\"8a3a6026bc54c7dc9a3160774ad55d5c\" file=\"2.txt\"]\n\n\n\n<p>ผลการทำงาน</p>\n\n\n\n[gist id=\"8a3a6026bc54c7dc9a3160774ad55d5c\" file=\"3.txt\"]\n\n\n\n<p>แต่ถ้าต้องการแสดงผลในรูปแบบ UI สวย ๆ ในระบบงานเลย<br />ต้องทำการติดตั้ง library เพิ่มเติม เช่น</p>\n\n\n\n<ul>\n<li>Swashbuckle.AspNetCore.SwaggerUi</li>\n\n\n\n<li>Scalar.AspNetCore</li>\n</ul>\n\n\n\n<p>หรือติดตั้ง command line tool อื่น ๆ เช่น SwaggerUI และ ReDoc เป็นต้น</p>\n\n\n\n<p><strong>ตัวอย่างการใช้งาน Scalar.AspNetCore</strong></p>\n\n\n\n[gist id=\"8a3a6026bc54c7dc9a3160774ad55d5c\" file=\"api2.cs\"]\n\n\n\n<p>ทำการ run และเข้าไปดูใน web browser :: <a href=\"http://localhost:5062/scalar/v1\" target=\"_blank\">http://localhost:5062/scalar/v1</a></p>\n\n\n\n<figure><a href=\"https://www.somkiat.cc/wp-content/uploads/2024/11/openapi-01.jpg\"><img src=\"https://www.somkiat.cc/wp-content/uploads/2024/11/openapi-01.jpg\" alt=\"\" width=\"589\" height=\"263\" /></a></figure>\n\n\n\n<p><strong>ในส่วนของ Authentication และ Authorization</strong></p>\n\n\n\n<p>ทำการเพิ่ม <a href=\"https://github.com/dotnet/aspnetcore/issues/51686\" target=\"_blank\">Pushed Authorization Requests (PAR)</a> เข้ามาใน OpenIdConnectHandler<br />เป็นแนวทางใหม่เพื่อปรับปรุง OAuth แบะ OIDC<br />ซึ่ง PAR สนับสนุน identity provider ดังนี้</p>\n\n\n\n<ul>\n<li>Keycloak</li>\n\n\n\n<li>Curity</li>\n\n\n\n<li>Duende IndentityServer</li>\n\n\n\n<li>Authlete</li>\n</ul>\n\n\n\n<p>ใน .NET 9 นั้นได้เพิ่ม PAR เข้าไปให้แบบ default เลย</p>\n\n\n\n[gist id=\"8a3a6026bc54c7dc9a3160774ad55d5c\" file=\"api3.cs\"]\n\n\n\n<p><strong>ยังมีความสามารถอื่น ๆ เช่น</strong></p>\n\n\n\n<ul>\n<li>HybridCache ที่ยังอยู่ใน preview version</li>\n\n\n\n<li>ปรับปรุง exception page </li>\n</ul>\n\n\n\n<figure><a href=\"https://www.somkiat.cc/wp-content/uploads/2024/11/endpoint-metadata.png\"><img src=\"https://www.somkiat.cc/wp-content/uploads/2024/11/endpoint-metadata-1024x849.png\" alt=\"\" width=\"549\" height=\"455\" /></a></figure>\n\n\n\n<p>ถ้าใครเปิดใช้งาน application metric สามารถปิดได้ใน code</p>\n\n\n\n[gist id=\"8a3a6026bc54c7dc9a3160774ad55d5c\" file=\"api4.cs\"]\n\n\n\n<p>ปิดด้วยยิงเล่นแบบเล็ก ๆ กันหน่อย</p>\n\n\n\n[gist id=\"8a3a6026bc54c7dc9a3160774ad55d5c\" file=\"4.txt\"]\n\n\n\n<p>ลอง Download มาใช้งานกันดูครับ<br />ขอให้สนุกกับการ coding</p>\n","author":"somkiat","siteTitle":"cc :: somkiat","siteHash":"3a23a5a4389e1e40c6fbb16520a8cc20df5b3591c25145ce72aaa18b19e48201","entryHash":"193498f2af5da6fa7a3be51cd5bc14f7e07ab29fc5569a18e38aeedcb4491518","category":"Thai"}