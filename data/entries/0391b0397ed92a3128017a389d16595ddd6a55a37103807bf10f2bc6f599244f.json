{"title":"New APIs in Amazon Bedrock to enhance RAG applications, now available","link":"https://aws.amazon.com/blogs/aws/new-apis-in-amazon-bedrock-to-enhance-rag-applications-now-available/","date":1733086284000,"content":"<p><a href=\"https://aws.amazon.com/bedrock/\">Amazon Bedrock</a> is a fully managed service that offers a choice of high-performing foundation models (FMs) from leading AI companies like <a href=\"https://www.ai21.com/\">AI21 Labs</a>, <a href=\"https://www.anthropic.com/\">Anthropic</a>, <a href=\"https://cohere.com/\">Cohere</a>, <a href=\"https://aws.amazon.com/bedrock/llama/\">Meta</a>, <a href=\"https://aws.amazon.com/bedrock/mistral/\">Mistral AI</a>, <a href=\"https://stability.ai/\">Stability AI</a>, and <a href=\"https://aws.amazon.com/bedrock/titan/\">Amazon</a> through a single API, along with a broad set of capabilities you need to build generative AI applications with security, privacy, and responsible AI. <a href=\"https://aws.amazon.com/bedrock/knowledge-bases/\">Amazon Bedrock Knowledge Bases</a> is a fully managed service that empowers developers to create highly accurate, low latency, secure, and customizable generative AI applications cost effectively. Amazon Bedrock Knowledge Bases connects foundation models (FMs) to a company’s internal data using <a href=\"https://docs.aws.amazon.com/bedrock/latest/userguide/kb-how-it-works.html\">Retrieval Augmented Generation (RAG)</a>. RAG helps FMs deliver more relevant, accurate, and customized responses.</p> \n<p>In this post, we detail two announcements related to Amazon Bedrock Knowledge Bases:</p> \n<ul> \n <li>Support for custom connectors and ingestion of streaming data.</li> \n <li>Support for reranking models.</li> \n</ul> \n<p><span><strong>Support for custom connectors and ingestion of streaming data</strong></span><br /> Today, we announced support for custom connectors and ingestion of streaming data in Amazon Bedrock Knowledge Bases. Developers can now efficiently and cost-effectively ingest, update, or delete data directly using a single API call, without the need to perform a full sync with the data source periodically or after every change. Customers are increasingly developing RAG-based generative AI applications for various use cases such as chatbots and enterprise search. However, they face challenges in keeping the data up-to-date in their knowledge bases so that the end users of the applications always have access to the latest information. The current process of data synchronization is time-consuming, requiring a full sync every time new data is added or removed. Customers also face challenges in integrating data from unsupported sources, such as Google Drive or Quip, into their knowledge base. Typically, to make this data available in Amazon Bedrock Knowledge Bases, they must first move it to a supported source, such as <a href=\"https://aws.amazon.com/s3/\">Amazon Simple Storage Service (Amazon S3)</a>, and then start the ingestion process. This extra step not only creates additional overhead but also introduces delays in making the data accessible for querying. Additionally, customers who want to use streaming data (for example, news feeds or Internet of Things (IoT) sensor data) face delays in real-time data availability due to the need to store the data in a supported data source before ingestion. As customers scale up their data, these inefficiencies and delays can become significant operational bottlenecks and increase costs. Keeping all these challenges in mind, it’s important to have a more efficient and cost-effective way to ingest and manage data from various sources to ensure that the knowledge base is up-to-date and available for querying in real-time. With support for custom connector and ingestion of streaming data, customers can now use direct APIs to efficiently add, check the status of, and delete data, without the need to list and sync the entire dataset.</p> \n<p><span><strong>How it works</strong></span><br /> Custom connectors and ingestion of streaming data can be accessed using the <a href=\"https://console.aws.amazon.com/bedrock/\">Amazon Bedrock console</a> or the <a href=\"https://aws.amazon.com/developer/tools/\">AWS SDK</a>.</p> \n<ol> \n <li><strong>Add Document</strong><br /> The Add Document API is used to add new files to the knowledge base without having to perform a full sync after the document has been added. Customers can add content by specifying the Amazon S3 path of the document, the text content to add as a document to the source, or as a Base64-encoded string.<p></p> <pre><code>POST /knowledgebases/knowledgeBaseId/datasources/dataSourceId/documents HTTP/1.1\nContent-type: application/json\n\n{\n   \"maxResults\": number,\n   \"nextToken\": \"string\"\n}</code></pre> </li> \n <li><strong>Delete Document</strong><br /> The Delete Document API is used to delete data from the knowledge base without needing to perform a full sync after the document has been deleted.<p></p> <pre><code>{\n    \"clientToken\": \"string\",\n    \"documentIdentifiers\": [{ // Length 1-10 elements \n        \"dataSourceType\": S3 | CUSTOM,\n        \"s3\": {\n            \"uri\": \"string\"\n        },\n        \"custom\": {\n            \"id\": \"string\"\n        }\n    }]\n}</code></pre> </li> \n <li><strong>List Document(s)<br /> </strong>The List Document API returns a list of records that match the criteria that is specified in the request parameters.<p></p> <pre><code>{\n    \"maxResults\": number,\n    \"nextToken\": \"string\"\n}</code></pre> </li> \n <li><strong>Get Document<br /> </strong>The Get Document API returns information about the document(s) that match the criteria that is specified in the request parameters.<p></p> <pre><code>{\n    \"documentIdentifiers\": [{ // Length 1-10 elements \n        \"dataSourceType\": S3 | CUSTOM,\n        \"s3\": {\n            \"uri\": \"string\"\n        },\n        \"custom\": {\n            \"id\": \"string\"\n        }\n    }]\n}</code></pre> </li> \n</ol> \n<p><span><strong>Now available</strong></span><br /> Support for custom connectors and ingestion of streaming data in Amazon Bedrock Knowledge Bases is available today in all AWS Regions where Amazon Bedrock Knowledge Bases is available. Check the <a href=\"https://docs.aws.amazon.com/bedrock/latest/userguide/knowledge-base-supported.html\">Region list</a> for details and future updates. To learn more about Amazon Bedrock Knowledge Bases, visit the <a href=\"https://aws.amazon.com/bedrock/knowledge-bases/\">Amazon Bedrock product page</a>. For pricing details, review the <a href=\"https://aws.amazon.com/bedrock/pricing/\">Amazon Bedrock pricing page</a>.</p> \n<p>Send feedback to <a href=\"https://repost.aws/tags/TAQeKlaPaNRQ2tWB6P7KrMag/amazon-bedrock\">AWS re:Post for Amazon Bedrock</a> or through your usual AWS contacts, and engage with the generative AI builder community at <a href=\"https://community.aws/generative-ai?trk=4a84f0b4-a654-4729-9e51-6d6dc54134f2&amp;sc_channel=el\">community.aws</a>.</p> \n<p><span><strong>Support for reranking models</strong></span><br /> Today we also announced the new Rerank API in Amazon Bedrock to offer developers a way to use reranking models to enhance the performance of their RAG-based applications by improving the relevance and accuracy of responses. Semantic search, supported by vector embeddings, embeds documents and queries into a semantic high-dimension vector space where texts with related meanings are nearby in the vector space and therefore semantically similar, so that it returns similar items even if they don’t share any words with the query. Semantic search is used in RAG applications because the relevance of retrieved documents to a user’s query plays a critical role in providing accurate responses and RAG applications retrieve a range of relevant documents from the vector store.</p> \n<p>However, semantic search has limitations in prioritizing the most suitable documents based on user preferences or query context especially when the user query is complex, ambiguous, or involves nuanced context. This can lead to retrieving documents that are only partially relevant to the user’s question. This leads to another challenge where proper citation and attribution of sources is not attributed to the correct sources, leading to loss of trust and transparency in the RAG-based application. To address these limitations, future RAG systems should prioritize developing robust ranking algorithms that can better understand user intent and context. Additionally, it is important to focus on improving source credibility assessment and citation practices to confirm the reliability and transparency of the generated responses.</p> \n<p>Advanced reranking models solve for these challenges by prioritizing the most relevant content from a knowledge base for a query and additional context to ensure that foundation models receive the most relevant content, which leads to more accurate and contextually appropriate responses. Reranking models may reduce response generation costs by prioritizing the information that is sent to the generation model.</p> \n<p><span><strong>How it works</strong></span><br /> At launch, we’re supporting Amazon Rerank 1.0 and Cohere Rerank 3.5 reranking models. For the walkthrough, I will use the Amazon Rerank 1.0 model, I will start by requesting access to this model.</p> \n<p><a href=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/11/27/screen1-7.png\"><img src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/11/27/screen1-7-1024x40.png\" width=\"1024\" height=\"40\" /></a><br /> Once access has been granted, I create a knowledge base using the <a href=\"https://docs.aws.amazon.com/bedrock/latest/userguide/knowledge-base-create.html\">existing Amazon Bedrock Knowledge Bases Console experience</a> (an API process is also available as an alternative). The knowledge base contains two data sources; a <em>music playlist</em>, and <em>a list of films</em>.</p> \n<p><a href=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/11/21/screen7.png\"><img loading=\"lazy\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/11/21/screen7-1024x285.png\" width=\"1024\" height=\"285\" /></a><br /> As soon as the knowledge base has been created I edit the Service Role to add the policy that contains the <code>bedrock:Rerank</code> action. The API takes the user query as the input along with the list of documents that needs to be reranked. The output will be a reranked prioritized list of documents.</p> \n<pre><code>{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"Statement1\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"bedrock:InvokeModel\"\n            ],\n            \"Resource\": [\n                \"arn:aws:bedrock:us-west-2::foundation-model/amazon.rerank-v1:0\"\n            ]\n        },\n        {\n            \"Sid\": \"Statement2\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"bedrock:Rerank\"\n            ],\n            \"Resource\": [\n                \"*\"\n            ]\n        }\n    ]\n}</code></pre> \n<p>The last step is to sync the data sources to index their contents for searching. A sync can take between a few minutes to a few hours.</p> \n<p><a href=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/11/21/screen6-2.png\"><img loading=\"lazy\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/11/21/screen6-2-1024x111.png\" width=\"1024\" height=\"111\" /></a></p> \n<p>The knowledge base is ready for use. The <code>RetrieveAndGenerate</code> API reranks the results retrieved from the vector datastore based on their relevance with the query.</p> \n<p><a href=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/11/21/screen8-1.png\"><img loading=\"lazy\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/11/21/screen8-1-1024x437.png\" width=\"1024\" height=\"437\" /></a></p> \n<p>To contrast, I ran the same query against the same data in a separate account that doesn’t have the Rerank API. The outcome is that results aren’t reranked on their relevance with the query. This could affect performance and compromise the accuracy of the responses.</p> \n<p><a href=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/11/22/screen11-1.png\"><img loading=\"lazy\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/11/22/screen11-1-1024x404.png\" width=\"1024\" height=\"404\" /></a></p> \n<p><span><strong>Now available</strong></span><br /> The Rerank API in Amazon Bedrock is available today in the following AWS Regions: US West (Oregon), Canada (Central), Europe (Frankfurt), and Asia Pacific (Tokyo). Check the <a href=\"https://docs.aws.amazon.com/bedrock/latest/userguide/knowledge-base-supported.html\">Region list</a> for details and future updates. Rerank API can be used independently to rerank documents even if you are not using Amazon Bedrock Knowledge Bases. To learn more about Amazon Bedrock Knowledge Bases, visit the <a href=\"https://aws.amazon.com/bedrock/knowledge-bases/\">Amazon Bedrock product page</a>. For pricing details, review the <a href=\"https://aws.amazon.com/bedrock/pricing/\">Amazon Bedrock pricing page</a>.</p> \n<p>Send feedback to <a href=\"https://repost.aws/tags/TAQeKlaPaNRQ2tWB6P7KrMag/amazon-bedrock\">AWS re:Post for Amazon Bedrock</a> or through your usual AWS contacts, and engage with the generative AI builder community at <a href=\"https://community.aws/generative-ai?trk=4a84f0b4-a654-4729-9e51-6d6dc54134f2&amp;sc_channel=el\">community.aws</a>.</p> \n<p>– <a href=\"https://linkedin.com/veliswa-boya\">Veliswa</a>.</p>","author":"Veliswa Boya","siteTitle":"AWS News Blog","siteHash":"6093e072e4117ec22616e844cb857d03ca62c57a411a8affc77cb5e8b6b15bf6","entryHash":"0391b0397ed92a3128017a389d16595ddd6a55a37103807bf10f2bc6f599244f","category":"Tech"}