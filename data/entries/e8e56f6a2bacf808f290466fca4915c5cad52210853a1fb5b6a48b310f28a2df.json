{"title":"Amazon SageMaker Lakehouse integrated access controls now available in Amazon Athena federated queries","link":"https://aws.amazon.com/blogs/aws/amazon-sagemaker-lakehouse-integrated-access-controls-now-available-in-amazon-athena-federated-queries/","date":1733253597000,"content":"<p>Today, we announced the next generation of <a href=\"https://aws.amazon.com/sagemaker/\">Amazon SageMaker</a>, which is a unified platform for data, analytics, and AI, bringing together widely-adopted AWS machine learning and analytics capabilities. At its core is <a href=\"https://aws.amazon.com/blogs/aws/introducing-the-next-generation-of-amazon-sagemaker-the-center-for-all-your-data-analytics-and-ai\">SageMaker Uniﬁed Studio (preview)</a>, a single data and AI development environment for data exploration, preparation and integration, big data processing, fast SQL analytics, model development and training, and generative AI application development. This announcement includes Amazon SageMaker Lakehouse, a capability that unifies data across data lakes and data warehouses, helping you build powerful analytics and artificial intelligence and machine learning (AI/ML) applications on a single copy of data.</p> \n<p>In addition to these launches, I’m happy to announce data catalog and permissions capabilities in Amazon SageMaker Lakehouse, helping you connect, discover, and manage permissions to data sources centrally.</p> \n<p>Organizations today store data across various systems to optimize for specific use cases and scale requirements. This often results in data siloed across data lakes, data warehouses, databases, and streaming services. Analysts and data scientists face challenges when trying to connect to and analyze data from these diverse sources. They must set up specialized connectors for each data source, manage multiple access policies, and often resort to copying data, leading to increased costs and potential data inconsistencies.</p> \n<p>The new capability addresses these challenges by simplifying the process of connecting to popular data sources, cataloging them, applying permissions, and making the data available for analysis through SageMaker Lakehouse and <a href=\"https://aws.amazon.com/athena\">Amazon Athena</a>. You can use the <a href=\"https://docs.aws.amazon.com/glue/latest/dg/catalog-and-crawler.html\">AWS Glue Data Catalog</a> as a single metadata store for all data sources, regardless of location. This provides a centralized view of all available data.</p> \n<p>Data source connections are created once and can be reused, so you don’t need to set up connections repeatedly. As you connect to the data sources, databases and tables are automatically cataloged and registered with <a href=\"https://console.aws.amazon.com/lakeformation/\">AWS Lake Formation</a>. Once cataloged, you grant access to those databases and tables to data analysts, so they don’t have to go through separate steps of connecting to each data source and don’t have to know built-in data source secrets. Lake Formation permissions can be used to define fine-grained access control (FGAC) policies across data lakes, data warehouses, and online transaction processing (OLTP) data sources, providing consistent enforcement when querying with Athena. Data remains in its original location, eliminating the need for costly and time-consuming data transfers or duplications. You can create or reuse existing data source connections in Data Catalog and configure <a href=\"https://docs.aws.amazon.com/athena/latest/ug/connectors-available.html\">built-in connectors</a> to multiple data sources, including <a href=\"https://aws.amazon.com/s3/\">Amazon Simple Storage Service (Amazon S3)</a>, <a href=\"https://aws.amazon.com/redshift/\">Amazon Redshift</a>, <a href=\"https://aws.amazon.com/rds/aurora/\">Amazon Aurora</a>, <a href=\"https://aws.amazon.com/dynamodb/\">Amazon DynamoDB</a> (preview), Google BigQuery, and more.</p> \n<p><span><strong>Getting started with the integration between Athena and Lake Formation<br /> </strong></span>To showcase this capability, I use a preconfigured environment that incorporates Amazon DynamoDB as a data source. The environment is set up with appropriate tables and data to effectively demonstrate the capability. I use the SageMaker Unified Studio (preview)<strong> </strong>interface for this demonstration.</p> \n<p>To begin, I go to SageMaker Unified Studio (preview) through the Amazon SageMaker domain. This is where you can create and manage projects, which serve as shared workspaces. These projects allow team members to collaborate, work with data, and develop ML models together. Creating a project automatically sets up AWS Glue Data Catalog databases, establishes a catalog for Redshift Managed Storage (RMS) data, and provisions necessary permissions.</p> \n<p>To manage projects, you can either view a comprehensive list of existing projects by selecting <strong>Browse all projects</strong>, or you can create a new project by choosing <strong>Create project</strong>. I use two existing projects: sales-group, where administrators have full access privileges to all data, and marketing-project, where analysts operate under restricted data access permissions. This setup effectively illustrates the contrast between administrative and limited user access levels.</p> \n<p><a href=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/11/27/10-LaunchMarketingIntake1280.png\"><img loading=\"lazy\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/11/27/10-LaunchMarketingIntake1280.png\" alt=\"\" width=\"1924\" height=\"878\" /></a></p> \n<p>In this step, I set up a federated catalog for the target data source, which is Amazon DynamoDB. I go to <strong>Data</strong> in the left navigation pane and choose the <strong>+</strong> (plus) sign to <strong>Add data</strong>. I choose <strong>Add connection</strong> and then I choose <strong>Next</strong>.</p> \n<p><a href=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/11/26/07-LaunchMarketingIntake1280.png\"><img loading=\"lazy\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/11/26/07-LaunchMarketingIntake1280.png\" alt=\"\" width=\"1612\" height=\"852\" /></a></p> \n<p>I choose <strong>Amazon DynamoDB </strong>and choose <strong>Next</strong>.</p> \n<p><a href=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/11/27/11-LaunchMarketingIntake1280.png\"><img loading=\"lazy\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/11/27/11-LaunchMarketingIntake1280.png\" alt=\"\" width=\"957\" height=\"972\" /></a></p> \n<p>I enter the details and choose <strong>Add data</strong>. Now, I have the Amazon DynamoDB federated catalog created in SageMaker Lakehouse. This is where your administrator gives you access using resource policies. I’ve already configured the resource policies in this environment. Now, I’ll show you how fine-grained access controls work in SageMaker Unified Studio (preview).</p> \n<p>I begin by selecting the <strong>sales-group</strong> project, which is where administrators maintain and have full access to customer data. This dataset contains fields such as zip codes, customer IDs, and phone numbers. To analyze this data, I can execute queries using <strong>Query with Athena</strong>.</p> \n<p><a href=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/11/27/12-LaunchMarketingIntake1280.png\"><img loading=\"lazy\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/11/27/12-LaunchMarketingIntake1280.png\" alt=\"\" width=\"1924\" height=\"971\" /></a></p> \n<p>Upon selecting <strong>Query with Athena</strong>, the Query Editor launches automatically, providing a workspace where I can compose and execute SQL queries against the lakehouse. This integrated query environment offers a seamless experience for data exploration and analysis.</p> \n<p><a href=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/11/27/13a-LaunchMarketingIntake1280.png\"><img loading=\"lazy\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/11/27/13a-LaunchMarketingIntake1280.png\" alt=\"\" width=\"1924\" height=\"970\" /></a></p> \n<p>In the second part, I switch to <strong>marketing-project </strong>to show what an analyst experiences when they run their queries and observe that the fine-grained access control permissions are in place and working.</p> \n<p>In the second part, I demonstrate the perspective of an analyst by switching to the <strong>marketing-project</strong> environment. This helps us verify that the fine-grained access control permissions are properly implemented and effectively restricting data access as intended. Through example queries, we can observe how analysts interact with the data while being subject to the established security controls.</p> \n<p>Using the <strong>Query with Athena</strong> option, I execute a SELECT statement on the table to verify the access controls. The results confirm that, as expected, I can only view the <strong>zipcode</strong> and <strong>cust_id</strong> columns, while the <strong>phone</strong> column remains restricted based on the configured permissions.</p> \n<p><a href=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/11/27/14-LaunchMarketingIntake1280.png\"><img loading=\"lazy\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/11/27/14-LaunchMarketingIntake1280.png\" alt=\"\" width=\"1924\" height=\"973\" /></a></p> \n<p>With these new data catalog and permissions capabilities in Amazon SageMaker Lakehouse, you can now streamline your data operations, enhance security governance, and accelerate AI/ML development while maintaining data integrity and compliance across your entire data ecosystem.</p> \n<p><span><strong>Now available</strong><br /> </span>Data catalog and permissions in Amazon SageMaker Lakehouse simplifies interactive analytics through federated query when connecting to a unified catalog and permissions with Data Catalog across multiple data sources, providing a single place to define and enforce fine-grained security policies across data lakes, data warehouses, and OLTP data sources for a high-performing query experience.</p> \n<p>You can use this capability in US East (N. Virginia), US West (Oregon), US East (Ohio), Europe (Ireland), and Asia Pacific (Tokyo) AWS Regions.</p> \n<p>To get started with this new capability, visit the <a href=\"https://docs.aws.amazon.com/sagemaker-unified-studio/latest/userguide/lakehouse.html\">Amazon SageMaker Lakehouse</a> documentation.</p> \n<p><a href=\"https://www.linkedin.com/in/esrakayabali/\">— Esra</a></p>","author":"Esra Kayabali","siteTitle":"AWS News Blog","siteHash":"6093e072e4117ec22616e844cb857d03ca62c57a411a8affc77cb5e8b6b15bf6","entryHash":"e8e56f6a2bacf808f290466fca4915c5cad52210853a1fb5b6a48b310f28a2df","category":"Tech"}