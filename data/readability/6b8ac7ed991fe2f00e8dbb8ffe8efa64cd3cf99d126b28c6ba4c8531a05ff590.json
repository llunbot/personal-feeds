{"title":"ทำความรู้จักกับ Twemproxy เพื่อการ scale Redis แบบง่าย ๆ","link":"https://www.somkiat.cc/hello-twemproxy-to-scale-redis/","date":1627915824000,"content":"<div id=\"readability-page-1\" class=\"page\"><div id=\"page\"><article><div id=\"content_box\"><header><div><p><time>August 2, 2021</time> <span><a href=\"https://www.somkiat.cc/category/architecture-2/\" rel=\"category tag\">Architecture</a>, <a href=\"https://www.somkiat.cc/category/tools/\" rel=\"category tag\">Tools</a></span></p></div></header><div><p>ปัญหาการ scale Redis บน <a href=\"https://cloud.google.com/blog/products/databases/running-redis-on-gcp-four-deployment-scenarios\" target=\"_blank\" rel=\"noreferrer noopener\">Google Cloud Memorystore for Redis</a><br>เนื่องจาก Redis ทำงานแบบ Single thread<br>ทำให้ถ้ามีการทำงานที่ช้า ๆ อาจจะส่งผลต่อการทำงานอื่น ๆ ได้<br>แต่ละ scale ด้วยการขยายเครื่อง ก็ไม่การันตีว่าจะดีขึ้น<br>หนึ่งในคำแนะนำคือ การใช้งาน Proxy มาช่วย<br>โดยตัวที่น่าสนใจคือ <strong><a href=\"https://github.com/twitter/twemproxy\" target=\"_blank\" rel=\"noreferrer noopener\">Twemproxy</a></strong><br>ซึ่งพัฒนาจาก Twitter<br>ดังนั้นจึงมาลองทำความรู้จักกันหน่อย</p><p>การทำงานแสดงดังรูป</p><figure><img src=\"https://www.somkiat.cc/wp-content/uploads/2021/08/twemproxy.png\" alt=\"\" srcset=\"https://www.somkiat.cc/wp-content/uploads/2021/08/twemproxy.png 880w, https://www.somkiat.cc/wp-content/uploads/2021/08/twemproxy-300x169.png 300w, https://www.somkiat.cc/wp-content/uploads/2021/08/twemproxy-768x432.png 768w\" sizes=\"(max-width: 880px) 100vw, 880px\"></figure><p><strong>เป้าหมายของ Twemproxy</strong></p><ul><li>Scale redis ได้ง่ายขึ้น โดยไม่ต้องทำ cluster ใด ๆ เพียงแค่ใสเพิ่ม Redis server เท่านั้น</li><li>ลดจำนวน connection ไปยัง Redis</li><li>ทำการ sharding data ให้แบบอัตโนมัติไปยัง Redis server หลาย ๆ ได้เลย โดยใช้ consistency hashing รวมทั้งใส่ค่า weight ได้</li><li>สามารถ configuration ได้ง่าย</li><li>มีค่า metric ต่าง ๆ สำหรับการ <a href=\"https://github.com/twitter/twemproxy#utils\" target=\"_blank\" rel=\"noreferrer noopener\">monitoring</a> ต่อไป ซึ่งเชื่อมต่อได้เยอะ</li><li>สนับสนุนทั้ง Redis และ Memcached</li></ul><p><strong><em>ไว้ลองใช้งานดูหน่อย</em></strong></p></div><div><p><img alt=\"\" src=\"https://secure.gravatar.com/avatar/e5cb9aad7bf4f0e43462bd51d6ff7021?s=90&amp;d=mm&amp;r=g\" srcset=\"https://secure.gravatar.com/avatar/e5cb9aad7bf4f0e43462bd51d6ff7021?s=180&amp;d=mm&amp;r=g 2x\" height=\"90\" width=\"90\"></p><h4>Article by <a href=\"https://www.facebook.com/somkiatspns\">Somkiat Puisungnoen</a></h4><p>To be Craftmanship</p></div></div></article></div></div>","author":"somkiat","siteTitle":"cc :: somkiat","siteHash":"3a23a5a4389e1e40c6fbb16520a8cc20df5b3591c25145ce72aaa18b19e48201","entryHash":"6b8ac7ed991fe2f00e8dbb8ffe8efa64cd3cf99d126b28c6ba4c8531a05ff590","category":"Thai"}