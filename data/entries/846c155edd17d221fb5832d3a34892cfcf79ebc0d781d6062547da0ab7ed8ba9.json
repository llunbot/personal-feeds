{"title":"ว่าง ๆ มาลองทำความรู้จักกับ RESP Protocol กันแบบง่าย ๆ","link":"https://www.somkiat.cc/learn-resp-protocol/","date":1734239449000,"content":"<p><img width=\"150\" height=\"150\" src=\"https://www.somkiat.cc/wp-content/uploads/2024/12/Screenshot-2567-12-15-at-12.14.08-150x150.png\" alt=\"\" loading=\"lazy\" srcset=\"https://www.somkiat.cc/wp-content/uploads/2024/12/Screenshot-2567-12-15-at-12.14.08-150x150.png 150w, https://www.somkiat.cc/wp-content/uploads/2024/12/Screenshot-2567-12-15-at-12.14.08-75x75.png 75w\" /></p>\n<figure><a href=\"https://www.somkiat.cc/wp-content/uploads/2024/12/Screenshot-2567-12-15-at-12.14.08.png\"><img src=\"https://www.somkiat.cc/wp-content/uploads/2024/12/Screenshot-2567-12-15-at-12.14.08-1024x606.png\" alt=\"\" width=\"496\" height=\"293\" /></a></figure>\n\n\n\n<p><a href=\"https://redis.io/docs/latest/develop/reference/protocol-spec/\" target=\"_blank\">RESP Protocol หรือ REdis Serialization Protocol</a><br />เป็น protocol ที่ Redis ใช้ในการติดต่อสื่อสารกัน<br />โดยมรเป้าหมายดังนี้</p>\n\n\n\n<ul>\n<li>ง่ายต่อการ implement</li>\n\n\n\n<li>ทำงานรวดเร็ว</li>\n\n\n\n<li>คนทั่วไปสามารถอ่านเข้าใจได้ง่าย</li>\n</ul>\n\n\n\n<p>โดยข้อมูลที่ serialize ได้มีหลายหลายชนิดทั้ง integer, string และ array<br />ดังนั้นเพื่อความเข้าใจ มาลองศึกษา และ เขียน code สร้างขึ้นมาเองแบบง่าย ๆ</p>\n\n\n\n<span></span>\n\n\n\n<p><strong>เริ่มด้วยรูปแบบพื้นฐานของ protocol ก่อน</strong></p>\n\n\n\n<ul>\n<li>ใช้งาน TCP  ในการติดต่อสื่อสาร</li>\n\n\n\n<li>เป็นการติดต่อสื่อสารแบบ request-response model (synchronous)</li>\n\n\n\n<li>มีรูปแบบการรับส่งข้อมูลง่าย ๆ </li>\n</ul>\n\n\n\n<p>รูปแบบการรับา่งข้อมูล เป็นดังนี้</p>\n\n\n\n<ul>\n<li><strong>*</strong> บอกจำนวนของ argument ที่ส่งมา เช่น <strong>*2</strong> คือ argument 2 ตัว เช่น $get counter เป็นต้น</li>\n\n\n\n<li>$ คือจำนวน byte ของ argument</li>\n\n\n\n<li>\\r\\n บอกการจบหรือสิ้นสุด</li>\n</ul>\n\n\n\n<p>ตัวอย่างเช่น</p>\n\n\n\n[gist id=\"76cf141dc51e69ed7d87de949d8f2826\" file=\"1.txt\"]\n\n\n\n<p><strong>มาลองเขียน code ด้วยภาษา go เพื่อสร้าง RESP server กันดีกว่า</strong></p>\n\n\n\n<p>ทำการ start TPC server ขึ้นมา <br />เพื่อรับ connection ของ client ผ่านทาง Redis-cli ปกติ<br />จากนั้นทำการ response กลับไปด้วยคำว่า OK<br />โดยมีรูปแบบคือ <strong>+OK\\r\\n</strong></p>\n\n\n\n<ul>\n<li>+ คือ type string</li>\n\n\n\n<li>- คือ error</li>\n\n\n\n<li>: คือ integer</li>\n</ul>\n\n\n\n<p>ตัวอย่าง code แบบง่าย ๆ เพื่อให้ทำงานตามที่ต้องการ</p>\n\n\n\n[gist id=\"76cf141dc51e69ed7d87de949d8f2826\" file=\"main.go\"]\n\n\n\n<p>เมื่อมีการ connect มาจาก Redis-cli จะเป็นดังนี้</p>\n\n\n\n[gist id=\"76cf141dc51e69ed7d87de949d8f2826\" file=\"2.txt\"]\n\n\n\n<p>ลองศึกษาไปทีละนิดทีละหน่อย ด้วยการเขียน code<br />ก็ทำให้เข้าใจมากขึ้นเช่นเดียวกัน<br />ลองเขียนเล่นกันดูนะครับ</p>\n","author":"somkiat","siteTitle":"cc :: somkiat","siteHash":"3a23a5a4389e1e40c6fbb16520a8cc20df5b3591c25145ce72aaa18b19e48201","entryHash":"846c155edd17d221fb5832d3a34892cfcf79ebc0d781d6062547da0ab7ed8ba9","category":"Thai"}