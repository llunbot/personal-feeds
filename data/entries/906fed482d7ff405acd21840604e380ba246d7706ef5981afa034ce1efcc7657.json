{"title":"Chrome บน Android แก้ปัญหาเลื่อนหน้าจอไม่ลื่น ตอนนี้ลื่นเท่าบน iOS แล้ว","link":"https://www.blognone.com/node/135357","date":1692408454000,"content":"<div><div><div><p>ทีมวิศวกร Chrome เล่าเบื้องหลังการแก้ปัญหา Chrome บน Android เลื่อนหน้าจอแล้วไม่ลื่นเท่ากับบน iOS ซึ่งอาการเกิดเป็นช่วงๆ ไม่เกิดขึ้นสม่ำเสมอด้วย เป็นบั๊กปริศนาที่กวนใจทีมงานมานาน จึงตั้งใจสืบสวนสาเหตุว่าเกิดจากอะไรกันแน่</p>\n<p>ทีมงานลองหาาสาเหตุหลายจุด ก่อนไปพบว่าการดักจับความเคลื่อนไหวของนิ้วบนหน้าจอ (screen displacement รูปขวา) ไม่เท่ากับความเคลื่อนไหวของนิ้วจริงๆ (finger displacement รูปซ้าย) ทำให้เมื่อนำข้อมูลนิ้วที่จับได้ไปประมวลผลจึงออกมาไม่ตรงกับนิ้วจริงๆ</p>\n<p><img alt=\"No Description\" src=\"https://www.blognone.com/sites/default/files/externals/624eb28f86258babf844784c17235e01.png\" /></p>\n<p>ทีมงานลองค้นหาสาเหตุว่าทำไมถึงเป็นอย่างนี้ เจอสาเหตุร่วมกัน 2 ข้อ</p>\n<ol>\n<li>Android ดักจับความเคลื่อนไหวด้วย C++ ระดับความแม่นยำ nanosecond แต่ Chrome ใช้ฟังก์ชันระดับ Java ความแม่นยำ millisecond จึงไม่ละเอียดเท่า</li>\n<li>วิธีการดักจับของ Android เลือกอีเวนต์การเคลื่อนไหวที่แม่นยำกว่าของ Chrome ใช้การเก็บคิว FIFO ธรรมดา จึงมีโอกาสผิดพลาดสูงกว่า โดยเฉพาะบนหน้าจอที่มีอัตรารีเฟรชสูงๆ</li>\n</ol>\n<p>ตัว API ของ Android ที่ดักจับความแม่นยำระดับ nanosecond ยังไม่เปิดให้แอพภายนอกเรียกใช้ ซึ่งจะเปลี่ยนแปลงใน Android 14 ที่กำลังจะออกปีนี้ (<a href=\"https://developer.android.com/reference/android/view/MotionEvent#getEventTimeNanos()\">getEventTimeNanos</a>) ระหว่างนี้ ทีมงานจึงพัฒนาฟิลเตอร์การดักจับอินพุตใหม่ที่แก้ปัญหาข้อ 2 ซึ่งได้ผลดีขึ้นมากแล้วเช่นกัน (ใครสนใจ <a href=\"https://drive.google.com/file/d/1KqcWNybFP7kCqBz4mx0vlVzQOqU3IJyb/view\">ดูวิดีโอสาธิตเปรียบเทียบได้</a>) การปรับปรุงนี้เริ่มใช้แล้วใน Chrome 116 แต่จะย้อนกลับไปอัพเดตให้ถึง Chrome 110 ด้วย ซึ่งจะทำให้ประสบการณ์เลื่อนหน้าจอของ Chrome บน Android เทียบเท่ากับบน iOS แล้ว</p>\n<p>ที่มา - <a href=\"https://blog.chromium.org/2023/08/smoothing-out-scrolling-experience-in.html\">Chromium Blog</a></p>\n</div></div></div><div><div>Topics: </div><div><div><a href=\"/topics/chrome\">Chrome</a></div><div><a href=\"/topics/browser\">Browser</a></div><div><a href=\"/topics/google\">Google</a></div><div><a href=\"/topics/android\">Android</a></div></div></div>","author":"mk","siteTitle":"Blognone","siteHash":"ededadcf18490b3937e7dd89ebe8c00dc129addbdf1ebe4aff1f458146693da0","entryHash":"906fed482d7ff405acd21840604e380ba246d7706ef5981afa034ce1efcc7657","category":"Thai"}