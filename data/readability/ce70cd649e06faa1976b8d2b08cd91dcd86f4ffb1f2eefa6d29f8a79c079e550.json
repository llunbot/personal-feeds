{"title":"ว่าด้วยเรื่องของ Docker Restart Policy","link":"https://www.somkiat.cc/docker-restart-policy/","date":1629212493000,"content":"<div id=\"readability-page-1\" class=\"page\"><div id=\"page\"><article><div id=\"content_box\"><header><div><p><time>August 17, 2021</time> <span><a href=\"https://www.somkiat.cc/category/dev-ops/\" rel=\"category tag\">dev-ops</a>, <a href=\"https://www.somkiat.cc/category/tools/\" rel=\"category tag\">Tools</a></span></p></div></header><div><figure><img src=\"https://www.somkiat.cc/wp-content/uploads/2021/08/docker-cheat-sheet-1024x683.png\" alt=\"\" width=\"509\" height=\"339\" srcset=\"https://www.somkiat.cc/wp-content/uploads/2021/08/docker-cheat-sheet-1024x683.png 1024w, https://www.somkiat.cc/wp-content/uploads/2021/08/docker-cheat-sheet-300x200.png 300w, https://www.somkiat.cc/wp-content/uploads/2021/08/docker-cheat-sheet-768x512.png 768w, https://www.somkiat.cc/wp-content/uploads/2021/08/docker-cheat-sheet.png 1200w\" sizes=\"(max-width: 509px) 100vw, 509px\"></figure><p>จากการแบ่งปันความรู้เรื่องพื้นฐานของ Docker ไป<br>มีคำถามที่น่าสนใจเรื่องของ <strong><a href=\"https://docs.docker.com/engine/reference/run/#restart-policies---restart\">Docker Restart Policy</a></strong><br>ที่กำหนดในการสร้าง container ทั้งใน command line และ Docker compose file<br>ว่ามันคืออะไร จึงทำการสรุปแบบคนใช้งานพื้นฐานไว้นิดหน่อย</p><p><strong>จากเอกสารของ Docker อธิบายไว้ว่า</strong></p><ul><li><strong>No</strong> คือค่า default นั่นหมายความว่า จะไม่ restart แบบอัตโนมัติเมื่อ container อยู่ในสถานะ Exit</li><li><strong>On-failure</strong> จะทำการ restart ถ้า container อยู่ในสถานะ exit พร้อมกับ exit code ไม่เท่ากับ 0 นั่นคือ exit แบบมีปัญหานนั่นเอง โดยสามารถกำหนดค่าของ max retry ได้อีกด้วย</li><li><strong>Always</strong> จะทำการ restart container เมื่ออยู่ในสถานะ exitให้เสมอ หรือทำการ restart Docker deamon แล้วก็จะ start containerให้ด้วย</li><li><strong>Unless-stopped </strong>จะเหมือน Always แต่จะไม่รวม container ที่ทำการ stop ก่อนการ restart หรือ stop Docker deamon นั่นเอง</li></ul><p>ดังนั้นลองกำหนดค่า Restart policy ให้ตรงตามที่ต้องการได้</p></div><div><p><img alt=\"\" src=\"https://secure.gravatar.com/avatar/e5cb9aad7bf4f0e43462bd51d6ff7021?s=90&amp;d=mm&amp;r=g\" srcset=\"https://secure.gravatar.com/avatar/e5cb9aad7bf4f0e43462bd51d6ff7021?s=180&amp;d=mm&amp;r=g 2x\" height=\"90\" width=\"90\"></p><h4>Article by <a href=\"https://www.facebook.com/somkiatspns\">Somkiat Puisungnoen</a></h4><p>To be Craftmanship</p></div></div></article></div></div>","author":"somkiat","siteTitle":"cc :: somkiat","siteHash":"3a23a5a4389e1e40c6fbb16520a8cc20df5b3591c25145ce72aaa18b19e48201","entryHash":"ce70cd649e06faa1976b8d2b08cd91dcd86f4ffb1f2eefa6d29f8a79c079e550","category":"Thai"}