{"title":"การทดสอบ Flutter app","link":"https://www.somkiat.cc/testing-your-flutter-app/","date":1699181844000,"content":"<p><img width=\"150\" height=\"150\" src=\"https://www.somkiat.cc/wp-content/uploads/2023/11/flutter-testing-150x150.jpeg\" loading=\"lazy\" srcset=\"https://www.somkiat.cc/wp-content/uploads/2023/11/flutter-testing-150x150.jpeg 150w, https://www.somkiat.cc/wp-content/uploads/2023/11/flutter-testing-75x75.jpeg 75w\" /></p>\n<figure><a href=\"https://www.somkiat.cc/wp-content/uploads/2023/11/flutter-testing.jpeg\"><img src=\"https://www.somkiat.cc/wp-content/uploads/2023/11/flutter-testing-1024x576.jpeg\" width=\"668\" height=\"375\" /></a></figure>\n\n\n\n<p>จากการแบ่งปันเรื่อง การทดสอบ Mobile app ด้วย Appium นั้น<br />ซึ่งก็มี Flutter app ที่มีปัญหาเยอะพอควร<br />ซึ่งอธิบายไว้ใน <a href=\"https://www.somkiat.cc/sharing-mobile-testing-with-appium/\" target=\"_blank\">blog บันทึกการแบ่งปันเรื่อง Mobile testing ด้วย Appium</a><br />แต่ก็มีคำถามว่า<br />ถ้าจะให้ทดสอบง่าย ๆ ขึ้นหน่อยทำอย่างไรได้บ้าง<br />จึงตอบไปดังนี้</p>\n\n\n\n<span></span>\n\n\n\n<p>คำตอบสั้น ๆ คือ ไม่ทดสอบแบบนี้ไง<br />เพราะว่าการใช้ Applium + Flutter driver เป็นการทดสอบแบบ external testing<br />หรือจะเรียกว่า black box หรือ gray box ก็ว่ากันไป<br />ซึ่งกว่าจะทดสอบได้นั้น ก็มีขั้นตอนที่เยอะ และ ซับซ้อน<br />แต่ก็มีข้อดีของมัน นั่นคือ เหมือนหรือคล้ายการใช้งานของผู้ใช้งานจริง ๆ นั่นเอง</p>\n\n\n\n<p>แต่ถ้าจะให้ดี น่าจะเพิ่มการทดสอบเหล่านี้เข้าไป<br />ซึ่งใน Flutter ก็อธิบายไว้คือ <strong><a href=\"https://docs.flutter.dev/testing/overview\" target=\"_blank\">Testing Flutter App</a></strong><br />โดยมีการทดสอบ 3 แบบคือ</p>\n\n\n\n<ul>\n<li>Unit test</li>\n\n\n\n<li>Widget test</li>\n\n\n\n<li>Integration test</li>\n</ul>\n\n\n\n<p>ทั้ง 3 แบบนั้น ต้องเขียน code ด้วยภาษา dart + flutter นั่นเอง<br />ซึ่งผมมองว่าเป็น internal testing หรือ white box ก็แล้วกัน<br />อาจจะไม่ค่อยสร้างความมั่นใจสักเท่าใด ในมุมมองของผู้ใช้งาน<br />แต่ผมว่าในมุมมองของนักพัฒนามันสำคัญมาก ๆ<br />เพื่อช่วยทำให้เรามั่นใจว่า App ที่เราสร้าง หรือ feature ที่เพิ่มเข้ามานั้น<br />ในแต่ละ feature ยังคงทำงานได้ตามที่เราคาดหวังไว้เสมอ<br />ก็ที่จะทำการ build app ต่อไปอีกที</p>\n\n\n\n<p><strong>โดยตัวที่ผมมักให้แต่ละคนเริ่มเขียนมากที่สุดคือ <a href=\"https://docs.flutter.dev/cookbook/testing/widget/introduction\" target=\"_blank\">Widget test</a></strong></p>\n\n\n\n<p>เพื่อช่วยให้เข้าใจการออกแบบ และ ทำงานของแต่ละ Widget <br />ก่อนที่จะนำหลาย ๆ  Widget มาประกอบ และ ทำงานร่วมกัน<br />ดังนั้น ตั้งแต่การสร้าง เมื่อเกิด event/action ใด ๆ กับ Widget <br />เราสามารถทดสอบได้หมดผ่าน <a href=\"https://api.flutter.dev/flutter/flutter_test/WidgetTester-class.html\" target=\"_blank\"><strong>WidgetTester</strong></a></p>\n\n\n\n<p>ส่วนพวก Dependency ต่าง ๆ ก็สามารถใช้งาน Mock library ได้<br />เช่น <a href=\"https://docs.flutter.dev/cookbook/testing/unit/mocking\">Mockito</a> เป็นต้น<br />อาจจะวุ่นวายหน่อยในช่วงแรก<br />แต่จะทำให้เราเข้าใจการทำงานของ Widget<br />รวมทั้งสามารถกำหนดขอบเขตการทำงานของกลุ่ม Widget ที่เราต้องการอีกด้วย<br />ไม่ใช่เขียน หรือ สร้างไปเรื่อย ๆ แล้วหวังว่าจะทำงานได้ตามที่เราต้องการ</p>\n\n\n\n<p><strong>เมื่อ Widget test ผ่านแล้ว ก็มาถึงการทดสอบแบบ <a href=\"https://github.com/flutter/flutter/tree/main/packages/integration_test\" target=\"_blank\">Integration test</a></strong></p>\n\n\n\n<p>เป็นการทดสอบแบบผ่าน device หรือ emulator/simulator เลย<br />เป็นการทดสอบในภาพรวมการทำงานของ App กันเลย<br />ดังนั้นจึงน่าจะทำให้เชื่อมั่นขึ้นมาอีก<br />แต่แน่นอนว่า ก็จะช้าลงไปอีก จึงต้องทำความเข้าใจว่า เราจะทดสอบ flow อะไรบ้าง</p>\n\n\n\n<p><strong>เน้นย้ำว่า ทั้ง 3 แบบการทดสอบนั้น จำเป็นต้องเขียน code</strong></p>\n\n\n\n<p>ดังนั้นจำเป็นต้องฝึก skill การ coding ด้วยภาษา dart และ flutter กันด้วย<br />อย่างไปกลัวว่าต้องเขียน code เพราะว่ายังไงก็หนีไม่พ้น<br />ส่วนคนที่เขียน code ก็มาเพิ่ม skill การทดสอบกันด้วย<br />น่าจะช่วยให้เราป้องกันไม่ให้เกิด bug หรือ ข้อผิดพลาดได้อย่างรวดเร็ว<br />แต่ถ้าเกิดข้อผิดพลาดแล้ว เราจะไม่ผิดซ้ำที่เดิมอีกต่อไป</p>\n","author":"somkiat","siteTitle":"cc :: somkiat","siteHash":"3a23a5a4389e1e40c6fbb16520a8cc20df5b3591c25145ce72aaa18b19e48201","entryHash":"cc37a3d525afcf9ef605f4fabebd2e6652751dc76c1fb2a4d016f085f87b8941","category":"Thai"}