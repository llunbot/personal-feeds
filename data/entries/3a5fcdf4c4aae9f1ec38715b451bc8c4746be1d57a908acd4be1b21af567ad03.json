{"title":"[Docker]ติดตั้ง Docker และควบคุมผ่าน Portainer กันครับ","link":"https://thanapon.info/docker-portainer/","date":1576588034000,"content":"<p><strong>Docker</strong></p>\n\n\n\n<p>Docker คือ Engine ตัวหนึ่งที่มีการทำงานในลักษณะจำลองสภาพแวดล้อมขึ้นมาบนเครื่องเซิร์ฟเวอร์เพื่อใช้ในการใช้งาน Service ที่ต้องการ ซึ่งจะมีการทำงานคล้ายคลึงกับ Virtual Machine เช่น VMWare, VirtualBox, XEN, KVM แต่ข้อแตกต่างที่ชัดเจนคือ Virtual Machine ที่รู้จักกันก่อนหน้านี้นั้น เป็นการจำลองทั้ง ระบบปฎิบัติการ(OS) เพื่อใช้งานและหากต้องการใช้งาน Service ใดๆ จึงทำการติดตั้งเพิ่มเติมบน OS นั้นๆ แต่สำหรับ Docker แล้วจะใช้ Container ในการจำลองสภาพแวดล้อมขึ้นมา เพื่อใช้งานสำหรับ 1 Service ที่ต้องการใช้งานเท่านั้น โดยไม่ต้องมีส่วนของ OS เข้าไปเกี่ยวข้องเหมือน Virtual Machines อื่นๆ</p>\n\n\n\n<p><strong>Docker image</strong></p>\n\n\n\n<p>Docker image เป็นเหมือนตัวต้นแบบของ Container ซึ่งภายในจะประกอบด้วย Application ต่างๆ ที่มีการติดตั้งไว้เพื่อใช้งานสำหรับ Service นั้นๆ รวมทั้งมีการตั้งค่าต่างๆ ไว้เรียบร้อยแล้วซึ่งสามารถนำมาสร้างเป็น Docker image บน Registry เพื่อนำใช้งานทั้งนี้ผู้ใช้งานสามารถยังสร้าง Docker image สำหรับใช้งานเองได้อีกด้วย</p>\n\n\n\n<p><strong>Docker container</strong></p>\n\n\n\n<p>Docker container สามารถมองได้เสมือนกล่องซึ่งนำ Docker image มาติดตั้ง เพื่อให้สามารถใช้งาน Service ที่ต้องการจาก Image นั้นๆ ได้ โดยใน Container แต่ละตัวจะมีการใช้งาน RAM, CPU, ไฟล์การตั้งค่าต่างๆเป็นของแต่ละ Container เอง</p>\n\n\n\n<div><figure><img src=\"https://miro.medium.com/max/624/1*5UVKDT0ztjYDRQA5GEylJw.png\" /></figure></div>\n\n\n\n<blockquote><p><strong>Hardware and software requirements</strong></p></blockquote>\n\n\n\n<ul><li>Operating system: Ubuntu 18.04</li><li>Docker CE Engine version 1.10 or higher</li><li>RAM: 2.00 GB</li><li>Harddisk: 3.00 GB</li><li>A static IP address</li></ul>\n\n\n\n<blockquote><p><strong>Installation</strong></p></blockquote>\n\n\n\n<p><strong>Docker Installation</strong></p>\n\n\n\n<ul><li>เริ่มต้นการติดตั้งด้วยการ update package ต่าง และติดตั้ง docker-ce</li></ul>\n\n\n\n<pre>sudo apt update</pre>\n\n\n\n<ul><li>ทำการอัพเดทและติดตั้งซอฟแวร์ที่ใช้สำหรับ Docker</li></ul>\n\n\n\n<pre>sudo apt install apt-transport-https ca-certificates curl software-properties-common</pre>\n\n\n\n<ul><li>หลังจากนั้นทำการเพิ่ม GPG key สำหรับ Docker repository.</li></ul>\n\n\n\n<pre>curl -fsSL <a href=\"https://download.docker.com/linux/ubuntu/gpg\">https://download.docker.com/linux/ubuntu/gpg</a> | sudo apt-key add -</pre>\n\n\n\n<ul><li>ทำการเพิ่ม URL สำหรับติดตั้ง Docker ไปยัง APT Source</li></ul>\n\n\n\n<pre>sudo add-apt-repository “deb [arch=amd64] <a href=\"https://download.docker.com/linux/ubuntu\">https://download.docker.com/linux/ubuntu</a> bionic stable”</pre>\n\n\n\n<ul><li>อัพเดทซอฟแวร์อีกครั้งเพื่อให้ APT source เข้าไปดึงข้อมูลจาก Docker URL</li></ul>\n\n\n\n<pre>sudo apt update</pre>\n\n\n\n<ul><li>หลังจากอัพเดทเสร็จแล้วให้ทำการติดตั้ง Docker-ce</li></ul>\n\n\n\n<pre>sudo apt install docker-ce</pre>\n\n\n\n<ul><li>เมื่อติดตั้งเสร็จให้ทำการเช็คสถานะการทำงานของ Docker ผ่านคำสั่ง</li></ul>\n\n\n\n<pre>sudo systemctl status docker</pre>\n\n\n\n<p>ซึ่งจะได้ผลลัพธ์คือ</p>\n\n\n\n<figure><img src=\"https://miro.medium.com/max/624/1*Fhkh6x_3aMXY5S_Tcj-EkQ.png\" /></figure>\n\n\n\n<p><strong>Portainer Installation</strong></p>\n\n\n\n<ul><li>หลังจากที่ติดตั้ง Docker เสร็จแล้วเราสามารถใช้คำสั่ง Docker ได้จาก Terminal ของเรา โดยการใช้งานจำเป็นต้องใช้สิทธิ์ Root ด้วยเช่นกัน</li></ul>\n\n\n\n<div><figure><img src=\"https://miro.medium.com/max/341/1*4g6vzKALFpaP_qRLLksvYw.png\" /></figure></div>\n\n\n\n<ul><li>ทำการสร้าง volume สำหรับเก็บข้อมูล portainer</li></ul>\n\n\n\n<pre>docker volume create portainer_data</pre>\n\n\n\n<ul><li>หลังจากนั้นทำการติดตั้ง portainer โดย portainer จะทำงานอยู่ที่พอร์ท 9000</li></ul>\n\n\n\n<pre>docker run -d -p 9000:9000 -p 8000:8000 — name portainer — restart always -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer</pre>\n\n\n\n<ul><li>หลังจาก portainer ได้ทำการติดตั้งลงบนเซิร์ฟเวอร์แล้วผู้ดูแลระบบสามารถเข้าผ่าน URL <a href=\"http://Server-ip:9000\">http://Server-ip:9000</a> ซึ่งเมื่อเราเข้าใช้งาน portainer ครั้งแรกระบบจะให้ตั้งค่า password สำหรับการเข้าใช้งานก่อน</li></ul>\n\n\n\n<figure><img src=\"https://miro.medium.com/max/624/1*CVaS8XaAFQr-J0KSzvWKXg.png\" /></figure>\n\n\n\n<ul><li>หลังจากที่สร้างผู้ใช้งานเสร็จแล้วระบบจำให้เราเลือกการใช้งาน portainer โดยเราสามารถมากำหนดได้ว่าใช้งานแบบ Local หรือว่า Remote ซึ่งในที่นี้เราจะกำหนดเป็นแบบ Local เพื่อใช้งานเฉพาะภายในเครื่องของเรา</li></ul>\n\n\n\n<figure><img src=\"https://miro.medium.com/max/624/1*KYfw55n6Pjzwn_34Ik1xeg.png\" /></figure>\n\n\n\n<ul><li>หลังจาก Connect เข้ากับระบบ Docker แล้วเราจะได้ Web application สำหรับควบคุม Docker</li></ul>\n\n\n\n<figure><img src=\"https://miro.medium.com/max/624/1*trWwVlHVAWRRVI6kb28MDg.png\" /></figure>\n\n\n\n<p>หลังจากนั้นเราก็สามารถเข้าใช้งาน docker ได้ง่ายๆผ่าน Portainer แล้วครับ สำหรับวันนี้ขอบคุณและสวัสดีครับ <img src=\"https://s.w.org/images/core/emoji/13.1.0/72x72/1f642.png\" /></p>\n\n\n\n<blockquote><p><a href=\"https://www.hostpacific.com/using-docker-on-centos7/\">ทำความรู้จัก Docker และการใช้งานบน CentOS 7</a></p><cite>Docker คือ engine ตัวหนึ่งที่มีการทำงานในลักษณะจำลองสภาพแวดล้อมขึ้นมาบนเครื่อง server</cite></blockquote>\n\n\n\n<blockquote><p><a href=\"https://portainer.readthedocs.io/en/latest/deployment.html\">Portainer</a></p><cite>Portainer is built to run on Docker and is really simple to deploy. Portainer deployment scenarios can be executed on any platform unless specified.</cite></blockquote>\n<p>The post <a href=\"https://thanapon.info/docker-portainer/\">[Docker]ติดตั้ง Docker และควบคุมผ่าน Portainer กันครับ</a> appeared first on <a href=\"https://thanapon.info\">Thanapon</a>.</p>","author":"thanapon.tap","siteTitle":"Thanapon","siteHash":"6a039c2f54d76e4c49227d80968f2a30de5427cc57525c047c383ea3563cde5f","entryHash":"3a5fcdf4c4aae9f1ec38715b451bc8c4746be1d57a908acd4be1b21af567ad03","category":"Thai"}