{"title":"ลองใช้งาน Structured Logging ใน Go 1.21 rc1","link":"https://www.somkiat.cc/structured-logging-in-go-1-21-rc1/","date":1687272442000,"content":"<p><img width=\"150\" height=\"150\" src=\"https://www.somkiat.cc/wp-content/uploads/2023/06/go-slog-150x150.jpeg\" alt loading=\"lazy\" srcset=\"https://www.somkiat.cc/wp-content/uploads/2023/06/go-slog-150x150.jpeg 150w, https://www.somkiat.cc/wp-content/uploads/2023/06/go-slog-75x75.jpeg 75w\" /></p>\n<figure><a href=\"https://www.somkiat.cc/wp-content/uploads/2023/06/go-slog.jpeg\"><img src=\"https://www.somkiat.cc/wp-content/uploads/2023/06/go-slog-1024x853.jpeg\" alt width=\"455\" height=\"378\" /></a></figure>\n\n\n\n<p>ก่อนนี้เคยอธิบายเรื่อง <a href=\"https://www.somkiat.cc/golang-proposal-structured-logging/\" target=\"_blank\">proposal ของ Structured Logging</a> มาแล้ว<br />ซึ่งตอนนี้ได้เพิ่มเข้ามาใน Go 1.21 ที่จะออกมาในเดือนสิงหาคมนี้<br />ดังนั้นเรามาลองใช้งานกันหน่อย ซึ่งประกอบไปด้วย package ดังนี้</p>\n\n\n\n<ul>\n<li><a href=\"https://pkg.go.dev/log/slog\" target=\"_blank\">log/slog</a></li>\n\n\n\n<li><a href=\"https://pkg.go.dev/testing/slogtest\" target=\"_blank\">testing/slogtest</a> สำหรับ validate slog handler</li>\n</ul>\n\n\n\n<p>มาเริ่มกันเลย</p>\n\n\n\n<span></span>\n\n\n\n<p><strong>ข้อมูล log message จะอยู่ในรูปแบบของ struct Record ประกอบไปด้วย</strong></p>\n\n\n\n[gist id=\"1ef073806ffff43166913f4f164f75fe\" file=\"record.go\"]\n\n\n\n<p><br /><strong>ใช้งานแบบ Text และ JSON</strong></p>\n\n\n\n[gist id=\"1ef073806ffff43166913f4f164f75fe\" file=\"demo_01.go\"]\n\n\n\n<p>สามารถจัดการข้อมูลของ log ในรูปแบบ key-value ผ่าน attribute ได้เลย<br />รวมทั้งยังสามารถจัดกลุ่มของ log ได้เช่น<br />ต้องการ log ในรูปแบบนี้</p>\n\n\n\n[gist id=\"1ef073806ffff43166913f4f164f75fe\" file=\"1.json\"]\n\n\n\n<p>สามารถเขียน code ด้วย slog ได้ดังนี้</p>\n\n\n\n[gist id=\"1ef073806ffff43166913f4f164f75fe\" file=\"demo_02.go\"]\n\n\n\n<p>ตัวอย่างของ log message ที่ได้ออกมา</p>\n\n\n\n[gist id=\"1ef073806ffff43166913f4f164f75fe\" file=\"2.txt\"]\n\n\n\n<p></p>\n\n\n\n<p><strong>Reference Websites</strong></p>\n\n\n\n<ul>\n<li><a href=\"https://www.youtube.com/watch?v=gd_Vyb5vEw0\">A consistent logging format for Go</a></li>\n\n\n\n<li><a href=\"https://tip.golang.org/doc/go1.21\" target=\"_blank\">Go 1.21 Release Notes</a></li>\n</ul>\n","author":"somkiat","siteTitle":"cc :: somkiat","siteHash":"3a23a5a4389e1e40c6fbb16520a8cc20df5b3591c25145ce72aaa18b19e48201","entryHash":"8881a10f629d96435c798f929aa15b7661d4f3b1b96c3cdf8af9cd9ccd311b3f","category":"Thai"}