{"title":"บันทึกจาก paper เรื่อง Refactoring vs Refuctoring: Advancing the state of AI-automated code improvements","link":"https://www.somkiat.cc/refactoring-vs-refuctoring-with-ai/","date":1724653173000,"content":"<p><img width=\"150\" height=\"150\" src=\"https://www.somkiat.cc/wp-content/uploads/2024/08/gen-ai-01-150x150.jpg\" loading=\"lazy\" srcset=\"https://www.somkiat.cc/wp-content/uploads/2024/08/gen-ai-01-150x150.jpg 150w, https://www.somkiat.cc/wp-content/uploads/2024/08/gen-ai-01-75x75.jpg 75w\" /></p>\n<p>นั่งอ่าน paper เรื่อง <strong><a href=\"https://codescene.com/hubfs/whitepapers/Refactoring-vs-Refuctoring-Advancing-the-state-of-AI-automated-code-improvements.pdf\" target=\"_blank\">Refactoring vs Refuctoring</a></strong> <br />กับการนำ LLM (Large Language Model) เข้ามาใช้ว่าเป็นอย่างไร ?<br />ในการ generate code และ การปรับปรุงโครงสร้างของ code (Refactoring)<br />ซึ่งใน paper นี้จะช่วยแสดงให้เห็นว่าการทำงานเป็นอย่างไร<br />มีข้อจำกัดอะไรบ้าง<br />ผลที่ได้มีความน่าเชื่อถืออย่างไร<br />มีความผิดพลาดอย่างไรบ้าง<br />มาดูกัน</p>\n\n\n\n<span></span>\n\n\n\n<p>จากการทดลองในงานจริง ๆ ใน paper นั้นบอกไว้ว่า</p>\n\n\n\n<ul>\n<li>หลังจากที่ให้ AI ทำการ refactor code แล้วนั้น มีเพียง 37% ที่ทำให้ code ไม่พัง หรือ ทำงานได้เช่นเดิม</li>\n\n\n\n<li>เมื่อ refactoring ผ่านแล้วพบว่า code ถูกปรับปรุงจริง ๆ มีความน่าเชื่อถือสูง ทั้งจากคนและเครื่องมือ ซึ่งช่วยลดงานลงไปได้เยอะมาก ๆ และลด technical debt ลงไป</li>\n</ul>\n\n\n\n<figure><a href=\"https://www.somkiat.cc/wp-content/uploads/2024/08/gen-ai-01.jpg\"><img src=\"https://www.somkiat.cc/wp-content/uploads/2024/08/gen-ai-01-1024x541.jpg\" width=\"606\" height=\"319\" /></a></figure>\n\n\n\n<p>โดย metric ที่ใช้ในการวัดคุณภาพของ code ที่ generate ออกมา<br />ใช้งาน <a href=\"https://codescene.io/docs/guides/technical/code-health.html\" target=\"_blank\">Code Health Metric ของ CodeSense</a></p>\n\n\n\n<figure><a href=\"https://www.somkiat.cc/wp-content/uploads/2024/08/code-health-concept-01-scaled.jpg\"><img src=\"https://www.somkiat.cc/wp-content/uploads/2024/08/code-health-concept-01-1024x440.jpg\" width=\"638\" height=\"274\" /></a></figure>\n\n\n\n<p><strong>ส่วน LLM ที่ใช้ประกอบไปด้วย</strong></p>\n\n\n\n<figure><a href=\"https://www.somkiat.cc/wp-content/uploads/2024/08/Screenshot-2567-08-26-at-13.06.23.png\"><img src=\"https://www.somkiat.cc/wp-content/uploads/2024/08/Screenshot-2567-08-26-at-13.06.23-1024x565.png\" width=\"646\" height=\"356\" /></a></figure>\n\n\n\n<p>ปล. ส่วน GPT-4o ยังไม่ได้ทดสอบในตอนนั้น</p>\n\n\n\n<p><strong>แน่นอนว่าในการทำงานของ LLM นั้นไม่ได้สร้างมาเพื่อความถูกต้อง</strong><br />แต่มันคือการคาดเดา หรือ ความน่าจะเป็น จากข้อมูลและความรู้ที่มีอยู่<br />จากการทดลองพบรูปแบบที่ผิด ๆ เหมือนกันดังนี้</p>\n\n\n\n<ul>\n<li>ไม่สนใจพวก branch condition ต่าง ๆ หรือ if-else ซึ่งทำให้เกิด bug ขึ้นได้ เช่นการ validate input เป็นต้น</li>\n\n\n\n<li>Invert boolean condition</li>\n\n\n\n<li>การ refactoring code ด้วยการแยกเงื่อนไขที่ซับซ้อนใน function ไปยัง function ย่อย ๆ ก่อให้เกิด bug ได้เช่น</li>\n</ul>\n\n\n\n<figure><a href=\"https://www.somkiat.cc/wp-content/uploads/2024/08/bug-01.jpg\"><img src=\"https://www.somkiat.cc/wp-content/uploads/2024/08/bug-01-1024x517.jpg\" width=\"530\" height=\"268\" /></a></figure>\n\n\n\n<p>ดังนั้นก็ต้องระมัดระวังอย่างมาก ๆ<br />เรื่องของผู้ช่วยนั้นดี แต่ความไว้ใจนั่นอาจจะไม่ ต้องตรวจสอบอยู่เสมอ<br />เครื่องมือดี แต่ต้องระมัดระวัง</p>\n\n\n\n<p><strong>อีกอย่างคือ ขั้นตอนในการตรวจสอบคุณภาพของ code ที่ refactor มานั้น</strong></p>\n\n\n\n<p>จะมีขั้นตอนดังนี้ </p>\n\n\n\n<figure><a href=\"https://www.somkiat.cc/wp-content/uploads/2024/08/code-quality-01.jpg\"><img src=\"https://www.somkiat.cc/wp-content/uploads/2024/08/code-quality-01.jpg\" width=\"417\" height=\"371\" /></a></figure>\n\n\n\n<p>เป็นอีกหนึ่ง paper ที่น่าสนใจ<br />แต่ออกมาตั้งแต่ต้นปีแล้ว หลาย ๆ อย่างปรับเปลี่ยนไปเยอะมาก ๆ<br />แต่ก็ยังสามารถนำมาเป็นแนวทางได้เช่นกัน</p>\n\n\n\n<p><a href=\"https://www.somkiat.cc/relax-with-programming/\" target=\"_blank\">Reference  เรื่อง Refuctoring</a><br /></p>\n","author":"somkiat","siteTitle":"cc :: somkiat","siteHash":"3a23a5a4389e1e40c6fbb16520a8cc20df5b3591c25145ce72aaa18b19e48201","entryHash":"0d66f3d320e4b6e107f2619786bfcfd27618500e9ab31967fcd7dd883782dc82","category":"Thai"}