{"title":"New in HCP Terraform: Linked Stacks, enhanced tags, and module lifecycle management GA","link":"https://www.hashicorp.com/blog/new-in-hcp-terraform-linked-stacks-enhanced-tags-and-module-lifecycle-management","date":1740517200000,"content":"<p>In the past few months, the HashiCorp Terraform engineering team continuously improved on our features to help platform teams simplify and streamline their IT operations, increasing developer velocity and reducing risks for their organizations. The latest HCP Terraform improvements include:</p>\n\n<ul>\n<li>Linked Stacks (Beta)</li>\n<li>Enhanced tags (Beta)</li>\n<li>Module lifecycle management (GA)</li>\n</ul>\n\n<h3>Linked Stacks</h3>\n\n<p>Managing dependencies between infrastructure components can be challenging, especially when different parts of your infrastructure have distinct lifecycles. Customers often struggle to decide how to organize their infrastructure, particularly when shared services, like networking, need to be consumed by multiple applications. Without a clear way to manage these dependencies, teams are left with manual workflows, increased complexity, and the risk of misconfigurations.</p>\n\n<p>To address this, we’re introducing linked Stacks to the Terraform Stacks beta for all HCP Terraform plans based on <a href=\"https://developer.hashicorp.com/terraform/cloud-docs/overview/estimate-hcp-terraform-cost#what-is-a-managed-resource\">resources under management (RUM)</a>. This new feature simplifies cross-Stack dependency management in HCP Terraform, allowing you to securely share outputs from one Stack (the upstream Stack) with another Stack (the downstream Stack). </p>\n\n<p>For example, you can manage a shared networking service, such as a VPC and its subnets, in a dedicated upstream Stack and link it to downstream application Stacks that consume the necessary outputs. This ensures consistent configurations across Stacks while keeping your infrastructure modular and easier to manage.</p>\n\n<p>Here’s how it works:</p>\n\n<p>Upstream Stacks publish outputs using the new <code>publish_output</code> block, making specific values (e.g., <code>vpc_id</code>, subnet IDs) available for downstream use.</p>\n<pre><code>publish_output \"vpc_id\" {\n  description = \"Description of the purpose of this output\"\n  value       = deployment.network.vpc_id\n}</code></pre><p>Downstream Stacks consume these outputs using the <code>upstream_input</code> block, referencing the published values as inputs for their deployments.</p>\n<pre><code>upstream_input \"networking_stack\" {\n  type   = \"stack\"\n  source = \"app.terraform.io/hashicorp/Default Project/my-stack\"\n}\n\ndeployment \"application\" {\n  inputs = {\n    vpc_id = upstream_input.networking_stack.vpc_id\n  }\n}</code></pre><p>When an upstream Stack’s outputs change, HCP Terraform automatically triggers updates in any downstream Stacks that depend on those outputs, ensuring your infrastructure stays in sync without manual intervention.</p>\n\n<p>Linked Stacks help platform teams reduce complexity, improve modularity, and automate cross-Stack updates, making it easier to manage infrastructure dependencies at scale. To learn more, please refer to our <a href=\"https://developer.hashicorp.com/terraform/language/stacks/deploy/pass-data\">documentation</a>.</p>\n\n<h3>Enhanced tags</h3>\n\n<p>Tags provide visibility and organization by assigning and grouping workspaces by purpose, owner, environment, or other criteria. Additionally, customers can apply <a href=\"https://www.hashicorp.com/en/sentinel\">Sentinel policies</a> dynamically based on whether or not a specific tag has been applied to a workspace. </p>\n\n<p>Although single-value tags gave customers a quick and easy way to search and filter workspaces, when it comes to more complex categorization, single-value tags are insufficient to group and manage workspaces consistently. From a control perspective, the existing tags are easily overwritable, making them highly unreliable for governance and prone to human error. This made tags unusable for strategic use cases such as chargeback, workload and ownership attribution, and automation. </p>\n\n<p>Today, we are excited to announce the public beta of the new enhanced tags for HCP Terraform. They include three primary enhancements:</p>\n\n<ul>\n<li>Based on key-value pairs instead of single values</li>\n<li>The ability to tag projects, which enables convenient workspace tagging at scale</li>\n<li>Better control over adding and removing tags</li>\n</ul>\n\n<p>These improvements will help customers do more FinOps management, automation, and governance with HCP Terraform while also fostering a more organized infrastructure management environment.</p>\n\n<p>With enhanced tags, customers can configure reserved tags that are not overwritable, except by admins. And platform teams can now tag projects, which will propagate down to all of the workspaces in that project.</p>\n\n<p>The expanded format allows customers to organize, classify, and retrieve information about their workspaces with more flexibility. For example, customers can scale up the tagging practices within HCP Terraform and use custom business dimensions to analyze, manage, and distribute the costs of infrastructure and Terraform itself.</p>\n\n<p>Refer to the following documentation to start using enhanced tags:</p>\n\n<ul>\n<li><a href=\"https://developer.hashicorp.com/terraform/cloud-docs/users-teams-organizations/organizations/manage-reserved-tags\">Create and manage reserved tag keys</a></li>\n<li><a href=\"https://developer.hashicorp.com/terraform/cloud-docs/projects/manage#define-project-tags\">Define project tags</a></li>\n<li><a href=\"https://developer.hashicorp.com/terraform/cloud-docs/workspaces/tags\">Create workspace tags</a></li>\n</ul>\n\n<h3>Module lifecycle management (GA)</h3>\n\n<p>Last October at <a href=\"https://www.hashicorp.com/blog/terraform-packer-nomad-and-waypoint-updates-help-scale-ilm-at-hashiconf-2024\">HashiConf 2024</a>, we introduced the public beta of <a href=\"https://www.youtube.com/watch?v=-dmzfQndOtk\">module lifecycle management</a>. Today, we are excited to announce that this suite of features is now generally available to help platform teams simplify the complexity of module version management and reduce its overhead while mitigating security and compliance risks.</p>\n\n<p>To recap, module lifecycle management introduces a systematic way to provide visibility through <a href=\"https://developer.hashicorp.com/terraform/cloud-docs/workspaces/explorer#save-a-view\">saved views</a>, improve communication with change requests and team notifications, and centralize lifecycle governance with module deprecation, which provides customized warnings about outdated module versions without interrupting the module lifecycle.</p>\n\n<p>To learn more about each feature, refer to our documentation on <a href=\"https://developer.hashicorp.com/terraform/cloud-docs/registry/manage-module-versions\">module deprecation</a>, <a href=\"https://developer.hashicorp.com/terraform/cloud-docs/workspaces/change-requests\">change requests</a>, and <a href=\"https://developer.hashicorp.com/terraform/cloud-docs/users-teams-organizations/teams/notifications\">team notifications</a>. Change requests, team notifications, and module deprecation are only available in the HCP Terraform Plus tier. Saved views are available for all Terraform plans based on RUM.</p>\n\n<h2>Get started with HCP Terraform</h2>\n\n<p>We’re working to ensure HCP Terraform continues to deliver improvements that help customers have better visibility and control over their environment throughout their infrastructure lifecycle. To learn more about the new features described in this post, visit the <a href=\"https://developer.hashicorp.com/terraform\">Terraform guides and documentation on HashiCorp Developer</a>. If you are new to Terraform, <a href=\"https://app.terraform.io/public/signup/account\">sign up for HCP Terraform</a> and get started for free today.</p>\n","author":"Yushuo Huang","siteTitle":"HashiCorp Blog","siteHash":"219aa6310b3388f2335eba49871f4df9581f2c58eaeb5e498363b54e835b7001","entryHash":"8b11fb36d90cb7cb5ff8e37e3a35a0fc690cdf20a0407b51434824c64bda5eba","category":"Tech"}