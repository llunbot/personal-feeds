{"title":"มาลองใช้งาน Fetch Mock สำหรับการจำลอง HTTP Request ของ fetch API","link":"https://www.somkiat.cc/fetch-mock/","date":1730260666000,"content":"<p><img width=\"150\" height=\"150\" src=\"https://www.somkiat.cc/wp-content/uploads/2024/10/fetch-mock-150x150.jpg\" loading=\"lazy\" srcset=\"https://www.somkiat.cc/wp-content/uploads/2024/10/fetch-mock-150x150.jpg 150w, https://www.somkiat.cc/wp-content/uploads/2024/10/fetch-mock-75x75.jpg 75w\" /></p>\n<figure><a href=\"https://www.somkiat.cc/wp-content/uploads/2024/10/fetch-mock.jpg\"><img src=\"https://www.somkiat.cc/wp-content/uploads/2024/10/fetch-mock.jpg\" width=\"662\" height=\"342\" /></a></figure>\n\n\n\n<p>ในระบบงานที่พัฒนาด้วยภาษา JavaScript ไม่ว่าจะผ่าน web browser หรือ Node (backend)<br />ต่างมีการเชื่อมต่อหรือดึงข้อมูลผ่าน HTTP service<br />ซึ่งหนึ่งใน library ที่ใช้งานบ่อย ๆ คือ fetch API ที่ build-in มาให้<br />โดยในการทดสอบระบบที่ทำงานกับ HTTP Service<br />ก็มี library สำหรับการจำลองมากมาย หนึ่งในนั้นคือ <strong><a href=\"https://www.wheresrhys.co.uk/fetch-mock/\" target=\"_blank\">Fetch Mock</a></strong><br />มาลองใช้งานกันดู</p>\n\n\n\n<span></span>\n\n\n\n<p>จากที่ share ไปนั้น ผมมักจะเรียกการทดสอบที่เขียน code<br />ว่าเป็น <strong>internal testing</strong> </p>\n\n\n\n<p>มาเขียน test กัน !!</p>\n\n\n\n<p><strong>เริ่มด้วยเขียน product code เพื่อดึงข้อมูล API ผ่าน fetch ดังนี้</strong></p>\n\n\n\n[gist id=\"ddec44c64db6687912559b8db6e38558\" file=\"user.js\"]\n\n\n\n<p><strong>จากนั้นทำการเขียน test case เพื่อจำลองการทำงานของ fetch API</strong></p>\n\n\n\n<p>ใน case ต่าง ๆ ดังนี้</p>\n\n\n\n<ul>\n<li>Success case</li>\n\n\n\n<li>Failure case เช่น 404 user not found</li>\n\n\n\n<li>Failure case เช่น Network error</li>\n\n\n\n<li>Failure case เช่น Network delay</li>\n</ul>\n\n\n\n<p>มาดู success case กัน</p>\n\n\n\n[gist id=\"ddec44c64db6687912559b8db6e38558\" file=\"user.test.js\"]\n\n\n\n<p>จากนั้นทำการ run ด้วย Node test และ coverage นิดหน่อย</p>\n\n\n\n[gist id=\"ddec44c64db6687912559b8db6e38558\" file=\"1.txt\"]\n\n\n\n<p>ลองใช้งานกันดูครับ<br />น่าจะช่วยให้การเขียน code และ test สนุกขึ้น</p>\n","author":"somkiat","siteTitle":"cc :: somkiat","siteHash":"3a23a5a4389e1e40c6fbb16520a8cc20df5b3591c25145ce72aaa18b19e48201","entryHash":"5ccc39cd8428eb019cb907445c3e607a5d5490b9e81bad6981d226c74e6f0661","category":"Thai"}