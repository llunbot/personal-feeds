{"title":"New Amazon CloudWatch and Amazon OpenSearch Service launch an integrated analytics experience","link":"https://aws.amazon.com/blogs/aws/new-amazon-cloudwatch-and-amazon-opensearch-service-launch-an-integrated-analytics-experience/","date":1733084992000,"content":"<p>Today, <a href=\"https://aws.amazon.com/\">Amazon Web Services (AWS)</a> announces a new integrated analytics experience and zero-ETL integration between <a href=\"https://aws.amazon.com/cloudwatch/\">Amazon CloudWatch</a> and <a href=\"https://aws.amazon.com/pm/opensearch/\">Amazon OpenSearch Service</a>. This integration simplifies log data analysis and visualization without data duplication, streamlining log management while reducing technical overhead and operational costs. CloudWatch Logs customers now have access to two additional query languages beyond <a href=\"https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/CWL_QuerySyntax.html\">CloudWatch Logs Insights QL</a>, while OpenSearch customers can query CloudWatch logs in place without creating separate extract, transform, and load (ETL) pipelines.</p> \n<p>Organizations often need different analytics capabilities for their log data. Some teams prefer CloudWatch Logs for its scalability and simplicity in centralizing logs from all their systems, applications, and <a href=\"https://aws.amazon.com/free/\">AWS services</a>. Others require OpenSearch Service for advanced analytics and visualizations. Previously, integration between these services required maintaining separate ingestion pipelines or creating ETL processes. This new integration helps customers get the best of both services by eliminating this complexity by bringing the power of OpenSearch analytics directly to CloudWatch Logs, without any data copy.</p> \n<p><a href=\"https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/WhatIsCloudWatchLogs.html\">Amazon CloudWatch Logs</a> now supports <a href=\"https://docs.aws.amazon.com/opensearch-service/latest/developerguide/ppl-support.html\">OpenSearch Piped Processing Language (PPL)</a> and OpenSearch SQL directly within the <a href=\"https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/AnalyzingLogData.html\">CloudWatch Logs Insights</a> console. You can use SQL to analyze data and correlate logs using JOIN. You can use SQL functions (such as JSON, mathematical, datetime, and string functions) for intuitive log analytics. You can also use the OpenSearch PPL to filter, aggregate, and analyze data. With a few clicks, you can access pre-built, out-of-the-box dashboards for vended logs, such as <a href=\"https://aws.amazon.com/vpc/\">Amazon Virtual Private Cloud (VPC)</a>, <a href=\"https://docs.aws.amazon.com/awscloudtrail/latest/userguide/cloudtrail-working-with-log-files.html\">AWS CloudTrail</a>, and <a href=\"https://aws.amazon.com/waf/\">AWS WAF.</a> These dashboards enable faster monitoring and troubleshooting through visualizations, such as analyzing flows over time, top talkers, megabytes, and packets transferred over time, without having to configure individual widgets or build specific queries. You can analyze VPC flows over time, identify top talkers, track network traffic metrics, monitor web request trends in AWS WAF, or analyze API activity patterns in AWS CloudTrail.</p> \n<p>Additionally, OpenSearch Service users can now analyze CloudWatch logs using OpenSearch Discover and run SQL and PPL, similar to how they analyze data in<a href=\"https://aws.amazon.com/s3/\"> Amazon Simple Storage (Amazon S3)</a>, and build indexes and create dashboards directly without any ETL operations or separate ingestion pipelines.</p> \n<p><span><strong>Let’s explore how this integration works</strong></span><br /> To demonstrate the new OpenSearch <strong>SQL</strong> and <strong>PPL</strong> query capabilities in CloudWatch, I start in the <a href=\"https://console.aws.amazon.com/cloudwatch/\">CloudWatch console</a>. In the navigation pane, I choose <strong>Logs</strong> then<strong> Logs Insights.</strong> After selecting log groups for the query, I can now use <strong>OpenSearch PPL</strong> or <strong>OpenSearch SQL</strong> query languages directly within <a href=\"https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/AnalyzingLogData.html\">CloudWatch Logs Insights</a>, with no additional setup or integration required. Using this new capability, I can write complex queries using familiar SQL syntax or OpenSearch PPL, making log analysis more intuitive and efficient. In the <strong>Query commands</strong> menu, you can find <a href=\"https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/CWL_QuerySyntax-examples.html\">sample queries</a> to help you get started.</p> \n<p><a href=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/11/26/image_1-2.png\"><img loading=\"lazy\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/11/26/image_1-2-1024x459.png\" width=\"1024\" height=\"459\" /></a></p> \n<p>This example demonstrates how to use SQL JOIN to combine data from two log groups: pet adoptions and pet availability. By filtering for specific customer IDs, you can analyze related log records and trace IDs for troubleshooting purposes.</p> \n<p>One of the powerful features of this integration for CloudWatch Logs customers is the ability to create pre-built dashboards for Amazon VPC Flows, AWS CloudTrail and AWS WAF logs. Let’s explore this by creating a dashboard for AWS WAF logs. In the <strong>Analyze with OpenSearch</strong> tab, I choose <strong>Settings</strong> and follow the steps.</p> \n<p><a href=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/11/21/setting.png\"><img loading=\"lazy\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/11/21/setting-1024x213.png\" width=\"1024\" height=\"213\" /></a></p> \n<p>After a few minutes, my integration is ready and I go to <strong>Create an OpenSearch dashboard</strong>. In the options <strong>Select automatic dashboard type</strong>, I choose AWS WAF logs.</p> \n<p><a href=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/11/21/opensearch_select.png\"><img loading=\"lazy\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/11/21/opensearch_select-1024x392.png\" width=\"1024\" height=\"392\" /></a></p> \n<p>In the Dashboard data configuration tab, I can select <strong>Data synchronization frequency</strong> to occur every 15 minutes. I<strong> Select the log groups</strong> and <strong>View log samples of the selected log groups</strong>. I finish by choosing <strong>Create a dashboard</strong>.</p> \n<p>After creating my dashboard, I can explore my logs. The AWS WAF logs dashboard provides comprehensive visibility into web application firewall metrics and events, with automatically configured visualizations that help you monitor and analyze security patterns.</p> \n<p><a href=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/11/21/Screenshot-369-waf.jpg\"><img loading=\"lazy\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/11/21/Screenshot-369-waf-1024x928.jpg\" width=\"1024\" height=\"928\" /></a></p> \n<p>Similarly, the CloudTrail dashboard offers deep insights into API activity across your AWS environment. It’s useful for monitoring API activity, auditing actions, and identifying potential security or compliance issues. <a href=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/11/21/Screenshot-367-cloudtrail.jpg\"><img loading=\"lazy\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/11/21/Screenshot-367-cloudtrail-1024x928.jpg\" width=\"1024\" height=\"928\" /></a></p> \n<p>The VPC Flow Logs dashboard provides detailed visualization of key metrics from your logs for network traffic analysis. You can analyze network traffic, detect unusual patterns, and monitor resource usage. The dashboard currently supports only VPC v2 fields (default format). Custom formatted fields are not supported.</p> \n<p><a href=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/11/21/Screenshot-366-vpc.jpg\"><img loading=\"lazy\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/11/21/Screenshot-366-vpc-1024x928.jpg\" width=\"1024\" height=\"928\" /></a></p> \n<p>With zero-ETL to access CloudWatch data from OpenSearch Services, I also can build an OpenSearch dashboard from the <a href=\"https://console.aws.amazon.com/aos/home\">OpenSearch Service console</a> without having to build and maintain an ETL process. For this, I go to <strong>Central management</strong>, then I select the new <strong>Connected data sources</strong> menu, click choose <strong>Connect</strong> to create a new connected data source, and choose <strong>CloudWatch Logs</strong>.</p> \n<p><a href=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/11/26/connected_data.png\"><img loading=\"lazy\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/11/26/connected_data-1024x293.png\" width=\"1024\" height=\"293\" /></a></p> \n<p>In the next step, I name my data source and choose to <strong>Create a new role</strong>, which must have the necessary permissions to execute actions on OpenSearch Service. You can see them in the <strong>Sample custom policy</strong>.</p> \n<p><img loading=\"lazy\" src=\"https://d2908q01vomqb2.cloudfront.net/artifacts/AWSNews/2024/AWSNEWS-1365-Role.gif\" alt=\"https://d2908q01vomqb2.cloudfront.net/artifacts/AWSNews/2024/AWSNEWS-1365-Role.gif\" width=\"864\" height=\"578\" /></p> \n<p>In the <b>Set up OpenSearch</b> step, configure a OpenSearch data connection for CloudWatch Logs by selecting <b>Create a new collection</b>. As part of setting up the CloudWatch Logs source, a new OpenSearch Service serverless collection and OpenSearch UI application is created to store the indexed views and provide a user interface to analyze your CloudWatch Logs data. I create a new collection, name it, and conﬁgure the OpenSearch application and workspace within the application. After setting the <b>Data retention</b> days, I choose <b>Next</b> and ﬁnish with<b> Review and connect</b>.</p> \n<p><a href=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/11/26/opensearch_sep_up.png\"><img loading=\"lazy\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/11/26/opensearch_sep_up-1024x659.png\" width=\"1024\" height=\"659\" /></a></p> \n<p>When the integration with CloudWatch is ready, I can choose between <strong>Explore logs without indexing data</strong> which will take me to a querying interface in Discover or <strong>Explore vended logs</strong> by creating a dashboard for Amazon VPC Flows, CloudTrail and AWS WAF logs.</p> \n<p><a href=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/11/26/explore_logs-1.png\"><img loading=\"lazy\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/11/26/explore_logs-1-1024x205.png\" width=\"1024\" height=\"205\" /></a></p> \n<p>After I select <strong>Explore logs</strong>, OpenSearch UI takes me to Discover in the application workspace I created during the data source setup. In <strong>Discover</strong>, I select the data picker and choose <strong>View all available data </strong>to access my CloudWatch Logs data source and log groups.</p> \n<p><a href=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/11/26/discover_data.png\"><img loading=\"lazy\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/11/26/discover_data-1024x572.png\" width=\"1024\" height=\"572\" /></a></p> \n<p>After I select the log groups, I can analyze my CloudWatch logs using OpenSearch SQL and PPL directly in Discover, without having to switch between applications.</p> \n<p><a href=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/11/19/image-38-1.png\"><img loading=\"lazy\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/11/19/image-38-1-1024x559.png\" width=\"1024\" height=\"559\" /></a></p> \n<p>To create a dashboard, I return to the <strong><span>Connected data sources</span></strong> overview page on the console. From there, I select <strong>Create dashboard</strong>, which allows me to visually analyze my CloudWatch data without having to define queries or build visualizations, as I previously did in the CloudWatch console</p> \n<p><a href=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/11/26/explore_1.png\"><img loading=\"lazy\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/11/26/explore_1-1024x205.png\" width=\"1024\" height=\"205\" /></a></p> \n<p>After the dashboard is created, I navigate to <strong>OpenSearch </strong>resources where I can see the newly created indexes being populated with data in my <strong>Collection</strong>. After I have the data, I can go to the dashboard with the data from the CloudWatch logs that I selected in the configuration, and as more data comes in, it will be displayed in near real-time on the OpenSearch dashboard.</p> \n<p><img loading=\"lazy\" src=\"https://d2908q01vomqb2.cloudfront.net/artifacts/AWSNews/2024/AWSNEWS-1365-dashboard.gif\" width=\"1294\" height=\"514\" /></p> \n<p>With this zero-ETL integration you can ingest data directly into OpenSearch, using its powerful query capabilities and visualization features while maintaining data consistency and reducing operational overhead.</p> \n<p><strong><span>Integration Highlights </span></strong><br /> For CloudWatch customers:</p> \n<ul> \n <li><strong>Query capabilities</strong> – Streamline log investigation by using OpenSearch SQL and PPL queries directly within the CloudWatch Logs Insights console.</li> \n <li><strong>Analytics features</strong> – With a few clicks, access pre-built, out-of-the-box dashboards for vended logs, such as VPC, AWS WAF, and CloudTrail logs. These dashboards enable faster monitoring and troubleshooting through visualizations for analyzing flows over time, top talkers, megabytes, and packets transferred over time, without having to configure individual widgets or build specific queries.</li> \n <li><strong>Getting started for CloudWatch users</strong> – Configure integration from CloudWatch Logs to OpenSearch Service. For more information refer to the <a href=\"https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/AnalyzingLogData.html\">Amazon CloudWatch Logs query capabilities</a> and <a href=\"https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs//CloudWatchLogs-OpenSearch-Dashboards.html\">Amazon CloudWatch Logs vended dashboard</a> documentation.</li> \n</ul> \n<p>For OpenSearch Service customers:</p> \n<ul> \n <li><strong>Zero-ETL integration</strong> – Access and analyze CloudWatch data directly from OpenSearch Service without building or maintaining ETL processes. This integration eliminates separate ingestion pipelines while reducing storage costs and operational overhead through simplified data management and zero data duplication.</li> \n <li><strong>Getting started for OpenSearch users</strong> – Create a data connection selecting CloudWatch as a data source from OpenSearch Service. For more information, refer to the <a href=\"https://docs.aws.amazon.com/opensearch-service/latest/developerguide/direct-query-s3.html\">Amazon OpenSearch Service Developer Guide</a>.</li> \n</ul> \n<p><strong><span>Regional availability and pricing</span></strong><br /> This integration is now available in <a href=\"https://docs.aws.amazon.com/glossary/latest/reference/glos-chap.html#region\">AWS Regions</a> where <a href=\"https://docs.aws.amazon.com/opensearch-service/latest/developerguide/direct-query-s3.html#direct-query-cloudwatch-logs-regions-table\">Amazon OpenSearch Service direct query</a> is available. For pricing details and free trial information, you can visit the <a href=\"https://aws.amazon.com/cloudwatch/pricing/\">Amazon CloudWatch Pricing</a> and <a href=\"https://aws.amazon.com/opensearch-service/pricing/\">Amazon OpenSearch Service Pricing</a> pages.</p> \n<p>PS: Writing a blog post at AWS is always a team effort, even when you see only one name under the post title. In this case, I want to thank <a href=\"https://www.linkedin.com/in/joshua-bright-9411022/\">Joshua Brigh</a>t, <a href=\"https://www.linkedin.com/in/ashok-s/\">Ashok Swaminathan</a>, <a href=\"https://www.linkedin.com/in/abeethabala/\">Abeetha Bala</a>, <a href=\"https://www.linkedin.com/in/calvin-weng-5474ba86/\">Calvin Weng</a>, and <a href=\"https://www.linkedin.com/in/ronil-prasad-4231672/\">Ronil Prasad</a> for their generous help with screenshots, technical guidance, and sharing their expertise in both services, which made this integration overview possible and comprehensive.</p> \n<p>— <a href=\"https://www.linkedin.com/in/lizfue/\">Eli</a></p>","author":"Elizabeth Fuentes","siteTitle":"AWS News Blog","siteHash":"6093e072e4117ec22616e844cb857d03ca62c57a411a8affc77cb5e8b6b15bf6","entryHash":"1dd90b47f512045338e9a9e33c91c0bcb90a3158440e3acc6564d8d64aac6ae6","category":"Tech"}