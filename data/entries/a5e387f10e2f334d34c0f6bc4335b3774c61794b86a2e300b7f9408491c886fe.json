{"title":"Add wide gamut P3 and alpha transparency to your color picker in HTML","link":"https://webkit.org/blog/16900/p3-and-alpha-color-pickers/","date":1746622821000,"content":"<p>Since the beginning, the web was always interactive. HTML form controls let users create content, upload information and interact with other users and services. Several years ago, our team worked to add the <a href=\"https://webkit.org/blog/15054/an-html-switch-control/\">switch control</a> to the HTML web standard, and ship in Safari 17.4. Interoperable support for <a href=\"https://webkit.org/blog/15190/implementing-vertical-form-controls/\">form controls in vertical writing modes</a> was improved in all browsers as part of the Interop Project, which we also shipped in Safari 17.4.</p>\n<p>The color picker was originally added to the web in HTML5. Jeremy Keith wrote about it 15 years ago in his book <em><a href=\"https://html5forwebdesigners.com/\">HTML5 for Web Designers</a></em>:</p>\n<blockquote><p>\n  Perhaps the most ambitious widget replacement in HTML5 is the <code>color</code> input type. This accepts values in the familiar Hexadecimal format: <code>#000000</code> for black, <code>#FFFFFF</code> for white… The plan is for browsers to implement native color pickers like the ones in just about every other application on your computer. So far, no browsers have done this [UPDATE: now they have] but when they do, it will be, like, totally awesome.\n</p></blockquote>\n<p>Back in 2010, the sRGB color space was the only colorspace for the web. And hexadecimal colors were the dominant way to write a color. Since then, a lot has changed. First, CSS3 brought <code>rgba()</code> to the web, allowing colors with a translucent alpha channel for the first time.</p>\n<p>Display technology continued to evolve by leaps and bounds. Apple started shipping P3 wide-gamut displays with the 2015 iMac Retina, the 2016 iPad Pro and iPhone 7. Also in 2016, WebKit shipped support for display-P3 in CSS using the <code>color()</code> function. Fast-forward to 2023… thanks to the Interop Project, all browsers finally supported multiple tools in CSS for defining wide gamut colors and alpha transparency, including <code>lab()</code>, <code>oklab()</code>, <code>lch()</code>, and <code>oklch()</code>, as well as <code>color()</code>.</p>\n<p>But what about the color picker? Can the user of a website or web app choose a color in P3 or a color with alpha transparency? Until recently, the answer was no. The web’s color picker has been stuck in the early 2010s.</p>\n<h2>The new color picker</h2>\n<p>We wanted to bring the color picker into the era of wide-gamut color and alpha transparency. So in 2024, we collaborated with the WHATWG to <a href=\"https://html.spec.whatwg.org/multipage/input.html#color-state-(type=color)\">add a more powerful color picker to the HTML</a> web standard. Now <code>&lt;input type=\"color\"&gt;</code> has two new optional attributes — the <code>alpha</code> and <code>colorspace</code>. We shipped support for both in <a href=\"https://webkit.org/blog/16574/webkit-features-in-safari-18-4/#html\">Safari 18.4</a>.</p>\n<p>Switching your color pickers to support the P3 color gamut and alpha transparency is easy.</p>\n<pre><code><span>&lt;<span>label</span>&gt;</span>\n  Select a color:\n  <span>&lt;<span>input</span> <span>type</span>=<span>\"color\"</span> <span>colorspace</span>=<span>\"display-p3\"</span> <span>alpha</span>&gt;</span>\n<span>&lt;/<span>label</span>&gt;</span>\n</code></pre>\n<p>When you include the <code>colorspace=\"display-p3\"</code> attribute, the browser now allows the user to choose from the full range of colors in the P3 color gamut. Without this attribute, HTML’s default kicks in, and the chosen color will be limited to 8-bits and sRGB. (If you want to explicitly constrain the user’s choice to the more limited set of colors, you can do so with <code>colorspace=\"limited-srgb\"</code>.)</p>\n<figure><img loading=\"lazy\" src=\"https://webkit.org/wp-content/uploads/p3-alpha-colorpicker-light-scaled.png\" alt=\"iPhone showing a color picker. Three sliders provide options for red, green, blue. The Display P3 Hex Color number is in an editable box. And there's a slider for opacity. \" width=\"2560\" height=\"1437\" srcset=\"https://webkit.org/wp-content/uploads/p3-alpha-colorpicker-light-scaled.png 2560w, https://webkit.org/wp-content/uploads/p3-alpha-colorpicker-light-300x168.png 300w, https://webkit.org/wp-content/uploads/p3-alpha-colorpicker-light-1024x575.png 1024w, https://webkit.org/wp-content/uploads/p3-alpha-colorpicker-light-768x431.png 768w, https://webkit.org/wp-content/uploads/p3-alpha-colorpicker-light-1536x862.png 1536w, https://webkit.org/wp-content/uploads/p3-alpha-colorpicker-light-2048x1149.png 2048w\" /><figcaption>Try out the new wide-gamut P3 color picker with support for selecting opacity in Safari 18.4</figcaption></figure>\n<p>When you include the new <code>alpha</code> attribute, the color picker suddenly includes a slider (or other similar interface) to allow the user to choose from a range of alpha transparency. How the control looks and how it’s labeled depends on the operating system. In Safari on iOS, you can see a slider labeled “Opacity”.</p>\n<p>Safari 18.4 is the first browser to add support <a href=\"https://caniuse.com/mdn-html_elements_input_colorspace\">for <code>colorspace</code></a> and <a href=\"https://caniuse.com/mdn-html_elements_input_alpha\">for <code>alpha</code></a> to the color picker. You can start using these attributes today, even before many users have a browser with support. Older browsers will simply fallback to displaying the options they allowed previously — sRGB without any opacity. You can rely on the elegance of HTML’s built-in nature of progressive enhancement. It works for <code>input type=\"color\" colorspace=\"display-P3\" alpha</code> just the same as it does when you use <code>input type=\"checkbox\" switch</code> to create a switch control on the web. WebKit is still the only browser engine with support for the <a href=\"https://webkit.org/blog/15054/an-html-switch-control/\">switch control</a>, but you can still use it on websites today, since it will fallback to a checkbox in browsers without support.</p>\n<p>Ever since the color picker was added to HTML, you’ve been able to optionally include a <code>value</code> attribute for <code>input type =\"color\"</code>. It changes the initially-selected color from the default of black to whatever you’d like. Previously, the <code>value</code> attribute only accepted hexadecimal colors. Now, with this change, you can use any of the many ways to define colors. Here are a few examples:</p>\n<pre><code><span>&lt;<span>input</span> <span>type</span>=<span>\"color\"</span> <span>value</span>=<span>\"papayawhip\"</span>&gt;</span>\n<span>&lt;<span>input</span> <span>type</span>=<span>\"color\"</span> <span>value</span>=<span>\"oklab(59% 0.1 0.1 / 0.5)\"</span> <span>colorspace</span>=<span>\"display-p3\"</span> <span>alpha</span>&gt;</span>\n<span>&lt;<span>input</span> <span>type</span>=<span>\"color\"</span> <span>value</span>=<span>\"color(display-p3 0.3737 0.2103 0.5791)\"</span> <span>colorspace</span>=<span>\"display-p3\"</span>&gt;</span>\n</code></pre>\n<p>In browsers without support, defining the default <code>value</code> with a new option for declaring a color will simply fallback to black.</p>\n<h3>We’d love to hear from you</h3>\n<p>We have more ideas for further enhancing <code>&lt;input type=color&gt;</code> , but we’d love to know what you think to help guide which direction we should go. What else do you need from HTML’s color picker? What should we tackle next?</p>\n<p>You can share your thoughts with us on social media, Anne van Kesteren on <a href=\"https://bsky.app/profile/annevk.nl\">Bluesky</a> or Jen Simmons on <a href=\"https://bsky.app/profile/jensimmons.bsky.social\">Bluesky</a> / <a href=\"https://front-end.social/@jensimmons\">Mastodon</a>. You can also follow Saron Yitbarek on <a href=\"https://bsky.app/profile/saron.bsky.social\">BlueSky</a>, and Jon Davis on <a href=\"https://bsky.app/profile/jondavis.bsky.social\">Bluesky</a> / <a href=\"https://mastodon.social/@jondavis\">Mastodon</a>.</p>","author":"","siteTitle":"Blog – WebKit","siteHash":"7f8dbea0b8f53db2e11a2faa08c6dca9954c01638d09a2ce585b77a60d10f7a1","entryHash":"a5e387f10e2f334d34c0f6bc4335b3774c61794b86a2e300b7f9408491c886fe","category":"Tech"}