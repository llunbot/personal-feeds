{"title":"Tip :: ใช้งาน Asynchronous logging ใน Java","link":"https://www.somkiat.cc/asynchronous-logging-in-java/","date":1708396860000,"content":"<p><img width=\"150\" height=\"150\" src=\"https://www.somkiat.cc/wp-content/uploads/2024/02/async-logging-150x150.png\" loading=\"lazy\" srcset=\"https://www.somkiat.cc/wp-content/uploads/2024/02/async-logging-150x150.png 150w, https://www.somkiat.cc/wp-content/uploads/2024/02/async-logging-75x75.png 75w\" /></p>\n<figure><a href=\"https://www.somkiat.cc/wp-content/uploads/2024/02/async-logging.png\"><img src=\"https://www.somkiat.cc/wp-content/uploads/2024/02/async-logging.png\" width=\"555\" height=\"317\" /></a></figure>\n\n\n\n<p>หนึ่งในปัญหาต่อเรื่อง performance ของระบบงาน<br />คือการเขียน log ของระบบงานลง file system !!<br />ซึ่งพบว่า ถ้าเปลี่ยนมาใช้การเขียน log แบบ Asynchronous จะดีกว่า Synchronous<br />เป็นเรื่องเล็ก ๆ ที่อาจจะส่งผลเยอะเช่นกัน<br />ดังนั้นลองมาปรับเปลี่ยนกันดู</p>\n\n\n\n<span></span>\n\n\n\n<p>โดยตัวอย่างเป็นการ config ใน Log4j นั่นเอง</p>\n\n\n\n[gist id=\"3a5919006d87c78453e6f0fb78045365\" file=\"1.xml\"]\n\n\n\n<p>จากการทดสอบนั้น performance ดีขึ้น 50% กันเลย<br />รวมทั้งลดการใช้งาน memory ลงไป<br />ที่สำคัญไม่ไป block การทำงานบน main thread อีกด้วย</p>\n\n\n\n<p>โดยใน Log4j นั้นจะใช้งาน <a href=\"http://lmax-exchange.github.io/disruptor/\">Disruptor</a> สำหรับ Asynchronous log<br />ดังนั้นเพิ่ม library ใน project ด้วย</p>\n\n\n\n[gist id=\"3a5919006d87c78453e6f0fb78045365\" file=\"pom.xml\"]\n\n\n\n<p><strong>แต่ปัญหาที่ตามมาคือ</strong></p>\n\n\n\n<ul>\n<li>การ config ที่เยอะขึ้น รวมทั้งเปลี่ยนแนวคิดด้วย</li>\n\n\n\n<li>ลำดับของ log จะไม่สามารถควบคุมได้ ดังนั้นจะส่งผลต่อการนำ log ไปประมวลผลอื่น ๆ ต่อไป</li>\n</ul>\n\n\n\n<p><strong>Reference Websites</strong></p>\n\n\n\n<p><a href=\"https://medium.com/@knowledge.cafe/async-logging-the-speed-boost-your-java-apps-d9d161ad1fe4\">https://medium.com/@knowledge.cafe/async-logging-the-speed-boost-your-java-apps-d9d161ad1fe4</a></p>\n","author":"somkiat","siteTitle":"cc :: somkiat","siteHash":"3a23a5a4389e1e40c6fbb16520a8cc20df5b3591c25145ce72aaa18b19e48201","entryHash":"02f78b27a3b9b8f694d697a7564097c6cf363f707c0f96eefacf49881bab4c68","category":"Thai"}