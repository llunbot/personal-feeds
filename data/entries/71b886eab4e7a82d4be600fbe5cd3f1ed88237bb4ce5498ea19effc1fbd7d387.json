{"title":"มาลองใช้งาน MCP Toolbox for Databases จาก Google กัน","link":"https://www.somkiat.cc/mcp-toolbox-for-databases/","date":1745590539000,"content":"<p><img width=\"150\" height=\"150\" src=\"https://www.somkiat.cc/wp-content/uploads/2025/04/mcp-toolbox-01-150x150.jpg\" alt=\"\" loading=\"lazy\" srcset=\"https://www.somkiat.cc/wp-content/uploads/2025/04/mcp-toolbox-01-150x150.jpg 150w, https://www.somkiat.cc/wp-content/uploads/2025/04/mcp-toolbox-01-75x75.jpg 75w\" /></p>\n<figure><a href=\"https://www.somkiat.cc/wp-content/uploads/2025/04/mcp-toolbox-01.jpg\"><img src=\"https://www.somkiat.cc/wp-content/uploads/2025/04/mcp-toolbox-01-1024x524.jpg\" alt=\"\" width=\"600\" height=\"306\" /></a></figure>\n\n\n\n<p>ทาง Google ปล่อย <strong><a href=\"https://cloud.google.com/blog/products/ai-machine-learning/mcp-toolbox-for-databases-now-supports-model-context-protocol/\" target=\"_blank\">MCP Toolbox for Databases</a></strong> ออกมา<br />ช่วยทำให้สามารถสร้าง MCP server สำหรับการเข้าถึง database ต่าง ๆ ได้ง่ายขึ้น<br />โดยผ่านสิ่งที่เรียกว่า MCP Toolbox<br />สามารถเชื่อมต่อ database ต่าง ๆ ได้มากมาย รวมทั้ง database ใน google cloud ด้วย<br />ซึ่งจะเรียกว่า <strong><a href=\"https://googleapis.github.io/genai-toolbox/resources/sources/\" target=\"_blank\">source</a></strong><br />และสามารถเขียน code ได้ทั้ง</p>\n\n\n\n<ul>\n<li>google genai</li>\n\n\n\n<li>ADK (Agent Development Kit)</li>\n\n\n\n<li>Langchain</li>\n\n\n\n<li>Llamaindex</li>\n</ul>\n\n\n\n<p>เพื่อให้เข้าใชมาลองใช้งานกันดีกว่า</p>\n\n\n\n<span></span>\n\n\n\n<p><strong>ก่อนที่จะใช้งานมาดูส่วนประกอบที่ต้องใช้งานกันก่อน</strong></p>\n\n\n\n<ul>\n<li><strong>Database</strong> ที่จะใช้งานคือ PostgreSQL ให้ทำการสร้าง database, table, data ให้ครบ</li>\n\n\n\n<li><strong>MCP Toolbox</strong> ต้องทำการ config ว่า source ของ database และ tools ว่าจะทำอะไรได้บ้างกับ source</li>\n\n\n\n<li>เขียน code เป็น MCP client เพื่อใช้งาน โดยในส่วนนี้ผมจะใช้ Langchain</li>\n</ul>\n\n\n\n<p>มาเริ่มกันเลย</p>\n\n\n\n<p><strong>ขั้นตอนที่ 1 สร้าง PostgreSQL database</strong></p>\n\n\n\n<p>โดยสร้างผ่าน docker ไปเลย เพราะว่าง่ายดี<br />มีการสร้าง table และ data เอาไว้ทดสอบดังนี้</p>\n\n\n\n[gist id=\"46bc4eaa983919fdd9e55e103f873eab\" file=\"init.sql\"]\n\n\n\n<p><strong>ขั้นตอนที่ 2 ทำการ config MCP Toolbox</strong></p>\n\n\n\n<p>ทำการ config ทั้ง source และ tools ดังนี้<br />โดยกำหนดให้ tools มี operation 2 เรื่องคือ</p>\n\n\n\n<ul>\n<li>ดึงข้อมูลทั้งหมด (อย่าไปทำแบบนี้นะครับ พังได้ง่าย ๆ)</li>\n\n\n\n<li>ดึงข้อมูลด้วยการกรองข้อมูลจากราคา โดยให้ส่ง operation มาได้ด้วย</li>\n</ul>\n\n\n\n[gist id=\"46bc4eaa983919fdd9e55e103f873eab\" file=\"tools.yaml\"]\n\n\n\n<p><strong>ขั้นตอนที่ 3 เมื่อทุกอย่างเรียบร้อยก็ทำการ start Database และ MCP Toolbox  ด้วย Docker ไปเลย</strong></p>\n\n\n\n<p>เขียน password ไปในไฟล์ compose.yml แบบนี้ไม่ดีนะครับ อย่าทำจริง !!</p>\n\n\n\n[gist id=\"46bc4eaa983919fdd9e55e103f873eab\" file=\"compose.yml\"]\n\n\n\n<p>จากนั้นทำการ run ได้เลย</p>\n\n\n\n[gist id=\"46bc4eaa983919fdd9e55e103f873eab\" file=\"1.txt\"]\n\n\n\n<p>สามารถตรวจสอบการทำงานส่วนนี้ผ่าน <a href=\"https://modelcontextprotocol.io/docs/tools/inspector\">MCP Inspector</a> ก็ได้</p>\n\n\n\n<p><strong>ขั้นตอนที่ 4 เขียน code แบบง่าย ๆ ด้วย Python + Langchain สำหรับสร้าง Client หรือ ระบบเพื่อใช้งาน</strong></p>\n\n\n\n<p>ทำงานร่วมกัน OpenAI<br />โดยมีการถามดังนี้</p>\n\n\n\n<ul>\n<li>Count all products</li>\n\n\n\n<li>List all products</li>\n\n\n\n<li>Products with price less than 30</li>\n\n\n\n<li>Products with price more than 30</li>\n</ul>\n\n\n\n<p>สามารถเขียน code ง่าย ๆ ได้ดังนี้</p>\n\n\n\n[gist id=\"46bc4eaa983919fdd9e55e103f873eab\" file=\"demo.py\"]\n\n\n\n<p>ผลการ run สำหรับแต่ละคำถามเป็นดังนี้<br />ดูสิว่า ตรงใจไหม ?</p>\n\n\n\n[gist id=\"46bc4eaa983919fdd9e55e103f873eab\" file=\"2.txt\"]\n\n\n\n<p>เพียงเท่านี้ก็สามารถใช้งาน MCP Toolbox <br />เพื่อเชื่อมต่อ PostgreSQL database แบบง่าย ๆ ได้แล้ว<br />ขอให้สนุกกับการ coding ครับ</p>\n","author":"somkiat","siteTitle":"cc :: somkiat","siteHash":"3a23a5a4389e1e40c6fbb16520a8cc20df5b3591c25145ce72aaa18b19e48201","entryHash":"71b886eab4e7a82d4be600fbe5cd3f1ed88237bb4ce5498ea19effc1fbd7d387","category":"Thai"}