{"title":"A Guide To Modern CSS Colors","link":"https://smashingmagazine.com/2021/11/guide-modern-css-colors/","date":1637164800000,"content":"<p>There’s more to color on the web than meets the eye, and it’s about to get a lot more interesting! Today, we’ll take a look at the best ways to use colors in a design system, and what we can expect from our colors in the not-too-distant future.</p>\nWell-Known Color Values\n<p>There are many different ways to define colors in CSS. <a href=\"https://css-tricks.com/snippets/css/named-colors-and-hex-equivalents/\">CSS named colors</a> are one of the simplest ways to color an element:</p>\n<pre><code>.my-element {\n  background-color: red;\n}\n</code></pre>\n\n<p>These are very limited, and rarely fit the designs we are building! We could also use color hex (hexadecimal) values. This code gives our element a red background color:</p>\n<pre><code>.my-element {\n  background-color: #ff0000;\n}\n</code></pre>\n\n<p>Unless you’re a color expert, hex values are very difficult to read. It’s unlikely you would be able to guess the color of an element by reading the hex value. When building a website we might be given a hex color value by a designer, but if they asked us to make it, say 20% darker, we would have a hard time doing that by adjusting the hex value, without a visual guide or color picker.</p>\n<h3>RGB</h3>\n<p>RGB (red, green, blue) notation is an alternative way of writing colors, giving us access to the same range of colors as hex values, in a much more readable form. We have an <code>rgb()</code> function in CSS for this. Colors on the web are additive, meaning the higher the proportion of red, green and blue, the lighter the resulting color will be. If we only use the red channel, the result is red:</p>\n<pre><code>.my-element {\n  background-color: rgb(255, 0, 0);\n}\n</code></pre>\n\n<p>Setting the red, green and blue channels to the highest value will result in white:</p>\n<pre><code>.my-element {\n  background-color: rgb(255, 255, 255);\n}\n</code></pre>\n\n<p>We can also add an alpha channel (for transparency), by using the <code>rgba()</code> function:</p>\n<pre><code>.my-element {\n  background-color: rgba(255, 0, 0, 0.5); // transparency of 50%\n}\n\n.my-element {\n  background-color: rgba(255, 0, 0, 1); // fully opaque\n}\n</code></pre>\n\n<p><code>rgb()</code> and <code>rgba()</code> allow us to “mix” colors in our code to some extent, but the results can be somewhat unpredictable.</p>\n<h3>HSL</h3>\n<p>More recently, we have been able to use HSL (hue, saturation, lightness) values, with the <code>hsl()</code> and <code>hsla()</code> color functions. As a developer, these are far more intuitive when it comes to adjusting color values. For example, we can get darker and lighter variants of the same color by adjusting the <code>lightness</code> parameter:</p>\n<pre><code>.my-element {\n  background-color: hsl(0deg, 100%, 20%); // dark red\n}\n\n.my-element {\n  background-color: hsl(0deg, 100%, 50%); // medium red\n}\n\n.my-element {\n  background-color: hsl(0deg, 100%, 80%); // light red\n}\n</code></pre>\n\n<p><img src=\"https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/a6d3545f-7d8b-497a-99be-6f4bb8704b64/1-modern-css-color.png\" /></p>\n<p>The <code>hue</code> parameter represents the position on a color wheel, and can be any value between <code>0</code> and <code>360deg</code>. The function also accepts turn units (e.g. <code>0.5turn</code>), and unitless values.</p>\n<p>The following are all valid:</p>\n<pre><code>.my-element {\n  background-color: hsl(180deg, 50%, 50%);\n}\n\n.my-element {\n  background-color: hsl(0.5turn, 50%, 50%);\n}\n\n.my-element {\n  background-color: hsl(180, 50%, 50%);\n}\n</code></pre>\n\n<p><strong>Tip</strong>: Holding down SHIFT and clicking the color swatch in the inspector in Chrome and Firefox dev tools will toggle the color value between hex, RGB and HSL!</p>\n<p><code>hsl()</code> and <code>hsla()</code> lend themselves well to manipulation with custom properties, as we’ll see shortly.</p>\n<h3><code>currentColor</code></h3>\n<p>The <code>currentColor</code> keyword is worth a mention as another way of setting a color on an element that’s been around for a while. It effectively allows us to use the current text color of an element as a variable. It’s pretty limited when compared with custom properties, but it’s often used for setting the fill color of SVG icons, to ensure they match the text color of their parent. <a href=\"https://css-tricks.com/cascading-svg-fill-color/\">Read about it here</a>.</p>\nModern Color Syntax\n<p>The <a href=\"https://www.w3.org/TR/css-color-4\">CSS Color Module Level 4</a> provides us with a more convenient syntax for our color functions, which is <a href=\"https://caniuse.com/?search=space-separated\">widely supported in browsers</a>. We no longer need the values to be comma-separated, and the <code>rgb()</code> and <code>hsl()</code> functions can take an optional alpha parameter, separated with a forward slash:</p>\n<pre><code>.my-element {\n  /* optional alpha value gives us 50% opacity */\n  background-color: hsl(0 100% 50% / 0.5);\n}\n\n.my-element {\n  /* With no alpha value the background is fully opaque*/\n  background-color: hsl(0 100% 50%);\n}\n</code></pre>\n\nNew CSS Color Functions\n<h3>HWB</h3>\n<p>HWB stands for hue, whiteness and blackness. Like HSL, the hue can be anywhere within a range of 0 to 360. The other two arguments control how much white or black is mixed into that hue, up to 100% (which would result in a totally white or totally black color). If equal amounts of white and black are mixed in, the color becomes increasingly gray. We can think of this as being similar to mixing paint. It could be especially useful for creating monochrome color palettes</p>\n<p><img src=\"https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/536ab898-2bb4-4c42-a9f1-e46bf1da7f63/2-modern-css-color.png\" /></p>\n<p>Try it out with <a href=\"https://codepen.io/smashingmag/pen/xxLmOgV\">this demo</a> (works in Safari only):</p>\n<p><img src=\"https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/da33544f-aab5-4fc3-81d9-d3e5f75442d4/3-modern-css-color.png\" /></p>\n<p><img src=\"https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/71cf899c-c146-484e-bb1a-5a26e9e7c55d/4-modern-css-color.png\" /></p>\n<p>Why do we need LAB and LCH when we have HSL? One reason is that using LAB or LCH, gives us access to a much larger range of colors. LCH and LAB are designed to give us access to the entire spectrum of human vision. Furthermore, HSL and RGB have a few shortcomings: they are not perceptually uniform and, in HSL, increasing or decreasing the lightness has quite a different effect depending on the hue.</p>\n<p>In <a href=\"https://codepen.io/smashingmag/pen/yLoGJXd\">this demo</a>, we can see a stark contrast between LCH and HSL by hitting the grayscale toggle. For the HSL hue and saturation strips, there are clear differences in the perceptual lightness of each square, even though the “lightness” component of the HSL function is the same! Meanwhile, the chroma and hue strips on the LCH side have an almost-uniform perceptual lightness.</p>\n<p><img src=\"https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/4253d9b2-46d7-4b10-9e1a-b5f3ac6cea1c/5-modern-css-color.png\" /></p>\n<p>We can also see a big difference when using LCH color for gradients. Both these gradients start and end with the same color (with LCH values converted to the HSL equivalents using <a href=\"http://colormine.org/convert/lch-to-hsl\">this converter</a>). But the LCH gradient goes through vibrant shades of blue and purple in the middle, whereas the HSL gradient looks muddier and washed-out by comparison.</p>\n<p><img src=\"https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/72ba74de-3574-4301-ab9c-03b37c52acf6/6-modern-css-color.png\" /></p>\n<ul>\n<li><a href=\"https://codepen.io/smashingmag/pen/VwzqjzW\">See the demo →</a></li>\n</ul>\n<p>LAB and LCH, while perhaps being syntactically a little less intuitive, behave in a way that makes more sense to the human eye. In her article, <a href=\"https://lea.verou.me/2020/04/lch-colors-in-css-what-why-and-how/\">LCH color in CSS: what, why, and how?</a>, Lea Verou explains in detail the advantages of LCH color. She also built this <a href=\"https://css.land/lch/\">LCH color picker</a>.</p>\n<p>As with other color functions, <code>hwb()</code>, <code>lab()</code> and <code>lch()</code> can also take an optional alpha parameter.</p>\n<pre><code>.my-element {\n  background-color: lch(80% 240 50 / 0.5); // Resulting color has 50% opacity\n}\n</code></pre>\n\n\n\nBrowser Support And Color Spaces\n<p><code>hwb()</code>, <code>lab()</code> and <code>lch()</code> are currently only supported in Safari. It’s possible to start using them straight away by providing a fallback for non-supporting browsers. Browsers that don’t support the color function will simple ignore the second rule:</p>\n<pre><code>.my-element {\n  background-color: lch(55% 102 360);\n\n  /* LCH color converted to RGB using Lea Verou’s tool: https://css.land/lch/ */\n  background-color: rgb(98.38% 0% 53.33%);\n}\n</code></pre>\n\n<p>If other styles depend on newer color functions being supported, we could use a feature query:</p>\n<pre><code>.my-element {\n  display: none;\n}\n\n/* Only display this element if the browser supports lch() */\n@supports (background-color: lch(55% 102 360)) {\n  .my-element {\n    display: block;\n    background-color: lch(55% 102 360);\n  }\n}\n</code></pre>\n\n<p>It’s worth noting, as Lea explains in her article, that although modern screens are capable of displaying colors beyond RGB, most browsers currently only support colors within the sRGB color space. In the <a href=\"https://codepen.io/smashingmag/pen/KKvbMXY\">LAB color demo</a> you might notice that moving the sliders beyond a certain point doesn’t actually affect the color, even in Safari where <code>lab()</code> and <code>lch()</code> are supported. Using values outside of the sRGB range will only have an effect when hardware and browsers advance sufficiently.</p>\n<p>Safari now supports the <code>color()</code> function, which enables us to display colors in the P3 space, but these are limited to RGB colors for now, and don’t yet give us all the advantages of LAB and LCH.</p>\n<pre><code>.my-element {\n  background: rgb(98.38% 0% 53.33%); // bright pink\n  background: color(display-p3 0.947 0 0.5295); // equivalent in P3 color space\n}\n</code></pre>\n\n<p><strong>Recommended Reading</strong>: <em>“<a href=\"https://webkit.org/blog/10042/wide-gamut-color-in-css-with-display-p3/\">Wide Gamut Color in CSS with Display-P3</a>” by Nikita Vasilyev</em></p>\nAccessibility\n<p>Once they are widely supported, perhaps LAB and LCH can help us choose more accessible color combinations. Foreground text should have the same contrast ratio with background colors with different hue or chroma values, as long as their lightness value remains the same. That’s certainly not the case at the moment with HSL colors.</p>\nColor Management\n<p>A wider range of color functions means we have more options when it comes to managing colors in our application. Often we require several variants of a given color in our design system, ranging from dark to light.</p>\n<h3>Custom Properties</h3>\n<p>CSS custom properties allow us to store values for reuse in our stylesheets. As they allow partial property values, they can be especially useful for managing and manipulating color values. HSL lends itself particularly well to custom properties, due to its intuitiveness. In the previous demo, I’m using them to adjust the hue for each segment of the color strip by calculating a <code>--hue</code> value based on the element’s index (defined in another custom property). </p>\n<pre><code>li {\n  --hue: calc(var(--i) * (360 / 10));\n  background: hsl(var(--hue, 0) 50% 45%);\n}\n</code></pre>\n\n<p>We can also do things like calculate complementary colors (colors from opposite sides of the color wheel). Plenty has been written about this, so I won’t cover old ground here, but if you’re curious then Sara Soueidan’s article on <a href=\"https://www.sarasoueidan.com/blog/hex-rgb-to-hsl/\">color management with HSL</a> is a great place to start. </p>\n<h3>Migrating From Hex/RGB To HSL</h3>\n<p>RGB colors might serve your needs up to a point, but if you need the flexibility to be able to derive new shades from your base color palette then you might be better off switching to HSL (or LCH, once supported). I would recommend embracing custom properties for this.</p>\n<p><strong>Note</strong>: <em>There are plenty of online resources for converting hex or RGB values to HSL (here’s <a href=\"https://www.w3docs.com/tools/color-rgb\">one example</a>).</em></p>\n<p>Perhaps you have colors stored as Sass variables:</p>\n<pre><code>$primary: rgb(141 66 245);\n</code></pre>\n\n<p>When converting to HSL, we can assign custom properties for the hue, saturation and lightness values. This makes it easy to create darker or lighter, more or less saturated variants of the original color.</p>\n<pre><code>:root {\n  --h: 265;\n  --s: 70%;\n  --l: 50%;\n\n  --primary: hsl(var(--h) var(--s) var(--l));\n  --primaryDark: hsl(var(--h) var(--s) 35%);\n  --primaryLight: hsl(var(--h) var(--s) 75%);\n}\n</code></pre>\n\n<p>HSL can be incredibly useful for creating color schemes, as detailed in the article  <a href=\"https://web.dev/building-a-color-scheme/\">Building a Color Scheme</a> by Adam Argyle. In the article he creates light, dark and dim color schemes, using a brand color as a base. I like this approach because it allows for some fine-grained control over the color variant (for example, decreasing the saturation for colors in the “dark” scheme), but still retains the big advantage of custom properties: updating the brand color in just one place will be carried through to all the color schemes, so it could potentially save us a lot of work in the future.</p>\n<h3>Sass Color Functions</h3>\n<p>When it comes to mixing and adjusting colors, Sass has provided <a href=\"https://sass-lang.com/documentation/modules/color\">color functions</a> to enable us to do just this for many years. We can saturate or desaturate, lighten or darken, even mix two colors together. These work great in some cases, but they have some limitations: firstly, we can only use them at compile-time, not for manipulating colors live in the browser. Secondly, they are limited to RGB and HSL, so they suffer from the same issues of perceptual uniformity, as we can see in <a href=\"https://codepen.io/smashingmag/pen/abyPZVZ\">this demo</a>, where a color is increasingly desaturated yet appears increasingly lighter when converted to grayscale.</p>\n<p><img src=\"https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/ad752292-91a6-4289-b31b-784776b86a06/7-modern-css-color.png\" /></p>\n<p>To ensure that the lightness remains uniform, we could use custom properties with LCH in a similar way to HSL above.</p>\n<pre><code>li {\n  --hue: calc(var(--i) * (360 / 10));\n  background: lch(50% 45 var(--hue, 0));\n}\n</code></pre>\n\nColor Mixing And Manipulation\n<h3>Color Mixing</h3>\n<p>One thing CSS doesn’t <em>yet</em> allow us to do is mix colors in the browser. That’s all about to change: the <a href=\"https://www.w3.org/TR/css-color-5/#color-mix\">Level 5 CSS Color Specification</a> (working draft) contains proposals for color mixing functions that sound rather promising. The first is the <code>color-mix()</code> function, which mixes two colors much like Sass’s <code>mix()</code> function. But <code>color-mix()</code> in CSS allows us to specify a color space, and uses the LCH by default, with superior mixing as a result. The colors don’t have to be LCH when passed in as arguments either, but the interpolation will use the specified color space. We can specify how much of each color to mix, similar to gradient stops:</p>\n<pre><code>.my-element {\n  /* equal amounts of red and blue */\n  background-color: color-mix(in lch, red, blue);\n}\n\n.my-element {\n  /* 30% red, 70% blue */\n  background-color: color-mix(in lch, red 30%, blue);\n}\n</code></pre>\n\n<h3>Color Contrast And Accessibility</h3>\n<p><code>color-contrast()</code> is another proposed function, which really does have huge implications for picking accessible colors. In fact, it’s designed with accessibility in mind first and foremost. It permits the browser to pick the most appropriate value from a list, by comparing it with another color. We can even specify the desired contrast ratio to ensure our color schemes meet WCAG guidelines. Colors are evaluated from left to right, and the browser picks the first color from the list that meets the desired ratio. If no colors meet the ratio, the chosen color will be the one with the highest contrast.</p>\n<pre><code>.my-element {\n  color: wheat;\n  background-color: color-contrast(wheat vs bisque, darkgoldenrod, olive, sienna, darkgreen, maroon to AA);\n}\n</code></pre>\n\n<p>Because this isn’t supported in any browsers right now, I’ve borrowed this example directly from the spec. when the browser evaluates the expression the resulting color will be <code>darkgreen</code>, as it is the first one that meets the AA contrast ratio when compared to <code>wheat</code>, the color of the text.</p>\n<h3>Browser Support</h3>\n<p>The Level 5 Color Specification is currently in Working Draft, meaning no browsers yet support the <code>color-contrast()</code> and <code>color-mix()</code> functions and their syntax is subject to change. But it certainly looks like a bright future for color on the web!</p>\nEnvironmental Impact Of Colors\n<p>Did you know that your chosen color palette can have an impact on how much energy your website uses? On OLED screens (which account for most modern TVs and laptops), darker colors will use significantly less energy than light colors — with white using the most energy, and black the least. According to Tom Greenwood, author of <a href=\"https://abookapart.com/products/sustainable-web-design\">Sustainable Web Design</a>, blue is also more energy-intensive than colors in the red and green areas of the spectrum. To reduce the environmental impact of your applications, consider a darker color scheme, using less blue, or enabling a dark-mode option for your users. As an added bonus, a more environmentally friendly choice of colors can also reduce the impact on the battery life of mobile devices.</p>\nTools\n<ul>\n<li><a href=\"https://codepen.io/robdimarzo/full/xxZgKOR\">Hexplorer</a>, Rob DiMarzo<br /><em>Learn to understand hex colors with this interactive visualization.</em></li>\n<li><a href=\"https://css.land/lch/\">LCH color picker</a>, Lea Verou and Chris Lilley<br /><em>Get LCH colors and their RGB counterparts.</em></li>\n<li><a href=\"https://www.w3docs.com/tools/color-hwb\">HWB color picker</a><br /><em>Visualize HWB colors and convert to HSL, RGB and hex.</em></li>\n<li><a href=\"https://github.com/5t3ph/a11y-color-tokens\">Ally Color Tokens</a>, Stephanie Eckles<br /><em>An accessible color token generator.</em></li>\n</ul>\nResources\n<ul>\n<li>“<a href=\"https://css-tricks.com/nerds-guide-color-web/\">A Nerd’s Guide To Color On The Web</a>,” Sarah Drasner, CSS-Tricks</li>\n<li>“<a href=\"https://lea.verou.me/2020/04/lch-colors-in-css-what-why-and-how/\">LCH Colors In CSS: What, Why, And How?</a>,” Lea Verou</li>\n<li>“<a href=\"https://css-tricks.com/the-best-color-functions-in-css/\">The Best Color Functions In CSS?</a>,” Chris Coyier, CSS-Tricks</li>\n<li>“<a href=\"https://web.dev/building-a-color-scheme/\">Building A Color Scheme</a>,” Adam Argyle, Web.dev</li>\n<li>“<a href=\"https://www.smashingmagazine.com/2021/07/hsl-colors-css/\">Using HSL Colors In CSS</a>,” Ahmad Shaheed, Smashing Magazine</li>\n<li>“<a href=\"https://www.sarasoueidan.com/blog/hex-rgb-to-hsl/\">On Switching From Hex And RGB To HSL</a>,” Sara Soueidan</li>\n<li>“<a href=\"https://webkit.org/blog/6682/improving-color-on-the-web/\">Improving Color On The Web</a>,” Dean Jackson, Webkit Blog</li>\n</ul>","author":"","siteTitle":"Articles on Smashing Magazine — For Web Designers And Developers","siteHash":"ab069ca35bf300e9db0da36f49701f66485a5b0d2db0471dfeee07cef6204939","entryHash":"b75ca503f944077e3886f4c8a573ab6c2e19ffc2a956b2370601301b46ff10d5","category":"Tech"}