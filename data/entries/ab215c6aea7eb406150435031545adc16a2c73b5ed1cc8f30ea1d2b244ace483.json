{"title":"Tips :: Playwright ทำการ run test ที่มีการเปลี่ยนแปลงเท่านั้น","link":"https://www.somkiat.cc/playwright-run-only-changed/","date":1735561453000,"content":"<p><img width=\"150\" height=\"150\" src=\"https://www.somkiat.cc/wp-content/uploads/2024/12/playwright-tips-150x150.png\" alt=\"\" loading=\"lazy\" srcset=\"https://www.somkiat.cc/wp-content/uploads/2024/12/playwright-tips-150x150.png 150w, https://www.somkiat.cc/wp-content/uploads/2024/12/playwright-tips-75x75.png 75w\" /></p>\n<figure><a href=\"https://www.somkiat.cc/wp-content/uploads/2024/12/playwright-tips.png\"><img src=\"https://www.somkiat.cc/wp-content/uploads/2024/12/playwright-tips.png\" alt=\"\" width=\"556\" height=\"344\" /></a></figure>\n\n\n\n<p><strong>คำถาม</strong> ใน Playwright นั้น ถ้าเราต้องการ run test case เฉพาะที่เปลี่ยนแปลงเท่านั้น<br />จะต้อง run อย่างไรบ้าง ?<br /><strong>คำตอบมี 2 แบบคือ</strong></p>\n\n\n\n<ul>\n<li>แบบที่ 1 ใช้ watch mode ใน Playwright UI mode</li>\n\n\n\n<li>แบบที่ 2 ใช้ผ่าน CLI ด้วย option --only-changed</li>\n</ul>\n\n\n\n<span></span>\n\n\n\n<p>ในแบบแรกใช้ผ่าน Playwright UI Mode ไม่น่ามีอะไร<br />แต่แบบที่สอง ใช้งานผ่าน CLI​ <br />ซึ่งน่าจะใช้งานบ่อยได้การ run ทั้งหมด หรือใน pipeline ของระบบ CI/CD<br />ปกติจะใช้งานด้วยคำสั่ง</p>\n\n\n\n[code]\n$npx playwright test\n[/code]\n\n\n\n<p>แต่ถ้าเราต้องการ run เฉพาะ test case ที่ทำการเปลี่ยนแปลงเท่านั้น<br />โดยใน Playwright จะทำการตรวจสอบผ่าน git commit นั่นเอง<br />ด้วยคำสั่ง</p>\n\n\n\n[code]\n$npx playwright test --only-changed\n[/code]\n\n\n\n<p>จะทำการตรวจสอบการเปลี่ยนแปลงปัจจุบันกับตำแหน่ง HEAD ใน git บนเครื่องเรานั่นเอง</p>\n\n\n\n<p>ถ้าเราทำงานแบบ feature branch แล้วต้องทำการ merge ไปยัง main branch เสมอ<br />ก่อนการ merge เราต้องทำการ run test ใน branch ของเราก่อนเสมอ<br />จะทำการ run ด้วยคำสั่ง</p>\n\n\n\n[code]\n$npx playwright test --only-changed=main\n[/code]\n\n\n\n<p>หรือนำเอาการ run test ไปใส่ใน pre-commit ก็ได้<br />จะได้ run test ทุก ๆ ครั้งที่ commit ได้เลย<br />และ run เฉพาะ test case ที่มีการเปลี่ยนแปลงเท่านั้น</p>\n\n\n\n<p><strong>เพิ่มเติมกับการ run เฉพาะ test case ที่ failure จากการ run ครั้งล่าสุดด้วย --last-failed</strong><br /></p>\n\n\n\n<p>ลองใช้งานกันดู สะดวกสบายดี</p>\n\n\n\n<p></p>\n\n\n\n<p></p>\n","author":"somkiat","siteTitle":"cc :: somkiat","siteHash":"3a23a5a4389e1e40c6fbb16520a8cc20df5b3591c25145ce72aaa18b19e48201","entryHash":"ab215c6aea7eb406150435031545adc16a2c73b5ed1cc8f30ea1d2b244ace483","category":"Thai"}