{"title":"Docker Tips :: การสร้าง image แบบ multi-architecture","link":"https://www.somkiat.cc/docker-tips-multi-architecture-image/","date":1696752984000,"content":"<p><img width=\"150\" height=\"150\" src=\"https://www.somkiat.cc/wp-content/uploads/2023/10/dockermultiarch-150x150.png\" loading=\"lazy\" srcset=\"https://www.somkiat.cc/wp-content/uploads/2023/10/dockermultiarch-150x150.png 150w, https://www.somkiat.cc/wp-content/uploads/2023/10/dockermultiarch-75x75.png 75w\" /></p>\n<figure><a href=\"https://www.somkiat.cc/wp-content/uploads/2023/10/dockermultiarch.png\"><img src=\"https://www.somkiat.cc/wp-content/uploads/2023/10/dockermultiarch-1024x581.png\" width=\"604\" height=\"342\" /></a></figure>\n\n\n\n<p>การสร้าง Docker image นั้น สามารถสร้าง image แบบ <a href=\"https://github.com/docker-library/official-images#architectures-other-than-amd64\" target=\"_blank\">Multi-architecture</a> ได้<br />โดยทำการ build ผ่าน <a href=\"https://docs.docker.com/build/\" target=\"_blank\">Buildx</a><br />มีขั้นตอนดังนี้</p>\n\n\n\n<span></span>\n\n\n\n<p><strong>ทำการสร้าง image ผ่าน buildx command ดังนี้</strong></p>\n\n\n\n[gist id=\"3944c2346a2a11d4674e3adbfb5f4938\" file=\"1.txt\"]\n\n\n\n<p><strong>ขั้นตอนที่ 1 ทำการสร้าง <a href=\"https://docs.docker.com/build/drivers/docker-container/\" target=\"_blank\">Builder</a> ใหม่ก่อน</strong></p>\n\n\n\n[gist id=\"3944c2346a2a11d4674e3adbfb5f4938\" file=\"2.txt\"]\n\n\n\n<p><strong>ขั้นตอนที่ 2 ทำการ build image ตาม architecture และ platform ที่ต้องการ</strong></p>\n\n\n\n<ul>\n<li>linux/amd64</li>\n\n\n\n<li>linux/arm64</li>\n\n\n\n<li>darwin/arm64</li>\n</ul>\n\n\n\n<p>ถ้ามีการใช้ Docker image อื่น ๆ ต้องดูด้วยว่า platform ที่ระบุไว้ในการ build มีหรือไม่ด้วย<br />ยกตัวอย่างเช่น <a href=\"https://github.com/docker-library/golang/blob/f0d301c385958888968d6ab8f8510c3cd5cce704/1.21/alpine3.18/Dockerfile\" target=\"_blank\">Golang</a> จะทำการ build ตาม architecture ต่าง ๆ ให้อีกด้วย</p>\n\n\n\n<figure><a href=\"https://www.somkiat.cc/wp-content/uploads/2023/10/Screenshot-2566-10-08-at-15.17.17.png\"><img src=\"https://www.somkiat.cc/wp-content/uploads/2023/10/Screenshot-2566-10-08-at-15.17.17.png\" width=\"574\" height=\"535\" /></a></figure>\n\n\n\n<p><strong>ขั้นตอนการ build image</strong></p>\n\n\n\n[gist id=\"3944c2346a2a11d4674e3adbfb5f4938\" file=\"3.txt\"]\n\n\n\n<p><strong>ลองดูได้ที่ Docker Hub ว่า image ที่สร้างสนับสนุน platform อะไรบ้าง</strong></p>\n\n\n\n<figure><a href=\"https://www.somkiat.cc/wp-content/uploads/2023/10/Screenshot-2566-10-08-at-14.53.21.png\"><img src=\"https://www.somkiat.cc/wp-content/uploads/2023/10/Screenshot-2566-10-08-at-14.53.21.png\" width=\"469\" height=\"180\" /></a></figure>\n\n\n\n<p>เพียงเท่านี้ก็ใช้งานได้แล้ว</p>\n","author":"somkiat","siteTitle":"cc :: somkiat","siteHash":"3a23a5a4389e1e40c6fbb16520a8cc20df5b3591c25145ce72aaa18b19e48201","entryHash":"e57da4c80d29f0d5dafd881d58bf0196bac7f2f5528fcdaace06ee13f55dd5f8","category":"Thai"}