{"title":"A Deep Dive Into object-fit And background-size In CSS","link":"https://smashingmagazine.com/2021/10/object-fit-background-size-css/","date":1635166800000,"content":"<p>We’re not always able to load different-sized images for an HTML element. If we use a width and height that isn’t proportional to the image’s aspect ratio, the image might either be compressed or stretched. That isn’t good, and it can be solved either with <code>object-fit</code> for an <code>img</code> element or by using <code>background-size</code>.</p>\n<p>First, let’s define the problem. Consider the following figure:</p>\n<p><img src=\"https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/fb4530e2-8132-4b2c-8571-5c17403b691c/1-object-fit-vs-css-background-size.jpg\" /></p>\n<p>Why is this happening?</p>\n<p>An image will have an aspect ratio, and the browser will fill the containing box with that image. If the image’s aspect ratio is different than the width and height specified for it, then the result will be either a squeezed or stretched image.</p>\n<p>We see this in the following figure:</p>\n<p><img src=\"https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/ce9612f8-1aaf-48a1-ab7e-8602cffa254f/2-object-fit-vs-css-background-size.jpg\" /></p>\nThe Solution\n<p>We don’t always need to add a different-sized image when the aspect ratio of the image doesn’t align with the containing element’s width and height. Before diving into CSS solutions, I want to show you how we used to do this in photo-editing apps:</p>\n<p><img src=\"https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/2592a2fd-4af4-463c-a923-36c7400d016a/3-object-fit-vs-css-background-size.jpg\" /></p>\n<p>Now that we understand how that works, let’s get into how this works in the browser. (<em>Spoiler alert: It’s easier!</em>)</p>\nCSS <code>object-fit</code>\n<p>The <code>object-fit</code> property defines how the content of a replaced element such as <code>img</code> or <code>video</code> should be resized to fit its container. The default value for <code>object-fit</code> is <code>fill</code>, which can result in an image being squeezed or stretched.</p>\n<p>Let’s go over the possible values.</p>\nPossible Values for <code>object-fit</code>\n<h3><code>object-fit: contain</code></h3>\n<p>In this case, the image will be resized to fit the aspect ratio of its container. If the image’s aspect ratio doesn’t match the container’s, it will be letterboxed.</p>\n<p><img src=\"https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/b89f31a5-2331-4e8b-83b6-1e4236ab9c3f/4-object-fit-vs-css-background-size.jpg\" /></p>\n<h3><code>object-fit: cover</code></h3>\n<p>Here, the image will also be resized to fit the aspect ratio of its container, and if the image’s aspect ratio doesn’t match the container’s, then it will be clipped to fit.</p>\n<p><img src=\"https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/2014cca8-1d63-4ba4-972a-8df125d95ff1/5-object-fit-vs-css-background-size.jpg\" /></p>\n<h3><code>object-fit: fill</code></h3>\n<p>With this, the image will be resized to fit the aspect ratio of its container, and if the image’s aspect ratio doesn’t match the container’s, it will be either squeezed or stretched. We don’t want that.</p>\n<p><img src=\"https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/25952e19-9887-4c23-a82e-c99526abbc99/6-object-fit-vs-css-background-size.jpg\" /></p>\n<h3><code>object-fit: none</code></h3>\n<p>In this case, the image won’t be resized at all, neither stretched nor squeezed. It works like the <code>cover</code> value, but it doesn’t respect its container’s aspect ratio.</p>\n<p><img src=\"https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/26496e78-d65c-4adb-a181-9f018552f3e9/7-object-fit-vs-css-background-size.jpg\" /></p>\n<p>Aside from <code>object-fit</code>, we also have the <code>object-position</code> property, which is responsible for positioning an image within its container.</p>\nPossible Values For <code>object-position</code>\n<p>The <code>object-position</code> property works similar to CSS’ <code>background-position</code> property:</p>\n<p><img src=\"https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/c59111ec-674f-40b0-9291-e33a51b5c595/8-object-fit-vs-css-background-size.jpg\" /></p>\n<p>The <code>top</code> and <code>bottom</code> keywords also work when the aspect ratio of the containing box is vertically larger:</p>\n<p><img src=\"https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/46e538d2-7f9e-464f-9859-3e8b9da4b8e7/9-object-fit-vs-css-background-size.jpg\" /></p>\nCSS <code>background-size</code>\n<p>With <code>background-size</code>, the first difference is that we’re dealing with the background, not an HTML (<code>img</code>) element.</p>\n<h3>Possible Values for <code>background-size</code></h3>\n<p>The possible values for <code>background-size</code> are <code>auto</code>, <code>contain</code>, and <code>cover</code>.</p>\n<h3><code>background-size: auto</code></h3>\n<p>With <code>auto</code>, the image will stay at its default size:</p>\n<p><img src=\"https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/96a07dc6-3ae3-4cfe-859f-87c3b75037fb/10-object-fit-vs-css-background-size.jpg\" /></p>\n<h3><code>background-size: cover</code></h3>\n<p>Here, the image will be resized to fit in the container. If the aspect ratios are not the same, then the image will be masked to fit.</p>\n<p><img src=\"https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/6a91ed8b-23f0-4e90-9b47-187fe742cfed/11-object-fit-vs-css-background-size.jpg\" /></p>\n<h3><code>background-size: contain</code></h3>\n<p>In this case, the image will be resized to fit in the container. If the aspect ratios are off, then the image will be letterboxed as shown in the next example:</p>\n<p><img src=\"https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/3cdcccbf-88ae-46ac-98d9-7596fa160535/12-object-fit-vs-css-background-size.jpg\" /></p>\n<p>As for <code>background-position</code>, it’s similar to how <code>object-position</code> works. The only difference is that the default position of <code>object-position</code> is different than that of <code>background-position</code>.</p>\nWhen Not to Use <code>object-fit</code> or <code>background-size</code>\n<p>If the element or the image is given a fixed height and has either <code>background-size: cover</code> or <code>object-fit: cover</code> applied to it, there will be a point where the image will be too wide, thus losing important detail that might affect how the user perceives the image.</p>\n<p>Consider the following example in which the image is given a fixed height:</p>\n<pre><code>.card__thumb {\n    height: 220px;\n}</code></pre>\n\n<p><img src=\"https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/6fad9813-b8a6-4b98-9f05-514c2100bfe4/13-object-fit-vs-css-background-size.jpg\" /></p>\n<p>If the card’s container is too wide, it will result in what we see on the right (an image that is too wide). That is because we are not specifying an aspect ratio.</p>\n<p>There is only one of two fixes for this. The first is to use the <a href=\"https://alistapart.com/article/creating-intrinsic-ratios-for-video/\">padding hack</a> to create an intrinsic ratio.</p>\n<pre><code>.card__thumb {\n    position: relative;\n    padding-bottom: 75%;\n    height: 0;\n}\n\n.card__thumb img {\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n}</code></pre>\n\n<p>The second fix is to use the new <code>aspect-ratio</code> CSS property. Using it, we can do the following:</p>\n<pre><code>.card__thumb img {\n    aspect-ratio: 4 / 3;\n}</code></pre>\n\n<p><strong>Note</strong>: <em>I’ve already written about the <code>aspect-ratio</code> property in detail in case you want to learn about it: “<a href=\"https://ishadeed.com/article/css-aspect-ratio/\">Let’s Learn About Aspect Ratio In CSS</a>”.</em></p>\nUse Cases And Examples\n<h3>User Avatars</h3>\n<p>A perfect use case for <code>object-fit: cover</code> is user avatars. The aspect ratio allowed for an avatar is often square. Placing an image in a square container could distort the image.</p>\n<p><img src=\"https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/c6370423-39f5-4ae9-b3c1-ea92a6492a91/14-object-fit-vs-css-background-size.jpg\" /></p>\n<pre><code>.c-avatar {\n    object-fit: cover;\n}</code></pre>\n\n<h3>Logos List</h3>\n<p>Listing the clients of a business is important. We will often use logos for this purpose. Because the logos will have different sizes, we need a way to resize them without distorting them.</p>\n<p>Thankfully, <code>object-fit: contain</code> is a good solution for that.</p>\n<pre><code>.logo__img {\n    width: 150px;\n    height: 80px;\n    object-fit: contain;\n}</code></pre>\n\n<p><img src=\"https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/29bc3a9c-e2d7-4c8b-8a41-d12200edd257/15-object-fit-vs-css-background-size.jpg\" /></p>\n<h3>Article Thumbnail</h3>\n<p>This is a very common use case. The container for an article thumbnail might not always have an image with the same aspect ratio. This issue should be fixed by the content management system (CMS) in the first place, but it isn’t always.</p>\n<pre><code>.article__thumb {\n    object-fit: cover;\n}</code></pre>\n\n<p><img src=\"https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/a5a9bc9d-2446-4014-9a2a-9eb21cd5cd48/16-object-fit-vs-css-background-size.jpg\" /></p>\n<h3>Hero Background</h3>\n<p>In this use case, the decision of whether to use an <code>img</code> element or a CSS background will depend on the following:</p>\n<ul>\n<li>Is the image important? If CSS is disabled for some reason, would we want the user to see the image?</li>\n<li>Or is the image’s purpose merely decorative?</li>\n</ul>\n<p>Based on our answer, we can decide which feature to use. If the image is <strong>important</strong>:</p>\n<p><img src=\"https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/b6ed2e85-f185-4387-9ebf-33a148bcf911/17-object-fit-vs-css-background-size.jpg\" /></p>\n<pre><code>&lt;section class=\"hero\"&gt;\n    &lt;img class=\"hero__thumb\" src=\"thumb.jpg\" alt=\"\" /&gt;\n&lt;/section&gt;</code></pre>\n\n<pre><code>.hero {\n    position: relative;\n}\n\n.hero__thumb {\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    object-fit: cover;    \n}</code></pre>\n\n<p>If the image is <strong>decorative</strong>, we can go with <code>background-image</code>:</p>\n<pre><code>.hero {\n    position: relative;\n    background-image: linear-gradient(to top, #a34242, rgba(0,0,0,0), url(\"thumb.jpg\");\n    background-repeat: no-repeat;\n    background-size: cover;\n}</code></pre>\n\n<p>The CSS is shorter in this case. Make sure that any <a href=\"https://ishadeed.com/article/handling-text-over-image-css/\">text placed over the image</a> is readable and accessible.</p>\n<h3>Adding a Background to an Image With <code>object-fit: contain</code></h3>\n<p>Did you know that you can add a background color to <code>img</code>? We would benefit from that when also using <code>object-fit: contain</code>.</p>\n<p>In the example below, we have a grid of images. When the aspect ratios of the image and the container are different, the background color will appear.</p>\n<pre><code>img {\n    object-fit: contain;\n    background-color: #def4fd;\n}</code></pre>\n\n<p><img src=\"https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/c7f0ee22-0621-4329-aa03-2ac78f55bbd5/18-object-fit-vs-css-background-size.jpg\" /></p>\n<h3>Video Element</h3>\n<p>Have you ever needed a <code>video</code> as a background? If so, then you probably wanted it to take up the full width and height of its parent.</p>\n<pre><code>.hero {\n    position: relative;\n    background-color: #def4fd;\n}\n\n.hero__video {\n    position: aboslute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n}</code></pre>\n\n<p><img src=\"https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/6e3bb7a1-b82c-4459-849f-a0dbb81fbbee/19-object-fit-vs-css-background-size.jpg\" /></p>\n<p>To make it fully cover the width and height of its parent, we need to override the default <code>object-fit</code> value:</p>\n<pre><code>.hero__video {\n    /* other styles */\n    object-fit: cover;\n}</code></pre>\n\n<p><img src=\"https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/b524670a-5a57-44f7-a0b8-53c5b0d00108/20-object-fit-vs-css-background-size.jpg\" /></p>\nConclusion\n<p>As we’ve seen, both <code>object-fit</code> and <code>background-size</code> are very useful for handling different image aspect ratios. We won’t always have control over setting the perfect dimensions for each image, and that’s where these two CSS features shine.</p>\n<p>A friendly reminder on the accessibility implications of choosing between an <code>img</code> element and a CSS background: If the image is purely decorative, then go for a CSS background. Otherwise, an <code>img</code> is more suitable.</p>\n<p>I hope you’ve found this article useful. Thank you for reading.</p>","author":"","siteTitle":"Articles on Smashing Magazine — For Web Designers And Developers","siteHash":"ab069ca35bf300e9db0da36f49701f66485a5b0d2db0471dfeee07cef6204939","entryHash":"4fece81946c831ad3e303ab5ca6191cbb8ac64c444e5b0308e430d4d224acd76","category":"Tech"}