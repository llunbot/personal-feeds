{"title":"Announcing Consul-Terraform-Sync 0.3 for Terraform Enterprise","link":"https://www.hashicorp.com/blog/announcing-consul-terraform-sync-0-3-for-terraform-enterprise","date":1630516500000,"content":"<p>We are excited to announce the general availability of <a href=\"https://releases.hashicorp.com/consul-terraform-sync/0.3.0/\">Consul-Terraform-Sync (CTS) 0.3 </a>for HashiCorp Terraform Enterprise, the self-hosted distribution of HashiCorp Terraform Cloud. This release marks another step in the maturity of our larger <a href=\"https://www.consul.io/docs/nia\">Network Infrastructure Automation (NIA)</a> solution. The focus for CTS is on automating Day 2 networking tasks and reducing the burden on operators caused by manual ticketing systems.</p>\n<p>The <a href=\"https://releases.hashicorp.com/consul-terraform-sync/0.1.0/\">0.1</a> and <a href=\"https://releases.hashicorp.com/consul-terraform-sync/0.2.0/\">0.2</a> CTS releases enabled a publisher-subscriber paradigm to update the network infrastructure based on changes in the HashiCorp Consul catalog leveraging the Terraform CLI on the local node. These releases focused on establishing core networking use cases for practitioners, including applying firewall policies, updating load balancer member pools, and more.</p>\n<p>With the 0.3 release, organizations can now manage their Day 2 application networking delivery lifecycle more dynamically while providing governance and security oversight of infrastructure across a broad range of network providers using Terraform Enterprise as the automation engine.</p>\n<p>This post will highlight the new features in CTS 0.3, including regex support for service triggers and Terraform Enterprise integration. We’ll also discuss the benefits that the Terraform Enterprise integration opens up to users, and we’ll share a few words from our network vendor partners about the value of our shared integrations. CTS 0.3 is available for download on our <a href=\"https://releases.hashicorp.com/consul-terraform-sync/0.3.0/\">release page</a>.</p>\n<h2><a href=\"#cts-integration-with-terraform-enterprise\">»</a><a></a>CTS Integration with Terraform Enterprise</h2>\n<p>CTS integration with Terraform Enterprise is an enterprise-only feature available through the <a href=\"https://releases.hashicorp.com/consul-terraform-sync/0.3.0+ent/\">CTS Enterprise binary</a>. Operators require a valid Consul Enterprise license to get started. This binary supports a new CTS network driver named <a href=\"https://www.consul.io/docs/nia/network-drivers/terraform-cloud\">Terraform Cloud driver</a>:</p><pre><code>driver \"terraform-cloud\" {\n  hostname     = \"my.tfe.hostname.io\"\n  organization = \"my-org\"\n  token        = \"\"\n  // Optionally set the token to be securely queried from Vault instead of\n  // written directly to the configuration file.\n  // token = \"{{ with secret \\\"secret/my/path\\\" }}{{ .Data.data.foo }}{{ end }}\"\n\n  required_providers {\n    myprovider = {\n      source = \"namespace/myprovider\"\n      version = \"1.3.0\"\n    }\n  }\n}\n</code></pre><p><em><a href=\"https://www.consul.io/docs/nia/tasks\">Tasks</a></em> are the heart of Consul-Terraform-Sync’s automation capabilities. The Terraform Cloud driver enables creation and management of Terraform Enterprise workspaces for all tasks defined in CTS configuration using the <a href=\"https://www.terraform.io/docs/cloud/run/api.html\">API-driven run workflow</a>.</p><img src=\"https://www.datocms-assets.com/2885/1630516110-tasks-in-tfe.png\" /><p>Users of the CTS integration with Terraform Enterprise can do a number of useful things, including:</p>\n<ul>\n<li><strong>Scale resources:</strong> Reduce dependency on ticketing systems traditionally handled by networking and security teams, allowing them to <a href=\"https://www.consul.io/docs/nia\">optimize their workflows</a> to match the velocity of development teams.</li>\n<li><strong>Reduce risk:</strong> Provide teams with <a href=\"https://www.terraform.io/docs/cloud/workspaces/state.html\">distinct workspaces</a> that clearly define users’ privileges to access and manipulate resources. Restricting access to sensitive information can reduce human-driven misconfiguration errors and potential data leakage.</li>\n<li><strong>Improve automation controls:</strong> Choose the desired level of automation with approval workflows. While end-to-end automation may be the end goal, many organizations opt for an incremental approach. Set <a href=\"https://www.terraform.io/docs/cloud/workspaces/notifications.html\">notification triggers </a>to inform a team member when a predetermined event occurs. They can review a plan quickly to verify the configuration is as expected and apply the changes with just a few clicks.</li>\n<li><strong>Simplify auditing:</strong> Automatically <a href=\"https://www.terraform.io/docs/enterprise/admin/logging.html\">catalog every change</a> made to the environment. Provide a comprehensive forensic trail to keep compliance teams in the loop and analyze issues as they arise.</li>\n<li><strong>Apply compliance policies:</strong> <a href=\"https://www.terraform.io/docs/cloud/sentinel/index.html\">Policy as code with Sentinel</a> allows organizations to define, manage, and enforce key policies in order to safeguard against potentially dangerous actions and encourage efficient use of resources to control costs.</li>\n</ul>\n<h2><a href=\"#regex-support-for-service-triggers\">»</a><a></a>Regex Support for Service Triggers</h2>\n<p>Consul is used as a service registry by different teams across an organization. Many times, these teams have inconsistent service naming practices. A task definition in CTS requires one or more service names as input. This leads to situations where the CTS operator finds it challenging to define tasks without knowing the exact name of the service.</p>\n<p>To address this pain point, we are introducing a <a href=\"https://www.consul.io/docs/nia/configuration#services-condition\">beta feature</a> in 0.3 that triggers a task only for services that match a regex across the entire Consul catalog.</p><pre><code>task {\n  name = \"services_condition_task\"\n  description = \"execute on changes to services whose name starts with web\"\n  providers = [\"my-provider\"]\n  source = \"path/ti/services-condition-module\"\n\n  condition \"services\" {\n    regexp= \"^web.*\"\n  }\n}</code></pre><p>This feature is available in beta for both CTS OSS and Enterprise binaries.</p>\n<h2><a href=\"#cts-for-terraform-enterprise-launch-partners\">»</a><a></a>CTS for Terraform Enterprise Launch Partners</h2>\n<p>At the core of CTS for Terraform Cloud is the partner ecosystem. Customers are already using these vendors to manage critical workloads, enhance security, and improve performance. By helping us create modules for their Terraform providers, these partners are helping users automate common tasks right away.</p>\n<p>We plan to continue expanding our ecosystem of partners for CTS, collaborating closely with our partners to grow our CTS module library, deepen our native integrations, and provide additional capabilities. Several of our launch partners shared a few words about the value of these integrations in helping alleviate the challenges addressed with this release:</p>\n<h3><a href=\"#a10-networks-adc-server-pool-programmatic-updates\">»</a><a></a>A10 Networks: ADC Server Pool Programmatic Updates</h3>\n<p>\"Customers are constantly on the lookout for ways to optimize efficiency with existing and new networking infrastructure. A10 Networks and HashiCorp are partnering to help customers solve one of their biggest challenges — accelerating deployment of software and services — with Consul-Terraform-Sync for Terraform Enterprise. It facilitates the automation of many Day 2 tasks in a declarative and repeatable way across their organizations, while providing robust policy as code capabilities to help teams reduce cloud waste and safeguard access to sensitive information.\" <br />\n<em>—Takahiro Mitsuhata, Senior Manager, Technical Marketing at A10 Networks</em></p>\n<h3><a href=\"#check-point-software-technologies-automate-firewall-operation\">»</a><a></a>Check Point Software Technologies: Automate Firewall Operation</h3>\n<p>\"Manual workflows impede security teams’ ability to work quickly across multiple security infrastructure devices, contributing to the likelihood of a non-compliant solution being developed. Our partnership with HashiCorp enables customers to use Network Infrastructure Automation with Consul-Terraform-Sync for Terraform Enterprise in order to quickly deploy applications, which cuts down on security operations overhead and mitigates misconfigurations through managing access to variables and Terraform state that connects it to other applications or services without compromising credential security.\" <br />\n<em>— T.J. Gonen, Head of Cloud Security Product Strategy at Check Point Software Technologies</em></p>\n<h3><a href=\"#cisco-enhancing-infrastructure-visibility\">»</a><a></a>Cisco: Enhancing Infrastructure Visibility</h3>\n<p>\"Cisco ACI and HashiCorp Consul together facilitate consistent, automated workflows to gather application information and network health data. The new integration with Consul-Terraform-Sync for Terraform Enterprise provides granular visibility across infrastructure and robust governance capabilities to optimize application delivery across multiple clouds in reproducible ways. While Cisco ACI can dynamically manage the lifecycle of the required backend network resources and policies, this allows organizations to establish their own approval workflows to better align with organizational standards and best practices.\" <br />\n<em>— Srinivas Kotamraju, Director, Product Management at Cisco</em></p>\n<h3><a href=\"#citrix-dynamic-adc-configuration-updates\">»</a><a></a>Citrix: Dynamic ADC Configuration Updates</h3>\n<p>\"Our customers have security top of mind. Whether it’s integrating web application firewall (WAF) or API protection, they are always looking for ways to stay ahead. Citrix and HashiCorp are teaming up to integrate enterprise-ready policy functionality to network infrastructure automation workflows using Consul-Terraform-Sync for Terraform Enterprise to mitigate risk through best practices like secure state.\"\t<br />\n<em>— Michael “Mikko” Disini, Senior Director, Product Management, Modernized Apps and Cloud Native at Citrix</em></p>\n<h3><a href=\"#f5-expediting-application-delivery\">»</a><a></a>F5: Expediting Application Delivery</h3>\n<p>\"Consul-Terraform-Sync for Terraform Cloud helps network teams bridge the gap between software development and production availability through dynamic automation and better management of F5 BIG-IP environments as code. We are excited to see the evolution of Consul-Terraform-Sync for Terraform Cloud to include more secure provisioning capabilities and look forward to our continued partnership to help customers along their network infrastructure automation journey.\" <br />\n<em>— Phil de la Motte, Vice President of Business Development at F5</em></p>\n<h3><a href=\"#palo-alto-networks-network-security-automation\">»</a><a></a>Palo Alto Networks: Network Security Automation</h3>\n<p>\"When security teams learn about a new vulnerability, every second counts. Our customers are using Palo Alto Networks’ advanced security technology to respond to these threats as quickly as possible while also modernizing their overall approach to cloud native architectures. By partnering with HashiCorp to help customers achieve Network Infrastructure Automation through Consul-Terraform-Sync for Terraform Enterprise, our shared customers can unilaterally make policy changes across their infrastructure to update their Palo Alto Networks firewalls in near real-time using automation. Customers can now track associated changes through audit logging as another important benefit of the strategic partnership between our companies.\" <br />\n<em>—  Matthew Scott, Senior Director of Business Development at Palo Alto Networks</em></p>\n<h2><a href=\"#get-started\">»</a><a></a>Get Started</h2>\n<p>CTS supports an integration with Terraform Enterprise to let organizations manage their application networking delivery lifecycle in a more dynamic way while providing governance and security oversight. This capability is delivered as an enterprise feature through the CTS Enterprise binary.</p>\n<p>Moving forward, every CTS release will consist of separate OSS and Enterprise binaries. We will continue to add more capabilities to both open source CTS and CTS Enterprise. And look for updates on the upcoming integration with HashiCorp Terraform Cloud Business tier.</p>\n<p>To get started, please refer to the Consul <a href=\"https://www.consul.io/docs/nia\">documentation</a> and <a href=\"https://learn.hashicorp.com/collections/consul/network-infrastructure-automation\">HashiCorp Learn guides</a>, we also have a dedicated guide for <a href=\"https://learn.hashicorp.com/tutorials/consul/consul-terraform-sync-terraform-enterprise\">CTS Enterprise</a>. Feel free to try out <a href=\"https://releases.hashicorp.com/consul-terraform-sync/0.3.0/\">CTS 0.3</a> (<a href=\"https://hub.docker.com/r/hashicorp/consul-terraform-sync-enterprise\">Docker image</a>, <a href=\"https://releases.hashicorp.com/consul-terraform-sync/0.3.0+ent/\">Enterpries binaries</a>) and give us feedback in the <a href=\"https://github.com/hashicorp/consul-terraform-sync/issues\">issue tracker</a>. You can also stay up to date on CTS by following our <a href=\"https://github.com/hashicorp/consul-terraform-sync/projects/1\">public roadmap</a> or checking the <a href=\"https://github.com/hashicorp/consul-terraform-sync/blob/master/CHANGELOG.md\">changelog</a>. For more information about Consul, please visit our <a href=\"https://www.hashicorp.com/products/consul\">product page</a>.</p>","author":"Devarshi Shah","siteTitle":"HashiCorp Blog","siteHash":"219aa6310b3388f2335eba49871f4df9581f2c58eaeb5e498363b54e835b7001","entryHash":"0fc6e54517d2ba4fc82764cc87f4c84ac2eafb97fcb9014cf52c679ae7fff764","category":"Tech"}