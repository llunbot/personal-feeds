{"title":"ความสามารถใหม่ที่น่าสนใจของ Python 3.10","link":"https://www.somkiat.cc/new-features-in-python-3-10/","date":1633455554000,"content":"<div id=\"readability-page-1\" class=\"page\"><div id=\"page\"><article><div id=\"content_box\"><header><div><p><time>October 5, 2021</time> <span><a href=\"https://www.somkiat.cc/category/programming/\" rel=\"category tag\">Programming</a></span></p></div></header><div><figure><img src=\"https://www.somkiat.cc/wp-content/uploads/2021/10/python.jpg\" alt=\"\" srcset=\"https://www.somkiat.cc/wp-content/uploads/2021/10/python.jpg 900w, https://www.somkiat.cc/wp-content/uploads/2021/10/python-300x171.jpg 300w, https://www.somkiat.cc/wp-content/uploads/2021/10/python-768x438.jpg 768w\" sizes=\"(max-width: 900px) 100vw, 900px\"></figure><p>ในวันที่ 4 กันยายนที่ผ่านมา <strong><a href=\"https://docs.python.org/3.10/whatsnew/3.10.html\" target=\"_blank\" rel=\"noreferrer noopener\">Python 3.10</a></strong> ถูกปล่อยออกมาให้ใช้งาน<br>โดยมีความสามารถใหม่ ๆ เพิ่มเข้ามาเยอะ<br>เพื่อช่วยทำให้ที่เขียนดูเรียบง่ายขึ้น<br>ดังนั้นมาดูว่ามีอะไรที่น่าสนใจบ้าง ?</p><p><strong>Structural pattern matching</strong></p><p>ช่วยให้การเปรียบเทียบข้อมูลง่ายขึ้น<br>โดยมี keyword ใหม่เพิ่มเข้ามาคือ <strong>match</strong> และ <strong>case</strong><br>การใช้งานเหมือนกับ switch case เลย ดังนี้</p><div itemprop=\"text\" id=\"gist112195152\" translate=\"no\"><table data-tab-size=\"8\" data-paste-markdown-skip=\"\"><tbody><tr><td id=\"file-1-py-L1\" data-line-number=\"1\"></td><td id=\"file-1-py-LC1\"><span>def</span> <span>error</span>(<span>status</span>):</td></tr><tr><td id=\"file-1-py-L2\" data-line-number=\"2\"></td><td id=\"file-1-py-LC2\"><span>match</span> <span>status</span>:</td></tr><tr><td id=\"file-1-py-L3\" data-line-number=\"3\"></td><td id=\"file-1-py-LC3\"><span>case</span> <span>400</span>:</td></tr><tr><td id=\"file-1-py-L4\" data-line-number=\"4\"></td><td id=\"file-1-py-LC4\"><span>return</span> <span>\"Bad request\"</span></td></tr><tr><td id=\"file-1-py-L5\" data-line-number=\"5\"></td><td id=\"file-1-py-LC5\"><span>case</span> <span>300</span> <span>|</span> <span>301</span> <span>|</span> <span>302</span>:</td></tr><tr><td id=\"file-1-py-L6\" data-line-number=\"6\"></td><td id=\"file-1-py-LC6\"><span>return</span> <span>\"Start with 3xx\"</span></td></tr><tr><td id=\"file-1-py-L7\" data-line-number=\"7\"></td><td id=\"file-1-py-LC7\"><span>case</span> <span>_</span>:</td></tr><tr><td id=\"file-1-py-L8\" data-line-number=\"8\"></td><td id=\"file-1-py-LC8\"><span>return</span> <span>\"Unknown\"</span></td></tr></tbody></table></div><p>สามารถทำการ match กับข้อมูลที่เป็น list , tuple และ class ได้อีกด้วย</p><p><strong>ปรับปรุงเรื่อง error message</strong></p><p>เนื่องจาก error message ที่ Python แจ้งออกมานั้น<br>มักจะทำให้สับสน รวมทั้งเข้าใจผิดอีกด้วย<br>ดังนั้นความสามารถนี้จึงแจ่มมาก ๆ ปล่อยมาตั้งนาน<br>ยกตัวอย่าง</p><div id=\"gist112195152\" translate=\"no\"><article itemprop=\"text\"><h3>File 2.py</h3><pre><code>message = \"Demo\nprint(message)\n</code></pre><h3>Before python 3.10</h3><pre><code>File \"2.py\", line 1\n    message = \"Demo\n                  ^\nSyntaxError: EOL while scanning string literal\n</code></pre><h3>Python 3.10</h3><pre><code>File \"2.py\", line 1\n    message = \"Demo\n              ^\nSyntaxError: unterminated string literal (detected at line 1)\n</code></pre></article></div><p><strong>เปลี่ยนตัวจัดการพวก ( ) ใน code ใหม่ หรือ Parenthesized context managers</strong></p><p>เปลี่ยนจาก LL(1)-based parser ของ CPython มาเป็น PEG-based parser<br>ทำให้เขียน code แบบนี้ได้ใน Python 3.10</p><div itemprop=\"text\" id=\"gist112195152\" translate=\"no\"><table data-tab-size=\"8\" data-paste-markdown-skip=\"\"><tbody><tr><td id=\"file-3-py-L1\" data-line-number=\"1\"></td><td id=\"file-3-py-LC1\"><span># Case 1</span></td></tr><tr><td id=\"file-3-py-L2\" data-line-number=\"2\"></td><td id=\"file-3-py-LC2\"><span>with</span> (<span>CtxManager</span>() <span>as</span> <span>example</span>):</td></tr><tr><td id=\"file-3-py-L3\" data-line-number=\"3\"></td><td id=\"file-3-py-LC3\"><span>pass</span></td></tr><tr><td id=\"file-3-py-L4\" data-line-number=\"4\"></td><td id=\"file-3-py-LC4\"></td></tr><tr><td id=\"file-3-py-L5\" data-line-number=\"5\"></td><td id=\"file-3-py-LC5\"><span># Case 2</span></td></tr><tr><td id=\"file-3-py-L6\" data-line-number=\"6\"></td><td id=\"file-3-py-LC6\"><span>with</span> (</td></tr><tr><td id=\"file-3-py-L7\" data-line-number=\"7\"></td><td id=\"file-3-py-LC7\"><span>CtxManager1</span>(),</td></tr><tr><td id=\"file-3-py-L8\" data-line-number=\"8\"></td><td id=\"file-3-py-LC8\"><span>CtxManager2</span>()</td></tr><tr><td id=\"file-3-py-L9\" data-line-number=\"9\"></td><td id=\"file-3-py-LC9\">):</td></tr><tr><td id=\"file-3-py-L10\" data-line-number=\"10\"></td><td id=\"file-3-py-LC10\"><span>pass</span></td></tr><tr><td id=\"file-3-py-L11\" data-line-number=\"11\"></td><td id=\"file-3-py-LC11\"></td></tr><tr><td id=\"file-3-py-L12\" data-line-number=\"12\"></td><td id=\"file-3-py-LC12\"><span># Case 3</span></td></tr><tr><td id=\"file-3-py-L13\" data-line-number=\"13\"></td><td id=\"file-3-py-LC13\"><span>with</span> (<span>CtxManager1</span>() <span>as</span> <span>example</span>,</td></tr><tr><td id=\"file-3-py-L14\" data-line-number=\"14\"></td><td id=\"file-3-py-LC14\"><span>CtxManager2</span>()):</td></tr><tr><td id=\"file-3-py-L15\" data-line-number=\"15\"></td><td id=\"file-3-py-LC15\"><span>pass</span></td></tr><tr><td id=\"file-3-py-L16\" data-line-number=\"16\"></td><td id=\"file-3-py-LC16\"></td></tr><tr><td id=\"file-3-py-L17\" data-line-number=\"17\"></td><td id=\"file-3-py-LC17\"><span># Case 4</span></td></tr><tr><td id=\"file-3-py-L18\" data-line-number=\"18\"></td><td id=\"file-3-py-LC18\"><span>with</span> (<span>CtxManager1</span>(),</td></tr><tr><td id=\"file-3-py-L19\" data-line-number=\"19\"></td><td id=\"file-3-py-LC19\"><span>CtxManager2</span>() <span>as</span> <span>example</span>):</td></tr><tr><td id=\"file-3-py-L20\" data-line-number=\"20\"></td><td id=\"file-3-py-LC20\"><span>pass</span></td></tr><tr><td id=\"file-3-py-L21\" data-line-number=\"21\"></td><td id=\"file-3-py-LC21\"></td></tr><tr><td id=\"file-3-py-L22\" data-line-number=\"22\"></td><td id=\"file-3-py-LC22\"><span># Case 5</span></td></tr><tr><td id=\"file-3-py-L23\" data-line-number=\"23\"></td><td id=\"file-3-py-LC23\"><span>with</span> (</td></tr><tr><td id=\"file-3-py-L24\" data-line-number=\"24\"></td><td id=\"file-3-py-LC24\"><span>CtxManager1</span>() <span>as</span> <span>example1</span>,</td></tr><tr><td id=\"file-3-py-L25\" data-line-number=\"25\"></td><td id=\"file-3-py-LC25\"><span>CtxManager2</span>() <span>as</span> <span>example2</span></td></tr><tr><td id=\"file-3-py-L26\" data-line-number=\"26\"></td><td id=\"file-3-py-LC26\">):</td></tr><tr><td id=\"file-3-py-L27\" data-line-number=\"27\"></td><td id=\"file-3-py-LC27\"><span>pass</span></td></tr><tr><td id=\"file-3-py-L28\" data-line-number=\"28\"></td><td id=\"file-3-py-LC28\"></td></tr><tr><td id=\"file-3-py-L29\" data-line-number=\"29\"></td><td id=\"file-3-py-LC29\"><span># Case 6</span></td></tr><tr><td id=\"file-3-py-L30\" data-line-number=\"30\"></td><td id=\"file-3-py-LC30\"><span>with</span> (</td></tr><tr><td id=\"file-3-py-L31\" data-line-number=\"31\"></td><td id=\"file-3-py-LC31\"><span>CtxManager1</span>() <span>as</span> <span>example1</span>,</td></tr><tr><td id=\"file-3-py-L32\" data-line-number=\"32\"></td><td id=\"file-3-py-LC32\"><span>CtxManager2</span>() <span>as</span> <span>example2</span>,</td></tr><tr><td id=\"file-3-py-L33\" data-line-number=\"33\"></td><td id=\"file-3-py-LC33\"><span>CtxManager3</span>() <span>as</span> <span>example3</span>,<span></span></td></tr><tr><td id=\"file-3-py-L34\" data-line-number=\"34\"></td><td id=\"file-3-py-LC34\">):</td></tr><tr><td id=\"file-3-py-L35\" data-line-number=\"35\"></td><td id=\"file-3-py-LC35\"><span>pass</span></td></tr></tbody></table></div><p><strong>Union operator ด้วยการใช้งาน |</strong></p><p>ช่วยให้ code อ่านง่ายขึ้น เพราะว่าก่อนหน้านี้ต้องใช้งาน typing.Union</p><p><strong>จากการปรับปรุงเรื่องต่าง ๆ</strong></p><p>ก็ช่วยทำให้เครื่องมือในการ debugging, profiling และ coverage tool<br>ทำงานได้อย่างถูกต้องและน่าเชือถือมากยิ่งขึ้น<br>ลองทำการ upgrade กันดูครับ<br></p><p>อ่านการเปลี่ยนแปลงเพิ่มเติมได้ที่ <strong><a href=\"https://docs.python.org/3.10/whatsnew/3.10.html\" target=\"_blank\" rel=\"noreferrer noopener\">What’s new in Python 3.10 ?</a></strong></p></div><div><p><img alt=\"\" src=\"https://secure.gravatar.com/avatar/e5cb9aad7bf4f0e43462bd51d6ff7021?s=90&amp;d=mm&amp;r=g\" srcset=\"https://secure.gravatar.com/avatar/e5cb9aad7bf4f0e43462bd51d6ff7021?s=180&amp;d=mm&amp;r=g 2x\" height=\"90\" width=\"90\"></p><h4>Article by <a href=\"https://www.facebook.com/somkiatspns\">Somkiat Puisungnoen</a></h4><p>To be Craftmanship</p></div></div></article></div></div>","author":"somkiat","siteTitle":"cc :: somkiat","siteHash":"3a23a5a4389e1e40c6fbb16520a8cc20df5b3591c25145ce72aaa18b19e48201","entryHash":"37e3084a8af2303cc1822f8df01dc4b5ad4be12b46625b31ce663e5900171f19","category":"Thai"}