{"title":"[Atlas] ทำการสร้าง ER diagram จาก GORM model","link":"https://www.somkiat.cc/gorm-er-diagram-with-atlas/","date":1691509541000,"content":"<p><img width=\"150\" height=\"150\" src=\"https://www.somkiat.cc/wp-content/uploads/2023/08/Screenshot-2566-08-08-at-22.43.41-150x150.png\" alt loading=\"lazy\" srcset=\"https://www.somkiat.cc/wp-content/uploads/2023/08/Screenshot-2566-08-08-at-22.43.41-150x150.png 150w, https://www.somkiat.cc/wp-content/uploads/2023/08/Screenshot-2566-08-08-at-22.43.41-75x75.png 75w\" /></p>\n<p>จากที่เคยเขียนอธิบายเรื่อง  <strong><a href=\"https://www.somkiat.cc/database-migration-with-atlas-go/\">Migrate database ด้วย Atlas</a></strong><br />เป็นเครื่องมือที่น่าสนใจมาก ๆ<br />แต่ก็พบว่าใน Atlas version ใหม่  คือ v0.13.1 นั้น<br />สามารถทำการสร้าง <a href=\"https://atlasgo.io/blog/2023/08/08/gorm-visualizations\" target=\"_blank\">ER diagram จาก GORM model</a> (ORM for Go)<br />สำหรับทำเอกสารอธิบายโครงสร้างของ table ง่าย ๆ<br />ดังนั้นมาลองใช้งานกัน</p>\n\n\n\n<span></span>\n\n\n\n<p><strong>ขั้นตอนที่ 1 ทำการติดตั้งหรือ upgrade Atlas ก่อน</strong></p>\n\n\n\n[code]\ncurl -sSf https://atlasgo.sh | sh\n[/code]\n\n\n\n<p><strong>ขั้นตอนที่ 2 ทำการสร้าง Go project เพื่อใช้งาน GORM ดังนี้</strong></p>\n\n\n\n[gist id=\"a4284a5fffe0fb7482de403b5b690721\" file=\"1.txt\"]\n\n\n\n<p>ทำการสร้าง data model ที่ใช้ใน GORM</p>\n\n\n\n[gist id=\"a4284a5fffe0fb7482de403b5b690721\" file=\"models.go\"]\n\n\n\n<p><strong>ขั้นตอนที่ 3 ทำการ config Atlas สำหรับทำงานร่วมกับ GORM</strong></p>\n\n\n\n[code]\ngo get ariga.io/atlas-provider-gorm@v0.1.0\n[/code]\n\n\n\n<p>จากนั้นทำการสร้างไฟล์ tools.go ขึ้นมา เพื่อเพิ่ม dependency ใน project</p>\n\n\n\n[gist id=\"a4284a5fffe0fb7482de403b5b690721\" file=\"tools.go\"]\n\n\n\n<p>ทำการ download dependency</p>\n\n\n\n[code]\ngo mod tidy\n[/code]\n\n\n\n<p><strong>ขั้นตอนที่ 4 ทำการสร้าง config สำหรับการทำงานของ Atlas กับ Go, GORM และ Database</strong></p>\n\n\n\n<p>ด้วยการสร้างไฟล์ atlas.hcl ดังนี้</p>\n\n\n\n[gist id=\"a4284a5fffe0fb7482de403b5b690721\" file=\"atlas.hcl\"]\n\n\n\n<p><strong>ขั้นตอนที่ 5 เมื่อทุกอย่างเรียบร้อย ก็ทำการสร้าง ER diagram</strong></p>\n\n\n\n<p>ซึ่งจะทำการสร้างในระบบ cloud ของ Atlas เลย ทั้งแบบ public หรือ private<br />โดยผมทำการเลือกแบบ public ดังนี้</p>\n\n\n\n[gist id=\"a4284a5fffe0fb7482de403b5b690721\" file=\"2.txt\"]\n\n\n\n<p>ผลที่ได้คือ link ของ public cloud นั่นเอง<br />แสดงตามรูป</p>\n\n\n\n<figure><a href=\"https://www.somkiat.cc/wp-content/uploads/2023/08/Screenshot-2566-08-08-at-22.43.41.png\"><img src=\"https://www.somkiat.cc/wp-content/uploads/2023/08/Screenshot-2566-08-08-at-22.43.41-1024x576.png\" alt width=\"839\" height=\"471\" /></a></figure>\n\n\n\n<p>ซึ่งสวยงามเลย น่าสนใจมาก ๆ<br />มีการดูการเปลี่ยนแปลงของ database schema ให้อีก<br />ลองใช้งานกันดูครับ</p>\n","author":"somkiat","siteTitle":"cc :: somkiat","siteHash":"3a23a5a4389e1e40c6fbb16520a8cc20df5b3591c25145ce72aaa18b19e48201","entryHash":"183118a8f2f0c759f5c822329f3681ae34f9eeecae46ee90c647400d2a55eb9a","category":"Thai"}