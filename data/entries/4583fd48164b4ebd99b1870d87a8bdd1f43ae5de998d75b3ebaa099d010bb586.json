{"title":"สวัสดี Go 1.21 RC 2","link":"https://www.somkiat.cc/hello-go-1-21-rc2/","date":1687926734000,"content":"<p><img width=\"150\" height=\"150\" src=\"https://www.somkiat.cc/wp-content/uploads/2023/06/go-1.21-rc2-1-150x150.jpg\" alt loading=\"lazy\" srcset=\"https://www.somkiat.cc/wp-content/uploads/2023/06/go-1.21-rc2-1-150x150.jpg 150w, https://www.somkiat.cc/wp-content/uploads/2023/06/go-1.21-rc2-1-75x75.jpg 75w\" /></p>\n<figure><a href=\"https://www.somkiat.cc/wp-content/uploads/2023/06/go-1.21-rc2-1.jpg\"><img src=\"https://www.somkiat.cc/wp-content/uploads/2023/06/go-1.21-rc2-1.jpg\" alt width=\"545\" height=\"327\" /></a></figure>\n\n\n\n<p>ทาง Go นั้นทำการปล่อย <a href=\"https://go.dev/blog/go1.21rc\" target=\"_blank\">Go 1.21 RC 2</a> ออกมาให้ใช้งานแล้ว<br />จากที่เคยแนะนำไปใน blog ก่อนหน้านี้ <br />เช่น standard package ใหม่ ๆ ดังนี้</p>\n\n\n\n<ul>\n<li>log/slog</li>\n\n\n\n<li>slices</li>\n\n\n\n<li>maps</li>\n\n\n\n<li>cmp</li>\n</ul>\n\n\n\n<p>รวมทั้งมี build-in function ใหม่ ๆ มาให้อีก คือ <a href=\"https://tip.golang.org/ref/spec#Min_and_max\" target=\"_blank\">min, max</a> และ <a href=\"https://tip.golang.org/ref/spec#Clear\">clear</a></p>\n\n\n\n<span></span>\n\n\n\n<p><strong>แต่ก็มี preview feature ที่น่าสนใจ ที่จะเพิ่มเข้ามาใน Go 1.22 นั่นเอง</strong></p>\n\n\n\n<p>ซึ่งถือว่า เข้ามาเปลี่ยนตัวภาษา Go เลย<br />นั่นก็คือ <strong>Loop variable</strong><br />เพื่อไม่ให้ทำการ share variable ข้ามรอบของ loop !!<br />รวมทั้ง loop กับ go routine อีก<br />โดยมีกรณีที่ก่อให้เกิดข้อผิดพลาดตาม <a href=\"https://github.com/golang/go/wiki/CommonMistakes\" target=\"_blank\">Common Mistakes</a></p>\n\n\n\n<p><strong>มาดูตัวอย่างการใช้งานกัน</strong></p>\n\n\n\n<p>เป็นการเขียน test เพื่อตรวจสอบค่าเป็นเลขคู่ หรือ คี่<br />แล้วให้ run แบบ parallel </p>\n\n\n\n[gist id=\"5ee74a6b88e0d7c21bc71cf970bd2bf0\" file=\"1.go\"]\n\n\n\n<p>จะพบว่า ผ่านทั้งหมด ซึ่งไม่ถูกต้อง</p>\n\n\n\n[gist id=\"5ee74a6b88e0d7c21bc71cf970bd2bf0\" file=\"1.txt\"]\n\n\n\n<p>การแก้ไขง่าย ๆ ก็เพียงสร้างตัวแปรมารับ เพราะว่าใน IDE ก็จะแจ้งเตือนด้วยนะ !!</p>\n\n\n\n[gist id=\"5ee74a6b88e0d7c21bc71cf970bd2bf0\" file=\"2.go\"]\n\n\n\n<p><strong>แต่ถ้าไม่แก้ไข code ก็ทำการเปลี่ยน experimemt feature ไปเลย คือ loopvar ดังนี้</strong></p>\n\n\n\n[gist id=\"5ee74a6b88e0d7c21bc71cf970bd2bf0\" file=\"3.txt\"]\n\n\n\n<p>และยังมี <a href=\"https://go.dev/doc/pgo\" target=\"_blank\">Profile Guided Optimization (PGO)</a> ที่เป็น preview feature ใน Go 1.20<br />ตอนนี้คือตัว final แล้ว</p>\n\n\n\n<p>ลอง <a href=\"https://go.dev/dl/\" target=\"_blank\">Download</a> มาใช้งานกันดูครับ<br />หรือผ่าน command line ก็ได้</p>\n\n\n\n[code]\n$go install golang.org/dl/go1.21rc2@latest\n[/code]\n","author":"somkiat","siteTitle":"cc :: somkiat","siteHash":"3a23a5a4389e1e40c6fbb16520a8cc20df5b3591c25145ce72aaa18b19e48201","entryHash":"4583fd48164b4ebd99b1870d87a8bdd1f43ae5de998d75b3ebaa099d010bb586","category":"Thai"}