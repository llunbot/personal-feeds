{"title":"การใช้งาน Docker compose watch สำหรับ Vite","link":"https://www.somkiat.cc/docker-compose-watch-with-vite/","date":1699896825000,"content":"<p><img width=\"150\" height=\"150\" src=\"https://www.somkiat.cc/wp-content/uploads/2023/11/docker-vite-150x150.jpg\" loading=\"lazy\" srcset=\"https://www.somkiat.cc/wp-content/uploads/2023/11/docker-vite-150x150.jpg 150w, https://www.somkiat.cc/wp-content/uploads/2023/11/docker-vite-75x75.jpg 75w\" /></p>\n<figure><a href=\"https://www.somkiat.cc/wp-content/uploads/2023/11/docker-vite.jpg\"><img src=\"https://www.somkiat.cc/wp-content/uploads/2023/11/docker-vite.jpg\" width=\"620\" height=\"338\" /></a></figure>\n\n\n\n<p>คำถามจากการแบ่งปันเรื่องการพัฒนาระบบงานด้วย Docker<br />หนึ่งในคำถามที่น่าสนใจจาก Frontenf developer คือ<br />ในการพัฒนาระบบด้วย Vite + ReactJS นั้น<br />จะทำให้ dev พัฒนาได้สะดวกอย่างไร<br />ยิ่งเรื่องของ Hot Reload ก็อยากให้ใช้ได้ด้วย<br />ดังนั้นจึงมีคำแนะนำดังนี้</p>\n\n\n\n<span></span>\n\n\n\n<p><strong>ก่อนอื่นต้องเข้าใจก่อนว่า project ที่สร้างด้วย Vite นั้นจะ run ได้แค่ local</strong></p>\n\n\n\n<p>แสดงในการ run ดังนี้</p>\n\n\n\n[gist id=\"51055a0fbcf301be69f4d89d1a353402\" file=\"1.txt\"]\n\n\n\n<p><strong>ดังนั้นต้อง  expose  ออกมาก่อนด้วยการเพิ่ม option --host ใน package.json ดังนี้</strong></p>\n\n\n\n[gist id=\"51055a0fbcf301be69f4d89d1a353402\" file=\"package.json\"]\n\n\n\n<p>ผลการทำงานเป็นดังนี้</p>\n\n\n\n[gist id=\"51055a0fbcf301be69f4d89d1a353402\" file=\"2.txt\"]\n\n\n\n<p><strong>จากนั้นทำการสร้างไฟล์ Dockerfile สำหรับการ build image แบบง่าย ๆ ดังนี้</strong></p>\n\n\n\n[gist id=\"51055a0fbcf301be69f4d89d1a353402\" file=\"Dockerfile\"]\n\n\n\n<p><strong>สำหรับ <a href=\"https://docs.docker.com/compose/file-watch/\" target=\"_blank\">Docker compose watch</a> ก็ให้สร้างไฟล์ docker-compose.yml ดังนี้</strong></p>\n\n\n\n<p>ซึ่งทำหน้าที่เหมือนกับ Hot reload นั่นเอง</p>\n\n\n\n[gist id=\"51055a0fbcf301be69f4d89d1a353402\" file=\"docker-compose.yml\"]\n\n\n\n<p><strong>คำอธิบาย</strong></p>\n\n\n\n<ul>\n<li>ทำการ run ด้วยคำสั่ง <strong>docker compose watch</strong></li>\n\n\n\n<li>ให้ทำการ watch ไฟล์ใน directory ./ ของเครื่อง host โดยที่ sync กับ directory /app ใน container</li>\n\n\n\n<li>ไม่สนใจ ditectory node_modules/</li>\n\n\n\n<li>ให้ทำการ rebuild image ใหม่ และสร้าง container ใหม่ เมื่อไฟล์ package.json มีการเปลี่ยนแปลง</li>\n</ul>\n\n\n\n<p>เพียงเท่านี้ก็ใช้งานได้แล้ว<br />ซึ่งใช้งานเฉพาะ development mode เท่านั้นะครับ</p>\n","author":"somkiat","siteTitle":"cc :: somkiat","siteHash":"3a23a5a4389e1e40c6fbb16520a8cc20df5b3591c25145ce72aaa18b19e48201","entryHash":"8ee8d58d86275da98322b512a9f1a0baa9de3172efaa4784659401fa750064d4","category":"Thai"}