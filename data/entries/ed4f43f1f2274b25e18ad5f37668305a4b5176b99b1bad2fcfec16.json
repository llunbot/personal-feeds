{"title":"Release Notes for Safari Technology Preview 163","link":"https://webkit.org/blog/13839/release-notes-for-safari-technology-preview-163/","date":1675892965000,"content":"<p><a href=\"https://webkit.org/blog/6017/introducing-safari-technology-preview/\">Safari Technology Preview</a> Release 163 is now <a href=\"https://webkit.org/downloads/\">available for download</a> for macOS Monterey 12.3 or later and macOS Ventura. If you already have Safari Technology Preview installed, you can update in the Software Update pane of System Preferences on macOS Monterey, or System Settings under General → Software Update on macOS Ventura.</p>\n<p>This release includes WebKit changes between: <a href=\"https://github.com/WebKit/WebKit/compare/cf203f4511ff5d596126af5057da721eb625901f...8675dc347367b42c21c1f7db9f37cecce8de87d2\">258383@main…259548@main</a>.</p>\n<h3>Web Inspector</h3>\n<ul>\n<li>General\n<ul>\n<li>Fixed Web Inspector not remembering which side of the window it was attached to (<a href=\"https://commits.webkit.org/259320@main\">259320@main</a>)</li>\n<li>Fixed undocked Web Inspector windows being placed in a different window set from the window they are inspecting when using Stage Manager (<a href=\"https://commits.webkit.org/258672@main\">258672@main</a>)</li>\n</ul>\n</li>\n<li>Elements Tab\n<ul>\n<li>Fixed the ITAL variation axis slider showing NaN values in the Fonts details sidebar panel (<a href=\"https://commits.webkit.org/259351@main\">259351@main</a>)</li>\n<li>Fixed “Inspect Element” not revealing the selected element in the DOM tree if the element was hidden behind the “Show All Nodes” button (<a href=\"https://commits.webkit.org/258805@main\">258805@main</a>)</li>\n</ul>\n</li>\n<li>Timelines Tab\n<ul>\n<li>Disabled the Screenshots timeline when inspecting targets that can’t support it (<a href=\"https://commits.webkit.org/259326@main\">259326@main</a>)</li>\n</ul>\n</li>\n</ul>\n<h3>Masonry Layout</h3>\n<ul>\n<li>Enabled Masonry layout by default (<a href=\"https://commits.webkit.org/258694@main\">25869</a><a href=\"https://commits.webkit.org/258694@main\">4@main</a>, <a href=\"https://commits.webkit.org/259308@main\">259308@main</a>)</li>\n<li>Added the initial support for <code>align-tracks</code> and <code>justify-tracks</code> (<a href=\"https://commits.webkit.org/258544@main\">258544@main</a>)</li>\n</ul>\n<h3>CSS Custom Properties</h3>\n<ul>\n<li>Added dependency cycle handling that involves root style (<a href=\"https://commits.webkit.org/258985@main\">258985@main</a>)</li>\n<li>Added detection for complex custom property cycles involving multiple loops (<a href=\"https://commits.webkit.org/259506@main\">259506@main</a>)</li>\n<li>Added handling for computational dependencies in transform functions (<a href=\"https://commits.webkit.org/259353@main\">259353@main</a>, <a href=\"https://commits.webkit.org/259298@main\">259298@main</a>)</li>\n<li>Changed rules in shadow trees to be ignored (<a href=\"https://commits.webkit.org/258880@main\">258880@main</a>)</li>\n<li>Updated CSS custom properties containing <code>var()</code> to update when the referenced property is animated (<a href=\"https://commits.webkit.org/258786@main\">258786@main</a>)</li>\n<li>Fixed failing to provide intialValue in registerProperty with non-universal syntax should throw (<a href=\"https://commits.webkit.org/258909@main\">258909@main</a>)</li>\n<li>Fixed “<code>&lt;color&gt; | &lt;color&gt;+</code>” to match “yellow blue” (<a href=\"https://commits.webkit.org/259166@main\">259166@main</a>)</li>\n<li>Ensured <code>transition-property</code> values fill with a custom property when other transition CSS properties are used with a longer list of items (<a href=\"https://commits.webkit.org/258770@main\">258770@main</a>)</li>\n</ul>\n<h3>:has() pseudo-class</h3>\n<ul>\n<li>Added invalidation support for <code>:buffering</code> and <code>:stalled</code> pseudo-classes (<a href=\"https://commits.webkit.org/258891@main\">258891@main</a>)</li>\n<li>Made <code>:has()</code> require valid selectors for all selectors in the selector list (<a href=\"http://commits.webkit.org/258712@main\">258712@main</a>)</li>\n</ul>\n<h3>Media Queries Level 4</h3>\n<ul>\n<li>Allowed negative values in media queries (<a href=\"https://commits.webkit.org/258938@main\">258938@main</a>)</li>\n<li>Made “layer” an invalid media type name (<a href=\"https://commits.webkit.org/258957@main\">258957@main</a>)</li>\n</ul>\n<h3>CSS</h3>\n<ul>\n<li>Added support for <code>leading-trim</code> (<a href=\"https://commits.webkit.org/258766@main\">258766@main</a>)</li>\n<li>Added support for using <code>currentcolor</code> with <code>color-mix()</code> (<a href=\"https://commits.webkit.org/258970@main\">258970@main</a>, <a href=\"https://commits.webkit.org/259145@main\">259145@main</a>)</li>\n<li>Fixed <code>box-shadow</code> not painting correctly on inline elements (<a href=\"https://commits.webkit.org/258923@main\">258923@main</a>)</li>\n<li>Made CSS animations participate in cascade (<a href=\"https://commits.webkit.org/258514@main\">258514@main</a>)</li>\n<li>Fixed invalidation for class names within <code>:nth-child()</code> selector lists (<a href=\"https://commits.webkit.org/258917@main\">258917@main</a>)</li>\n<li>Fixed focusing an element with scroll snap to not always result in snapping to that element (<a href=\"https://commits.webkit.org/259381@main\">259381@main</a>)</li>\n<li>Fixed <code>font-face</code> <code>src</code> list failing early if the component fails (<a href=\"https://commits.webkit.org/258749@main\">258749@main</a>, <a href=\"https://commits.webkit.org/258870@main\">258870@main</a>)</li>\n<li>Fixed <code>font-face</code> <code>src</code> <code>local()</code> to invalidate CSS-wide keywords (<a href=\"https://commits.webkit.org/258695@main\">258695@main</a>)</li>\n<li>Fixed <code>text-decoration-thickness</code> property to always trigger a repaint when changed (<a href=\"https://commits.webkit.org/258641@main\">258641@main</a>)</li>\n<li>Fixed <code>overscroll-behavior: none</code> to prevent overscroll when the page is too small to scroll (<a href=\"https://commits.webkit.org/259227@main\">259227@main</a>)</li>\n<li>Fixed <code>appearance: slider-vertical</code> to only apply to range inputs (<a href=\"https://commits.webkit.org/258924@main\">258924@main</a>)</li>\n<li>Fixed that initial whitespace breaks the query in <code>window.matchMedia()</code> (<a href=\"https://commits.webkit.org/259357@main\">259357@main</a>)</li>\n<li>Fixed a bug that Disconnected <code>&lt;fieldset&gt;</code> elements sometimes incorrectly match :valid / :invalid selectors (<a href=\"https://commits.webkit.org/259422@main\">259422@main</a>)</li>\n<li>Removed “specified hue” color interpolation method for gradients and <code>color-mix()</code> (<a href=\"https://commits.webkit.org/259190@main\">259190@main</a>)</li>\n<li>Stopped requiring whitespace between <code>of</code> and the selector list in <code>:nth-child</code> and <code>:nth-last-child</code> (<a href=\"https://commits.webkit.org/258703@main\">258703@main</a>)</li>\n</ul>\n<h3>CSS Typed OM</h3>\n<ul>\n<li>Stopped treating <code>grid-row-start</code>, <code>grid-column-start</code>, <code>grid-row-end</code>, and <code>grid-column-end</code> as list properties (<a href=\"https://commits.webkit.org/258764@main\">258764@main</a>)</li>\n</ul>\n<h3>Forms</h3>\n<ul>\n<li>Fixed <code>input[type=submit]</code>, <code>input[type=reset]</code>, and <code>input[type=button]</code> to honor font-size/padding/height and to work with multi-line values (<a href=\"https://commits.webkit.org/258754@main\">258754@main</a>)</li>\n</ul>\n<h3>Rendering</h3>\n<ul>\n<li>Added a guard against zero or negative space shortage (<a href=\"https://commits.webkit.org/258647@main\">258647@main</a>)</li>\n<li>Changed the default oblique angle from 20 degrees to 14 degrees to match other browsers (<a href=\"https://commits.webkit.org/258722@main\">258722@main</a>)</li>\n<li>Fixed underlines not appearing and disappearing when expected (<a href=\"https://commits.webkit.org/258914@main\">258914@main</a>)</li>\n<li>Fixed hairline on selection when bidi text is involved (<a href=\"https://commits.webkit.org/259537@main\">259537@main</a>)</li>\n<li>Fixed incorrect paint of <code>translate</code> property animation (<a href=\"https://commits.webkit.org/259173@main\">259173@main</a>)</li>\n<li>Fixed incorrect repaint when inline content shrinks vertically (<a href=\"https://commits.webkit.org/259141@main\">259141@main</a>)</li>\n<li>Fixed scrolling through content hidden with <code>clip-path</code> not propagating below (<a href=\"https://commits.webkit.org/259368@main\">259368@main</a>)</li>\n<li>Fixed <code>margin: auto</code> to be the only rule resolved against the “available width adjusted with intrusive floats” (e.g. percent values are based on container width). (<a href=\"https://commits.webkit.org/259125@main\">259125@main</a>)</li>\n<li>Fixed lazy image loading failure when <code>overflow: clip</code> was set on just one axis (<a href=\"https://commits.webkit.org/259007@main\">259007@main</a>)</li>\n<li>Fixed scrolling for a fixed header inside overflow scroll with a transformed ancestor (<a href=\"https://commits.webkit.org/259175@main\">259175@main</a>)</li>\n<li>Fixed incorrect custom pseudo-scrollbar sizes (<a href=\"https://commits.webkit.org/259389@main\">259389@main</a>)</li>\n<li>Improved balancing for <code>border</code>, <code>padding</code>, and empty block content (<a href=\"https://commits.webkit.org/259246@main\">259246@main</a>)</li>\n</ul>\n<h3>JavaScript</h3>\n<ul>\n<li>Fixed <code>Atomics.waitAsync</code> to be invocable from the main thread (<a href=\"https://commits.webkit.org/258856@main\">258856@main</a>)</li>\n<li>Fixed module scripts to always decode using UTF-8 (<a href=\"https://commits.webkit.org/259251@main\">259251@main</a>, <a href=\"https://commits.webkit.org/259261@main\">259261@main</a>)</li>\n<li>Fixed <code>toLocaleLowerCase</code> and <code>toLocaleUpperCase</code> to not throw an exception on empty string (<a href=\"https://commits.webkit.org/259242@main\">259242@main</a>)</li>\n<li>Optimized Number constructor calls further (<a href=\"https://commits.webkit.org/259533@main\">259533@main</a>)</li>\n<li>Optimized <code>WebAssemblyInstance#exports</code> (<a href=\"https://commits.webkit.org/259017@main\">259017@main</a>)</li>\n<li>Updated <code>Intl.DurationFormat</code> to align with updated standards (<a href=\"https://commits.webkit.org/259317@main\">259317@main</a>)</li>\n</ul>\n<h3>WebAssembly</h3>\n<ul>\n<li>Added <code>ref.as_non_null</code> instruction (<a href=\"https://commits.webkit.org/259420@main\">259420@main</a>)</li>\n<li>Added missing type expansion for GC arrays and structs (<a href=\"https://commits.webkit.org/259042@main\">259042@main</a>)</li>\n<li>Added <code>struct.new_canon_default</code> (<a href=\"https://commits.webkit.org/258689@main\">258689@main</a>)</li>\n</ul>\n<h3>Gamepad API</h3>\n<ul>\n<li>Added support for <code>vibrationActuator</code> (<a href=\"https://commits.webkit.org/258680@main\">258680@main</a>)</li>\n<li>Added experimental support for “trigger-rumble” effect type behind a feature flag (<a href=\"https://commits.webkit.org/259507@main\">259507@main</a>)</li>\n<li>Fixed <code>GamepadHapticActuator.playEffect()</code> with a magnitude less than 0.1 having no effect (<a href=\"https://commits.webkit.org/258874@main\">258874@main</a>)</li>\n<li>Fixed how magnitude values passed to <code>GamepadHapticActuator.playEffect()</code> (<a href=\"https://commits.webkit.org/258988@main\">258988@main</a>)</li>\n<li>Made <code>gamepad.vibrationActuator.playEffect()</code> throw for invalid effect parameters (<a href=\"https://commits.webkit.org/258752@main\">258752@main</a>)</li>\n<li>Made <code>vibrationActuator</code> limit the duration of vibration effects (<a href=\"https://commits.webkit.org/258759@main\">258759@main</a>)</li>\n<li>Made <code>vibrationActuator</code> stop vibrating when its document becomes hidden (<a href=\"https://commits.webkit.org/258802@main\">258802@main</a>)</li>\n<li>Made <code>Gamepad.vibrationActuator</code> work with the GameController framework (<a href=\"https://commits.webkit.org/258674@main\">258674@main</a>)</li>\n<li>Made <code>Gamepad.vibrationActuator</code> return <code>null</code> when the gamepad doesn’t support dual-rumble (<a href=\"https://commits.webkit.org/258812@main\">258812@main</a>)</li>\n<li>Set <code>Gamepad.vibrationActuator.type</code> to “dual-rumble” (<a href=\"https://commits.webkit.org/258758@main\">258758@main</a>)</li>\n</ul>\n<h3>Web API</h3>\n<ul>\n<li>Enabled default ARIA for custom elements (<a href=\"https://commits.webkit.org/258743@main\">258743@main</a>)</li>\n<li>Implemented <code>StorageManager.estimate()</code> (<a href=\"https://commits.webkit.org/258610@main\">258610@main</a>)</li>\n<li>Added support for Ed25519 keys to Web Crypto (<a href=\"https://commits.webkit.org/259277@main\">259277@main</a>, <a href=\"https://commits.webkit.org/259489@main\">259489@main</a>)</li>\n<li>Changed <code>queryCommandValue(\"stylewithcss\")</code> to always return an empty string (<a href=\"https://commits.webkit.org/258777@main\">258777@main</a>)</li>\n<li>Disabled DOMParser’s support for declarative shadow DOM (<a href=\"https://commits.webkit.org/258768@main\">258768@main</a>)</li>\n<li>Fixed a bug that <code>FileSystemSyncAccessHandle</code>’s <code>close</code> function throws an exception on the second call (<a href=\"https://commits.webkit.org/258736@main\">258736@main</a>)</li>\n<li>Fixed data written via FileSystemSyncAccessHandle disappearing after creating a new FileSystemFileHandle (<a href=\"https://commits.webkit.org/258876@main\">258876@main</a>)</li>\n<li>Fixed negative shadow repaint issue (<a href=\"https://commits.webkit.org/259497@main\">259497@main</a>)</li>\n<li>Fixed getting <code>input.value</code> for number inputs with over 39 characters returning an empty string (<a href=\"https://commits.webkit.org/258614@main\">258614@main</a>)</li>\n<li>Fixed right-to-left tab handling (<a href=\"https://commits.webkit.org/259428@main\">259428@main</a>, <a href=\"https://commits.webkit.org/259460@main\">259460@main</a>)</li>\n<li>Fixed <code>Clear-Site-Data</code> HTTP header to obey origin partitioning (<a href=\"https://commits.webkit.org/259466@main\">259466@main</a>)</li>\n<li>Fixed a bug that a new SharedWorker will be dysfunctional after the old one terminated via <code>SharedWorkerGlobalScope.close()</code> (<a href=\"https://commits.webkit.org/259228@main\">259228@main</a>)</li>\n<li>Fixed a bug that HTMLSelectElement’s value setter sets incorrect values if there are grouped options (<a href=\"https://commits.webkit.org/259249@main\">259249@main</a>)</li>\n<li>Fixed stripping of leading slashes in <code>URL.hostname</code> setter (<a href=\"https://commits.webkit.org/259366@main\">259366@main</a>)</li>\n<li>Fixed a bug that <code>formDisabledCallback()</code> is sometimes called even when disabledness hasn’t changed (<a href=\"https://commits.webkit.org/259372@main\">259372@main</a>)</li>\n<li>Made autofilling form to trigger <code>input</code> event in addition to <code>change</code> event (<a href=\"https://commits.webkit.org/259434@main\">259434@main</a>)</li>\n<li>Moved <code>oncopy</code>, <code>oncut</code>, and <code>onpaste</code> to GlobalEventHandlers (<a href=\"https://commits.webkit.org/258390@main\">258390@main</a>)</li>\n<li>Removed the <code>precision=\"float\"</code> attribute on <code>&lt;input type=\"range\"&gt;</code> (<a href=\"https://commits.webkit.org/258625@main\">258625@main</a>)</li>\n<li>Removed <code>HTMLHeadElement.profile</code> (<a href=\"https://commits.webkit.org/258397@main\">258397@main</a>)</li>\n<li>Removed <code>HTMLPreElement.wrap</code> (<a href=\"https://commits.webkit.org/258445@main\">258445@main</a>)</li>\n<li>Removed <code>SVGFEMorphologyElement.setRadius(radiusX, radiusY)</code> (<a href=\"https://commits.webkit.org/258733@main\">258733@main</a>)</li>\n<li>Removed <code>HTMLFrameElement.location</code> (<a href=\"https://commits.webkit.org/259067@main\">259067@main</a>)</li>\n<li>Updated Content Security Policy when the header is sent as part of a 304 response (<a href=\"https://commits.webkit.org/258931@main\">258931@main</a>)</li>\n</ul>\n<h3>WebGL</h3>\n<ul>\n<li>Enabled <code>WEBGL_provoking_vertex</code> by default (<a href=\"https://commits.webkit.org/259499@main\">259499@main</a>)</li>\n</ul>\n<h3>SVG</h3>\n<ul>\n<li>Fixed <code>rotate: x</code> and <code>transform: rotate(x)</code> yielding different behavior with SVG (<a href=\"https://commits.webkit.org/258882@main\">258882@main</a>)</li>\n<li>Fixed SVG <code>textLength</code> (<a href=\"https://commits.webkit.org/258921@main\">258921@main</a>)</li>\n<li>Handled animation freeze when <code>repeatDur</code> is not a multiple of <code>dur</code> (<a href=\"https://commits.webkit.org/259212@main\">259212@main</a>)</li>\n<li>Fixed the bug that SVG sometimes doesn’t repaint when resolving color changes (<a href=\"https://commits.webkit.org/259082@main\">259082@main</a>)</li>\n<li>Fixed computing the <code>keyTimes</code> index correctly for discrete values animations (<a href=\"https://commits.webkit.org/258939@main\">258939@main</a>)</li>\n</ul>\n<h3>Scrolling</h3>\n<ul>\n<li>Fixed page scrolling more than one screenful when pressing Space or Fn+Down (<a href=\"https://commits.webkit.org/259146@main\">259146@main</a>)</li>\n</ul>\n<h3>Media</h3>\n<ul>\n<li>Enabled <code>AudioSession</code> API by default with a reduced subset (<a href=\"https://commits.webkit.org/259074@main\">259074@main</a>)</li>\n<li>Moved Media Source API settings back into the Experimental Features (<a href=\"https://commits.webkit.org/258853@main\">258853@main</a>)</li>\n<li>Changed to try using low latency for the WebRTC HEVC encoder, if available (<a href=\"https://commits.webkit.org/259128@main\">259128@main</a>)</li>\n<li>Fixed HLS videos sometimes failing to reach “ended” state and not able to be restarted (<a href=\"https://commits.webkit.org/259342@main\">259342@main</a>)</li>\n<li>Fixed MediaStreamTrack ending due to a capture failure when using bluetooth headsets (<a href=\"https://commits.webkit.org/259150@main\">259150@main</a>)</li>\n<li>Fixed <code>AudioBufferSourceNode.start</code> with a duration sometimes failing (<a href=\"https://commits.webkit.org/259234@main\">259234@main</a>)</li>\n<li>Fixed duplicate <code>timeupdate</code> events in Text Track Code (<a href=\"https://commits.webkit.org/259023@main\">259023@main</a>)</li>\n<li>Fixed a bug that video element pauses after bluetooth audio input is disconnected (<a href=\"https://commits.webkit.org/259415@main\">259415@main</a>, <a href=\"https://commits.webkit.org/259478@main\">259478@main</a>)</li>\n<li>Updated <code>MediaController.currentTime</code> to return the previously set position (<a href=\"https://commits.webkit.org/259020@main\">259020@main</a>)</li>\n</ul>\n<h3>Accessibility</h3>\n<ul>\n<li>Fixed <code>aria-controls</code> to be exposed as AXLinkedUIElements and not AXARIAControls (<a href=\"https://commits.webkit.org/258922@main\">258922@main</a>)</li>\n<li>Fixed VoiceOver when selecting “Sign in with Apple” on some websites (<a href=\"https://commits.webkit.org/259147@main\">259147@main</a>)</li>\n</ul>\n<h3>WebDriver</h3>\n<ul>\n<li>Fixed the Shift modifier key not applying to typed text (<a href=\"https://commits.webkit.org/259039@main\">259039@main</a>)</li>\n</ul>\n<h3>Safari Web Extensions</h3>\n<ul>\n<li>Added support for support <code>setExtensionActionOptions()</code> in the declarativeNetRequest API</li>\n<li>Changed <code>declarativeNetRequest</code> rules to default to <code>false</code> for <code>isUrlFilterCaseSensitive</code></li>\n<li>Increased <code>browser.storage.session</code> data limit to 10MB</li>\n<li>Fixed <code>:has()</code> selector for Safari Content Blockers (<a href=\"https://commits.webkit.org/259068@main\">259068@main</a>)</li>\n</ul>","author":"","siteTitle":"Blog – WebKit","siteHash":"f53db2e11a2faa08c6dca9954c01638d09a2ce585b77a60d10f7a1","entryHash":"ed4f43f1f2274b25e18ad5f37668305a4b5176b99b1bad2fcfec16","category":"Tech"}