{"title":"Spring Boot 3.1 สนับสนุน Docker compose","link":"https://www.somkiat.cc/spring-boot-with-docker-compose/","date":1685169566000,"content":"<p><img width=\"150\" height=\"150\" src=\"https://www.somkiat.cc/wp-content/uploads/2023/05/spring-docker-compose-150x150.png\" alt srcset=\"https://www.somkiat.cc/wp-content/uploads/2023/05/spring-docker-compose-150x150.png 150w, https://www.somkiat.cc/wp-content/uploads/2023/05/spring-docker-compose-75x75.png 75w\" /></p>\n<figure><img src=\"https://www.somkiat.cc/wp-content/uploads/2023/05/spring-docker-compose.png\" alt /></figure>\n\n\n\n<p>เพิ่งสังเกตเห็นว่า Spring Boot 3.1 ที่ออกมานั้น<br />สนับสนุน <a href=\"https://docs.spring.io/spring-boot/docs/3.1.0/reference/html/features.html#features.docker-compose\" target=\"_blank\">Docker compose</a> แล้ว<br />ทำให้การ build, develop, testing, deploy กับ Docker ง่ายขึ้น<br />โดยทำดังนี้</p>\n\n\n\n<span></span>\n\n\n\n<p><strong>ทำการเพิ่ม dependency เข้ามาใน project</strong></p>\n\n\n\n[gist id=\"d4c1655232816edd072bca645c7dac3a\" file=\"1.txt\"]\n\n\n\n<p>โดย dependency ตัวนี้ จะทำงานดังนี้</p>\n\n\n\n<ul><li>ทำการค้นหาไฟล์ compose.yml หรือ docker-compose.yml ใน project</li><li>ถ้าเจอแล้ว จะทำงาน $docker compose up เพื่อสร้าง container ต่าง ๆ ขึ้นมา</li><li>เมื่อจำการทำงานหรือ shutdown server จะทำงาน $docker compose down เพื่อลบ container ต่าง ๆ ที่สร้างขึ้นมาให้</li></ul>\n\n\n\n<p><strong>สามารถเปลี่ยนชื่อไฟล์ docker compose ได้ด้วย</strong></p>\n\n\n\n[gist id=\"d4c1655232816edd072bca645c7dac3a\" file=\"2.txt\"]\n\n\n\n<p><strong>มีเรื่องของ readiness ด้วย เพื่อให้ทำการรอจนกว่า container จะพร้อม</strong> </p>\n\n\n\n<p>แต่ถ้าต้องการปิดทำได้ดังนี้</p>\n\n\n\n<p>ด้วยการเพิ่ม <strong><em>org.springframework.boot.readiness-check.tcp.disable: true</em></strong></p>\n\n\n\n<p>เช่น</p>\n\n\n\n[gist id=\"d4c1655232816edd072bca645c7dac3a\" file=\"compose.yml\"]\n\n\n\n<p>รวมทั้งยังสามารถกำหนด timeout เพิ่มได้</p>\n\n\n\n[gist id=\"d4c1655232816edd072bca645c7dac3a\" file=\"3.txt\"]\n\n\n\n<p>เพียงเท่านี้ก็สามารถใช้งาน Docker compose ได้แบบง่าย ๆ และสะดวกขึ้น</p>\n\n\n\n<p></p>\n","author":"somkiat","siteTitle":"cc :: somkiat","siteHash":"3a23a5a4389e1e40c6fbb16520a8cc20df5b3591c25145ce72aaa18b19e48201","entryHash":"ff6725ed4eb3534bfd1744fc4a5101c2cdd95278aeb452aa5aec3425e2d8a2e9","category":"Thai"}