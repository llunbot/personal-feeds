{"title":"บันทึกการแก้ปัญหา Cannot read properties of undefined (reading ‘REACT_APP_SC_ATTR’)","link":"https://www.somkiat.cc/problem-cannot-read-react-app-sc-attr/","date":1677076743000,"content":"<p><img width=\"150\" height=\"150\" src=\"https://www.somkiat.cc/wp-content/uploads/2023/02/Screenshot-2566-02-22-at-21.18.52-150x150.png\" alt srcset=\"https://www.somkiat.cc/wp-content/uploads/2023/02/Screenshot-2566-02-22-at-21.18.52-150x150.png 150w, https://www.somkiat.cc/wp-content/uploads/2023/02/Screenshot-2566-02-22-at-21.18.52-75x75.png 75w\" /></p>\n<p>ปัญหาที่เจอ ในการทดสอบ component testing ด้วย Cypress<br />โดยสิ่งที่ใช้งานประบกอบไปด้วย</p>\n\n\n\n<ul><li>Vite + ReactJS + TypeScript</li><li>มีใช้งาน styled component !!</li></ul>\n\n\n\n<p>เมื่อสร้างและ run component testing จะเจอปัญหาดังรูป</p>\n\n\n\n<figure><img src=\"https://www.somkiat.cc/wp-content/uploads/2023/02/Screenshot-2566-02-22-at-21.18.52.png\" alt width=\"567\" height=\"277\" /></figure>\n\n\n\n<span></span>\n\n\n\n<p>การแก้ไขปัญหาเบื้อต้น จะมีใน <strong><a href=\"https://github.com/cypress-io/cypress/issues/22678\" target=\"_blank\">ISSUE # 22678</a></strong><br />มีแนวทางการแก้ไขที่แนะนำมา 2 วิธี ดังนี้</p>\n\n\n\n<p><strong>วิธีที่ 1 เพิ่มการอ่าน environment ใน cypress</strong></p>\n\n\n\n<p>ด้วยการเพิ่มในไฟล์ cypress/support/component.ts</p>\n\n\n\n[code]\nprocess = process || { env: {} };\nprocess.env = process.env || {};\n[/code]\n\n\n\n<p><strong>วิธีที่ 2 ทำการเพิ่ม config ใน vite.config.ts</strong></p>\n\n\n\n<p>ทำการติดตั้ง dependency ชื่อว่า <a href=\"https://www.npmjs.com/package/vite-define-envs-plugin\" target=\"_blank\">vite-define-envs-plugin</a><br />และเพิ่มการอ่าน environment ได้เลย ดังนี้</p>\n\n\n\n[gist id=\"ff6f6e66fcc1dbf4fad427260da948fb\" file=\"vite.config.ts\"]\n\n\n\n<p>เพียงเท่านี้ก็แก้ไขได้แบบอ้อม ๆ<br />หวังว่าทางต้นทางจะแก้ไขให้นะ</p>\n","author":"somkiat","siteTitle":"cc :: somkiat","siteHash":"9e1e40c6fbb16520a8cc20df5b3591c25145ce72aaa18b19e48201","entryHash":"ebde290371872d70493c6b5ea2e1ff810b7ed6bc98823b3d35393f","category":"Thai"}