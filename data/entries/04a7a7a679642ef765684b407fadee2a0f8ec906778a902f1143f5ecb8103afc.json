{"title":"New Amazon EC2 P5en instances with NVIDIA H200 Tensor Core GPUs and EFAv3 networking","link":"https://aws.amazon.com/blogs/aws/new-amazon-ec2-p5en-instances-with-nvidia-h200-tensor-core-gpus-and-efav3-networking/","date":1733193545000,"content":"<p>Today, we’re announcing the general availability of <a href=\"https://aws.amazon.com/ec2/instance-types/p5/\"><strong>Amazon Elastic Compute Cloud (Amazon EC2) P5en instances</strong></a>, powered by NVIDIA H200 Tensor Core GPUs and custom 4th generation Intel Xeon Scalable processors with an all-core turbo frequency of 3.2 GHz (max core turbo frequency of 3.8 GHz) available only on AWS. These processors offer 50 percent higher memory bandwidth and up to four times throughput between CPU and GPU with PCIe Gen5, which help boost performance for machine learning (ML) training and inference workloads.</p> \n<p>P5en, with up to 3200 Gbps of third generation of <a href=\"https://aws.amazon.com/hpc/efa\">Elastic Fabric Adapter (EFAv3)</a> using Nitro v5, shows up to 35% improvement in latency compared to P5 that uses the previous generation of EFA and Nitro. This helps improve collective communications performance for distributed training workloads such as <a href=\"https://aws.amazon.com/what-is/deep-learning/\">deep learning</a>, <a href=\"https://aws.amazon.com/generative-ai/\">generative AI</a>, <a href=\"https://aws.amazon.com/what-is/real-time-data-streaming/\">real-time data processing</a>, and <a href=\"https://aws.amazon.com/hpc/\">high-performance computing</a> (HPC) applications.</p> \n<p>Here are the specs for P5en instances:</p> \n<table> \n <tbody> \n  <tr> \n   <td><strong>Instance size</strong></td> \n   <td><strong>vCPUs</strong></td> \n   <td><strong>Memory (GiB)</strong></td> \n   <td><strong>GPUs (H200)</strong></td> \n   <td><strong>Network bandwidth (Gbps)</strong></td> \n   <td><strong>GPU Peer to peer (GB/s)</strong></td> \n   <td><strong>Instance storage (TB)</strong></td> \n   <td><strong>EBS bandwidth (Gbps)</strong></td> \n  </tr> \n  <tr> \n   <td><strong>p5en.48xlarge</strong></td> \n   <td>192</td> \n   <td>2048</td> \n   <td>8</td> \n   <td>3200</td> \n   <td>900</td> \n   <td>8 x 3.84</td> \n   <td>100</td> \n  </tr> \n </tbody> \n</table> \n<p>On September 9, we <a href=\"https://aws.amazon.com/blogs/machine-learning/amazon-ec2-p5e-instances-are-generally-available/\">introduced Amazon EC2 P5e instances</a>, powered by 8 NVIDIA H200 GPUs with 1128 GB of high bandwidth GPU memory, 3rd Gen AMD EPYC processors, 2 TiB of system memory, and 30 TB of local NVMe storage. These instances provide up to 3,200 Gbps of aggregate network bandwidth with EFAv2 and support GPUDirect RDMA, enabling lower latency and efficient scale-out performance by bypassing the CPU for internode communication.</p> \n<p>With P5en instances, you can increase the overall efficiency in a wide range of GPU-accelerated applications by further reducing the inference and network latency. P5en instances increases local storage performance by up to two times and <a href=\"https://aws.amazon.com/ebs\">Amazon Elastic Block Store (Amazon EBS)</a> bandwidth by up to 25 percent compared with P5 instances, which will further improve inference latency performance for those of you who are using local storage for caching model weights.</p> \n<p>The transfer of data between CPUs and GPUs can be time-consuming, especially for large datasets or workloads that require frequent data exchanges. With PCIe Gen 5 providing up to four times bandwidth between CPU and GPU compared with P5eand P5e instances, you can further improve latency for model training, fine-tuning, and running inference for complex <a href=\"https://aws.amazon.com/what-is/large-language-model/\">large language models (LLMs)</a> and multimodal <a href=\"https://aws.amazon.com/what-is/foundation-models/\">foundation models (FMs)</a>, and memory-intensive HPC applications such as simulations, pharmaceutical discovery, weather forecasting, and financial modeling.</p> \n<p><strong><u>Getting started with Amazon EC2 P5en instances</u></strong><br /> You can use EC2 P5en instances available in the US East (Ohio), US West (Oregon), and Asia Pacific (Tokyo) AWS Regions through <a href=\"https://aws.amazon.com/ec2/capacityblocks/\">EC2 Capacity Blocks for ML</a>, On Demand, and Savings Plan purchase options.</p> \n<p>I want to introduce how to use P5en instances with Capacity Reservation as an option. To reserve your EC2 Capacity Blocks, choose <strong>Capacity Reservations</strong> on the <a href=\"https://us-east-2.console.aws.amazon.com/ec2/home?region=us-east-2#CapacityReservations:\">Amazon EC2 console</a> in the US East (Ohio) AWS Region.</p> \n<p>Select <strong>Purchase Capacity Blocks for ML</strong> and then choose your total capacity and specify how long you need the EC2 Capacity Block for <strong>p5en.48xlarge</strong> instances. The total number of days that you can reserve EC2 Capacity Blocks is 1–14, 21, or 28 days. EC2 Capacity Blocks can be purchased up to 8 weeks in advance.</p> \n<p><img src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/11/17/2025-ec2-p5en-instance-capacity-block.jpg\" width=\"2448\" height=\"1394\" /></p> \n<p>When you select <strong>Find Capacity Blocks</strong>, AWS returns the lowest-priced offering available that meets your specifications in the date range you have specified. After reviewing EC2 Capacity Blocks details, tags, and total price information, choose <strong>Purchase</strong>.</p> \n<p>Now, your EC2 Capacity Block will be scheduled successfully. The total price of an EC2 Capacity Block is charged up front, and the price does not change after purchase. The payment will be billed to your account within 12 hours after you purchase the EC2 Capacity Blocks. To learn more, visit <a href=\"https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-capacity-blocks.html\">Capacity Blocks for ML</a> in the Amazon EC2 User Guide.</p> \n<p>To run instances within your purchased Capacity Block, you can use <a href=\"https://console.aws.amazon.com/ec2\">AWS Management Console</a>, <a href=\"https://aws.amazon.com/cli/\">AWS Command Line Interface (AWS CLI)</a> or <a href=\"http://docs.aws.amazon.com/AWSJavaScriptSDK/latest/AWS/EC2.html\">AWS SDKs</a>.</p> \n<p>Here is a sample AWS CLI command to run 16 P5en instances to <a href=\"https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/efa-acc-inst-types.html#efa-for-p5\">maximize EFAv3 benefits</a>. This configuration provides up to 3200 Gbps of EFA networking bandwidth and up to 800 Gbps of IP networking bandwidth with eight private IP address:</p> \n<pre><code>$ aws ec2 run-instances --image-id ami-abc12345 \\\n  --instance-type p5en.48xlarge \\\n  --count 16 \\\n  --key-name MyKeyPair \\\n  --instance-market-options MarketType='capacity-block' \\\n  --capacity-reservation-specification CapacityReservationTarget={CapacityReservationId=cr-a1234567}\n--network-interfaces \"NetworkCardIndex=0,DeviceIndex=0,Groups=security_group_id,SubnetId=subnet_id,InterfaceType=efa\" \\\n\"NetworkCardIndex=1,DeviceIndex=1,Groups=security_group_id,SubnetId=subnet_id,InterfaceType=efa-only\" \\\n\"NetworkCardIndex=2,DeviceIndex=1,Groups=security_group_id,SubnetId=subnet_id,InterfaceType=efa-only\" \\\n\"NetworkCardIndex=3,DeviceIndex=1,Groups=security_group_id,SubnetId=subnet_id,InterfaceType=efa-only\" \\\n\"NetworkCardIndex=4,DeviceIndex=1,Groups=security_group_id,SubnetId=subnet_id,InterfaceType=efa\" \\\n\"NetworkCardIndex=5,DeviceIndex=1,Groups=security_group_id,SubnetId=subnet_id,InterfaceType=efa-only\" \\\n\"NetworkCardIndex=6,DeviceIndex=1,Groups=security_group_id,SubnetId=subnet_id,InterfaceType=efa-only\" \\\n\"NetworkCardIndex=7,DeviceIndex=1,Groups=security_group_id,SubnetId=subnet_id,InterfaceType=efa-only\" \\\n\"NetworkCardIndex=8,DeviceIndex=1,Groups=security_group_id,SubnetId=subnet_id,InterfaceType=efa\" \\\n\"NetworkCardIndex=9,DeviceIndex=1,Groups=security_group_id,SubnetId=subnet_id,InterfaceType=efa-only\" \\\n\"NetworkCardIndex=10,DeviceIndex=1,Groups=security_group_id,SubnetId=subnet_id,InterfaceType=efa-only\" \\\n\"NetworkCardIndex=11,DeviceIndex=1,Groups=security_group_id,SubnetId=subnet_id,InterfaceType=efa-only\" \\\n\"NetworkCardIndex=12,DeviceIndex=1,Groups=security_group_id,SubnetId=subnet_id,InterfaceType=efa\" \\\n\"NetworkCardIndex=13,DeviceIndex=1,Groups=security_group_id,SubnetId=subnet_id,InterfaceType=efa-only\" \\\n\"NetworkCardIndex=14,DeviceIndex=1,Groups=security_group_id,SubnetId=subnet_id,InterfaceType=efa-only\" \\\n\"NetworkCardIndex=15,DeviceIndex=1,Groups=security_group_id,SubnetId=subnet_id,InterfaceType=efa-only\" \\\n\"NetworkCardIndex=16,DeviceIndex=1,Groups=security_group_id,SubnetId=subnet_id,InterfaceType=efa\" \\\n\"NetworkCardIndex=17,DeviceIndex=1,Groups=security_group_id,SubnetId=subnet_id,InterfaceType=efa-only\" \\\n\"NetworkCardIndex=18,DeviceIndex=1,Groups=security_group_id,SubnetId=subnet_id,InterfaceType=efa-only\" \\\n\"NetworkCardIndex=19,DeviceIndex=1,Groups=security_group_id,SubnetId=subnet_id,InterfaceType=efa-only\" \\\n\"NetworkCardIndex=20,DeviceIndex=1,Groups=security_group_id,SubnetId=subnet_id,InterfaceType=efa\" \\\n\"NetworkCardIndex=21,DeviceIndex=1,Groups=security_group_id,SubnetId=subnet_id,InterfaceType=efa-only\" \\\n\"NetworkCardIndex=22,DeviceIndex=1,Groups=security_group_id,SubnetId=subnet_id,InterfaceType=efa-only\" \\\n\"NetworkCardIndex=23,DeviceIndex=1,Groups=security_group_id,SubnetId=subnet_id,InterfaceType=efa-only\" \\\n\"NetworkCardIndex=24,DeviceIndex=1,Groups=security_group_id,SubnetId=subnet_id,InterfaceType=efa\" \\\n\"NetworkCardIndex=25,DeviceIndex=1,Groups=security_group_id,SubnetId=subnet_id,InterfaceType=efa-only\" \\\n\"NetworkCardIndex=26,DeviceIndex=1,Groups=security_group_id,SubnetId=subnet_id,InterfaceType=efa-only\" \\\n\"NetworkCardIndex=27,DeviceIndex=1,Groups=security_group_id,SubnetId=subnet_id,InterfaceType=efa-only\" \\\n\"NetworkCardIndex=28,DeviceIndex=1,Groups=security_group_id,SubnetId=subnet_id,InterfaceType=efa\" \\\n\"NetworkCardIndex=29,DeviceIndex=1,Groups=security_group_id,SubnetId=subnet_id,InterfaceType=efa-only\" \\\n\"NetworkCardIndex=30,DeviceIndex=1,Groups=security_group_id,SubnetId=subnet_id,InterfaceType=efa-only\" \\\n\"NetworkCardIndex=31,DeviceIndex=1,Groups=security_group_id,SubnetId=subnet_id,InterfaceType=efa-only\"\n...\n</code></pre> \n<p>When launching P5en instances, you can use <a href=\"https://aws.amazon.com/machine-learning/amis/\">AWS Deep Learning AMIs</a> (DLAMI) to support EC2 P5en instances. DLAMI provides ML practitioners and researchers with the infrastructure and tools to quickly build scalable, secure, distributed ML applications in preconfigured environments.</p> \n<p>You can run containerized ML applications on P5en instances with <a href=\"https://aws.amazon.com/machine-learning/containers/\">AWS Deep Learning Containers</a> using libraries for <a href=\"https://aws.amazon.com/ecs\">Amazon Elastic Container Service (Amazon ECS)</a> or <a href=\"https://aws.amazon.com/eks\">Amazon Elastic Kubernetes Service (Amazon EKS)</a>.</p> \n<p>For fast access to large datasets, you can use up to 30 TB of local NVMe SSD storage or virtually unlimited cost-effective storage with <a href=\"https://aws.amazon.com/s3\">Amazon Simple Storage Service (Amazon S3)</a>. You can also use <a href=\"https://aws.amazon.com/fsx/lustre/\">Amazon FSx for Lustre</a> file systems in P5en instances so you can access data at the hundreds of GB/s of throughput and millions of input/output operations per second (IOPS) required for large-scale deep learning and HPC workloads.</p> \n<p><strong><u>Now available</u></strong><br /> Amazon EC2 P5en instances are available today in the US East (Ohio), US West (Oregon), and Asia Pacific (Tokyo) AWS Regions and US East (Atlanta) Local Zone us-east-1-atl-2a through EC2 Capacity Blocks for ML, On Demand, and Savings Plan purchase options. For more information, visit the <a href=\"https://aws.amazon.com/ec2/pricing/\">Amazon EC2 pricing page</a>.</p> \n<p>Give Amazon EC2 P5en instances a try in the <a href=\"https://console.aws.amazon.com/ec2/\">Amazon EC2 console</a>. To learn more, see <a href=\"https://aws.amazon.com/ec2/instance-types/p5/?trk=51dd90cd-4bb6-46ef-9b65-d7c6ef3705af&amp;sc_channel=el\">Amazon EC2 P5 instance page</a> and send feedback to <a href=\"https://repost.aws/tags/TAO-wqN9fYRoyrpdULLa5y7g/amazon-ec-2\">AWS re:Post for EC2</a> or through your usual AWS Support contacts.</p> \n<p>— <a href=\"https://twitter.com/channyun\">Channy</a></p>","author":"Channy Yun (윤석찬)","siteTitle":"AWS News Blog","siteHash":"6093e072e4117ec22616e844cb857d03ca62c57a411a8affc77cb5e8b6b15bf6","entryHash":"04a7a7a679642ef765684b407fadee2a0f8ec906778a902f1143f5ecb8103afc","category":"Tech"}