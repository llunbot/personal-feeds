{"title":"Cloudflare อธิบาย เกิดอะไรขึ้นกับเครือข่ายอินเทอร์เน็ตบ้างหลัง Facebook ล่ม","link":"https://www.blognone.com/node/125101","date":1633404079000,"content":"<div><div><div><p><a href=\"https://www.blognone.com/node/125088\">ปัญหาเครือข่าย Facebook ล่มเมื่อคืนนี้</a> ยังไม่มีการอธิบายสาเหตุอย่างละเอียด โดย<a href=\"https://www.blognone.com/node/125100\">บริษัทเพิ่งออกมาประกาศคร่าวๆ ว่าเป็นเพราะการคอนฟิกเราเตอร์ผิด</a> (configuration changes on the backbone routers)</p>\n<p>ระหว่างที่เรารอคำชี้แจงอย่างละเอียดจาก Facebook ว่าเกิดอะไรขึ้น บริษัทผู้เชี่ยวชาญด้านเครือข่าย Cloudflare ก็ออกมาอธิบายในมุมของคนนอก ว่าเครือข่ายอินเทอร์เน็ตเกิดอะไรขึ้นบ้างเมื่อ Facebook ตัดตัวเองไปจากอินเทอร์เน็ต</p>\n<p>คนที่มีความรู้เรื่องการทำงานของ Border Gateway Protocol (BGP) และ autonomous systems (AS) คงเข้าใจเรื่องนี้อยู่แล้ว แต่สำหรับคนที่ไม่เคยได้ยินสองคำนี้มาก่อน ก็เป็นโอกาสดีในการเรียนรู้โครงสร้างการทำงานของเครือข่ายอินเทอร์เน็ต</p>\n<p><img src=\"https://blog.cloudflare.com/content/images/2021/10/image5-9.png\" /></p>\n<p>Cloudflare บอกว่าจากระบบมอนิเตอร์ของตัวเอง พบว่า Facebook หยุดประกาศเส้นทางไปยังระบบ DNS ของตัวเองเมื่อเวลา 16:58 UTC (23:58 น. ตามเวลาประเทศไทย) ส่งผลให้ระบบ DNS 1.1.1.1 ของ Cloudflare ไม่สามารถตอบคำถามได้ว่าโดเมน facebook.com เป็นหมายเลขไอพีใด</p>\n<p>ตอนแรก Cloudflare ตกใจคิดว่าเป็นปัญหาที่ระบบเครือข่ายของตัวเอง แต่จากการสอบสวนพบว่าประมาณหนึ่งชั่วโมงก่อนหน้านั้น (15:40 UTC หรือ 22:40 น. ของบ้านเรา) พบการเปลี่ยนสถานะเส้นทางใน BGP ของ Facebook ซึ่งเป็นจุดเริ่มต้นของปัญหารอบนี้</p>\n<p>สิ่งที่เกิดขึ้นคือ เส้นทางไปยัง Facebook ถูกถอนออกจากตารางข้อมูลเส้นทาง, เซิร์ฟเวอร์ DNS ของ Facebook ออฟไลน์ (ตอนนี้เรายังไม่รู้สาเหตุจากข้างในว่าเกิดจากอะไร)</p>\n<p><img src=\"https://blog.cloudflare.com/content/images/2021/10/image4-10.png\" /></p>\n<p>เมื่อ Facebook หยุดประกาศเส้นทางในระบบ BGP ทำให้ไม่มีใครในอินเทอร์เน็ตรู้ว่าจะส่งข้อมูลไปเซิร์ฟเวอร์ของ Facebook ได้อย่างไร ส่งที่เกิดขึ้นคือทุกคนวิ่งมาถามเซิร์ฟเวอร์ DNS ซ้ำอีกรอบ (หรือหลายๆ รอบ) ว่า Facebook อยู่ที่ไหน ทำให้เซิร์ฟเวอร์ 1.1.1.1 ของ Cloudflare ได้รับทราฟฟิกเพิ่มขึ้นถึง 30 เท่าทันที</p>\n<p><img src=\"https://blog.cloudflare.com/content/images/2021/10/image6-8.png\" /></p>\n<p>และ Cloudflare ถือโอกาสโม้ว่าระบบของตัวเองเจ๋งมาก รองรับโหลดได้สบาย แม้ระยะเวลา response time เพิ่มขึ้นมาก แต่ก็ยังต่ำกว่า 10ms (เส้นสีฟ้า) ยกเว้นบางกรณีที่อาจนานถึง 10 วินาที (เส้นสีส้ม)</p>\n<p><img src=\"https://blog.cloudflare.com/content/images/2021/10/image2--2-.png\" /></p>\n<p>การล่มของ Facebook ยังทำให้ทราฟฟิกไปยังบริการโซเชียลอื่นๆ พุ่งขึ้นด้วยเช่นกัน เช่น Twitter, Signal, Telegram, Tiktok</p>\n<p><img src=\"https://blog.cloudflare.com/content/images/2021/10/image1-12.png\" /></p>\n<p>พอถึงเวลา 21:17 UTC (4:17 น. ของบ้านเรา) ทราฟฟิก BGP ของ Facebook เริ่มกลับมา ระบบ DNS เริ่มกลับสู่ปกติ และใช้งานได้ราว 21:20 UTC</p>\n<p><img src=\"https://blog.cloudflare.com/content/images/2021/10/unnamed-3-2.png\" /></p>\n<p><img src=\"https://blog.cloudflare.com/content/images/2021/10/unnamed-2.png\" /></p>\n<p>ที่มา - <a href=\"https://blog.cloudflare.com/october-2021-facebook-outage/\">Cloudflare</a></p>\n</div></div></div><div><div>Topics: </div><div><div><a href=\"/topics/cloudflare\">Cloudflare</a></div><div><a href=\"/topics/internet\">Internet</a></div><div><a href=\"/topics/facebook\">Facebook</a></div><div><a href=\"/topics/service-outage\">Service Outage</a></div></div></div>","author":"mk","siteTitle":"Blognone","siteHash":"ededadcf18490b3937e7dd89ebe8c00dc129addbdf1ebe4aff1f458146693da0","entryHash":"0a6c468f6a8cabb96f509c4b65a90bf90df7a916e26a348bf81bf2fd77790d3a","category":"Thai"}