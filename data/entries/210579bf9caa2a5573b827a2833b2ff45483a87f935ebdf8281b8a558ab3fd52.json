{"title":"สวัสดี Playwright 1.39 !!","link":"https://www.somkiat.cc/hello-playwright-1-39/","date":1698906322000,"content":"<p><img width=\"150\" height=\"150\" src=\"https://www.somkiat.cc/wp-content/uploads/2023/11/playwright-1-39-150x150.png\" loading=\"lazy\" srcset=\"https://www.somkiat.cc/wp-content/uploads/2023/11/playwright-1-39-150x150.png 150w, https://www.somkiat.cc/wp-content/uploads/2023/11/playwright-1-39-75x75.png 75w\" /></p>\n<figure><a href=\"https://www.somkiat.cc/wp-content/uploads/2023/11/playwright-1-39.png\"><img src=\"https://www.somkiat.cc/wp-content/uploads/2023/11/playwright-1-39.png\" width=\"640\" height=\"396\" /></a></figure>\n\n\n\n<p>มา share ความรู้เรื่องการทดสอบระบบงานด้วย Playwright<br />แล้ว Playwright 1.39 ก็ปล่อยออกมาพอดี<br />เลยได้นำความสามารถใหม่ ๆ มาใช้งานด้วย<br />จึงทำการสรุปคร่าว ๆ ไว้นิดหน่อยดังนี้</p>\n\n\n\n<span></span>\n\n\n\n<p><strong>เรื่องแรกที่ชอบคือ <a href=\"https://playwright.dev/docs/release-notes#hide-implementation-details-box-test-steps\" target=\"_blank\">Box test step หรือ boxing</a> ใน <a href=\"https://playwright.dev/docs/api/class-test#test-step\" target=\"_blank\">test.step</a></strong></p>\n\n\n\n<p>จะช่วยในการแจ้ง error ใน test report<br />เพราะว่าปกติเมื่อมีขั้นตอนไหนใน code มีปัญหา หรือ failure ขึ้นมา<br />จะแจ้งในบรรทัดนั้น ๆ<br />ทำให้ดูได้ยากว่า มีปัญหาตรง step ไหน (ถ้าเราใช้งาน test.step)<br />ดังนั้นถ้าต้องการให้แจ้งใน report เลยว่า failure ตรง test.step ไหน<br />ก็สามารถเพิ่ม config ว่า boxing: true ได้เลย</p>\n\n\n\n[gist id=\"6e610ff26af6c82afa66ca690d31c68a\" file=\"1.ts\"]\n\n\n\n<p><strong>เรื่องที่สอง สามารถทำการ custom matcher ได้เลย ทำให้สะดวกมากยิ่งขึ้น</strong></p>\n\n\n\n[gist id=\"6e610ff26af6c82afa66ca690d31c68a\" file=\"2.ts\"]\n\n\n\n<p><strong>เรื่องที่สาม ใครมี fixture หรือ data test เยอะ ๆ สามารถ merge กัน เพื่อมาใช้งานได้</strong></p>\n\n\n\n<p>ตัว matcher หรือ expect ก็ merge ได้เช่นเดียวกัน</p>\n\n\n\n[gist id=\"6e610ff26af6c82afa66ca690d31c68a\" file=\"3.ts\"]\n\n\n\n<p><strong>Tips เพิ่มเติม</strong></p>\n\n\n\n<p>แนะนำให้ใช้การ trace แทน video หรือ screenshot<br />โดยใน project ให้ทำการ config ค่า trace: 'on-first-retry' ไปเลย<br />ซึ่งเป็นค่าเริ่มต้นจากการสร้าง project ใหม่นั่นเอง<br />ส่วน video และ screenshot ก็ปิดไปเลย<br />ซึ่งทำให้ performance ของการ test ดีกว่าเดิมมาก<br />และใช้งานได้ทั้งใน local และ CI ได้เลย</p>\n\n\n\n<p><strong>ส่วนใน VSCode อาจจะเจอ error ในไฟล์ config ต่าง ๆ</strong><br />ดังนั้นก็แก้ง่าย ๆ ด้วยการติดตั้ง type ของ node ไปใน test ดังนี้</p>\n\n\n\n[code]$npm i --save-dev @types/node[/code]\n\n\n\n<p><strong>อีกอย่าง function type() ใน object ต่าง ๆ deprecated แล้วนะตั้งแต่ version 1.38</strong><br /><em><a href=\"https://playwright.dev/docs/api/class-page#page-type\">page.type()</a>, <a href=\"https://playwright.dev/docs/api/class-frame#frame-type\">frame.type()</a>, <a href=\"https://playwright.dev/docs/api/class-locator#locator-type\">locator.type()</a> and <a href=\"https://playwright.dev/docs/api/class-elementhandle#element-handle-type\">elementHandle.type()</a></em><br />โดยไปใช้ fill() แทนนะ<br />และไม่ download browser ให้ใหม่แบบอัตโนมัติแล้ว สำหรับ version เก่า<br />ต้องทำการ download เอง ด้วยคำสั่ง <strong>$npx playwright install</strong></p>\n\n\n\n<p><strong>Reference Websites</strong></p>\n\n\n\n<ul>\n<li><a href=\"https://www.youtube.com/watch?v=KqVuRAlOkm0\" target=\"_blank\">What's new in Playwright 1.39</a></li>\n</ul>\n\n\n\n<p><br /></p>\n","author":"somkiat","siteTitle":"cc :: somkiat","siteHash":"3a23a5a4389e1e40c6fbb16520a8cc20df5b3591c25145ce72aaa18b19e48201","entryHash":"210579bf9caa2a5573b827a2833b2ff45483a87f935ebdf8281b8a558ab3fd52","category":"Thai"}