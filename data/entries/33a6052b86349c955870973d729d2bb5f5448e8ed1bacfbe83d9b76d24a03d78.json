{"title":"Creating A High-Contrast Design System With CSS Custom Properties","link":"https://smashingmagazine.com/2023/01/creating-high-contrast-design-system-css-custom-properties/","date":1674741600000,"content":"<p>Design should never be a trade-off when it comes to creating an accessible web. There are many features coming to the web that will make creating contrast a lot easier. But even though CSS functions such as <code>color-contrast()</code> are only available in Safari behind a flag, we can already do a lot to create contrast in an easy way by using custom properties.</p>\nGood Design For Accessibility Shouldn’t Be Hard\n<p>When we design, we think about creating <strong>something beautiful</strong> that enables emotion and can <strong>project the philosophy of a brand</strong>. We want to reach as many people as we can, but there are times we start struggling to find a way to design something accessible while still respecting the look &amp; feel of a brand. While there might not be an easy way to overcome this when it comes to printed design, we can <strong>create better experiences for people on the web</strong> by creating small tweaks to our contrast using CSS. I’m not going to lie to you, this does evolve some careful planning and creating a solid design system, but we can do this! Let’s create a design for everybody’s eyes.</p>\n<p>Before we really start to take a deep dive into how we can create such a high-contrast system, let’s debunk some of the myths that are still floating around in the world.</p>\n<h3>Myth 1: We Have To Create Two Designs</h3>\n<p>With a careful, thought-out design system, it shouldn’t be necessary to create multiple designs in order to create a high-contrast version. All it takes is careful planning of colors and components. While it’s not always possible, you could create high-contrast colors for the brand from the outset. When it comes to the actual design of your components, creating two color definitions in your design system is a good starting point: your primary design colors and high-contrast variants. </p>\n<p><img src=\"https://files.smashing.media/articles/designing-contrast-custom-properties/1-base-colors-high-contrast-colors.png\" /></p>\n<p>When creating those different color sets, we should think about our components. Instead of looking at each component individually, we could think about how to replace all of their colors at the same time. Of course, that is the ideal situation, and we might need to specify some components in detail if necessary.</p>\n<h3>Myth 2: It Takes Too Much Time</h3>\n<p>Ah, the good old myth about accessibility and time management. But let’s keep it real. Creating extra options for high contrast will take a small amount of extra time when it comes to design planning. It’s a bit more work than adding some extra <code>aria</code> attributes (which you should avoid, if possible) or using <code>(r)ems</code> for font sizes. But to be fair, the returns you get for that little extra time could be substantial, especially if you decide to create a design with lighter colors or subtle color palettes.</p>\n<h3>Myth 3: Contrast Is Subjective</h3>\n<p>While it is true that multiple types of disabilities affect the way a user perceives your website, contrast is a measurable profusion for accessibility. <strong>Getting a triple-A score can be a bit more challenging than going for double-A</strong>. If achieving a triple-A score across your whole website is really too big of a challenge, you could <strong>create a plan</strong> where you make choices based on the importance of the content, creating the highest contrast for the main content and navigation and maybe settle for double-A for less important information. The fact that you are already thinking in those terms shows that you have the right mindset and care about your users. A double score shouldn’t be too hard to achieve, but at least try to go for more.</p>\n<p>Taking care of a better contrast is caring for your users. We should always try to achieve the highest contrast possible from the start. Even though there are a few software solutions, such as overlays and even manual solutions (screen adjustment), to help with low contrast, we want to <strong>make a statement</strong> to our users by showing we care. Do we really want our users to visit our website with an external tool? I think we want to give our users the <strong>best experience possible</strong>. And provide the users with something <strong>designed for them</strong>.</p>\n<h3>Myth 4: It Wouldn’t Be True To The Branding, Because The Branding Is Low-contrast.</h3>\n<p>This is probably the myth that we hear most. But what if we stay true to the branding while also optimizing? If your brand has a low-contrast logo, it’s still better to create an alternative version with high-contrast colors. The reason for this is quite simple: if you want to force people to the low-contrast banding, then you’re just excluding people, and if you are running a webshop, you might potentially lose some sales. We don’t have to just use the colors from the logo, either. You could also add supplementary (high contrast) colors to your palette.</p>\n<p>It’s much easier (and cheaper) to create a high-contrast version of your website than to do a complete rebranding. You could even create a high-contrast version of your logo and control the SVG with CSS, which is why in my demo, the logo was slightly altered for low contrast. But I’m getting ahead of myself. Let’s start at the beginning.</p>\n<p>If you want to read more about some of the myths about contrast and colors, I suggest you <a href=\"smashingmagazine.com/2022/09/realities-myths-contrast-color/\">read this smashing article by Andrew Somers</a>.</p>\nYou Can Plan Ahead Or Optimize While Developing\n<p>In the first part of this article, we chose to plan ahead and already create a design system that handles the low-contrast colors. But we all have deadlines and might not find the time to create something like this. So what can we do to adjust our colors for low contrast when we don’t have the plan to start with? Before we set off, let’s start with our basic design; I made a “cupcake factory” with light colors to illustrate contrast issues:</p>\n<p><img src=\"https://files.smashing.media/articles/designing-contrast-custom-properties/2-cupcake-factory-website-example.png\" /></p>\n<p>As the title of this article stated, we used custom properties to set our basic colors inside the root of our website.</p>\n<pre><code>:root {\n    --color-champagne: #EFD9CE;\n    --color-tiffany: #07BEB8;\n    --color-blizzard: #98DFEA;\n    --color-plum: #8F3985;\n    --color-space: #25283D;\n    --color-lightest: #FAFAFA;\n    --color-logo-basket: #F8E6C4;\n    --color-logo-topping: #FF89C0;\n}\n</code></pre>\n\nOur Initial Styling Using Custom Properties\n<p>We’re going to use these custom properties to color our website. In reality, we would use custom properties for a lot more than the colors, but to keep this demo to the point, let’s keep this to a minimum.</p>\n<p>For example, our coloring would be something like this (stripping all other properties):</p>\n<pre><code>body {\n    background: var(--color-champagne);\n    color: var(--color-space);\n}\n\nh2 {\n    color: var(--color-plum);\n}\n\nheader {\n    background: var(--color-plum);\n}\n\n\n.branding {\n    color: var(--color-champagne);\n}\n</code></pre>\n\n<p>We will be overwriting these colors later on by using the media query that detects if the user prefers more contrast:</p>\n<pre><code>@media (prefers-contrast: more) {\n    /* overwrites here */\n}\n</code></pre>\n\n<p>This media query is available in all of the evergreen browsers.</p>\n<h3>A Small Note On The <code>prefers-contrast</code> Media Query</h3>\n<p>It’s always a better practice not to rely on this media query. There are many users out there who struggle with low contrast that haven’t had any education about high contrast system settings. We are now assuming that we don’t have any choice but to use low-contrast color combinations and therefore want to implement some improvements for the people who actually know these settings. However, do not completely underestimate the impact of this improvement, as people are finding their way to these settings a lot more often. There are contrast settings on both <a href=\"https://support.microsoft.com/en-us/windows/change-color-contrast-in-windows-fedc744c-90ac-69df-aed5-c8a90125e696\">Windows</a> and <a href=\"https://support.apple.com/lv-lv/guide/mac-help/unac089/mac\">Mac</a>.</p>\nDetecting Our Contrast Issues\n<p>You can follow along by <a href=\"https://codepen.io/utilitybend/pen/GRBKoNB\">viewing the full demo of this on CodePen</a> while you read through the article.</p>\n<p><img src=\"https://files.smashing.media/articles/designing-contrast-custom-properties/3-colors-contrast-check-styles-panel.png\" /></p>\n<p>It actually shows how far away your contrast ratio is to provide a double or triple-A ratio. Another neat feature of this is the little white line you can see in this screenshot, which actually shows the range you should go to for the right amount of contrast. This might come in handy when we start changing our colors. Also, notice the suggested color next to the “AA” ratio score.</p>\n<p>But there is another handy feature for our initial detection when it comes to contrast issues, which is the <strong>“CSS Overview”</strong> panel. If you don’t have this, it’s probably still hidden; you can access this by pressing the <strong>three dots</strong> on DevTools  and selecting <strong>more tools &gt; CSS Overview.</strong></p>\n<p>Select the colors tab inside of this overview, and you will get all your contrast issues right away.</p>\n<p><img src=\"https://files.smashing.media/articles/designing-contrast-custom-properties/4-css-overview-contrast-colors.png\" /></p>\n<p>As expected, we are having some contrast issues. We’re not getting to the minimum of an “AA” in most cases. We can optimize quite a bit, so let’s get to it and create some more happy customers to try our delicious cupcakes.</p>\nOptimizing Our Contrast Issues\n<p>The first thing we want to do is actually view our page while enabling this media query. No need to use a special plugin or change settings for that — DevTools has got it covered.</p>\n<p>We will need to open our rendering drawer in order to do so. If you don’t have this drawer, you can press cmd+Shift+p in DevTools and type in rendering and select it; this should open that drawer.</p>\n<p>There are a lot of options here to test our website for accessibility, also including reduced motion (which is always a great practice take care of). But we will be focussing on the “Emulate CSS media feature prefers-contrast.” Select this option and set it to “more.”</p>\n<p><img src=\"https://files.smashing.media/articles/designing-contrast-custom-properties/5-emulate-css-media-feature-prefers-contrast.png\" /></p>\n<p>So far, nothing has changed on our website, but we will be able to change our colors now, and since this emulation keeps active while refreshing, it can really speed up our optimization. </p>\n<p>Inside our root declaration, let’s add that media query we talked about. I am using Scss for this demo, but it’s certainly not a requirement.</p>\n<pre><code>:root {\n    --color-champagne: #EFD9CE;\n    --color-tiffany: #07BEB8;\n    --color-blizzard: #98DFEA;\n    --color-plum: #8F3985;\n    --color-space: #25283D;\n    --color-lightest: #FAFAFA;\n    --color-logo-basket: #F8E6C4;\n    --color-logo-topping: #FF89C0;\n\n    @media (prefers-contrast: more) {\n    /* let's overwrite our colors here */\n    }\n}\n</code></pre>\n\n<p>One of the bigger problems we detected was our navigation. Our “plum” color is already pretty dark, so maybe we can make this a bit darker already.</p>\n<pre><code>:root {\n    /* original colors here */\n    @media (prefers-contrast: more) {\n        --color-plum: #591D52;\n    }\n}\n</code></pre>\n\n<p>The result is staggering, and we can already measure a lot more contrast:</p>\n<p><img src=\"https://files.smashing.media/articles/designing-contrast-custom-properties/6-cupcake-factory-navigation-bar.png\" /></p>\n<p>But when taking a closer look at our navigation, we notice that we achieved our “AA” ratio. As this is the navigation, I especially want to achieve a “AAA” ratio here. Since our logo is in SVG, we will change the topping of our cupcake logo as well. This might not be needed, but it will create some harmony in our high-contrast design. So let’s turn to our DevTools again to change the links and cupcake color.</p>\n<p><img src=\"https://files.smashing.media/articles/designing-contrast-custom-properties/7-devtools-view-color-contrast.png\" /></p>\n<p>We are so close to getting our ratio of 7. What’s handy about this view in DevTools, is that it actually suggests a color to get better contrast and shows two different lines between the different ratios. Let’s click on the color that was proposed. And add the new hex code to our custom properties.</p>\n<p><strong>Note:</strong> <em>We could use <code>rgb()</code> or <code>hsl()</code> as well. We can even toggle between color modes inside the DevTools panel.</em></p>\n<pre><code>:root {\n    /*our original colors */\n    @media (prefers-contrast: more) {\n        --color-plum: #591D52;\n        --color-logo-topping: #FFAED3;\n    }\n}\n</code></pre>\n\n<p>After doing this for a few more of our colors, the final result looks like this:</p>\n<p><img src=\"https://files.smashing.media/articles/designing-contrast-custom-properties/8-cupycake-factory-website-text-decoration.png\" /></p>\n<p>We’re really close but our quote actually got a bit worse in the process. This is why we sometimes have to take control of our specific components.</p>\n<p>We selected the color based on the container of our CTA, so let’s overwrite this:</p>\n<pre><code>.container {\n          /*other styles*/\n        color: var(--color-logo-topping);\n        @media (prefers-contrast: more) {\n            color: var(--color-plum);\n        }\n    }\n</code></pre>\n\n<p>When it comes to our contrast, we pretty much nailed it. But there are <strong>a few things missing</strong>. At the moment, the navigation’s active state is only differentiated by color. The same goes for our clickable cards, where the only indication is a hover state.</p>\n<p><strong>Always make sure active states and possible actions are clearly visible. Make sure you rely on more than just color to indicate that something is active and/or clickable.</strong></p>\n<p>Let’s indicate the links and active state more clearly by adding a text decoration on the link itself. </p>\n<pre><code>@media (prefers-contrast: more) {\n        text-decoration: underline;\n}\n</code></pre>\n\n<p>If you find a text-decoration to be a bit boring for the active state, you can always take another approach such as adding an arrow indicator before the active element. The choice is yours, as long as you don’t rely on colors alone.</p>\n<p>The final design looks like this:</p>\n<p><img src=\"https://files.smashing.media/articles/designing-contrast-custom-properties/9-cupcake-factory-website-final-result.png\" /></p>\nGoing A Bit Deeper With Visual Deficiencies\n<p>We can do a lot more checks for our contrast. How about checking some visual deficiencies? In our rendering tab, we can select some of those to have a look at our page. I suggest we toggle through them.</p>\n<p><img src=\"https://files.smashing.media/articles/designing-contrast-custom-properties/10-test-visual-deficiencies.png\" /></p>\n<p>Achromatopsia, for example, is about having a very poor ability to see colors. While my cupcake factory wasn’t optimized for this at all, when combining this deficiency with the high contrast media query and adding a text-decoration to my cupcake list, it looks very good. You can emulate a lot of other deficiencies with this tool. There are many types of color blindness that you can check with them. Make sure you give them a try.</p>\n<p><img src=\"https://files.smashing.media/articles/designing-contrast-custom-properties/11-cupcake-factory-website-color-blindness-test.png\" /></p>\nA Final Conclusion On Contrast\n<p>Managing our colors will truly help people to access our content. I also love the idea that we can add meaningful design value to those users. Will a user with achromatopsia browse our website in high contrast? Has the user actually enabled a high-contrast setting? These are questions that we can never know the answer to. <strong>Not relying on media queries for this is and will always be the best approach</strong>, but it’s nice to have this possibility in CSS for tackling those edge cases. So, by all means, don’t ever rely on them for a complete website; this is just a demo to show the possibility. </p>\n<p>Thinking about our users, spreading awareness, and exploring possibilities are certainly big steps in the right direction.</p>\n<p>The best practice is always to create a website that has a good contrast to start with. I actually liked the high-contrast version of this little demo more and struggled to create the low-contrast version. But even though I’m (certainly) not the best designer out there, I’ve seen some examples where low-contrast design fits the branding (unfortunately).</p>\n<p>CSS is growing at a rapid pace, and more tools are becoming available to us. But no matter which method you use now or in the future, if you have already added some value for users that struggle with contrast issues, you certainly are making the world (wide web) a better place.</p>\n<p>You can <a href=\"https://codepen.io/smashingmag/pen/poZrmqm\">view a full demo of this on CodePen</a>.</p>\n<p><em>And a special thanks to <a href=\"https://unsplash.com/@biglaughkitchen\">Deva Williamson</a> on <a href=\"https://unsplash.com/\">Unsplash</a> for the beautiful cupcake photos.</em></p>","author":"","siteTitle":"Articles on Smashing Magazine — For Web Designers And Developers","siteHash":"ab069ca35bf300e9db0da36f49701f66485a5b0d2db0471dfeee07cef6204939","entryHash":"33a6052b86349c955870973d729d2bb5f5448e8ed1bacfbe83d9b76d24a03d78","category":"Tech"}