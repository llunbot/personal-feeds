{"title":"Announcing cross-region data replication for Amazon WorkSpaces","link":"https://aws.amazon.com/blogs/aws/cross-region-data-replication-for-amazon-workspaces/","date":1701027711000,"content":"<p>You can now use cross-region data replication to provide business continuity for your <a href=\"https://aws.amazon.com/workspaces/\">Amazon WorkSpaces</a> users. Snapshots are taken every 12 hours, replicated to the desired destination region, and are used to provide a recovery point objective (RPO) of 12-24 hours.</p> \n<p><span><strong>Multi-Region Resilience Review</strong></span><br /> In her 2022 post <a href=\"https://aws.amazon.com/blogs/desktop-and-application-streaming/advancing-business-continuity-with-amazon-workspaces-multi-region-resilience/\">Advancing business continuity with Amazon WorkSpaces Multi-Region Resilience</a>, my colleague Ariel introduced you to the initial version of this feature and showed you how to use it to set up standby virtual desktops available for your users. After it has been set up, users log in with Amazon WorkSpaces registration codes that include fully qualified domain names (FQDNs). If the WorkSpaces in the primary region are unavailable, the users are redirected to standby WorkSpaces in the secondary region.</p> \n<p>The standby WorkSpaces are available for a small, fixed monthly fee for infrastructure and storage, with a low flat rate change for each hour of usage during the month. Together, this feature and this business model make it easy and economical for you to maintain a standby deployment.</p> \n<p><span><strong>Cross-Region Data Replication</strong></span><br /> Today we are making this feature even more powerful by adding one-way cross-region data replication. Applications, documents, and other resources stored on the primary WorkSpace are snapshotted every 12 hours and copied to the region hosting the secondary WorkSpace. You get an additional layer of redundancy, enhanced data protection, and can minimize productivity that would otherwise be lost to disruptions. This is particularly helpful if users have installed and configured applications on top of the base image since they won’t have to repeat these steps on the secondary WorkSpace.</p> \n<p>Here’s how it all works:</p> \n<p><strong>Normal Operation</strong> – During normal operation, the users in your <span>WorkSpaces</span> fleet are using the primary region. EBS snapshots of the system (C:) and data (D:) drives are created every 12 hours. Multi-Region Resilience runs in the secondary region and checks for fresh snapshots regularly. When it finds them, it initiates a copy to the secondary region. As the copies arrive in the secondary region they are used to update the secondary WorkSpace.</p> \n<p><strong>Failover Detection</strong> – As part of the setup process, you will follow <a href=\"https://docs.aws.amazon.com/workspaces/latest/adminguide/cross-region-redirection.html#cross-region-redirection-configure-DNS-routing\">Configure your DNS service and setup DNS routing policies</a> to set up DNS routing policies and optional <a href=\"https://aws.amazon.com/route53/\">Amazon Route 53</a> health checks to manage cross-Region redirection.</p> \n<p><strong>Failover</strong> – If a large-scale event (LSE) affects the primary region and the primary WorkSpace, the failover detection that I just described goes in to effect. When users try to reconnect, they are redirected to the secondary region, the latest snapshots are used to launch a WorkSpace for them, and they are back up and running with access to data and apps that are between 12 and 24 hours old.</p> \n<p><strong>Failback</strong> – At the conclusion of the LSE, the users manually back up any data that they have created on the secondary WorkSpace and log out of it. Then they log in again, and this time they will be directed to the primary region and WorkSpace, where they can restore their backups and continue to work.</p> \n<p><span><strong>Getting Set Up</strong></span><br /> As a WorkSpaces administrator, I start by locating the desired primary WorkSpace:</p> \n<p><img loading=\"lazy\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2023/11/09/dpl_wslist_1.png\" width=\"700\" height=\"392\" /></p> \n<p>I select it and choose <strong>Create Standby WorkSpaces</strong> from the <strong>Actions</strong> menu:</p> \n<p><img loading=\"lazy\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2023/11/09/dpl_action_1.png\" width=\"400\" height=\"488\" /></p> \n<p>I select the desired region for the secondary WorkSpace and click <strong>Next</strong>:</p> \n<p><img loading=\"lazy\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2023/11/09/dpl_region_1.png\" width=\"701\" height=\"355\" /></p> \n<p>Then I choose the right directory in the region, and again click <strong>Next</strong>:</p> \n<p><img loading=\"lazy\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2023/11/09/dpl_dir_1.png\" width=\"699\" height=\"382\" /></p> \n<p>If the primary WorkSpace is encrypted, I must enter the ARN of the KMS key in the secondary region (or, even better, use a <a href=\"https://docs.aws.amazon.com/kms/latest/developerguide/multi-region-keys-overview.html\">multi-Region key</a>). I check <strong>Enable data replication</strong> and confirm that I am authorizing an additional monthly charge:</p> \n<p><img loading=\"lazy\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2023/11/09/dpl_arn_tag_2.png\" width=\"650\" height=\"846\" /></p> \n<p>On the next page I review my choices and click <strong>Create</strong> to initiate the creation of the secondary WorkSpace in the region that I selected.</p> \n<p>As mentioned earlier I also need to <a href=\"https://aws.amazon.com/blogs/desktop-and-application-streaming/advancing-business-continuity-with-amazon-workspaces-multi-region-resilience/\">set up Multi-Region Resilience</a>. This includes setting up a domain name to use as a WorkSpaces registration code, setting up Route 53 health checks, and using them to power routing policies.</p> \n<p><span><strong>Things to Know</strong></span><br /> Here are a couple of important things to know about Cross-Region Data Replication:</p> \n<p><strong>Directories</strong> – You can use a self-managed Active Directory, <a href=\"https://aws.amazon.com/directoryservice/\">AWS Managed AD</a> or <a href=\"https://docs.aws.amazon.com/directoryservice/latest/admin-guide/directory_ad_connector.html\">AD Connector</a> configured as described in <a href=\"https://aws.amazon.com/blogs/desktop-and-application-streaming/building-for-business-continuity-with-amazon-workspaces-and-aws-directory-services/\">this post</a>. Simple AD is not supported.</p> \n<p><strong>Snapshots</strong> – The first-ever EBS snapshot for a particular data volume is full, and subsequent snapshots are incremental. As a result, the first replication for a given WorkSpace will likely take longer than subsequent ones. Snapshots are initiated on a schedule that is internal to WorkSpaces and you cannot control the timing.</p> \n<p><strong>Encryption</strong> – You can use this feature with <a href=\"https://docs.aws.amazon.com/workspaces/latest/adminguide/encrypt-workspaces.html\">Encrypted WorkSpaces</a> as long as you use the same <a href=\"https://aws.amazon.com/kms/\">AWS Key Management Service (AWS KMS)</a> keys in the primary and secondary regions. You can also use <a href=\"https://docs.aws.amazon.com/kms/latest/developerguide/multi-region-keys-overview.html\">multi-Region keys</a>.</p> \n<p><strong>Bundles</strong> – You can use the Windows 10 and Windows 11 bundles, and you can also BYOL.</p> \n<p><strong>Accounts</strong> – Every AWS account has a fixed limit on the number of pending EBS snapshots. This may affect your ability to use this feature with large fleets of WorkSpaces.</p> \n<p><strong>Pricing</strong> – You pay a fixed monthly fee based on the amount of storage configured for each primary WorkSpace. See the <a href=\"https://aws.amazon.com/workspaces/pricing/\">Amazon WorkSpaces Pricing</a> page for more information.</p> \n<p>— <a href=\"https://twitter.com/jeffbarr\">Jeff</a>;</p>","author":"Jeff Barr","siteTitle":"AWS News Blog","siteHash":"6093e072e4117ec22616e844cb857d03ca62c57a411a8affc77cb5e8b6b15bf6","entryHash":"c0260b99b9936b8f4a112fbf304e00d166759fe3032b264413e69cfb2c6bffb6","category":"Tech"}