{"title":"HCP Terraform Operator is now certified on Red Hat OpenShift","link":"https://www.hashicorp.com/blog/hcp-terraform-operator-is-now-certified-on-red-hat-openshift","date":1740589200000,"content":"<p>We are excited to announce that the <a href=\"https://developer.hashicorp.com/terraform/cloud-docs/integrations/kubernetes\">HCP Terraform Operator for Kubernetes</a> (formerly known as Terraform Cloud Operator) is now certified for Red Hat OpenShift. This certification marks a significant milestone in our commitment to provide reliable, scalable, and secure integrations between Terraform and Kubernetes for streamlined workflows across hybrid and multi-cloud environments.</p>\n\n<h2>What is the HCP Terraform Operator?</h2>\n\n<p>The HCP Terraform Operator allows users to manage HCP Terraform and Terraform Enterprise workspaces, agent pools, and resources directly from their Kubernetes clusters. It brings Terraform’s state handling, sequential run execution, and established patterns for secret injection and resource provisioning into Kubernetes-native workflows.</p>\n\n<p>The HCP Terraform Operator reached general availability <a href=\"https://www.hashicorp.com/blog/terraform-cloud-operator-v2-for-kubernetes-is-now-ga\">in November 2023</a>. Since then we’ve made <a href=\"https://github.com/hashicorp/hcp-terraform-operator/blob/main/CHANGELOG.md\">several updates</a> to it, and today we’re focusing on three major updates:</p>\n\n<h2>Flexible deletion policy</h2>\n\n<p>With enhanced control over workspace deletion, users can now manage resources more safely, especially during migrations or when moving workloads to different clusters. This update ensures that resources are preserved by default, reducing the risk of accidental deletions and supporting seamless infrastructure transitions.</p>\n\n<p>Here’s how this looks in the configuration file:</p>\n<pre><code>---\napiVersion: app.terraform.io/v1alpha2\nkind: Workspace\nmetadata:\n  name: this\nspec:\n  organization: kubernetes-operator\n  token:\n    secretKeyRef:\n      name: tfc-operator\n      key: token\n  name: this\n  deletionPolicy: retain</code></pre><p>The <code>deletionPolicy</code> field offers the following options:</p>\n\n<ul>\n<li><code>retain</code> (default): keeps the workspace even after the custom resource is deleted.</li>\n<li><code>soft</code>: deletes the workspace only if it has no managed resources.</li>\n<li><code>destroy</code>: destroys all managed resources, then deletes the workspace and the custom resource.</li>\n<li><code>force</code>: immediately deletes both the workspace and the custom resource without waiting.</li>\n</ul>\n\n<h2>Improved agent scaling</h2>\n\n<p>The latest updates introduce more intelligent scaling capabilities, allowing teams to better manage resource use and respond efficiently to workload demands. By optimizing the timing between scaling events and establishing a cooldown period after each run, this feature ensures resources are used more effectively in dynamic environments, enhancing overall operational efficiency. You can see how the agent scaling works in this example configuration:</p>\n<pre><code>apiVersion: app.terraform.io/v1alpha2\nkind: AgentPool\nmetadata:\n  name: this\nspec:\n  name: this\n  organization: kubernetes-operator\n  token:\n    secretKeyRef:\n      name: tfc-operator\n      key: token\n  agentTokens:\n    - name: alpha\n  autoscaling:\n    maxReplicas: 4\n    minReplicas: 0\n    cooldownPeriod:\n      scaleUpSeconds: 30\n      scaleDownSeconds: 1800\n  agentDeployment:\n    replicas: 0</code></pre><h2>Red Hat OpenShift support</h2>\n\n<p>Red Hat OpenShift is a very popular Kubernetes distribution, and now the HCP Terraform Operator is certified for OpenShift. This means the HCP Terraform Operator can now be found in the <a href=\"https://catalog.redhat.com/software/containers/hashicorp/hcp-terraform-operator-bundle/67b311e2b35f92f39e0b4a84\">Red Hat Ecosystem Catalog</a>. To begin using the HCP Terraform Operator on OpenShift, follow these steps:</p>\n\n<ul>\n<li><strong>Access the OpenShift Console</strong>: Start by logging into the OpenShift Container Platform administrator console.</li>\n<li><strong>Navigate to OperatorHub</strong>: Within the console, go to the OperatorHub, where you can find a wide range of certified operators.</li>\n<li><strong>Search for HCP Terraform Operator</strong>: In the search bar, type \"HCP Terraform Operator\" to locate the operator. </li>\n</ul>\n<img src=\"https://www.datocms-assets.com/2885/1740503078-os-operatorhub.png\" alt=\"OpenShift\" /><ul>\n<li><strong>Install the Operator</strong>: Click on the HCP Terraform Operator and follow the prompts to complete the installation.</li>\n</ul>\n<img src=\"https://www.datocms-assets.com/2885/1740503122-install-operatorhub-hcptf.png\" alt=\"Installing\" /><h2>Start using the HCP Terraform Operator</h2>\n\n<p>Refer to our <a href=\"https://developer.hashicorp.com/terraform/cloud-docs/integrations/kubernetes\">official documentation</a> for more details and best practices on setting up and configuring the HCP Terraform Operator. You can test out the Kubernetes Operator with a few additional tutorials on more specific workflows:</p>\n\n<ul>\n<li><a href=\"https://developer.hashicorp.com/terraform/tutorials/kubernetes/kubernetes-operator-v2\">Deploy infrastructure with the HCP Terraform Operator</a></li>\n<li><a href=\"https://developer.hashicorp.com/terraform/tutorials/kubernetes/kubernetes-operator-v2-agentpool\">Manage agent pools with the HCP Terraform Operator </a></li>\n</ul>\n\n<p>We are committed to continually enhancing the HCP Terraform Operator to meet your evolving needs. We welcome your feedback and encourage you to share any bugs or feature requests on our <a href=\"https://github.com/hashicorp/hcp-terraform-operator/issues/new/choose\">GitHub issues page</a>.</p>\n\n<p>If you are new to Terraform, now is the perfect time to explore the benefits of <a href=\"https://www.hashicorp.com/resources/what-is-infrastructure-as-code\">infrastructure as code</a>. Sign up for a free <a href=\"https://app.terraform.io/public/signup/account\">HCP account</a> and unlock the potential of streamlined, scalable infrastructure management today.</p>\n","author":"Vishnu Ravindra","siteTitle":"HashiCorp Blog","siteHash":"219aa6310b3388f2335eba49871f4df9581f2c58eaeb5e498363b54e835b7001","entryHash":"37ed4a4cd09016bc9ddbb836c0fa96e767c9e60e24b76f9972119cf5703b272b","category":"Tech"}