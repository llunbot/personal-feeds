{"title":"Introducing the Consul API Gateway","link":"https://www.hashicorp.com/blog/announcing-hashicorp-consul-api-gateway","date":1634745600000,"content":"<p>Today at <a href=\"https://hashiconf.com/global/\">HashiConf Global 2021</a>, we are introducing the new Consul API Gateway, a dedicated ingress solution for intelligently routing traffic to applications running on the <a href=\"https://www.consul.io/docs/connect\">HashiCorp Consul service mesh</a>.</p>\n<p>As part of service networking in the multi-cloud era, we find that organizations have four distinct pillars that they need to account for:</p>\n<ul>\n<li>Service discovery</li>\n<li>Service mesh</li>\n<li>Network automation</li>\n<li>Access to the mesh</li>\n</ul>\n<p>The new HashiCorp Consul API Gateway is designed to address the access pillar, providing users with consistency in how they handle inbound requests to the service mesh from external clients.</p>\n<p>In this blog post, we’ll explore the capabilities of the Consul API Gateway, see how it works, and provide you with next steps for how to access this solution when it becomes broadly available toward the end of the year.</p>\n<h2><a href=\"#managing-access-to-the-service-mesh\">»</a><a></a>Managing Access to the Service Mesh</h2>\n<p>Typically when we talk about service mesh capabilities and benefits, we’re really addressing the challenges of intra-datacenter communication between applications, what we call east-west traffic patterns. In more modern security architectures, we solve this challenge through enforcing strict authorization (<a href=\"https://www.consul.io/docs/security/acl\">access controls</a>, <a href=\"https://www.consul.io/docs/connect/intentions\">intentions</a>) and encryption (<a href=\"https://www.consul.io/docs/connect/connect-internals#mutual-transport-layer-security-mtls\">mTLS</a>) practices.</p>\n<p>However, the existing challenge of how we regulate north-south traffic (e.g. requests from external clients into an environment via the public internet) doesn’t go away with these new network patterns. We still need to ensure that we are handling inbound requests to the service mesh in a way that is intelligent and consistent. Leveraging a single control plane for managing both east-west and north-south traffic makes achieving this consistency that much easier — and with the Consul API Gateway, we can provide this single control plane to Consul users.</p>\n<h3><a href=\"#control-the-point-of-entry\">»</a><a></a>Control the Point of Entry</h3>\n<p>First and foremost, the Consul API Gateway is exactly that, a gateway to the Consul service mesh. Our goal is to provide users with the ability to detect inbound requests to mesh-based applications, present those clients with verifiable certificates from a trusted authority, and facilitate the necessary secure connections to fulfill the requests.</p>\n<p>At launch, the Consul API Gateway will support only Kubernetes environments, but the plan is to eventually extend these capabilities to anywhere that Consul service mesh is running. Providing this controlled entrypoint enables customers to specify the connection types between internal and external clients as well. Users can have the Consul API Gateway create HTTP, HTTPS, TCP, and TCP + TLS connections between clients and mesh services.</p>\n<h3><a href=\"#simplify-traffic-patterns\">»</a><a></a>Simplify Traffic Patterns</h3>\n<p>Aside from establishing how these clients connect with mesh-based services, the Consul API Gateway also provides the ability to direct the flow of these requests and route the traffic to align with the management policies present within the service mesh. This creates consistency in how both north-south and east-west traffic are maintained and lets users establish a single workflow for managing these connections.</p>\n<h3><a href=\"#identify-external-client-traffic\">»</a><a></a>Identify External Client Traffic</h3>\n<p>Organizations that want to open their service mesh applications to external clients also want to know what type of connection requests are being initiated by those clients. Consul API gateway can detect key metadata, such as the URL, hostname, and header values, and users can configure rules for which service mesh applications those requests should get routed to. This is a key facilitator for implementing a service-oriented architecture, particularly when taking an incremental approach.</p>\n<h2><a href=\"#how-it-works\">»</a><a></a>How It Works</h2>\n<p>When released, the Consul API Gateway can be installed on a Kubernetes cluster by enabling it in the standard <a href=\"https://www.consul.io/docs/k8s/installation/install\">Consul Helm chart</a>. To configure and deploy individual API Gateways, an administrator creates a YAML file based on the <a href=\"https://gateway-api.sigs.k8s.io/\">Kubernetes Gateway API</a>, an emerging standard supported by multiple vendors.</p>\n<p>When the file is loaded, the Consul API Gateway Controller deploys an API Gateway pod and configures the gateway, listeners, and the routes to services. If TLS is enabled on a listener, the controller will load the certificate from the Kubernetes Secrets storage. If the certificate is rotated, the Gateway Controller will automatically update the listener.</p>\n<p>Other features of the Consul API Gateway include modifying (add/change/delete) HTTP headers and their values, and splitting traffic between multiple services based on weighted ratios.</p>\n<p>Watch Consul Engineer Nick Ethier demo the Consul API Gateway in the HashiConf Global 2021 keynote below:</p><h2><a href=\"#next-steps\">»</a><a></a>Next Steps</h2>\n<p>The Consul API Gateway is currently in development, but we understand that readers are likely eager to try this functionality for themselves as soon as possible. To be alerted when the beta is available, please fill out <a href=\"https://go.hashicorp.com/22Q3_WW_CONSULAPIGATEWAY.html\">this form</a> and we will contact you. For more information about HashiCorp Consul, please visit <a href=\"https://www.consul.io/docs\">our documentation</a>.</p>","author":"Peter McCarron","siteTitle":"HashiCorp Blog","siteHash":"219aa6310b3388f2335eba49871f4df9581f2c58eaeb5e498363b54e835b7001","entryHash":"e52333064f4704e2acfe46e271ae73a923d3cafefe5ec66209279de41f6d1bf8","category":"Tech"}