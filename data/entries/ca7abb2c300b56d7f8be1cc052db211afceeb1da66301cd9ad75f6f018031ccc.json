{"title":"GitHub เล่าประสบการณ์ย้าย dev environment พนักงานมาเป็น Codespaces VM","link":"https://www.blognone.com/node/124221","date":1628869850000,"content":"<div><div><div><p>GitHub ประกาศนำกระบวนการพัฒนาตัวเว็บ GitHub.com (github/github) มาอยู่บนผลิตภัณฑ์ใหม่ของตัวเองคือ <a href=\"https://www.blognone.com/node/116185\">GitHub Codespaces</a> ทั้งหมดแล้ว</p>\n<p><a href=\"https://github.com/features/codespaces\">Codespaces</a> คือบริการ IDE ครบวงจร ตั้งแต่ตัว code editor บนเว็บ (เป็น VS Code) และประมวลผลบน VM สมรรถนะสูงบนคลาวด์ (GitHub ใช้คำว่า \"faster than your laptop\") ทำงานได้จากทุกที่ขอแค่มีเพียงเว็บเบราว์เซอร์</p>\n<p><img src=\"https://www.blognone.com/sites/default/files/externals/deb5f06179753ba8b5db003afa279fee.png\" /></p>\n<p>GitHub เขียนเล่าเบื้องหลังการย้ายระบบตัวเองมาสู่ Codespaces ว่าในยุคแรกๆ ของบริษัท กำหนดสภาพแวดล้อมเป็น macOS แล้วให้พนักงานโคลน github/github มาลงเครื่อง รันสคริปต์ครั้งแรกเพื่อ bootstrap เซ็ตอัพระบบก่อนเริ่มลงมือทำงาน แต่เมื่อระบบซับซ้อนขึ้นเรื่อยๆ วิธีการนี้ก็เริ่มไม่เวิร์คอีกต่อไป การเซ็ตอัพอาจใช้เวลานานถึง 45 นาที</p>\n<p>วิธีการแบบเดิมยังชี้ให้เห็นจุดอ่อนของการใช้ local environment ที่คอมพิวเตอร์ทุกเครื่องแตกต่างกัน ซึ่งเป็นวิธีคิดที่กลับทิศกับโลก infrastructure ที่มองว่าเซิร์ฟเวอร์แต่ละตัวสามารถใช้แทนกันได้เสมอ ถ้าเครื่องพังก็แค่เปลี่ยนเครื่องใหม่ใส่เข้าไป เมื่อมีโอกาสมาสร้าง Codespaces ทำให้ GitHub นำแนวคิดของฝั่งเซิร์ฟเวอร์มาใช้งาน ถ้าสภาพแวดล้อม dev environment พังก็แค่เปลี่ยน VM ตัวใหม่ แล้วทำงานต่อได้ทันที</p>\n<p>การย้ายสภาพแวดล้อมพัฒนามาอยู่บน VM ยังช่วยแก้ปัญหาเรื่องระยะเวลาเซ็ตระบบ GitHub ระบุว่า repository ของ GitHub.com มีขนาดทั้งหมด 13GB แค่การโคลนก็ใช้เวลา 20 นาทีแล้ว การเซ็ตอัพระบบอย่างเดียวใช้เวลาถึง 45 นาที</p>\n<p>พอมาทำ Codespaces ทีมงานก็เปลี่ยนวิธีคิดใหม่คือ โคลน repository ทั้งหมดไว้ล่วงหน้า และดึงข้อมูลจาก  dependency ต่างๆ มาสร้างเป็น Docker image ที่อัพเดตใหม่ทุกคืน ถ้านักพัฒนาต้องการเรียกใช้งานพร้อมใช้ทันที ลดระยะเวลาเซ็ตอัพจาก 45 นาทีได้เหลือ 10 วินาทีเท่านั้น (GitHub โม้ว่าพนักงานใหม่ได้ dev environment ก่อนลง Slack เสร็จ) ถ้า dev environment พังก็แค่สลับ VM ใหม่ วันนั้นไม่เสียเวลาเปล่า ทำงานต่อได้เลย</p>\n<p>GitHub ยังบอกว่าโมเดล VM ของ Codespaces ยังช่วยเรื่องประสิทธิภาพด้วย เพราะทำ optimization รอไว้ล่วงหน้าได้เลย ซึ่งเรามักไม่ค่อยได้ทำบน local environment เพราะมีต้นทุนเรื่องระยะเวลามากเกินไป แถมถ้าอยากปรับสเปกเครื่อง เพิ่มคอร์ซีพียู เพิ่มแรม ก็เปลี่ยนค่าบรรทัดเดียว อัพเกรดเครื่องให้วิศวกรทุกคนได้ทันที ไม่ต้องเสียเวลาซื้อเครื่องใหม่แล้วส่งไปให้ที่บ้าน</p>\n<p>Codespaces ใช้ VS Code เป็นเครื่องมือหลัก แต่ก็ไม่อยากทิ้งนักพัฒนาสายอื่นๆ จึงเพิ่มทางเลือกคือเปิด SSH ไว้ให้ ใครที่อยากใช้ Vim หรือ Emacs ก็ล็อกอินเข้ามาใช้กันเองได้</p>\n<p>ที่มา - <a href=\"https://github.blog/2021-08-11-githubs-engineering-team-moved-codespaces/\">GitHub</a></p>\n</div></div></div><div><div>Topics: </div><div><div><a href=\"/topics/github\">GitHub</a></div><div><a href=\"/topics/development\">Development</a></div><div><a href=\"/topics/ide\">IDE</a></div></div></div>","author":"mk","siteTitle":"Blognone","siteHash":"ededadcf18490b3937e7dd89ebe8c00dc129addbdf1ebe4aff1f458146693da0","entryHash":"ca7abb2c300b56d7f8be1cc052db211afceeb1da66301cd9ad75f6f018031ccc","category":"Thai"}