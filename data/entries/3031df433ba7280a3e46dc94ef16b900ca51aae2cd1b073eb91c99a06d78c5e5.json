{"title":"New WebKit Features in Safari 15","link":"https://webkit.org/blog/11989/new-webkit-features-in-safari-15/","date":1635283625000,"content":"<p>With the release of Safari 15 for macOS Monterey, iPadOS 15, iOS 15, and watchOS, as well as macOS Big Sur and macOS Catalina, WebKit brings significant advancements in privacy and security, improved interoperability, and a host of new features for web developers. Take a look.</p>\n<h3>Web Extensions</h3>\n<p>This release brings Safari Web Extensions to iOS and iPadOS. Web Extensions use HTML, CSS, and JavaScript to offer powerful browser customizations. Now developers can create them for every device that supports Safari, using APIs, functionality, and permissions that are <a href=\"https://github.com/w3c/webextensions/blob/main/charter.md\">increasingly standardized</a> across all browsers. Learn how to build Safari Web Extensions and discover how to convert an existing extension by watching <a href=\"https://developer.apple.com/videos/play/wwdc2021/10104/\">Meet Safari Web Extensions on iOS</a> at WWDC21.</p>\n<p>This year’s release also adds support for the Declarative Net Request WebExtensions API to block content on the web. Learn all about the latest WebExtension APIs by watching <a href=\"https://developer.apple.com/videos/play/wwdc2021/10027\">Explore Safari Web Extension Improvements</a>  at WWDC21.</p>\n<h3>HTML</h3>\n<p>WebKit now provides support for <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/meta/name/theme-color\"><code>theme-color</code></a> in HTML meta tags, and in Web Manifest. By specifying a theme-color, web developers can change the color of the status bar and overscroll area in Safari on iOS 15. Theme-color also changes the Tab Bar and overscroll area background colors in Compact Tab layout for Safari 15 on macOS Monterey and Big Sur and iPadOS 15.</p>\n<p>In the HTML meta tag, developers can specify separate colors for Dark Mode and light appearance with the <code>media</code> attribute.</p>\n<pre><code>&lt;meta name=\"theme-color\" \n      content=\"#ecd96f\" \n      media=\"(prefers-color-scheme: light)\"&gt;\n&lt;meta name=\"theme-color\" \n      content=\"#0b3e05\" \n      media=\"(prefers-color-scheme: dark)\"&gt;\n</code></pre>\n<p>Watch <a href=\"https://developer.apple.com/videos/play/wwdc2021/10029/\">“Design for Safari 15”</a> at WWDC21 to learn more about the Compact Tab bar and how to use theme-color.</p>\n<h3>CSS</h3>\n<figure><img src=\"https://webkit.org/wp-content/uploads/aspect-ratio-1024x576.jpeg\" /></figure>\n<p>WebKit now supports CSS <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/aspect-ratio\"><code>aspect-ratio</code></a>. This property can be used to set a preferred aspect ratio on any element, including boxes like <code>divs</code>, <code>iframes</code> for embedded video, or graphic design elements on a page.</p>\n<p>WebKit provides support for the new <code>lab()</code>, <code>lch()</code>, <code>hwb()</code> color syntaxes from <a href=\"https://www.w3.org/TR/css-color-4/\">Color level 4</a>, providing web developers with ways to express a richer range of colors in Lab, Lch, and Hue-Whiteness-Blackness. WebKit also supports predefined color spaces using the <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/color_value/color()\"><code>color()</code></a> function syntax: <a href=\"https://drafts.csswg.org/css-color-4/#valdef-color-srgb\"><code>srgb</code></a>, <a href=\"https://drafts.csswg.org/css-color-4/#valdef-color-display-p3\"><code>display-p3</code></a>, <a href=\"https://drafts.csswg.org/css-color-4/#valdef-color-a98-rgb\"><code>a98-rgb</code></a>, <a href=\"https://drafts.csswg.org/css-color-4/#valdef-color-prophoto-rgb\"><code>prophoto-rgb</code></a>, <a href=\"https://drafts.csswg.org/css-color-4/#valdef-color-rec2020\"><code>rec2020</code></a>, <a href=\"https://drafts.csswg.org/css-color-4/#valdef-color-xyz\"><code>xyz</code></a>.</p>\n<p>Now with Safari 15.1, WebKit supports 12 new values for <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/list-style-type\"><code>list-style-type</code></a>: <code>disclosure-closed</code>, <code>disclosure-open</code>, <code>ethiopic-numeric</code>, <code>japanese-formal</code>, <code>japanese-informal</code>, <code>korean-hangul-formal</code>, <code>korean-hanja-formal</code>, <code>korean-hanja-informal</code>, <code>simp-chinese-formal</code>, <code>simp-chinese-informal</code>, <code>trad-chinese-formal</code>, and <code>trad-chinese-informal</code>.</p>\n\n<aside>\n<figure>\n<ol>\n<li>Apollo</li>\n<li>Hubble</li>\n<li>Chandra</li>\n<li>Cassini-Huygens</li>\n<li>Spitzer</li>\n</ol><figcaption>Disclosure closed</figcaption></figure>\n<figure>\n<ol>\n<li>Apollo</li>\n<li>Hubble</li>\n<li>Chandra</li>\n<li>Cassini-Huygens</li>\n<li>Spitzer</li>\n</ol><figcaption>Ethiopic Numeric</figcaption></figure>\n<figure>\n<ol>\n<li>Apollo</li>\n<li>Hubble</li>\n<li>Chandra</li>\n<li>Cassini-Huygens</li>\n<li>Spitzer</li>\n</ol><figcaption>Simplified Chinese informal</figcaption></figure>\n</aside>\n<p>There’s also improved implementation of existing values for <code>list-style-type</code>: <code>armenian</code>, <code>cjk-ideographic</code>, <code>hebrew</code>, <code>lower-armenian</code>, <code>lower-roman</code>, <code>upper-armenian</code>, and <code>upper-roman</code>. See a <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/list-style-type#result_2\">demo of all of these options</a> at MDN. We also updated WebKit’s implementation of <code>list-style-position:inside</code> to match the updated <a href=\"https://drafts.csswg.org/css-lists-3/#marker-pseudo\">CSS specification</a>, creating interoperability after a <a href=\"https://bugzilla.mozilla.org/show_bug.cgi?id=36854\">22 year old debate</a>.</p>\n<p>Watch <a href=\"https://developer.apple.com/videos/play/wwdc2021/10029/\">“Design for Safari 15”</a> at WWDC21 to learn more about the latest updates to CSS.</p>\n<h3>Web Inspector</h3>\n<figure><img src=\"https://webkit.org/wp-content/uploads/grid-inspector-1024x576.jpeg\" /></figure>\n<p>Web Inspector in Safari 15 includes a <a href=\"https://webkit.org/blog/11588/introducing-css-grid-inspector/\">CSS Grid Inspector</a> overlay for inspecting grid containers on your pages. Watch <a href=\"https://developer.apple.com/videos/play/wwdc2021/10031/\">“Discover Web Inspector Improvements”</a> at WWDC21 to learn more.</p>\n<h3>JavaScript and WebAssembly</h3>\n<p>This release of WebKit adds support for ES6 Modules in Workers and ServiceWorkers. ES6 Modules provides a powerful way for developers to organize large applications using purpose-specific libraries. Workers/Service Workers provides a way to offload work from the main thread, and are often used for complex applications.  Now, developers can use them together — moving work off the main thread, improving performance, while retaining the organizational benefits of modules.</p>\n<p>Additional new capabilities to the JavaScript engine, include:</p>\n<ul>\n<li>support for top-level <code>await</code></li>\n<li><code>Error.cause</code></li>\n<li>private class methods and accessors</li>\n<li><code>BigInt64Array</code> and <code>BigUint64Array</code></li>\n</ul>\n<p>Improvements to WebAssembly include streaming compilation, bulk memory operations, reference types, and non-trapping conversions from <code>float</code> to <code>int</code>.</p>\n<p>You can learn more about the latest JavaScript and WebAssembly updates to WebKit and Safari 15 by watching <a href=\"https://developer.apple.com/videos/play/wwdc2021/10030\">“Develop Advanced Web Content”</a> at WWDC21.</p>\n<h3>Web APIs</h3>\n<figure><img src=\"https://webkit.org/wp-content/uploads/webGL2-1024x576.jpg\" /></figure>\n<p>WebKit now supports <a href=\"https://www.khronos.org/registry/webgl/specs/latest/2.0/\">WebGL2</a> (<a href=\"https://www.khronos.org/webgl/wiki/Demo_Repository\">demos</a>). In addition, the WebGL implementation now runs on top of <a href=\"https://developer.apple.com/documentation/metal\">Metal</a> for better performance.</p>\n<p>Web Share level 2 enhancements to Web Share enable sharing files from a web page to an app. See <a href=\"https://w3c.github.io/web-share/\">Web Share API</a> for more information.</p>\n<p>User gestures now propagate through <code>requestAnimationFrame</code> with a one-second time limit.</p>\n<p>And now, with Safari 15.1,  <code>performance.timeOrigin</code> is available in Web Workers.</p>\n<p>You can learn more about the latest Web APIs in WebKit by watching <a href=\"https://developer.apple.com/videos/play/wwdc2021/10030\">“Develop Advanced Web Content”</a> at WWDC21.</p>\n<h3>Media</h3>\n<p>Safari 15 includes several media improvements for users and developers. For example, built-in media controls now have Playback Speed and Chapters menus. Plus, the language/subtitle tracks menu is now available on iOS and iPadOS.</p>\n<p>There’s also new support for the Opus audio codec in WebM containers. And on on all iPads that support iPadOS 15, VP9 and WebM in Media Source Extensions (MSE) are now hardware-accelerated.</p>\n<p>Safari 15 also adds support for the MediaSession API to enable SharePlay experiences. You can learn more about creating SharePlay experiences by watching <a href=\"https://developer.apple.com/videos/play/wwdc2021/10189/\">“Coordinate media playback in Safari with Group Activities”</a> at WWDC21.</p>\n<h3>Security and Privacy</h3>\n<p>Continuing our dedication to privacy and security, Safari on iOS 15 and macOS Monterey supports automatic HTTPS upgrades and hides your IP address from known trackers. Automatic HTTPS upgrades are also supported in Safari 15 on older macOS versions.</p>\n<p>Earlier this year, Safari was the first browser to ship a proposed web standard for measuring advertising in a privacy-preserving way – <a href=\"https://privacycg.github.io/private-click-measurement/\">Private Click Measurement</a>, or PCM. Safari 15 provides three major updates to PCM:</p>\n<ul>\n<li>Attribution reports also sent to click destination.</li>\n<li>Click fraud prevention with unlinkable tokens.</li>\n<li>IP address protection for attribution reports.</li>\n</ul>\n<p>To learn more, read <em><a href=\"https://webkit.org/blog/11940/pcm-click-fraud-prevention-and-attribution-sent-to-advertiser/\">PCM: Click Fraud Prevention and Attribution Sent to Advertiser</a></em> or watch <a href=\"https://developer.apple.com/videos/play/wwdc2021/10033/\">“Meet privacy-preserving ad attribution”</a> at WWDC21.</p>\n<h3>Authentication and Passwords</h3>\n<p>WebKit now includes support for on-device verification codes in your app or website for a more secure sign-in experience with iCloud Keychain Password Manager. To use verification codes with Safari and Autofill:</p>\n<ul>\n<li>Use <code>autocomplete=one-time-code</code> to make an <code>&lt;input&gt;</code> eligible for AutoFill.</li>\n<li>Use a standard <code>otpauth</code> URL and replace the scheme with <code>apple-otpauth</code> to link directly to the password manager for setup.</li>\n<li>Use a raster image to enable contextual menus on <code>otpauth</code> QR codes that offer to set up a verification code generator.</li>\n</ul>\n<p>Learn how to support the process in your apps and websites by watching <a href=\"https://developer.apple.com/videos/play/wwdc2021/10105/\">“Secure login with iCloud Keychain verification codes”</a> at WWDC21.</p>\n<figure><img src=\"https://webkit.org/wp-content/uploads/webAuthn-1024x576.png\" /></figure>\n<p>Despite their prevalence, passwords inherently come with challenges that make them poorly suited to securing someone’s online accounts. Passkeys are WebAuth credentials intended to replace passwords for websites and apps with device sync and backup. The technology is now available in WebKit as a preview. To enable in Safari, choose Develop &gt; Enable Syncing Platform Authenticator. Learn more watching <a href=\"https://developer.apple.com/videos/play/wwdc2021/10106/\">“Move beyond passwords”</a> at WWDC21.</p>\n<h3>Payments</h3>\n<p>Apple Pay enhancements allow developers using the <a href=\"https://www.w3.org/TR/payment-request/\">Payment Request API</a> to create deferred or recurring payments, indicate an estimated arrival date for shipping methods, support a coupon code, and mark the shipping method as in-store pickup.</p>\n<h3>Availability</h3>\n<p>These improvements are available to users running Safari on iPadOS 15, iOS 15, or Safari 15 on macOS Monterey, macOS Big Sur, or macOS Catalina. These features were also available to web developers in Safari Technology Preview releases. Changes in this release of Safari were included in the following Safari Technology Preview releases: <a href=\"https://webkit.org/blog/11585/release-notes-for-safari-technology-preview-123/\">123</a>, <a href=\"https://webkit.org/blog/11672/release-notes-for-safari-technology-preview-124/\">124</a>, <a href=\"https://webkit.org/blog/11680/release-notes-for-safari-technology-preview-125/\">125</a>, <a href=\"https://webkit.org/blog/11727/release-notes-for-safari-technology-preview-126-with-safari-15-features/\">126</a>, <a href=\"https://webkit.org/blog/11736/release-notes-for-safari-technology-preview-127/\">127</a>, <a href=\"https://webkit.org/blog/11925/release-notes-for-safari-technology-preview-128/\">128</a>, <a href=\"https://webkit.org/blog/11951/release-notes-for-safari-technology-preview-129/\">129</a>.</p>\n<p><a href=\"https://developer.apple.com/safari/download/\">Download the latest Safari Technology Preview release</a> to stay at the forefront of future web platform and Web Inspector features. You can also use the <a href=\"https://webkit.org/status\">WebKit Feature Status</a> page to watch for changes to web platform features you’re interested in.</p>\n<h3>Feedback</h3>\n<p>If you run into any issues, we welcome your <a href=\"https://bugreport.apple.com/\">bug reports</a> for Safari or <a href=\"https://bugs.webkit.org/\">WebKit bugs</a> for web content issues. Send us a tweet <a href=\"https://twitter.com/webkit\">@webkit</a> to share your thoughts on this release.</p>","author":"","siteTitle":"Blog – WebKit","siteHash":"7f8dbea0b8f53db2e11a2faa08c6dca9954c01638d09a2ce585b77a60d10f7a1","entryHash":"3031df433ba7280a3e46dc94ef16b900ca51aae2cd1b073eb91c99a06d78c5e5","category":"Tech"}