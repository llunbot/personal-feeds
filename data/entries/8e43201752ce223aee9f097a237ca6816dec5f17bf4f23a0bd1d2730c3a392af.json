{"title":"สรุปการแก้ไขปัญหา Log4j จาก Spring","link":"https://www.somkiat.cc/fix-log4j-from-spring/","date":1639288450000,"content":"<p><img src=\"https://www.somkiat.cc/wp-content/uploads/2021/12/Apache-Log4j-Logo-150x150.jpg\" /></p>\n<figure><img src=\"https://www.somkiat.cc/wp-content/uploads/2021/12/Apache-Log4j-Logo-1024x576.jpg\" /></figure>\n\n\n\n<p>จากปัญหาของ Log4j core ที่มีช่องโหว่ในการโจมตี จาก <a href=\"https://nvd.nist.gov/vuln/detail/CVE-2021-44228\" target=\"_blank\">CVE-2021-44228</a><br />ซึ่งทาง <strong><a href=\"https://spring.io/blog/2021/12/10/log4j2-vulnerability-and-spring-boot\" target=\"_blank\">Spring</a></strong> ได้ออกมาอธิบาย <br />รวมทั้งวิธีการตรวจสอบ แก้ไขต่าง ๆ ไว้ดังนี้</p>\n\n\n\n<span></span>\n\n\n\n<p>หลัก ๆ ปัญหานี้ถูกแก้ไขแล้วใน <a href=\"https://repo1.maven.org/maven2/org/apache/logging/log4j/log4j-core/2.15.0/\" target=\"_blank\">Log4J version 2.15.0</a></p>\n\n\n\n<p><strong><em>สำหรับคนที่ใช้งาน Spring Boot แบบ default ในการพัฒนา<br />จะไม่ได้รับผลกระทบ เพราะว่าไม่ได้ใช้งาน Log4j-core นั่นเอง</em></strong></p>\n\n\n\n<p>แต่ถ้าใครเปลี่ยน <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/howto.html#howto.logging.log4j\" target=\"_blank\">default logging มาเป็น Log4j</a><br /> แน่นอนว่าได้รับผลกระทบแน่นอน<br />ซึ่งจำเป็นต้อง upgrade ไปใช้ log4j version 2.15.0 </p>\n\n\n\n<p><strong>สำหรับ project ที่ใช้งานผ่าน Apache Maven</strong><br />ให้ทำการตรวจสอบ version ของ log4j ดังนี้</p>\n\n\n\n[code]mvn dependency:list | grep log4j[/code]\n\n\n\n<p><strong>ส่วน Gradle ก็ตรวจสอบดังนี้</strong></p>\n\n\n\n[code]gradle dependencyInsight --dependency log4j-core[/code]\n\n\n\n<p><strong>สำหรับ project ที่ไม่สามารถแก้ไข code หรือ dependency ได้</strong></p>\n\n\n\n<p>ก็ให้แก้ไข environment variable ในไฟล์ property</p>\n\n\n\n[code]log4j2.formatMsgNoLookups=true[/code]\n\n\n\n<p>หรือใน environment variable ดังนี้</p>\n\n\n\n[code]java -Dlog4j2.formatMsgNoLookups=true -jar myapp.jar[/code]\n","author":"somkiat","siteTitle":"cc :: somkiat","siteHash":"3a23a5a4389e1e40c6fbb16520a8cc20df5b3591c25145ce72aaa18b19e48201","entryHash":"8e43201752ce223aee9f097a237ca6816dec5f17bf4f23a0bd1d2730c3a392af","category":"Thai"}