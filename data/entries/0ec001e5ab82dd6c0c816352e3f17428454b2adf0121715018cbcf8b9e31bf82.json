{"title":".Net 8 preview 3  ขนาดของไฟล์ที่ได้จาก Native AOT เล็กลงไปอีก","link":"https://www.somkiat.cc/net-8-preview-3/","date":1681821815000,"content":"<p><img width=\"150\" height=\"150\" src=\"https://www.somkiat.cc/wp-content/uploads/2023/04/Screenshot-2566-04-18-at-19.38.32-150x150.png\" alt srcset=\"https://www.somkiat.cc/wp-content/uploads/2023/04/Screenshot-2566-04-18-at-19.38.32-150x150.png 150w, https://www.somkiat.cc/wp-content/uploads/2023/04/Screenshot-2566-04-18-at-19.38.32-75x75.png 75w\" /></p>\n<p>จากที่เคยเขียนเรื่อง ลองใช้งาน <strong><a href=\"https://www.somkiat.cc/dotnet-with-native-aot/\" target=\"_blank\">Native AOT (Ahead of Time) ของ .NET 8</a></strong><br />ที่เป็น preview 1 มาตอนนี้เป็น <a href=\"https://learn.microsoft.com/en-us/dotnet/core/whats-new/dotnet-8\" target=\"_blank\">preview 3</a> พบว่า</p>\n\n\n\n<ul><li>ขนาดของไฟล์ลดลงจาก 8.3M เหลือ 7.9M </li><li>ถ้าเทียบกับ  .NET 7 ก็ลดลง 50%</li><li>การ publish มีค่า default เป็น release เลย ไม่ใช่ debug แล้ว ส่วนการ build ยังเป็น debug</li></ul>\n\n\n\n<span></span>\n\n\n\n<p>ตัวอย่างการ build, publish และ publish แบบ Debug</p>\n\n\n\n[code]\n$dotnet new console\n\n$dotnet build\n  app -&gt; /app/bin/Debug/net8.0/app.dll\n\n$dotnet publish\n  app -&gt; /app/bin/Release/net8.0/app.dll\n  app -&gt; /app/bin/Release/net8.0/publish/\n\n$dotnet publish -p:PublishRelease=false\n  app -&gt; /app/bin/Debug/net8.0/app.dll\n  app -&gt; /app/bin/Debug/net8.0/publish/\n[/code]\n\n\n\n<p>ส่วนของ Docker image ก็มีเตรียมไว้ให้<br />คือ <strong>mcr.microsoft.com/dotnet/sdk:8.0-preview</strong><br />หรือดูเพิ่มเติมได้ที่ <a href=\"https://mcr.microsoft.com/product/dotnet/nightly/aspnet/tags\" target=\"_blank\">Microsoft Artifact Registry</a></p>\n\n\n\n<figure><img src=\"https://www.somkiat.cc/wp-content/uploads/2023/04/Screenshot-2566-04-18-at-19.38.32-1024x554.png\" alt width=\"541\" height=\"292\" /></figure>\n\n\n\n<p><strong>ใน Docker Image ของ .NET 8 ประกอบไปด้วย</strong></p>\n\n\n\n<ul><li>ใช้ Debian 12</li><li>Non-root user</li><li>เปลี่ยน default port จาก 80 เป็น 8080 หรือกำหนดค่าผ่าน environment variable ชื่อว่า ASPNETCORE_HTTP_PORTS</li><li>มี <a href=\"https://learn.microsoft.com/en-us/dotnet/core/whats-new/dotnet-8#chiseled-ubuntu-images\">Chiseled Ubuntu images</a> ให้ใช้</li><li><a href=\"https://learn.microsoft.com/en-us/dotnet/core/whats-new/dotnet-8#build-multi-platform-container-images\">Build multi-platform container images</a></li></ul>\n\n\n\n<p>ลองทดสอบใช้งานกันเล่นดูนะ</p>\n","author":"somkiat","siteTitle":"cc :: somkiat","siteHash":"3a23a5a4389e1e40c6fbb16520a8cc20df5b3591c25145ce72aaa18b19e48201","entryHash":"0ec001e5ab82dd6c0c816352e3f17428454b2adf0121715018cbcf8b9e31bf82","category":"Thai"}