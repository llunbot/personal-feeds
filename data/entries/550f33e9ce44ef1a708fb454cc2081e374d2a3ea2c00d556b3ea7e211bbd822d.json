{"title":"แพลตฟอร์มเสื้อมือสอง Vinted ย้ายจาก Elasticsearch ไป Vespa ลดเซิร์ฟเวอร์ลงเกือบครึ่ง ค้นหาเร็วขึ้น 2.5 เท่า","link":"https://www.blognone.com/node/141875","date":1725633022000,"content":"<div><div><div><p>Vinted แพลตฟอร์มขายเสื้อผ้ามือสองออนไลน์รายงานถึงกระบวนการย้ายระบบค้นข้อมูล หลังจากใช้งาน Elasticsearch มาตั้งแต่ปี 2015 แม้จะใช้งานได้ดีมาหลายปีแต่ก็พบว่าถึงข้อจำกัดแล้ว ทำให้ตัดสินใจย้ายไปยัง <a href=\"https://github.com/vespa-engine/vespa/\">Vespa ระบบค้นหาแบบโอเพนซอร์สอีกตัวหนี่ง</a> โดยกระบวนการกินเวลานานเกือบหนึ่งปี</p>\n<p>ก่อนหน้าการย้าย Vinted ใช้ Elasticsearch ถึง 6 คลัสเตอร์ คลัสเตอร์ละ 20 เครื่อง คลัสเตอร์ใหญ่ขนาดนี้ทำให้กระบวนการบำรุงรักษาเสียเวลามาก ทีมงานเลือก Vespa เพราะกระบวนการ deploy ของ Vespa นั้นเรียบง่ายมาก มีระบบ Vespa Application Package (VAP) นี่รวมเอาคอนฟิกต่างๆ เข้าไว้ในแพ็กเกจเดียว ทำให้การติดตั้งโหนดเพิ่มเติมทำได้ง่าย ข้อมูลสามารถเรียงตัวกระจายโหนดอัตโนมัติ โดยรวมเหลือคลัสเตอร์เดียว 60 เครื่องสำหรับเก็บข้อมูล, 3 เครื่องสำหรับคอนฟิก, และ 12 เครื่อง container</p>\n<p>ความได้เปรียบของ Vespa ในการใช้งาน คือ การทำ re-index ที่ Elasticsearch ทำได้ช้า และค่อนข้างอันตราย ตัว Vespa นั้นรองรับอินพุตได้สูงขณะที่การใส่เอกสารใหม่ใช้เวลาเพียง 4.6 วินาทีก็ ความหน่วงในการค้นหาลดลง 2.5 เท่า และความหน่วงในการใส่เอกสารใหม่ลดลง 3 เท่า</p>\n<p>ทาง Vinted ช่วยแพตช์ Vespa ให้รองรับการวิเคราะหืข้อมูลด้วย Lucene ทำให้การค้นหาโดยรวมเหมือนเดิมกับการใช้ Elasticsearch</p>\n<p>Vespa เป็นโครงการภายในของ Yahoo! ที่ใช้มานาน ทั้งการค้นหา, การแนะนำข้อมูล, และการแสดงโฆษณา ภายหลังทาง Yahoo! โอเพนซอร์สโครงการนี้ออกมา และ<a href=\"https://blog.vespa.ai/vespa-is-becoming-its-own-company/\">ทีมงานก็แยกตัวออกมาตั้งบริษัทเมื่อปีที่แล้ว</a></p>\n<p>ที่มา - <a href=\"https://vinted.engineering/2024/09/05/goodbye-elasticsearch-hello-vespa/\">Vinted.Engineering</a></p>\n<p><img alt=\"No Description\" src=\"https://www.blognone.com/sites/default/files/externals/f7af290ee620a7363648f12a958f5eee.png\" /></p>\n</div></div></div><div><div>Topics: </div><div><div><a href=\"/topics/elasticsearch\">Elasticsearch</a></div><div><a href=\"/topics/open-source\">Open Source</a></div></div></div>","author":"lew","siteTitle":"Blognone","siteHash":"ededadcf18490b3937e7dd89ebe8c00dc129addbdf1ebe4aff1f458146693da0","entryHash":"550f33e9ce44ef1a708fb454cc2081e374d2a3ea2c00d556b3ea7e211bbd822d","category":"Thai"}