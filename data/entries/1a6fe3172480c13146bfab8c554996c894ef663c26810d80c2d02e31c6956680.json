{"title":"New – Amazon DevOps Guru for RDS to Detect, Diagnose, and Resolve Amazon Aurora-Related Issues using ML","link":"https://aws.amazon.com/blogs/aws/new-amazon-devops-guru-for-rds-to-detect-diagnose-and-resolve-amazon-aurora-related-issues-using-ml/","date":1638377502000,"content":"<p>Today we are announcing Amazon DevOps Guru for RDS, a new capability for <a href=\"https://aws.amazon.com/devops-guru/\">Amazon DevOps Guru</a>. It allows developers to easily detect, diagnose, and resolve performance and operational issues in <a href=\"https://aws.amazon.com/rds/aurora/\">Amazon Aurora</a>.</p> \n<p>Hundreds of thousands of customers nowadays are using Amazon Aurora because it is highly available, scalable, and durable. But as applications grow in size and complexity, it becomes more challenging for these customers to detect and resolve operational and performance issues quickly.</p> \n<p>During <a href=\"https://aws.amazon.com/es/blogs/aws/amazon-devops-guru-machine-learning-powered-service-identifies-application-errors-and-fixes/\">last year’s re:Invent, we announced</a> DevOps Guru, a service that uses machine learning (ML) to automatically detect and alert customers of application issues, including database problems. Today we are announcing DevOps Guru for RDS to help developers using Amazon Aurora databases to detect, diagnose, and resolve database performance issues fast and at scale. Now developers will have enough information to determine the exact cause for a database performance issue. This launch will save developers and engineers many hours of work trying to uncover and remediate the performance-related database issues.</p> \n<p>DevOps Guru for RDS uses ML to automatically identify and analyze a wide range of performance-related database issues, such as over-utilization of host resources, database bottlenecks, or misbehavior of SQL queries. It also recommends solutions to remediate the issues it finds. To use this capability, you don’t need to be a database or ML expert.</p> \n<p>When an issue is detected, DevOps Guru for RDS displays the finding in the DevOps Guru console and sends notifications using <a href=\"https://aws.amazon.com/eventbridge\">Amazon EventBridge</a> or <a href=\"https://aws.amazon.com/sns/\">Amazon Simple Notification Service (SNS)</a>. This allows developers to automatically manage and take real-time action on the issues.</p> \n<p><span><strong>How DevOps Guru for RDS Works</strong></span><br /> DevOps Guru for RDS uses anomaly detection on the <a href=\"https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/USER_PerfInsights.Overview.ActiveSessions.html\">database load</a> (DB load) performance metric to detect issues. DB load is measured in units of Average Active Sessions (AAS). DB load measures the level of activity in your database, making it a great metric to understand the health of your database. If the DB load is high, this can result in performance issues. This metric can be compared to the number of virtual CPUs (vCPUs), and if the DB load is higher than that number, issues can arise.</p> \n<p>The most useful dimensions for this metric are the wait events and the top SQL. The wait event describes what the system conditions that are currently running SQLs are waiting on. The most common reasons why a statement is waiting is that it is waiting for the CPU, waiting for a read or write, or waiting for a locked resource. The top SQL dimension shows which queries are contributing the most to DB load.</p> \n<p>The following image is an example of a finding that DevOps Guru for RDS reported. The graph shows that from the AAS, most of them were waiting for access to a table or for CPU.</p> \n<p><a href=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2021/11/26/08-graph1-sample3.png\"><img src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2021/11/26/08-graph1-sample3-1024x752.png\" /></a><br /> If you continue scrolling on the DevOps Guru for RDS analysis page, you can discover the cause for the problem and some recommendations to fix it. In this particular example, two problems were detected: high-load wait events and CPU capacity exceeded.</p> \n<p>DevOps Guru for RDS looks more in-depth into these problems. First, it looks at the high-load wait events, where there were 27 AAS for the IO and CPU wait types, which is 99 percent of the total DB load.</p> \n<p>Second, it tells us that the running tasks exceeded six processes. This database only has two vCPUs, and the recommended number of running processes should be a maximum of four (2x vCPUs). DevOps Guru for RDS also makes recommendations to fix these issues.</p> \n<p><a href=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2021/11/26/09-viewanalyis-sample2-1.png\"><img src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2021/11/26/09-viewanalyis-sample2-1-1024x551.png\" /></a></p> \n<p>In another anomaly, the graph shows that there was a high load of wait events, and one SQL query was found to require further investigation. You can even see the exact SQL query if you click on the <strong>SQL digest IDs</strong>. The insight’s analysis and recommendation section is full of information on how to investigate further and fix the issue. You can get a lot of detailed information by clicking on the wait event, for example, on the wait event <code>wait/io/table/sql/handler</code> or in the <a href=\"https://docs.aws.amazon.com/AmazonRDS/latest/AuroraUserGuide/AuroraMySQL.Managing.Tuning.wait-events.html\"><strong>View troubleshooting doc</strong></a> link.</p> \n<p><a href=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2021/11/19/05-viewanalyis-sample2.gif\"><img src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2021/11/19/05-viewanalyis-sample2-1024x505.gif\" /></a></p> \n<p><span><strong>Get started with DevOps Guru for RDS</strong></span><br /> To get started with this new capability of DevOps Guru, make sure that Performance Insights is enabled for your Amazon Aurora DB instances. It supports Amazon Aurora with MySQL- and PostgreSQL-compatibility. For instructions on how to enable Performance Insights, see <a href=\"https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/USER_PerfInsights.Enabling.html\">Enabling and disabling Performance Insights</a>.</p> \n<p>The next step is to enable DevOps Guru to start monitoring your AWS resources. You can specify the resources you want to be covered by DevOps Guru.</p> \n<p>If you are already using DevOps Guru, whenever there is a new insight for an Amazon Aurora database resource, you will see it in the console.</p> \n<p>To see the detailed database analysis, navigate to the Insight page and select the new <strong>View analysis</strong> button under the DB load aggregated metric. That button will take you to the detailed analysis by DevOps Guru for RDS.</p> \n<p><a href=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2021/11/19/03-view-analysis.png\"><img src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2021/11/19/03-view-analysis-1024x513.png\" /></a></p> \n<p><span><strong>Pricing and Availability</strong></span><br /> DevOps Guru for RDS is offered to customers at no additional charge, as part of the existing <a href=\"https://aws.amazon.com/devops-guru/pricing/\">price that DevOps Guru charges customers for RDS resources</a>.</p> \n<p>DevOps Guru for RDS is available in all Regions where DevOps Guru is available, US East (Ohio), US East (N. Virginia), US West (Oregon), Asia Pacific (Singapore), Asia Pacific (Sydney), Asia Pacific (Tokyo), Europe (Frankfurt), Europe (Ireland), and Europe (Stockholm).</p> \n<p>Learn more about DevOps Guru for RDS and check out the talk at <a href=\"https://reinvent.awsevents.com/\">AWS re:Invent</a> “Automatically detect and resolve performance issues with Amazon DevOps Guru for RDS” (Session Id 15877).</p> \n<p>— <a href=\"https://twitter.com/mavi888uy\">Marcia</a></p>","author":"Marcia Villalba","siteTitle":"AWS News Blog","siteHash":"6093e072e4117ec22616e844cb857d03ca62c57a411a8affc77cb5e8b6b15bf6","entryHash":"1a6fe3172480c13146bfab8c554996c894ef663c26810d80c2d02e31c6956680","category":"Tech"}