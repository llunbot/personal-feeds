{"title":"ปัญหาของ WebClient ใน Spring Boot 3","link":"https://www.somkiat.cc/spring-boot-webclient-tracing-problem/","date":1688746337000,"content":"<p><img width=\"150\" height=\"150\" src=\"https://www.somkiat.cc/wp-content/uploads/2023/07/full-trace-view-150x150.png\" alt loading=\"lazy\" srcset=\"https://www.somkiat.cc/wp-content/uploads/2023/07/full-trace-view-150x150.png 150w, https://www.somkiat.cc/wp-content/uploads/2023/07/full-trace-view-75x75.png 75w\" /></p>\n<figure><a href=\"https://www.somkiat.cc/wp-content/uploads/2023/07/full-trace-view.png\"><img src=\"https://www.somkiat.cc/wp-content/uploads/2023/07/full-trace-view-1024x643.png\" alt width=\"663\" height=\"416\" /></a></figure>\n\n\n\n<p>ปัญหาที่พบเจอใน Spring Boot 3  + WEbFlux<br />เมื่อมีการใช้งาน WebClient เพื่อเรียกใช้งาน external API<br />พบว่าข้อมูลของ tracing ไม่ถูกส่งไปยัง external API<br />ทำให้ข้อมูลของ tracing ระบบไม่ถูกต้องตามที่คาดหวัง</p>\n\n\n\n<span></span>\n\n\n\n<p>ตัวอย่างของ code ที่ใช้งาน และ เกิดปัญหาข้างต้น</p>\n\n\n\n[gist id=\"78a8a84d8cb02df4e51c3e48033fd4ae\" file=\"MyGateway.java\"]\n\n\n\n<p><strong>ลองไปหาวิธีการแก้ไขปัญหานี้ ก็ไม่เจอ</strong><br />เลยลองแก้ไขไปมาดู ก็เจอวิธีแห้ไขแบบโง่ ๆ <br />คือการใช้งาน  WebClient.Builder แทน !!<br />ตาม code ข้างล่าง ก็ทำงานได้แบบงง ๆ <br />ไว้ไปดูในรายละเอียดอีกรอบว่า ทำไม ?</p>\n\n\n\n[gist id=\"78a8a84d8cb02df4e51c3e48033fd4ae\" file=\"MyGateway2.java\"]\n","author":"somkiat","siteTitle":"cc :: somkiat","siteHash":"3a23a5a4389e1e40c6fbb16520a8cc20df5b3591c25145ce72aaa18b19e48201","entryHash":"f59b7441f3223cd5892507465b6e7fe43842e36f5cdd1e9e674fa9d014ff48a3","category":"Thai"}