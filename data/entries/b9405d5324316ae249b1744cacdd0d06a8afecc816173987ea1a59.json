{"title":"Easy SVG Customization And Animation: A Practical Guide","link":"https://smashingmagazine.com/2023/01/svg-customization-animation-practical-guide/","date":1675087200000,"content":"<p>Scalable Vector Graphics (SVG) have been a staple in Web Development for quite some time, and for a good reason. They can be scaled up or down without loss of quality due to their vector properties. They can be compressed and optimized due to the XML format. They can also be easily edited, styled, animated, and changed programmatically.</p>\n<p>At the end of the day, SVG is a <strong>markup language</strong>. And just as we can use CSS and JavaScript to enhance our HTML, we can use them the same on SVGs. We could add <strong>character and flourishes</strong> to our graphic elements, add <strong>interactions</strong>, and shape truly delightful and memorable user experiences. This optional but crucial detail is often overlooked when building projects, so <strong>SVGs end up somewhat underutilized</strong> beyond their basic graphical use cases.</p>\n<p>How can we even <strong>utilize SVGs</strong> beyond just using them statically in our projects?</p>\n<p>Take the <a href=\"https://2021.stateofcss.com/en-US/\">“The State of CSS 2021”</a> landing page, for example. This SVG Logo has been beautifully designed and animated by <a href=\"https://chriskirknielsen.com/\">Christopher Kirk-Nielsen</a>. Although this logo would have looked alright just as a static image, it wouldn’t have had as much of an impact and drawn attention without this intricate animation.</p>\n<p>Let’s go even further — SVG, HTML, CSS, and JavaScript can be combined and used to create <strong>delightful, interactive, and stunning projects</strong>. Check out <a href=\"https://twitter.com/sarah_edo\">Sarah Drasner’s</a> incredible work. She has also written <a href=\"https://www.oreilly.com/library/view/svg-animations/9781491939697/\">a book</a> and has a <a href=\"https://frontendmasters.com/courses/svg-essentials-animation/\">video course</a> on the topic.</p>\n<p><img src=\"https://files.smashing.media/articles/svg-customization-animation-practical-guide/01-star-icon.png\" /></p>\n<p>Let’s add it to our HTML and create a simple button component.</p>\n<div>\n<pre><code>&lt;button type=\"button\"&gt;\n  &lt;svg width=\"24\" height=\"24\" viewBox=\"0 0 80 80\" fill=\"none\" xmlns=\"<a href=\"http://www.w3.org/2000/svg&quot;\">http://www.w3.org/2000/svg\"</a> aria-hidden=\"true\"&gt;&lt;path d=\"...\" fill=\"#C2CCDE\" /&gt;&lt;/svg&gt;\n  Add to favorites\n&lt;/button&gt;\n</code></pre>\n</div>\n\n<p>Our button already has some background and text color styles applied to it so let’s see what happens when we add our SVG star icon to it.</p>\n<p><img src=\"https://files.smashing.media/articles/svg-customization-animation-practical-guide/02-button-star-icon.png\" /></p>\n<p>Our SVG icon has a <code>fill</code> property applied to it, more specifically, a <code>fill=\"#C2CCDE\"</code> in SVG’s <code>path</code> element. This icon could have come from the SVG library or even exported from a design file, so it makes sense for a color to be exported alongside other graphical properties.</p>\n<p>SVG elements can be targeted by CSS like any HTML element, so developers usually reach for the CSS and override the <code>fill</code> color.</p>\n<pre><code>.button svg * {\n  fill: var(--color-text);\n}\n</code></pre>\n\n<p><img src=\"https://files.smashing.media/articles/svg-customization-animation-practical-guide/03-button-color-star-icon.png\" /></p>\n<p>However, this is not an ideal solution as this is a greedy selector, and overriding the <code>fill</code> attribute on all elements can have unintended consequences, depending on the SVG markup. Also, <code>fill</code> is not the only property that affects the element’s color.</p>\n<p>Let’s showcase this downside by creating a new button and adding a Google logo icon. SVG markup is a bit more complex than our star icon, as it has multiple <code>path</code> elements. SVG elements don’t have to be all visible, there are cases when we want to use them in different ways (as a clipping region, for example), but we won’t go into that. Just keep in mind that greedy selectors that target SVG elements and override their <code>fill</code>  properties can produce unexpected results.</p>\n<div>\n<pre><code> &lt;svg aria-hidden=\"true\" xmlns=\"<a href=\"http://www.w3.org/2000/svg&quot;\">http://www.w3.org/2000/svg\"</a> height=\"24\" viewBox=\"0 0 24 24\" width=\"24\"&gt;\n  &lt;path d=\"...\" fill=\"#4285F4\" /&gt;\n  &lt;path d=\"...\" fill=\"#34A853\" /&gt;\n  &lt;path d=\"...\" fill=\"#FBBC05\" /&gt;\n  &lt;path d=\"...\" fill=\"#EA4335\" /&gt;\n  &lt;path d=\"...\" fill=\"none\" /&gt;\n &lt;/svg&gt;\n</code></pre>\n</div>\n\n<p><img src=\"https://files.smashing.media/articles/svg-customization-animation-practical-guide/04-button-visible-svg-element.png\" /></p>\n<p>We can look at the issue from a different perspective. Instead of looking for a silver bullet CSS solution, we can simply edit our SVG. We already know that the <code>fill</code> property affects the SVG element’s color so let’s see what we can do to make our icons more customizable.</p>\n<p>Let’s use a very underutilized CSS value: <code>currentColor</code>. I’ve talked about this awesome value in one of <a href=\"https://www.smashingmagazine.com/2022/05/lesser-known-underused-css-features-2022/?ref=sidebar#currentcolor\">my previous articles</a>. </p>\n<blockquote>Often referred to as “the first CSS variable,” <code>currentColor</code> is a value equal to the element’s <code>color</code> property. It can be used to assign a value equal to the value of the <code>color</code> property to any CSS property which accepts a color value. It forces a CSS property to inherit the value of the <code>color</code> property.</blockquote>\n\n<p><img src=\"https://files.smashing.media/articles/svg-customization-animation-practical-guide/05-SVGOMG-tool.png\" /></p>\n<p>If you are looking for more, CSS-Tricks keeps a <a href=\"https://css-tricks.com/tools-for-optimizing-svg/\">comprehensive list</a> of various SVG optimization tools with plenty of information and articles on the topic.</p>\n<h3>Using SVGs With Popular JavaScript-Based Frameworks</h3>\n<p>Many popular JavaScript frameworks like React have fully integrated SVG in their toolchains to make the developer experience easier. In React, this could be as simple as importing the SVG as a component, and the toolkit would do all the heavy lifting optimizing it.</p>\n<pre><code>import React from 'react';\nimport {ReactComponent as ReactLogo} from './logo.svg';\n\nconst App = () =&gt; {\n  return (\n    &lt;div className=\"App\"&gt;\n      &lt;ReactLogo /&gt;\n    &lt;/div&gt;\n  );\n}\nexport default App;\n</code></pre>\n\n<p>However, as <a href=\"https://mobile.twitter.com/_developit/status/1382838799420514317\">Jason Miller</a> and many other developers have noted, including the SVG markup in JSX bloats the JavaScript bundle and makes the SVG less performant as a result. Instead of just having the browser parse and render an SVG, with JSX, we have expensive extra steps added to the browser. Remember, JavaScript is the most expensive Web resource, and by injecting SVG markup into JSX, we’ve made SVG as expensive as well.</p>\n<p>One solution would be to create <a href=\"https://developer.mozilla.org/en-US/docs/Web/SVG/Element/symbol\">SVG symbol</a> objects and include them with <a href=\"https://developer.mozilla.org/en-US/docs/Web/SVG/Element/use\">SVG use</a>. That way, we’ll be defining the SVG icon library in HTML, and we can instantiate it and customize it in React as much as we need to.</p>\n<pre><code>&lt;!-- Definition --&gt;\n&lt;svg viewBox=\"0 0 128 128\" xmlns=\"http://www.w3.org/2000/svg\"&gt;\n  &lt;symbol id=\"myIcon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"&gt;\n      &lt;!-- ... --&gt;\n  &lt;/symbol&gt;\n  &lt;!-- ... --&gt;\n&lt;/svg&gt;\n\n&lt;!-- Usage --&gt;\n&lt;svg viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"&gt;\n  &lt;use href=\"#myIcon\" /&gt;\n&lt;/svg&gt;\n</code></pre>\n\n\n\nBreathing Life Into SVGs\n<p>Animating SVGs can be easy and fun. It takes just a few minutes to create some simple and effective animations and interactions. If you are unsure which animation would be ideal for a graphic or should you animate it at all, it’s best to consult with the designer. You can even look for some similar examples and use cases on <a href=\"https://dribbble.com/shots/popular/animation\">Dribble</a> or other similar websites.</p>\n<p>It’s also important to keep in mind that <strong>animations should be tasteful, add to the overall user experience, and serve some purpose</strong> (draw the user’s attention, for example).</p>\n<p>We’ll cover various use cases that you might encounter on your projects. Let’s start with a really sweet example.</p>\n<h3>Animating A Cookie Banner</h3>\n<p>Some years ago, I was working on a project where a designer made an adorable cookie graphic for an unobtrusive cookie consent popup to make the element more prominent. This cookie graphic was whimsical and a bit different from the general design of the website.</p>\n<p><img src=\"https://files.smashing.media/articles/svg-customization-animation-practical-guide/06-cookie-banner.png\" /></p>\n<p>I’ve created the element and added the graphic, but when looking at the page as a whole, it felt kind of lifeless, and it didn’t stand out as much as we thought it will. The user needed to accept cookies as the majority of website functionality depended on cookies. We wanted to create an unobtrusive banner that doesn’t block user navigation from the outset, so I decided to animate it to make it more prominent and add a bit of flourish and character.</p>\n<p>I’ve decided to create three animations that’ll be applied to the cookie SVG:</p>\n<ul>\n<li>Quick and snappy rolling fade-in entry animation;</li>\n<li>Repeated wiggle animation with a good amount of delay in between;</li>\n<li>Repeating and subtle eye sparkle animation.</li>\n</ul>\n<p>Here’s the final result of the element that we’ll be creating. We’ll cover each animation step by step.</p>\n<p><img src=\"https://files.smashing.media/articles/svg-customization-animation-practical-guide/07-easing-function-simple-single-bounce.png\" /></p>\n<p>Let’s store it in a CSS variable so that we can reuse it for the repeatable wiggle movement animation.</p>\n<pre><code>--transition-bounce: cubic-bezier(0.2, 0.7, 0.4, 1.65);\n</code></pre>\n\n<p>Let’s put everything together, set a duration value and <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/animation-fill-mode\">fill-mode</a>, and add the animation to our <code>svg</code> element.</p>\n<pre><code>/* Our SVG element */\n.cookie-notice__graphic {\n  opacity: 0; /* Should not be visible at the start */\n  animation: enter 0.8s var(--transition-bounce) forwards;\n}\n</code></pre>\n\n<p>Let’s check out what we’ve created. It already looks really nice. Notice how the bouncing easing function made a lot of difference to the overall look and feel of the whole element.</p>\n<p><img src=\"https://files.smashing.media/articles/svg-customization-animation-practical-guide/08-easing-function-bouncing-curve.png\" /></p>\n<pre><code>@keyframes wiggle {\n  /* Stands still */\n  0% {\n    transform: translate3d(0, 0, 0) rotateZ(17deg);\n  }\n  /* Starts moving */\n  45% {\n    transform: translate3d(0, 0, 0) rotateZ(17deg);\n  }\n\n  /* Pulls back */\n  50% {\n    transform: translate3d(-10%, 0, 0) rotateZ(8deg);\n  }\n\n  /* Moves forward */\n  55% {\n    transform: translate3d(6%, 0, 0) rotateZ(24deg);\n  }\n\n  /* Returns to starting position */\n  60% {\n    transform: translate3d(0, 0, 0) rotateZ(17deg);\n  }\n\n  /* Stands still */\n  100% {\n    transform: translate3d(0, 0, 0) rotateZ(17deg);\n  }\n}\n</code></pre>\n\n<pre><code>/* Our SVG element */\n.cookie-notice__graphic {\n  opacity: 0;\n  animation: enter 0.8s var(--transition-bounce) forwards,\n    wiggle 6s 3s var(--transition-bounce) infinite;\n}\n</code></pre>\n\n<p><img src=\"https://files.smashing.media/articles/svg-customization-animation-practical-guide/09-browsers-inspect-element-tool.png\" /></p>\n<p>SVG elements can have a CSS <code>class</code> attribute, so we’ll use that to target them. Let’s add the <code>class</code> attribute to the two <code>path</code> elements that we identified.</p>\n<pre><code>&lt;!-- ... --&gt;\n&lt;path fill=\"#351f17\" d=\"...\" /&gt;\n&lt;path class=\"cookie__eye\" fill=\"#fff\" d=\"...\" /&gt;\n&lt;path fill=\"#351f17\" d=\"...\" /&gt;\n&lt;path class=\"cookie__eye\" fill=\"#fff\" d=\"...\" /&gt;\n&lt;!-- ... --&gt;\n</code></pre>\n\n<p>We want to make cookie’s eyes sparkle. I got this idea from a music video for a song by <a href=\"https://youtu.be/-zIxPUPWVq8?t=300\">Devin Townsend</a>. You can see the animation play at the 5-minute mark. It just goes to show how <strong>you can find ideas pretty much anywhere</strong>.</p>\n<p>Let’s just change the scale and opacity. Notice how so far, we’ve relied only on those two attributes for all three animations, which are quite different from each other.</p>\n<pre><code>@keyframes sparkle {\n  from {\n    opacity: 0.95;\n    transform: scale(0.95);\n  }\n  to {\n    opacity: 1;\n    transform: scale(1);\n  }\n}\n</code></pre>\n\n<p>We want this animation to repeat without delay. It should be subtle enough to blend in nicely with the graphic and the overall element and not obtrusive for the user. As for the easing function, we’ll do something different. We’ll use <a href=\"https://www.smashingmagazine.com/2021/04/easing-functions-css-animations-transitions/#staircase-functions\">staircase functions</a> to achieve that quick and snappy transition between the two animation states (our <code>from</code> and <code>to</code> values).</p>\n<p>We need to be careful here. <strong>Transform origin is going to be set relative to the parent SVG element’s <code>viewbox</code></strong> and not the element itself. So if we set <code>transform-origin: center center</code>, the transformation will use the center coordinates of the parent SVG and not the <code>path</code> element. We can easily fix that by setting a <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/transform-box\">transform-box</a> property to <code>fill-box</code>.</p>\n<blockquote>The nearest SVG viewport is used as the reference box. If a <code>viewBox</code> attribute is specified for the SVG viewport creating element, the reference box is positioned at the origin of the coordinate system established by the <code>viewBox</code> attribute, and the dimension of the reference box is set to the width and height values of the <code>viewBox</code> attribute.</blockquote>\n\n<div>\n<pre><code>.cookie__eye {\n  animation: sparkle 0.15s 1s steps(2, jump-none) infinite alternate;\n  transform-box: fill-box;\n  transform-origin: center center;\n}\n</code></pre>\n</div>\n\n<p>Last but not least, let’s <a href=\"https://web.dev/prefers-reduced-motion/\">respect the user’s accessibility preferences</a> and turn off all animations if they have it set.</p>\n<pre><code>@media (prefers-reduced-motion: reduce) {\n  *,\n  ::before,\n  ::after {\n    animation-delay: -1ms !important;\n    animation-duration: 1ms !important;\n    animation-iteration-count: 1 !important;\n    background-attachment: initial !important;\n    scroll-behavior: auto !important;\n    transition-duration: 0s !important;\n    transition-delay: 0s !important;\n  }\n}\n</code></pre>\n\n<p>Here is the final result. Feel free to play around with the demo and experiment with keyframe values and easing values to change the look and feel of the animation.</p>\n<p><img src=\"https://files.smashing.media/articles/svg-customization-animation-practical-guide/10-image-text-content-background-svg.png\" /></p>\n<p>Let’s take a closer look at the SVG we’ll be working with. It consists of a few dozen <code>circle</code> elements.</p>\n<pre><code>&lt;!-- ... --&gt;\n&lt;circle cx=\"103.5\" cy=\"34.5\" r=\"11.3\"&gt;&lt;/circle&gt;\n&lt;circle cx=\"172.5\" cy=\"34.5\" r=\"15.7\"&gt;&lt;/circle&gt;\n&lt;circle cx=\"310.5\" cy=\"34.5\" r=\"24.6\"&gt;&lt;/circle&gt;\n&lt;circle cx=\"517.5\" cy=\"34.5\" r=\"34.5\"&gt;&lt;/circle&gt;\n&lt;circle cx=\"586.5\" cy=\"34.5\" r=\"34.5\"&gt;&lt;/circle&gt;\n&lt;circle cx=\"655.5\" cy=\"34.5\" r=\"33.4\"&gt;&lt;/circle&gt;\n&lt;!-- ... --&gt;\n</code></pre>\n\n<p>Let’s start by adding a bit of opacity to our background and making it more chaotic. When we apply CSS transforms to elements inside SVG, they are transformed relative to the SVG’s main viewbox. That is why we’re getting a slightly chaotic displacement when applying a <code>scale</code> transform. We’ll use that to our advantage and not change the reference box.</p>\n<p>To make things a little bit easier for us, we’ll use SASS. If you are unfamiliar with SASS and SCSS, you can view compiled CSS in CodePen below.</p>\n<pre><code>svg circle {\n  opacity: 0.85;\n\n  &amp;:nth-child(2n) {\n    transform: scale3d(0.75, 0.75, 0.75);\n    opacity: 0.3;\n}\n</code></pre>\n\n<p><img src=\"https://files.smashing.media/articles/svg-customization-animation-practical-guide/11-image-sass.png\" /></p>\n<p>With that in mind, let’s add some keyframes. We’ll use two sets of keyframes that we’ll apply randomly to our circle elements. Once again, we’ll leverage the <code>scale</code> transform displacement and change the opacity value. </p>\n<pre><code>@keyframes a {\n  0% {\n    opacity: 0.8;\n    transform: scale3d(1, 1, 1);\n  }\n  100% {\n    opacity: 0.3;\n    transform: scale3d(0.75, 0.75, 0.75);\n  }\n}\n\n@keyframes b {\n  0% {\n    transform: scale3d(0.75, 0.75 0.75);\n    opacity: 0.3;\n  }\n  100% {\n    opacity: 0.8;\n    transform: scale3d(1, 1, 1);\n  }\n}\n</code></pre>\n\n<p>Now, let’s use quite a few <code>:nth-child</code> selectors. Every odd child will use the <code>a</code> keyframes, while every even circle will use a <code>b</code> keyframes. We’ll use <code>:nth-child</code> selectors to play around with animation duration and animation delay values.</p>\n<div>\n<pre><code>svg circle {\n  opacity: 0.85;\n  animation: a 10s cubic-bezier(0.45,0.05,0.55,0.95) alternate infinite;\n\n  &amp;:nth-child(2n) {\n    transform: scale3d(0.75, 0.75, 0.75);\n    opacity: 0.3;\n\n    animation-name: b;\n    animation-duration: 6s;\n    animation-delay: 0.5s;\n  }\n\n  &amp;:nth-child(3n) {\n    animation-duration: 4s;\n    animation-delay: 0.25s;\n  }\n\n  /* ... */\n}\n</code></pre>\n</div>\n\n<p>And, once again, just by playing around with opacity values and CSS transforms on our SVG and playing around with child selectors and animation parameters, we’ve managed to create a more interesting background for our hero container.</p>\n<p><img src=\"https://files.smashing.media/articles/svg-customization-animation-practical-guide/12-design-repeatable-circle-pattern.png\" /></p>\n<p>Here is a markup for our circle SVG.</p>\n<div>\n<pre><code>&lt;svg xmlns=\"<a href=\"http://www.w3.org/2000/svg&quot;\">http://www.w3.org/2000/svg\"</a> viewBox=\"0 0 100 100\"&gt;&lt;circle cx=\"50\" cy=\"50\" r=\"50\" fill-opacity=\".03\"/&gt;&lt;/svg&gt;\n</code></pre>\n</div>\n\n<p>Be careful not to inline too much data with base64, so stylesheets can be downloaded and parsed quickly. When we convert it to base64, we get this handy CSS <code>background-image</code> snippet:</p>\n<div>\n<pre><code>background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48Y2lyY2xlIGN4PSI1MCIgY3k9IjUwIiByPSI1MCIgZmlsbC1vcGFjaXR5PSIuMDMiLz48L3N2Zz4=);\n</code></pre>\n</div>\n\n<p>We can simply apply a simple animation where we offset the <code>background-position</code> by the <code>background-size</code> value and get this neat background animation.</p>\n<pre><code>.wrapper {\n  animation: move-background 3.5s linear;\n  background-image: url(data:image/svg+xml;base64,...);\n  background-size: 96px;\n  background-color: #16a757;\n  /* ... */\n}\n\n@keyframes move-background {\n  from {\n    background-position: 0 0;\n  }\n\n  to {\n    background-position: 96px 0;\n  }\n}\n</code></pre>\n\n<p>Our example looks more interesting with this subtle moving animation going on in the background. Remember to respect users’ accessibility preferences and turn off the animations if they have a preference set.</p>\n<p><img src=\"https://files.smashing.media/articles/svg-customization-animation-practical-guide/13-starting-text.png\" /></p>\n<p>Before diving into the animation, we need to cover two SVG properties that we’ll be using: <code>stroke-dasharray</code> and <code>stroke-dashoffset</code>. They’re integral for pulling off this animation.</p>\n<p>Stroke can be converted to dashes with a certain length using a <code>stroke-dasharray</code> property.</p>\n<p><img src=\"https://files.smashing.media/articles/svg-customization-animation-practical-guide/14-stroke-dasharray-property.png\" /></p>\n<p>And we can offset the positions of those strokes by a certain amount using the <code>stroke-dashoffset</code> property.</p>\n<p><img src=\"https://files.smashing.media/articles/svg-customization-animation-practical-guide/15-stroke-dashoffset-property.png\" /></p>\n<p>So, what’s this have to do with our drawing and erasing animation? Imagine what would happen if we could have a dash that covers the whole stroke length and offset it by the same value. In that case, the starting point of the stroke would be way past the ending point of the stroke, and we wouldn’t see it. </p>\n<div>\n<pre><code>svg path {\n  stroke-linecap: round;\n  stroke-linejoin: round;\n  stroke-dasharray: 800;  /* Dash covering the whole stroke */\n  stroke-dashoffset: 800; /* Offset it to make it invisible */\n}\n</code></pre>\n</div>\n\n<p>If we animate the offset value from that value back to 0, the stroke would slowly become visible, <strong>as it was drawing itself</strong>.</p>\n<div>\n<pre><code>svg path {\n  /* ... */\n  animation: draw 6s linear infinite;\n}\n\n@keyframes draw{\n  to {\n    stroke-dashoffset: 0; /* Reduce offset to make it visible */\n  }\n}\n</code></pre>\n</div>\n\n<p>If we continue to animate the offset value from 0 to a negative value, <strong>we’d get the erasing effect</strong>.</p>\n<pre><code>svg path {\n  /* ... */\n  animation: drawAndErase 6s linear infinite;\n}\n\n@keyframes drawAndErase {\n  to {\n    stroke-dashoffset: -800;\n  }\n}\n</code></pre>\n\n<p>You’re probably wondering where the magical <code>800</code> pixel value came from. This value depends on the SVG and the length of the dash needed to cover the whole stroke length. It can be easily guessed, but <a href=\"https://css-tricks.com/svg-line-animation-works/\">Chris Coyier</a> has a handy function that can do it for you. However, depending on the stroke properties and SVG shape, this function might not always return an ideal value, but it can guide you closer to it.</p>\n<p>Check out the complete demo and feel free to play around with values to see how the stroke properties affect the animation. If you are looking for more examples, CodyHouse has covered a <a href=\"https://codyhouse.co/nuggets/self-drawing-svg-animation\">fun-looking button animation</a> using the same trick.</p>\n<p><img src=\"https://files.smashing.media/articles/svg-customization-animation-practical-guide/16-smashing-cat-barista.png\" /></p>\n<p>Let’s start by adding the <strong>mouse-tracking eye animation</strong>. We’ll skip manually implementing this feature in JavaScript and use a handy library called <a href=\"https://github.com/jj811208/watching-you\">watching-you</a>.</p>\n<p>Using the browser’s inspect element tool, we’ll find the target elements inside the SVG and add the eye-left and eye-right CSS classes to these elements, respectively.</p>\n<div>\n<pre><code>&lt;ellipse class=\"cls-5 eye eye-left\" cx=\"245.15133\" cy=\"134.57033\" rx=\"5.31264\" ry=\"8.61816\" transform=\"translate(-33.47349 110.5587) rotate(-23.83807)\" /&gt;\n&lt;ellipse class=\"cls-4 eye eye-right\" cx=\"284.42686\" cy=\"116.68559\" rx=\"5.31264\" ry=\"8.61816\" transform=\"translate(-22.89477 124.9063) rotate(-23.83807)\" /&gt;\n</code></pre>\n</div>\n\n<p>We’ll configure the library and make it target the classes that we’ve added.</p>\n<pre><code>const optionsLeft = { power: 4, rotatable: false };\nconst watcherLeft = new WatchingYou(\".eye-left\", optionsLeft);\nwatcherLeft.start();\n\nconst optionsRight = { power: 3, rotatable: false };\nconst watcherRight = new WatchingYou(\".eye-right\", optionsRight);\nwatcherRight.start();\n</code></pre>\n\n<p>We also need to remember to apply the <code>transform-box</code> property, so our eyes move around the center.</p>\n<pre><code>.eye {\n  transform-box: fill-box;\n  transform-origin: center center;\n}\n</code></pre>\n\n<p>Let’s check out what we’ve got. With just a few lines of code and a tiny JavaScript library to do the heavy lifting, we’ve made the SVG element respond to the mouse position. Now that’s amazing, isn’t it?</p>\n<p>Bowtie and hat animation will be created in a very similar way. Let’s start with a hat and find it using the browser’s inspect element tool. The hat graphic consists of two path elements, so let’s group them.</p>\n<pre><code>&lt;g class=\"hat\"&gt;\n  &lt;path class=\"cls-6\" d=\"...\" /&gt;\n  &lt;path class=\"cls-9\" d=\"...\" /&gt;\n&lt;/g&gt;\n</code></pre>\n\n<p>We’ll apply the same <code>transform-box</code> property and add a <code>hat--active</code> class that will run the animation when applied.</p>\n<pre><code>.hat {\n  transform-box: fill-box;\n  transform-origin: center bottom;\n  cursor: pointer;\n}\n\n.hat--active {\n  animation: hatJump 1s cubic-bezier(0, 0.7, 0.5, 1.25);\n}\n\n@keyframes hatJump {\n  0% {\n    transform: rotateZ(0) translateY(0);\n  }\n\n  50% {\n    transform: rotateZ(-10deg) translateY(-50%);\n  }\n\n  100% {\n    transform: rotateZ(0) translateY(0);\n  }\n}\n</code></pre>\n\n<p>Finally, let’s set up a click event listener that applies an active class to the element and then removes it after the animation has finished running.</p>\n<pre><code>const hat = document.querySelector(\".hat\");\n\nhat.addEventListener(\"click\", function () {\n  if (hat.classList.contains(\"hat--active\")) {\n    return;\n  }\n  // Add the active class.\n  hat.classList.add(\"hat--active\");\n\n  // Remove the active class after 1.2s.\n  setTimeout(function () {\n    hat.classList.remove(\"hat--active\");\n  }, 1200);\n});\n</code></pre>\n\n<p>We use the same trick with the bowtie element, only applying a different animation and class. Feel free to check out the <a href=\"https://codepen.io/AdrianBece/pen/gOjgQGw\">CodePen demo</a> for more details.</p>\n<p>Let’s move on to the coffee machine. Notice we don’t have any SVG element acting as a coffee on our SVG, so we’ll need to add it ourselves. You should <strong>feel comfortable editing SVG markup</strong> and we don’t even have to break a sweat here. Let’s make it easy for ourselves and find and copy the coffee machine’s pipe rectangle, which is similar to the coffee stream shape we want to have. We just have to change the color to brown and slightly adjust the dimensions.</p>\n<div>\n<pre><code>&lt;!-- Pipe --&gt;\n&lt;rect class=\"cls-12\" x=\"137.81171\" y=\"243.99883\" width=\"6.21967\" height=\"12.29272\" transform=\"translate(281.84309 500.29037) rotate(-180)\" /&gt;\n\n&lt;!-- Copied and adjusted Pipe rect to act as a coffee --&gt;\n&lt;rect class=\"coffee\" x=\"139\" y=\"243.99883\" width=\"4\" height=\"12.29272\" transform=\"translate(281.84309 500.29037) rotate(-180)\" fill=\"brown\" /&gt;\n</code></pre>\n</div>\n\n<p>Like in the previous examples, let’s add active classes and their respective animation keyframes. We’ll compose the two animations and play around with duration and delay. </p>\n<pre><code>.lever, .coffee {\n  transform-box: fill-box;\n  transform-origin: center bottom;\n}\n\n.lever {   \n  cursor: pointer; \n}\n\n.lever--active {\n  animation: leverPush 2.5s linear;\n}\n\n@keyframes leverPush {\n  0% {\n    transform: translateY(0);\n  }\n  8% {\n    transform: translateY(50%);\n  }\n  90% {\n    transform: translateY(50%);\n  }\n  100% {\n    transform: translateY(0);\n  }\n}\n\n.coffee--active {\n  animation: coffeeStream 2.4s 0.1s ease-out forwards;\n}\n\n@keyframes coffeeStream {\n  0% {\n    transform: translateY(0);\n  }\n  5% {\n    transform: translateY(50%);\n  }\n  95% {\n    transform: translateY(50%);\n  }\n  100% {\n    transform: translateY(150%);\n  }\n}\n</code></pre>\n\n<p>Let’s apply the active classes on click and remove them after the animation has finished running. And that’s it!</p>\n<pre><code>const lever = document.querySelector(\".lever\");\nconst coffee = document.querySelector(\".coffee\");\n\nlever.addEventListener(\"click\", function () {\n  if (lever.classList.contains(\"lever--active\")) {\n    return;\n  }\n\n  lever.classList.add(\"lever--active\");\n  coffee.classList.add(\"coffee--active\");\n\n  setTimeout(function () {\n    lever.classList.remove(\"lever--active\");\n    coffee.classList.remove(\"coffee--active\")\n  }, 2500);\n});\n</code></pre>\n\n<p>Check out the complete example below, and, as always, feel free to play around with the animations and experiment with other elements, like the speech bubble or making the coffee machine’s lights blink while coffee is pouring out. Have fun!</p>\n<p>See the Pen <a href=\"https://codepen.io/smashingmag/pen/gOjzMap\">Smashing cat interaction [forked]</a> by <a href=\"https://codepen.io/AdrianBece\">Adrian Bece</a>.</p>\nConclusion\n<p>I hope that this article encourages you to play around and make some wonderful SVG animations and interactions and integrate this workflow into your day-to-day projects. We’ve used only a handful of tricks and CSS properties to create a whole variety of nice effects on the fly. With some extra time, knowledge, and effort, you can create some truly amazing and interactive graphics.</p>\n<p>Feel free to reach out on <a href=\"https://twitter.com/AdrianBeceDev\">Twitter</a> and share your work. Happy to hear your thoughts and see what you come up with!</p>\n<h3>References</h3>\n<ul>\n<li><a href=\"https://www.youtube.com/watch?v=emFMHH2Bfvo\">SVG explained in 100 seconds</a>, Fireship</li>\n<li>“<a href=\"https://css-tricks.com/svg-line-animation-works/\">How SVG Line Animation Works</a>”, Chris Coyier</li>\n<li><a href=\"https://www.w3.org/TR/SVG2/\">SVG specs</a>, W3C</li>\n<li>“<a href=\"https://web.dev/prefers-reduced-motion/\"><code>prefers-reduced-motion</code>: Sometimes less movement is more</a>”, Thomas Steiner</li>\n</ul>","author":"","siteTitle":"Articles on Smashing Magazine — For Web Designers And Developers","siteHash":"f300e9db0da36f49701f66485a5b0d2db0471dfeee07cef6204939","entryHash":"b9405d5324316ae249b1744cacdd0d06a8afecc816173987ea1a59","category":"Tech"}