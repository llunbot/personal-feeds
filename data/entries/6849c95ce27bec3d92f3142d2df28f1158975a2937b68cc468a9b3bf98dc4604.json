{"title":"รู้ไว้ใช่ว่า PostgreSQL ก็ใช้เป็น message broker ได้นะ","link":"https://www.somkiat.cc/postgesql-as-message-broker/","date":1634562882000,"content":"<p><img src=\"https://www.somkiat.cc/wp-content/uploads/2021/10/postgresql-notify-150x150.png\" /></p>\n<p>กำลังสรุปเรื่องของ message broker สำหรับจัดการระบบงาน<br />โดยให้ทำการติดต่อสื่อสารกันแบบ asynchronous + messaging<br />ก็ไปเห็นว่า PostgreSQL ที่เป็น RDBMS สำหรับเก็บข้อมูลเชิงความสัมพันธ์<br />รวมทั้งข้อมูลในรูปแบบ JSON ก็ได้<br />แต่อีกความสามารถที่เพิ่มรู้ก็คือ <strong>pub-sub</strong><br />ก็สามารถทำงานได้เช่นกัน</p>\n\n\n\n<span></span>\n\n\n\n<p><strong>โดยจะใช้งานผ่าน command 2 ตัวคือ</strong></p>\n\n\n\n<ul><li><a href=\"https://www.postgresql.org/docs/current/sql-listen.html\" target=\"_blank\">LISTEN</a> &lt;channel&gt;</li><li><a href=\"https://www.postgresql.org/docs/current/sql-notify.html\" target=\"_blank\">NOTIFY</a> &lt;channel&gt;,&lt;payload&gt;</li></ul>\n\n\n\n<p><strong>ซึ่งสามารถนำมาประยุกต์ได้ดังนี้</strong></p>\n\n\n\n<p>เมื่อมีการเปลี่ยนแปลงข้อมูลใน PostgreSQL แล้ว<br />ก็ทำการ NOTIFY ไปยัง channel ที่กำหนด<br />จากนั้นก็ต้องมีส่วน LISTEN คอย consume จาก NOTIFY นั่นเอง<br />ช่วยลด latency ของ network ลงไปได้เยอะเลย<br />เพราะว่าอยู่ใน network เดียวกัน<br />การทำงานแบบนี้จะเป้นแบบ Fire and Forget นั่นเอง<br />ซึ่งเป็นอีกทางเลือกที่น่าสนใจ<br /><br />แสดงการทำงานดังรูป</p>\n\n\n\n<figure><img src=\"https://www.somkiat.cc/wp-content/uploads/2021/10/postgresql-notify.png\" /><figcaption><a href=\"https://medium.com/geekculture/postgresql-as-a-message-broker-to-apply-a-reactive-caching-strategy-57e7f8f7dd0e\" target=\"_blank\">https://medium.com/geekculture/postgresql-as-a-message-broker-to-apply-a-reactive-caching-strategy-57e7f8f7dd0e</a></figcaption></figure>\n","author":"somkiat","siteTitle":"cc :: somkiat","siteHash":"3a23a5a4389e1e40c6fbb16520a8cc20df5b3591c25145ce72aaa18b19e48201","entryHash":"6849c95ce27bec3d92f3142d2df28f1158975a2937b68cc468a9b3bf98dc4604","category":"Thai"}