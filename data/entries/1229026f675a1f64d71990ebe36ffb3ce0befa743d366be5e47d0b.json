{"title":"How To Build A Magazine Layout With CSS Grid Areas","link":"https://smashingmagazine.com/2023/02/build-magazine-layout-css-grid-areas/","date":1675688400000,"content":"<p>In this article, I want to talk about the amazing possibilities of a CSS grid and how it allows for complex layouts that are closer to a print design. The design we’ll discuss is actually one I got to work on for a client (modified slightly to a demo case). It will cover two big use cases of a CSS grid: </p>\n<ol>\n<li>Having a static grid where we define the specified start and end points for each element;</li>\n<li>Using CSS grid template areas to reorder a simple HTML layout easily without updating the HTML. </li>\n</ol>\n<p>As a bonus, we will also touch on <code>object-fit</code> and <code>aspect-ratio</code>, which come in handy as well.</p>\n<p><img src=\"https://files.smashing.media/articles/building-print-like-website-layout-css-grid-areas/1-combined-design-desktop-mobile-versions.png\" /></p>\n<p>Here you can see the design we will be implementing: desktop on the left and a cropped version for mobile on the right (imagine the mobile view to continue with sections 3 and 4). There is quite a lot going on here, and nothing really fits into neat rows and columns. The images are laid out on an uneven grid, sometimes even overlapping, and we have some narrow text and a numbering element that double as a design element.</p>\nArtisanal Image Layouts\n<p>Let us first look at the image grid elements inside each colored component. While we have four colored components, there are only two variants that get repeated. For easier comparison, I have cut the desktop version in half and put the two halves next to one another — this makes it easier to compare. As you can see, the first and third are the same, as are the second and fourth. If we compare just the first and second variants, they differ, but the basic building blocks are very similar (a full-sized background color, a big image block, a column with a number, and some text). Due to this, we can consider it the same component, just with two alternatives.</p>\n<p><img src=\"https://files.smashing.media/articles/building-print-like-website-layout-css-grid-areas/2-design-desktop-version-cut-in-half.png\" /></p>\n<p>In the olden days, we would have had to do the image grid in Photoshop and then add it as one image to the page. Obviously, we could still do this, but that solution has never been particularly good for responsive websites, and using the <a href=\"https://www.smashingmagazine.com/2014/05/responsive-images-done-right-guide-picture-srcset/#the-art-direction-use-case\">picture element</a> would work, but we would have to do several layouts in Photoshop and redo everything if we want to change a picture. We would need to do this every time this element gets added with different pictures.</p>\n<p>But we wouldn’t be at this part in this article if there wasn’t an alternative! For a while now, it has been <a href=\"https://caniuse.com/css-grid\">safe to use CSS grid</a>, and it is able to solve this layout quite neatly with only a few lines of CSS.</p>\n<p>CSS Grid allows us to define a formal grid definition — columns and rows — on the parent element and specify for the children where they should go within the grid. We also get the same justify and align capabilities that flex offers. This removes a lot of the need for wrapping <code>div</code>s and also makes the CSS slimmer. </p>\n<p>One thing to note: As a result, your graphical layout can be different from the document structure in HTML. </p>\n<p>Screen readers will still rely on the HTML structure, though, so put the most important information first and try to keep everything in a sensible order. </p>\n<p>Now let’s get to our images. What is it that we need at a minimum? A container for the images and the images themselves. And you know what? With CSS Grid, that is actually enough — say goodbye to five layers of wrapping <code>div</code>s!</p>\n<pre><code>&lt;div class=\"grid image-grid-3-m4\"&gt;\n   &lt;img class=\"image-0 \" src=\"\" /&gt; \n   &lt;img class=\"image-1 \" src=\"\" /&gt;\n   &lt;img class=\"image-2 \" src=\"\" /&gt;\n   &lt;img class=\"image-3 \" src=\"\" /&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>A bit more on the markup. To make the styling easier, I added an index to each image (since we want to re-use them, it has to be a class, not an ID) and two classes on the surrounding <code>div</code>, which we will use to define the base styling: a grid utility class and a second one used for identifying the variant. For the variant with three images on the left and a fourth on the right in desktop view, I spent some time thinking about how to best solve the fourth image’s problem: do we add it to the container with the other images and try and move it to the other side, or do we move it on mobile, and so on. In the end, I decided to add the fourth image in the container for the images but hide it on the desktop via CSS and have a separate <code>div</code> in a second location with the same image for displaying in the desktop version. Using <code>display:none</code> will also <a href=\"https://webaim.org/techniques/css/invisiblecontent/\">hide that version from screen readers</a>.</p>\n<p>Now that we have the basic HTML and our images in place, it is time to focus on the CSS. If you are completely new to a CSS grid, <a href=\"https://www.smashingmagazine.com/2020/01/understanding-css-grid-container/\">this helpful article</a> goes into the full syntax and explains it in detail. Unfortunately, I cannot describe the full syntax in this article.</p>\n<p>First off, we need to define our grid. Since I had a design to work with, I used a tool that allowed me to put lines on top of the image, position one line at each edge of the image, and see the pixel dimensions in between. It would have been great if the designer had already used a formal grid and told me about it, but unfortunately, that was not the case, so I used the proportionate dimensions as an approximation of what I should use in the grid. Basically, I asked myself what the smallest common divisible number was for each — with some wiggle room — and used that. (Welcome to math class.) My goal was to have the same size for all grid columns and rows while being flexible on the number of columns or rows.</p>\n<p><img src=\"https://files.smashing.media/articles/building-print-like-website-layout-css-grid-areas/3-css-grid-design-layout-ruler-overlay.png\" /></p>\n<p>With this method, I determined that I wanted to have 14 columns on mobile and 7 rows plus some uniform gaps. This allowed me to approximate the distribution in the layout while keeping the aspect ratios close to what they had envisioned. Based on that, we get the following CSS:</p>\n<pre><code>.grid {\n  display: grid;\n}\n\n.image-grid-3-m4 {\n  grid-template-rows: repeat(7, 1fr);\n  grid-template-columns: repeat(14, 1fr);\n    gap: 0.5rem;\n}\n</code></pre>\n\n<p>With these four lines of CSS, we have a grid that is ready to be filled. If you follow along, you will notice that the images are now filling one grid cell each in the first row. This is the automatic layout mechanism that the browser uses, and depending on what you want to do, it can be ideal for defining an evenly laid-out design in seconds.</p>\n<p><img src=\"https://files.smashing.media/articles/building-print-like-website-layout-css-grid-areas/4-css-grid-sections-design-layout.png\" /></p>\n<p>What is the minimum HTML for that? Again we do not need a lot of extras; a surrounding <code>div</code> and then one for each part is all that we need:</p>\n<pre><code>&lt;div class=\"container\"&gt;\n  &lt;div class=\"images\"&gt;&lt;/div&gt;\n  &lt;div class=\"numbering\"&gt;&lt;/div&gt;\n  &lt;div class=\"text\"&gt;&lt;/div&gt;\n  &lt;div class=\"single-image\"&gt;&lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>For our example, all areas have a class name that identifies what they will hold later. If we look at the mobile layout, though, the number is on top of the images! The cool thing about a CSS grid is that you can layer elements. We already used that for the images above. As you can see, two of them overlap, and we can also do that for whole areas. The layering will be controlled by our old friend, the z-index. Same rules as always: the higher z-index wins and comes to the front.</p>\n<p>With that in mind, let’s create two areas: one at the top with the images filling the area and the number as a top layer with most of it transparent to show the images, and the second area below for the text. We could use the grid columns and rows syntax we used earlier, but in this case, we can make our lives even easier with <code>grid-template-areas</code>. With this, you can add names to parts of your grid and then decide for each element which grid area it should appear in. Especially for the page or component frame, this is a much easier and faster way to work and be able to read it all again later than using all of the non-descript numbers.</p>\n<p>I think this will be easier to understand with an example.</p>\n<pre><code>.container {  \n  display: grid;\n  grid-template-columns: 1fr;\n  grid-template-rows: repeat(2, 1fr);\n  gap: 1.2rem;\n  grid-auto-flow: row;\n  grid-template-areas:\n    \"numerology\"\n    \"text\";\n}\n\n.images { grid-area: numerology; }\n\n.numbering { grid-area: numerology; }\n\n.text { grid-area: text; }\n.single-image {display:none}\n</code></pre>\n\n<p>We define the container as a grid once again, add two rows to it, and then use ‘grid-template-areas’ to give these rows a name. The syntax for this is very unusual for CSS, but it gives you a mini-view of your layout: <code>Numerology</code> is the name of the cell in the first row and <code>Text</code> in the second.</p>\n<p>With those rows now having names, we can easily position our elements. Both the images and the container for the number go into the first row, and the text will go to the second row. So in the example above, we add the <code>grid-area</code> to the CSS for the class we applied to the <code>div</code> in the HTML. With those few lines, we have defined the layout.</p>\n<p>To achieve the overlay effect for the number, the white box will be in its container and gets a fixed width and height. We can then use <code>flex</code> to center it in the container.</p>\n<p>But how do we get from this to the desktop version, you may ask? Pretty easily, actually! For the overall design of the website, we are already using a 14-column grid on the desktop for all elements. If we overlay the design with some grid markers, we see the widths everything should take approximately.</p>\n<p><img src=\"https://files.smashing.media/articles/building-print-like-website-layout-css-grid-areas/5-column-grid-desktop-overlay.png\" /></p>\n<p>Obviously, our named areas from the mobile view will not really help us for this version, but we can simply update them in a media query for our desktop view and also define different area names:</p>\n<div>\n<pre><code>.container {  display: grid;\n  grid-template-columns: repeat(14, minmax(0, 1fr));\n  grid-template-rows: repeat(2, 1fr);\n  gap: 1.2rem;\n  grid-auto-flow: row;\n  grid-template-areas:\n    \"images images images images images . numbering numbering numbering single-image single-image single-image single-image single-image\"\n    \"images images images images images . text text text single-image single-image single-image single-image single-image\";\n}\n\n.images { grid-area: images; }\n\n.numbering { grid-area: numbering; }\n\n.text { grid-area: text; }\n\n.single-image { grid-area: single-image; }\n</code></pre>\n</div>\n\n<p>Let me be the first one to say that, yes, this is really not a pretty way of defining this, but unfortunately, the <code>template-areas</code> syntax does not include the repeat keyword as the column definition does. </p>\n<p>But take a moment and have a closer look. What you can see is that we define the first five columns to belong to the <code>images</code> name in both rows, then we have a period, which means nothing goes here, then we have three columns for the <code>numbering</code> in row one and three for the <code>text</code> in row two, and at the end, five columns for <code>single-image</code>. Personally, I like to use an <a href=\"https://grid.layoutit.com/\">online generator</a> that allows me to visually define these areas and copy the needed CSS.</p>\n<p>Now with just under 20 lines of code, we have completely changed the layout without having touched the very simple HTML structure at all! But what about the alternative version for 2 and 4? They only use a slightly different layout, so why not add some classes for <code>.version-a</code> and <code>.version-b</code> on the container and have the <code>grid-template-areas</code> defined by that on the desktop? It is that simple. Look at the following:</p>\n<div>\n<pre><code>  .version-1 {\n      grid-template-areas:\n    \"images images images images images . numbering numbering numbering single-image single-image single-image single-image single-image\"\n    \"images images images images images . text text text single-image single-image single-image single-image single-image\";\n  }\n.version-1 .single-image {\n  grid-area: single-image;\n  display:block;\n }<br />  .version-2 {\n        grid-template-areas:\n    \". numbering numbering numbering . . images images images images images images images images\"\n    \". text text text . . images images images images images images images images\";\n  }\n</code></pre>\n</div>\n\n<p>To me, this is still pretty crazy, to be honest. For the longest time, a layout like this would have been completely out of reach or very complicated to make and having shared HTML between versions 1 and 2 would have been near impossible, at least for the complete HTML. Now we can just wave a magic wand and update where it should show up. Pretty heady stuff. </p>\n<p>Another practical example where this helped me a lot was defining areas for a product detail page on an e-commerce website. Being able to move elements around to where they make sense in different contexts is amazing, but it also means that you need to adjust your mental model a bit to how HTML and CSS are connected. And this is even just the beginning. With container queries and layers, there is much on the horizon that will open up a lot more possibilities in the future, and I am totally here for it!</p>\n<p>Finally, here is the full version of the design with everything pulled together:</p>\n<p>See the Pen <a href=\"https://codepen.io/smashingmag/pen/VwBdpma\">Untitled [forked]</a> by <a href=\"https://codepen.io/Pfenya\">Pfenya</a>.</p>\n<p>Additionally, if you are curious about the final live webpage, it can be found <a href=\"https://www.ille.de/duftwelten/\">here</a>.</p>","author":"","siteTitle":"Articles on Smashing Magazine — For Web Designers And Developers","siteHash":"f300e9db0da36f49701f66485a5b0d2db0471dfeee07cef6204939","entryHash":"1229026f675a1f64d71990ebe36ffb3ce0befa743d366be5e47d0b","category":"Tech"}