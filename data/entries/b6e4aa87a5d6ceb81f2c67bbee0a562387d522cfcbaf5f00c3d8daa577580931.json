{"title":"Consul 1.21 improves service discovery, Consul on Kubernetes, and supports OpenShift 4.17","link":"https://www.hashicorp.com/blog/consul-1-21-service-discovery-consul-kubernetes-openshift-4-17","date":1746718200000,"content":"<p>HashiCorp Consul is a global service networking platform that provides multi-runtime service discovery and secure services networking. It is widely adopted and used in production by companies that include <a href=\"https://www.youtube.com/watch?v=ou01X3UGVLI\">Expedia</a> and <a href=\"https://www.hashicorp.com/en/resources/workday-s-multi-cloud-network-fabric-with-consul-and-vault\">Workday</a>. The latest Consul version 1.21 includes a broad range of enhancements across different parts of Consul, including:</p>\n\n<ul>\n<li>A simplified architecture for discovering external software applications<br /></li>\n<li>Disaster recovery improvements for Consul on Kubernetes<br /></li>\n<li>Support for OpenShift 4.16 and 4.17<br /></li>\n<li>Kubernetes Pod Security Admissions Controller support</li>\n</ul>\n\n<h3>Simplified service discovery for external services</h3>\n\n<p>One of Consul’s core capabilities is to provide global service discovery across multiple different runtimes, platforms, and clouds. In order to do this, Consul agents that are installed on each service send updated information to the Consul servers, including health status and current IP addresses. However, there are some external applications, like Amazon RDS or Azure Database, that do not allow the installation of third-party agents. In these scenarios, Consul External Monitoring Service (ESM) can be used to query the latest health and location information from these external services. </p>\n\n<p>Consul ESM is software that can be installed on a separate container or VM that queries each external service for its current health and location information. Prior to Consul 1.21, a Consul agent was also required alongside Consul ESM. The Consul agent was responsible for retrieving the information from Consul ESM and sending it to the Consul servers using the <a href=\"https://developer.hashicorp.com/consul/docs/architecture/gossip\">gossip protocol</a>. However, gossip uses <a href=\"https://highscalability.com/gossip-protocol-explained/#:%7E:text=User%20Datagram%20Protocol\">UDP</a>, which is not as reliable. In addition, it requires bi-directional communication between Consul servers and Consul agents, which can be challenging for customers with restrictive network security policies.</p>\n\n<p>In the latest Consul version, Consul ESM no longer requires Consul agents. Instead, Consul ESM will be able to communicate directly to Consul servers. Consul ESM will also only need outbound connectivity from its network, making it simpler to configure in highly restrictive networks. Lastly, Consul operators will no longer manage Consul agents with Consul ESM. As a result, this new simplified architecture makes it easier for organizations to deploy, manage, and maintain Consul ESM for service discovery of external services.</p>\n<img src=\"https://www.datocms-assets.com/2885/1746650467-consul-server-remove-agent-requirement.png\" alt=\"Before\" /><h3>Consul on Kubernetes improvements</h3>\n\n<p>Consul provides a capability to take snapshots of the Consul server’s current configuration. In the event of an outage or disaster, snapshots can be used to restore Consul servers back to their previous state. For Consul on Kubernetes, a <a href=\"https://developer.hashicorp.com/consul/docs/k8s/helm#v-server-snapshotagent\">snapshot agent</a> is deployed as a sidecar that is responsible for performing the snapshots. The snapshot agents can store snapshots locally or send snapshots to S3-compatible storage targets, including Amazon S3 and Azure Blob Storage. In the latest release, we’ve added support for the Consul on Kubernetes snapshot agent to send snapshots to Google Cloud Storage. This adds more flexibility for organizations to easily send backups to their preferred storage locations, resulting in a reduced burden for operators to manually copy backups to Google Cloud Storage.</p>\n\n<h3>OpenShift 4.16 and 4.17 support</h3>\n\n<p>Consul 1.21 now fully supports OpenShift 4.16 and 4.17. Applying Consul’s <a href=\"https://developer.hashicorp.com/consul/docs/concepts/service-mesh\">service mesh</a> capability to enforce <a href=\"https://www.hashicorp.com/en/solutions/zero-trust-security\">zero trust principles</a> greatly improves security for OpenShift deployments. Organizations can ensure that all service-to-service communication on OpenShift is authorized, authenticated with mTLS, and encrypted over the network. Furthermore, OpenShift customers can continue to leverage Consul’s global service discovery capabilities across multiple runtimes and cloud environments. Lastly, Consul 1.21 is a Long-Term Support (LTS) release, which ensures OpenShift deployments on this version will be supported and maintained for approximately 2 years. Running on LTS versions greatly reduces the management burden of having to upgrade Consul every year.</p>\n\n<h3>Kubernetes Pod Security Admissions support</h3>\n\n<p>Consul 1.21 supports Kubernetes Pod Securities Admissions, which replaces Kubernetes <a href=\"https://kubernetes.io/blog/2021/04/06/podsecuritypolicy-deprecation-past-present-and-future/\">PodSecurityPolicies</a>. PodSecurityPolicies allowed operators to define minimum security requirements for Kubernetes pods. However, due to the complexity and usability issues of PodSecurityPolicies, <a href=\"https://kubernetes.io/docs/concepts/security/pod-security-admission/\">Pod Security Admissions</a> was introduced in Kubernetes version 1.21 as a replacement. Consul’s latest support will allow Consul customers to manage and configure their Kubernetes clusters with Pod Security Admissions on each namespace, resulting in improved security and flexibility.</p>\n\n<h3>New Consul documentation</h3>\n\n<p>Alongside the new Consul software release, we are introducing a reorganized <a href=\"https://developer.hashicorp.com/consul/docs\">Consul documentation</a> structure designed to better serve our key audience personas — platform engineers, application developers, and security engineers. Previously, the documentation lacked consistent alignment with these users' needs, making it less intuitive to navigate. The new structure follows the <a href=\"https://diataxis.fr/\">Diataxis</a> framework, featuring distinct sections for introductions, usage guides, and reference materials tailored to each persona. This refinement ensures that readers can more easily locate relevant information, improving accessibility and efficiency.</p>\n<img src=\"https://www.datocms-assets.com/2885/1746651169-consul-new-docs-map.png\" alt=\"Consul\" /><h2>Learn more about Consul 1.21</h2>\n\n<p>Get started with HashiCorp Consul through our many <a href=\"https://developer.hashicorp.com/consul/tutorials\">tutorials</a> for both beginners and advanced users. You can start a free trial with <a href=\"https://www.hashicorp.com/products/consul/trial\">self-managed Consul Enterprise</a> to test out <a href=\"https://www.hashicorp.com/en/pricing?tab=consul\">commercial features</a>. More detailed information is available in the newly improved <a href=\"https://developer.hashicorp.com/consul/docs\">Consul documentation</a>.</p>\n","author":"Van Phan","siteTitle":"HashiCorp Blog","siteHash":"219aa6310b3388f2335eba49871f4df9581f2c58eaeb5e498363b54e835b7001","entryHash":"b6e4aa87a5d6ceb81f2c67bbee0a562387d522cfcbaf5f00c3d8daa577580931","category":"Tech"}