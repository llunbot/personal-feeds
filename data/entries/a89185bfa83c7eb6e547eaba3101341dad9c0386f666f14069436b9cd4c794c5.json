{"title":"ลองใช้งาน Apache APISIX นิดหน่อย","link":"https://www.somkiat.cc/hello-apache-apisix/","date":1685516045000,"content":"<p><img width=\"150\" height=\"150\" src=\"https://www.somkiat.cc/wp-content/uploads/2023/05/flow-software-architecture-150x150.png\" alt srcset=\"https://www.somkiat.cc/wp-content/uploads/2023/05/flow-software-architecture-150x150.png 150w, https://www.somkiat.cc/wp-content/uploads/2023/05/flow-software-architecture-75x75.png 75w\" /></p>\n<figure><img src=\"https://www.somkiat.cc/wp-content/uploads/2023/05/flow-software-architecture-1024x438.png\" alt width=\"578\" height=\"247\" /></figure>\n\n\n\n<p>จากการแบ่งปันเรื่อง Architecture มานิดหน่อย<br />หนึ่งในนั้นคือ การใช้งาน API Gateway ด้วย<br />ทำให้เกิดการแนะนำ <strong><a href=\"https://apisix.apache.org/\" target=\"_blank\">Apache APISIX</a></strong> นิดหน่อย</p>\n\n\n\n<p>ดังนั้นเพื่อช่วยทำให้เข้าใจ <br />ก็ลองเล่นใช้งานง่ายแบบง่าย ๆ หน่อย<br />มาเริ่มกันเลย</p>\n\n\n\n<span></span>\n\n\n\n<p><strong>Software Requirement แบบง่าย ๆ ที่ใช้ทดลอง</strong></p>\n\n\n\n<ul><li>Docker</li><li><a href=\"https://hub.docker.com/r/apache/apisix\" target=\"_blank\">Docker image :: APISIX</a></li></ul>\n\n\n\n<p><strong>สิ่งที่ลองทำคือ</strong></p>\n\n\n\n<ul><li>ทำการ start ขึ้นมาใช้งาน</li><li>ทำการ config ตัว Service และ Route ของ service ต่าง ๆ</li><li>ทำการ config plugin ที่จะใช้งานแบบง่าย เช่น proxy-rewrite และ opentelemetry + jaeger สำหรับ distributed tracing</li></ul>\n\n\n\n<p>มาเริ่มกันเลย</p>\n\n\n\n<p><strong>ขั้นตอนที่ 1 ทำการกำหนด service เพื่อเชื่อมต่อกับ service ต่าง ๆ</strong></p>\n\n\n\n<p>โดยใน config จะเป็นการกำหนด upstream นั่นเอง</p>\n\n\n\n[gist id=\"9c2a14dc5a359f6a61799d510ba19fc4\" file=\"1.yml\"]\n\n\n\n<p><strong>ขั้นตอนที่ 2 ทำการสร้าง Route เพื่อเชื่อมต่อไปยัง service ในขั้นตอนที่ 1</strong></p>\n\n\n\n<p>โดยตรงนี้จะทำการ rewrite url จากการใช้ plugin ชื่อว่า proxy-rewrite</p>\n\n\n\n[gist id=\"9c2a14dc5a359f6a61799d510ba19fc4\" file=\"2.yml\"]\n\n\n\n<p><strong>ขั้นตอนที่ 3 ทำการ config พวก Plugin ต่าง ๆ เช่น proxy-rewrite และ Opentelemetry + Jaeger</strong></p>\n\n\n\n<p>รวมทั้งการ config ต่าง ๆ จะใช้งานในรูปแบบ YAML prodiver</p>\n\n\n\n[gist id=\"9c2a14dc5a359f6a61799d510ba19fc4\" file=\"3.yml\"]\n\n\n\n<p>จากนั้นก็ทำการ start และลองใช้งานแบบง่าย ๆ แล้ว<br />จากนี้ก็เข้าสู่การนำไปใช้งาน</p>\n","author":"somkiat","siteTitle":"cc :: somkiat","siteHash":"3a23a5a4389e1e40c6fbb16520a8cc20df5b3591c25145ce72aaa18b19e48201","entryHash":"a89185bfa83c7eb6e547eaba3101341dad9c0386f666f14069436b9cd4c794c5","category":"Thai"}