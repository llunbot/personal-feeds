{"title":"Tips :: การใช้งาน profile ใน Docker compose","link":"https://www.somkiat.cc/tips-use-profile-in-docker-compose/","date":1716217059000,"content":"<p><img width=\"150\" height=\"150\" src=\"https://www.somkiat.cc/wp-content/uploads/2024/05/docker-compose-profile-150x150.jpg\" loading=\"lazy\" srcset=\"https://www.somkiat.cc/wp-content/uploads/2024/05/docker-compose-profile-150x150.jpg 150w, https://www.somkiat.cc/wp-content/uploads/2024/05/docker-compose-profile-75x75.jpg 75w\" /></p>\n<figure><a href=\"https://www.somkiat.cc/wp-content/uploads/2024/05/docker-compose-profile.jpg\"><img src=\"https://www.somkiat.cc/wp-content/uploads/2024/05/docker-compose-profile.jpg\" width=\"620\" height=\"388\" /></a></figure>\n\n\n\n<p>หลังจากที่แบ่งปันเรื่องการใช้งาน Docker ไปนั้น<br />มีคำถามเกี่ยวกับ  <strong><a href=\"https://docs.docker.com/compose/profiles/\" target=\"_blank\">Profile</a></strong> ใน Docker compose<br />ซึ่งไม่ค่อยได้ใช้งานเท่าไร<br />จึงทำการอธิบายถึงปัญหา และที่มาของ feature นี้<br />รวมทั้งการใช้งาน<br />ดังนั้นมาเริ่มกันเลย</p>\n\n\n\n<span></span>\n\n\n\n<p><strong>แนวคิด หรือ ปัญหาหลัก ๆ คือ</strong></p>\n\n\n\n<p>ถ้าต้องการใช้งาน Docker compose file ใน environment ต่าง ๆ เช่น</p>\n\n\n\n<ul>\n<li>Dev</li>\n\n\n\n<li>Test</li>\n\n\n\n<li>Prod</li>\n</ul>\n\n\n\n<p>ที่มีความแตกต่างกัน ทั้งเรื่องของ service ที่ start !!<br />จะทำการจัดการอย่างไร ?</p>\n\n\n\n<p><strong>วิธีการจัดการ ?</strong></p>\n\n\n\n<p>สร้างไฟล์แยกตาม environment ไปเลย หรือ ทำการ overrided เอาก็ได้<br />หรืออีกวิธีการคือ การใส่ <strong>profiles</strong> เข้าไปในแต่ละ service ไปเลย<br />ยกตัวอย่างเช่น</p>\n\n\n\n<ul>\n<li>ในการใช้งานทั่วไป จะไม่สร้าง service  ชื่อว่า php-myadmin มาจัดการ database จะสร้างเฉพาะ profile = debug เท่านั้น</li>\n</ul>\n\n\n\n[gist id=\"441f7f438ef544c11c2d8e5a74d8b0f4\" file=\"docker-compose.yml\"]\n\n\n\n<p>สามารถ run ด้วยการระบุ profile ดังนี้</p>\n\n\n\n[code]\n$docker compose --profile debug up\n หรือ\n$COMPOSE_PROFILES=debug docker compose up\n[/code]\n\n\n\n<p>ถ้าต้องการระบุหลาย ๆ profile ทำดังนี้</p>\n\n\n\n[code]\n$docker compose --profile frontend --profile debug up\nหรือ\n$COMPOSE_PROFILES=frontend,debug docker compose up\n[/code]\n\n\n\n<p>เพียงเท่านี้ก็ใช้งานได้แล้ว<br />แต่อาจจะสร้างความซับซ้อนขึ้นไปอีกนะครับ<br />ลองใช้งานกันดู</p>\n","author":"somkiat","siteTitle":"cc :: somkiat","siteHash":"3a23a5a4389e1e40c6fbb16520a8cc20df5b3591c25145ce72aaa18b19e48201","entryHash":"a2788b21af61d660ecc1c702b7ff50ed353ad6bbd6354a30eb85a139e8786d70","category":"Thai"}