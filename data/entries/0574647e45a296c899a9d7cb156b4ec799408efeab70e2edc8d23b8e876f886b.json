{"title":"New – AWS DMS Serverless: Automatically Provisions and Scales Capacity for Migration and Data Replication","link":"https://aws.amazon.com/blogs/aws/new-aws-dms-serverless-automatically-provisions-and-scales-capacity-for-migration-and-data-replication/","date":1685660726000,"content":"<p>With the vast amount of data being created today, organizations are moving to the cloud to take advantage of the security, reliability, and performance of fully managed database services. To facilitate database and analytics migrations, you can use <a href=\"https://aws.amazon.com/dms/\">AWS Database Migration Service</a> (AWS DMS). First <a href=\"https://aws.amazon.com/blogs/aws/aws-database-migration-service/\">launched in 2016</a>, AWS DMS offers a simple migration process that automates database migration projects, saving time, resources, and money.</p> \n<p>Although you can start AWS DMS migration with a few clicks through the console, you still need to do research and planning to determine the required capacity before migrating. It can be challenging to know how to properly scale capacity ahead of time, especially when simultaneously migrating many workloads or continuously replicating data. On top of that, you also need to continually monitor usage and manually scale capacity to ensure optimal performance.</p> \n<p><span><strong>Introducing AWS DMS Serverless<br /> </strong></span>Today, I’m excited to tell you about <strong>AWS DMS Serverless</strong>, a new serverless option in AWS DMS that automatically sets up, scales, and manages migration resources to make your database migrations easier and more cost-effective.</p> \n<p>Here’s a quick preview on how AWS DMS Serverless works:</p> \n<p><a href=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2023/05/31/dms-serverless-demo-revised.gif\"><img loading=\"lazy\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2023/05/31/dms-serverless-demo-revised.gif\" alt width=\"850\" height=\"423\" /></a></p> \n<p>AWS DMS Serverless removes the guesswork of figuring out required compute resources and handling the operational burden needed to ensure a high-performance, uninterrupted migration. It performs automatic capacity provisioning, scaling, and capacity optimization of migrations, allowing you to quickly begin migrations with minimal oversight.</p> \n<p>At launch, AWS DMS Serverless supports Microsoft SQL Server, PostgreSQL, MySQL, and Oracle as data sources. As for data targets, AWS DMS Serverless supports a wide range of databases and analytics services, from <a href=\"https://aws.amazon.com/rds/aurora/\">Amazon Aurora</a>, <a href=\"https://aws.amazon.com/rds/\">Amazon Relational Database Service (Amazon RDS)</a>, <a href=\"https://aws.amazon.com/s3/\">Amazon Simple Storage Service (Amazon S3)</a>, <a href=\"https://aws.amazon.com/redshift/\">Amazon Redshift</a>, <a href=\"https://aws.amazon.com/dynamodb/\">Amazon DynamoDB</a>, and more. AWS DMS Serverless continues to add support for new data sources and targets. Visit <a href=\"https://docs.aws.amazon.com/dms/latest/userguide/CHAP_Serverless.Components.html#CHAP_Serverless.SupportedVersions\">Supported Engine Versions</a> to stay updated.</p> \n<p>With a variety of sources and targets supported by AWS DMS Serverless, many scenarios become possible. You can use AWS DMS Serverless to migrate databases and help to build modern data strategies by synchronizing ongoing data replications into data lakes (e.g., Amazon S3) or data warehouses (e.g., Amazon Redshift) from multiple, perhaps disparate data sources.</p> \n<p><span><strong>How AWS DMS Serverless Works<br /> </strong></span>Let me show you how you can get started with AWS DMS Serverless. In this post, I migrate my data from a source database running on PostgreSQL to a target MySQL database running on Amazon RDS. The following screenshot shows my source database with dummy data:</p> \n<p><img loading=\"lazy\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2023/05/19/dms-serverless1-1-dummy-data-1024x220.jpg\" alt width=\"1024\" height=\"220\" /></p> \n<p>As for the target, I’ve set up a MySQL database running in Amazon RDS. The following screenshot shows my target database:</p> \n<p><img loading=\"lazy\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2023/05/19/dms-serverless1-2-rds-target-1024x493.jpg\" alt width=\"1024\" height=\"493\" /></p> \n<p>Getting starting with AWS DMS Serverless is similar to how AWS DMS works today. AWS DMS Serverless requires me to complete the setup tasks such as creating a virtual private cloud (VPC) to defining source and target endpoints. If this is your first time working with AWS DMS, you can learn more by visiting <a href=\"https://docs.aws.amazon.com/dms/latest/userguide/CHAP_GettingStarted.Prerequisites.html\">Prerequisites for AWS Database Migration Service</a>.</p> \n<p>To connect to a data store, AWS DMS needs endpoints for both source and target data stores. An endpoint provides all necessary information including connection, data store type, and location to my data stores. The following image shows an endpoint I’ve created for my target database:</p> \n<p><img loading=\"lazy\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2023/05/19/dms-serverless1-3-endpoints-1024x527.jpg\" alt width=\"1024\" height=\"527\" /></p> \n<p>When I have finished setting up the endpoints, I can begin to create a replication by selecting the <strong>Create replication</strong> button on the <strong>Serverless replications</strong> page. Replication is a new concept introduced in AWS DMS Serverless to abstract instances and tasks that we normally have in standard AWS DMS. Additionally, the capacity resources are managed independently for each replication.</p> \n<p><img loading=\"lazy\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2023/05/19/dms-serverless2-1-replication-1024x529.jpg\" alt width=\"1024\" height=\"529\" /></p> \n<p>On the <strong>Create replication</strong> page, I need to define some configurations. This starts with defining <strong>Name</strong>, then specifying <strong>Source database endpoint</strong> and <strong>Target database endpoint</strong>. If you don’t find your endpoints, make sure you’re selecting <a href=\"https://docs.aws.amazon.com/dms/latest/userguide/CHAP_Serverless.Components.html#CHAP_Serverless.SupportedVersions\">database engines supported</a> by AWS DMS Serverless.</p> \n<p><img loading=\"lazy\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2023/05/19/dms-serverless2-2-start-replication.jpg\" alt width=\"880\" height=\"851\" /></p> \n<p>After that, I need to specify the <strong>Replication type</strong>. There are three types of replication available in AWS DMS Serverless:</p> \n<ul> \n <li><strong>Full load —</strong> If I need to migrate all existing data in source database</li> \n <li><strong>Change data capture (CDC)</strong> — If I have to replicate data changes from source to target database.</li> \n <li><strong>Full load and change data capture (CDC) </strong>— If I need to migrate existing data and replicate data changes from source to target database.</li> \n</ul> \n<p>In this example, I chose <strong>Full load and change data capture (CDC)</strong> because I need to migrate existing data and continuously update the target database for ongoing changes on the source database.</p> \n<p><img loading=\"lazy\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2023/05/19/dms-serverless2-3-replication-type.jpg\" alt width=\"881\" height=\"836\" /></p> \n<p>In the <strong>Settings</strong> section, I can also enable logging with <strong>Amazon CloudWatch</strong>, which makes it easier for me to monitor replication progress over time.<br /> <img loading=\"lazy\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2023/05/19/dms-serverless2-6-1-cloudwatch-logs.jpg\" alt width=\"840\" height=\"825\" /></p> \n<p>As with standard AWS DMS, in AWS DMS Serverless, I can also configure <strong>Selection rules</strong> in <strong>Table mappings</strong> to define filters that I need to replicate from table columns in the source data store.</p> \n<p><img loading=\"lazy\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2023/05/19/dms-serverless2-7-table-mappings.jpg\" alt width=\"864\" height=\"894\" /></p> \n<p>I can also use <strong>Transformation rules </strong>if I need to rename a schema or table or add a prefix or suffix to a schema or table.</p> \n<p><img loading=\"lazy\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2023/05/19/dms-serverless2-9-2-table-mappings-transformation-rules.jpg\" alt width=\"880\" height=\"837\" /></p> \n<p>In the <strong>Capacity</strong> section, I can set the range for required capacity to perform replication by defining the minimum and maximum <strong>DCU (DMS capacity units)</strong>. The minimum DCU setting is optional because AWS DMS Serverless determines the minimum DCU based on an assessment of the replication workload. During replication process, AWS DMS uses this range to scale up and down based on CPU utilization, connections, and available memory.</p> \n<p><img loading=\"lazy\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2023/05/19/dms-serverless2-10-dcu.jpg\" alt width=\"882\" height=\"892\" /></p> \n<p>Setting the maximum capacity allows you to manage costs by making sure that AWS DMS Serverless never consumes more resources than you have budgeted for. When you define the maximum DCU, make sure that you choose a reasonable capacity so that AWS DMS Serverless can handle large bursts of data transaction volumes. If traffic volume decreases, AWS DMS Serverless scales capacity down again, and you only pay for what you need. For cases in which you want to change the minimum and maximum DCU settings, you have to stop the replication process first, make the changes, and run the replication again.</p> \n<p>When I’m finished with configuring replication, I select <strong>Create replication</strong>.</p> \n<p><img loading=\"lazy\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2023/05/19/dms-serverless-2-10-1-start-replication.jpg\" alt width=\"902\" height=\"893\" /><img src=\"Screenshot-2023-05-17%20-20-18-35.png\" alt /></p> \n<p>When my replication is created, I can view more details of my replication and start the process by selecting <strong>Start</strong>.<br /> <img loading=\"lazy\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2023/05/19/dms-serverless2-11-1-information-start-1024x628.jpg\" alt width=\"1024\" height=\"628\" /></p> \n<p>After my replication runs for around 40 minutes, I can monitor replication progress in the <strong>Monitoring</strong> tab. AWS DMS Serverless also has a CloudWatch metric called <strong>Capacity utilization</strong>, which indicates the use of capacity to run replication according to the range defined as minimum and maximum DCU. The following screenshot shows the capacity scales up in the CloudWatch metrics chart.</p> \n<p><img loading=\"lazy\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2023/05/26/3-1-3-monitor-1024x473.png\" alt width=\"1024\" height=\"473\" /></p> \n<p>When the replication finishes its process, I see the capacity starting to decrease. This indicates that in addition to AWS DMS Serverless successfully scaling up to the required capacity, it can also scale down within the range I have defined.</p> \n<p><img loading=\"lazy\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2023/05/26/3-1-2-monitor-scaling-1024x392.png\" alt width=\"1024\" height=\"392\" /></p> \n<p>Finally, all I need to do is verify whether my data has been successfully replicated into the target data store. I need to connect to the target, run a select query, and check if all data has been successfully replicated from the source.</p> \n<p><img loading=\"lazy\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2023/05/26/dms-serverless-4-1-result-1024x294.png\" alt width=\"1024\" height=\"294\" /></p> \n<p><span><strong>Now Available<br /> </strong></span>AWS DMS Serverless is now available in all commercial regions where standard AWS DMS is available, and you can start using it today. For more information about benefits, use cases, how to get started, and pricing details, refer to <a href=\"https://aws.amazon.com/dms/features/#Serverless\">AWS DMS Serverless</a>.</p> \n<p>Happy migrating!<br /> —<a href=\"https://www.linkedin.com/in/donnieprakoso\">Donnie</a></p>","author":"Donnie Prakoso","siteTitle":"AWS News Blog","siteHash":"6093e072e4117ec22616e844cb857d03ca62c57a411a8affc77cb5e8b6b15bf6","entryHash":"0574647e45a296c899a9d7cb156b4ec799408efeab70e2edc8d23b8e876f886b","category":"Tech"}