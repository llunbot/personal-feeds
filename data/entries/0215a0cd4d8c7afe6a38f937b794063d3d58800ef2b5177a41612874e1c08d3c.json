{"title":"Introducing Amazon OpenSearch Service and Amazon Security Lake integration to simplify security analytics","link":"https://aws.amazon.com/blogs/aws/introducing-amazon-opensearch-service-zero-etl-integration-for-amazon-security-lake/","date":1733085458000,"content":"<p>Today, we’re announcing the general availability of <a href=\"https://aws.amazon.com/opensearch-service/features/integration/\">Amazon OpenSearch Service</a> zero-ETL integration with <a href=\"https://aws.amazon.com/security-lake/\">Amazon Security Lake</a>. This integration enables organizations to efficiently search, analyze, and gain actionable insights from their security data, streamlining complex data engineering requirements and unlocking the full potential of security data. It’s a new way to in-place query and analyze logs in Security Lake that minimizes the need to duplicate data and reduces the operational overhead of managing custom data pipelines. You can directly query your Security Lake data, saving the costs of moving data.</p> \n<p>With OpenSearch Service zero-ETL integration with Security Lake, you can use the rich analytics capabilities of OpenSearch Dashboards to query and visualize your data in Security Lake. You can also analyze multiple data sources within a single tool and a single schema, the <a href=\"https://docs.aws.amazon.com/security-lake/latest/userguide/open-cybersecurity-schema-framework.html\">Open Cybersecurity Schema Framework</a> (OCSF) schema to help with threat-hunting and investigation scenarios.</p> \n<p><img loading=\"lazy\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/11/24/2024-aos-zeroetl-securitylake-0-diagram-2.png\" width=\"1568\" height=\"390\" /></p> \n<p>For time-sensitive investigations and monitoring, you can optionally boost query performance by enabling additional accelerations such as indexed views and dashboards in Amazon OpenSearch Service when you need fast and frequent access to a subset of your data. These capabilities provide complete visibility into all your data stored in Security Lake, regardless of the log volume, to support security investigations, better understanding of your security posture, and gain security-relevant insights.</p> \n<p><strong><u>Getting started with direct queries with Amazon Security Lake</u></strong><br /> You can get started in a few steps. First, you need to enable Security Lake by creating a Security Lake subscriber. Then, you enable a data connection in Amazon OpenSearch Service. This will automatically create an OpenSearch Serverless collection to store your direct query results and indices.</p> \n<p><strong> 1. Enable Security Lake and setup permissions for a data lake</strong></p> \n<p>To enable Security Lake in the <a href=\"https://console.aws.amazon.com/securitylake\">AWS Management Console</a>, specify the data sources that you want to collect such as <a href=\"https://aws.amazon.com/route53\">Amazon Route 53</a> DNS queries, <a href=\"https://aws.amazon.com/cloudtrail\">AWS CloudTrail</a> logs, <a href=\"https://aws.amazon.com/vpc\">Amazon VPC</a> Flow logs, and <a href=\"https://aws.amazon.com/securityhub\">AWS Security Hub</a> findings and your AWS Regions. I chose several Regions and set the <a href=\"https://aws.amazon.com/s3\">Amazon Simple Storage Service (Amazon S3)</a> storage class and roll-up Regions to consolidate data.</p> \n<p><img loading=\"lazy\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/11/21/2024-aos-zeroetl-securitylake-1-enable-securitylake.png\" width=\"2416\" height=\"1424\" /></p> \n<p>Security Lake offers a 15-day trial at no cost so you can deploy it across your organization with the desired data sources and estimate the costs specific to your organization.</p> \n<p>Once the enablement is complete, all collected data is ingested into an <a href=\"https://aws.amazon.com/s3\">Amazon Simple Storage Service (Amazon S3)</a> bucket in your account.</p> \n<p><img loading=\"lazy\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/11/21/2024-aos-zeroetl-securitylake-2-s3-bucket.png\" width=\"2334\" height=\"578\" /></p> \n<p>To access Security Lake data from an account other than the Security Lake delegated admin account, you should create an <a href=\"https://aws.amazon.com/lakeformation\">AWS Lake Formation</a> subscriber to access and query data from <a href=\"https://aws.amazon.com/glue\">AWS Glue</a> tables associated with Security Lake. Enter the AWS account and external ID that’s authorized to access Security Lake and select the data sources to be accessed. Lake Formation provides cross-account permissions for security analysts to access data in the lake.</p> \n<p><img loading=\"lazy\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/11/21/2024-aos-zeroetl-securitylake-3-create-subscriber.png\" width=\"2338\" height=\"1332\" /></p> \n<p>After you create the query subscriber, you can go to the account where you plan to deploy your OpenSearch resources and accept the <a href=\"https://docs.aws.amazon.com/ram/latest/userguide/what-is.html\">AWS Resource Access Manager (AWS RAM)</a> share that is shared by the Security Lake delegated admin account. The subscriber account will show the share status as pending until it’s manually accepted.</p> \n<p><img loading=\"lazy\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/11/21/2024-aos-zeroetl-securitylake-4-ram.png\" width=\"2270\" height=\"1100\" /></p> \n<p>To learn more, visit <a href=\"https://docs.aws.amazon.com/security-lake/latest/userguide/get-started-console.html\">Enabling Security Lake using the console</a> and <a href=\"https://docs.aws.amazon.com/security-lake/latest/userguide/create-query-subscriber-procedures.html\">Create query subscriber procedures</a> in the Amazon Security Lake User Guide.</p> \n<p><strong> 2. Create a data connection with OpenSearch Service</strong></p> \n<p>You can create a zero-ETL integration in a few steps. In the <a href=\"https://console.aws.amazon.com/aos/home?#/opensearch/integrations\">OpenSearch Service console</a> of the subscriber’s account, choose <strong>Connected data source</strong> in the <strong>Data connections</strong> section of the left navigation pane. You can then choose <strong>Security Lake</strong> as a data source type.</p> \n<p><img loading=\"lazy\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/11/21/2024-aos-zeroetl-securitylake-5-data-connection.png\" width=\"2372\" height=\"1242\" /></p> \n<p>In the next step, you can set up the IAM permissions for accessing the Security Lake data source using the zero-ETL integration. It will also automatically create an OpenSearch Serverless collection and an OpenSearch application.</p> \n<p>After the connection is created, you can select one of the pre-built OpenSearch dashboards that periodically query your data in Security Lake to create visualizations. You can create a dashboard using templates for VPC Flow Logs, WAF logs, and CloudTrail data sources in Security Lake.</p> \n<p><img loading=\"lazy\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/11/21/2024-aos-zeroetl-securitylake-6-application.png\" width=\"1846\" height=\"1074\" /></p> \n<p>The following is an example of a pre-built dashboard for VPC Flow logs.</p> \n<p><img loading=\"lazy\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/11/21/2024-aos-zeroetl-securitylake-7-dashboard-vpcflow.png\" width=\"2392\" height=\"1516\" /></p> \n<p>To learn more about data connection, visit <u>Data connections and permissions</u> in the Amazon OpenSearch Service Developer Guide.</p> \n<p><strong> 3. Query Security Lake data in the OpenSearch Dashboard</strong></p> \n<p>To directly query your Security Lake data in OpenSearch Dashboards, go to the <strong>Discover</strong> page.</p> \n<p><img loading=\"lazy\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/11/21/2024-aos-zeroetl-securitylake-7-dashboard-discover.png\" width=\"3028\" height=\"1154\" /></p> \n<p>In the <strong>Discover</strong> page, you can use the data picker workflow to locate on a specific Security Lake table to query. There is one table for each Security Lake log source.</p> \n<p><img loading=\"lazy\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/11/21/2024-aos-zeroetl-securitylake-7-dashboard-query.png\" width=\"2432\" height=\"1378\" /></p> \n<p>After making a selection, you can choose the query language that you want to use, either PPL (Piped Processing Language) or SQL (Structured Query Language), and then write and run your query. The following is a PPL sample result:</p> \n<p><img loading=\"lazy\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/11/21/2024-aos-zeroetl-securitylake-7-dashboard-query-2.png\" width=\"3014\" height=\"1068\" /></p> \n<p>You can also choose to search and run a pre-built query template to start your query. There are more than 200 SQL and PPL queries that cover all AWS log sources that are available in Security Lake. You can use the search box to find queries that you’re interested in. For example, search for “VPC Flow” to see all queries related to VPC Flow logs. There’s a description explaining each query and when you might want to use it.</p> \n<p><img loading=\"lazy\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/11/21/2024-aos-zeroetl-securitylake-7-dashboard-pre-built-query.png\" width=\"1526\" height=\"1544\" /></p> \n<p>If you want to perform multiple queries on the same data set, for example to support security investigations, you can create an on-demand indexed view for the results of your direct query. After the results are ingested into an OpenSearch index, you can perform low-latency subsequent queries and analysis using analytics features in OpenSearch.</p> \n<p>To create an indexed view, choose <strong>Create indexed view</strong> and select a specified query, an index name, and a time range. After the view is created, the query results will be ingested and available to query as part of the newly created index under available indexed views.</p> \n<p><img loading=\"lazy\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/11/21/2024-aos-zeroetl-securitylake-7-dashboard-indexed-views.png\" width=\"1864\" height=\"960\" /></p> \n<p>To learn more, visit <a href=\"https://docs.aws.amazon.com/opensearch-service/latest/developerguide/searching.html\"><u>Searching data</u></a> in the Amazon OpenSearch Service Developer Guide.</p> \n<p><strong><u>Now available</u></strong><br /> Amazon OpenSearch Service zero-ETL integration with Amazon Security Lake is now available in the US East (Ohio), US East (N. Virginia), US West (Oregon), Asia Pacific (Mumbai), Asia Paciﬁc (Singapore), Asia Paciﬁc (Sydney), Asia Paciﬁc (Tokyo), Europe (Frankfurt), Europe (Ireland), Europe (London), Europe (Paris), South America (São Paulo), and Canada (Central) AWS Regions.</p> \n<p>OpenSearch Service separately charges for only the compute needed (as OpenSearch Compute Units) to query your external data in addition to maintaining indexes in OpenSearch Service. For more information, see <a href=\"https://aws.amazon.com/opensearch-service/pricing/\">Amazon OpenSearch Service Pricing</a>.</p> \n<p>Give it a try and send feedback to the <a href=\"https://repost.aws/tags/TA6VFzFFY6QQa_KlHRKR-WsA/amazon-opensearch-service\">AWS re:Post for Amazon OpenSearch Service</a> or through your usual AWS Support contacts.</p> \n<p>— <a href=\"https://twitter.com/channyun\">Channy</a></p>","author":"Channy Yun (윤석찬)","siteTitle":"AWS News Blog","siteHash":"6093e072e4117ec22616e844cb857d03ca62c57a411a8affc77cb5e8b6b15bf6","entryHash":"0215a0cd4d8c7afe6a38f937b794063d3d58800ef2b5177a41612874e1c08d3c","category":"Tech"}