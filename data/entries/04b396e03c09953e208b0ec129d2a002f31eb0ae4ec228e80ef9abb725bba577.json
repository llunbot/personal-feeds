{"title":"New – NVMe Reservations for Amazon Elastic Block Store io2 Volumes","link":"https://aws.amazon.com/blogs/aws/new-nvme-reservations-for-amazon-elastic-block-store-io2-volumes/","date":1695147151000,"content":"<p><a href=\"https://aws.amazon.com/ebs/\">Amazon Elastic Block Store (Amazon EBS)</a> io2 and io2 Block Express volumes now support storage fencing using NVMe reservations. As I learned while writing this post, storage fencing is used to regulate access to storage for a compute or database cluster, ensuring that just one host in the cluster has permission to write to the volume at any given time. For example, you can set up SQL Server Failover Cluster Instances (FCI) and get higher application availability within a single Availability Zone without the need for database replication.</p> \n<p>As a quick refresher, io2 Block Express volumes are designed to meet the needs of the most demanding I/O-intensive applications running on Nitro-based <a href=\"https://aws.amazon.com/ec2/\">Amazon Elastic Compute Cloud (Amazon EC2)</a> instances. Volumes can be as big as 64 TiB, and deliver SAN-like performance with up to 256,000 IOPS/volume and 4,000 MB/second of throughput, all with 99.999% durability and sub-millisecond latency. The volumes support other advanced EBS features including <a href=\"https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/EBSEncryption.html\">encryption</a> and <a href=\"https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ebs-volumes-multi.html\">Multi-Attach</a>, and can be reprovisioned online without downtime. To learn more, you can read <a href=\"https://aws.amazon.com/blogs/aws/amazon-ebs-io2-block-express-volumes-with-amazon-ec2-r5b-instances-are-now-generally-available/\">Amazon EBS io2 Block Express Volumes with Amazon EC2 R5b Instances Are Now Generally Available</a>.</p> \n<p><span><strong>Using Reservations</strong></span><br /> To make use of reservations, you simply create an io2 volume with Multi-Attach enabled, and then attach it to one or more Nitro-based EC2 instances (see <a href=\"https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/provisioned-iops.html#io2-block-express\">Provisioned IOPS Volumes</a> for a full list of supported instance types):</p> \n<p><img loading=\"lazy\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2023/09/15/reserve_create_1.png\" width=\"900\" height=\"1039\" /></p> \n<p>If you have existing io2 Block Express volumes, you can enable reservations by detaching the volumes from all of the EC2 instances, and then reattaching them. Reservations will be enabled as soon as you make the first attachment. If you are running Windows Server using AMIs data-stamped <strong>2023.08</strong> or earlier you will need to install the <strong>aws_multi_attach</strong> driver as described in <a href=\"https://docs.aws.amazon.com/AWSEC2/latest/WindowsGuide/aws-nvme-drivers.html\">AWS NVMe Drivers for Windows Instances</a>.</p> \n<p><span><strong>Things to Know</strong></span><br /> Here are a couple of things to keep in mind regarding NVMe reservations:</p> \n<p><strong>Operating System Support</strong> – You can use NVMe reservations with Windows Server (2016, 2019, and 2022), SUSE SLES 12 SP3 and above, RHEL 8.3 and above, and Amazon Linux 2 &amp; later (read <a href=\"https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/nvme-reservations.html\">NVMe reservations</a> to learn more).</p> \n<p><strong>Cluster and Volume Managers</strong> – Windows Server Failover Clustering is supported; we are currently working to qualify other cluster and volume managers.</p> \n<p><strong>Charges</strong> – There are no additional charges for this feature. Each reservation counts as an I/O operation.</p> \n<p></p>\n<p>— <a href=\"https://twitter.com/jeffbarr\">Jeff</a>;</p>\n<p></p>","author":"Jeff Barr","siteTitle":"AWS News Blog","siteHash":"6093e072e4117ec22616e844cb857d03ca62c57a411a8affc77cb5e8b6b15bf6","entryHash":"04b396e03c09953e208b0ec129d2a002f31eb0ae4ec228e80ef9abb725bba577","category":"Tech"}