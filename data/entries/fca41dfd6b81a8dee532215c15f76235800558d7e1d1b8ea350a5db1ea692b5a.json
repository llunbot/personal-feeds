{"title":"สิ่งที่น่าสนใจใน Go 1.22.0","link":"https://www.somkiat.cc/go-1-22-0/","date":1707795432000,"content":"<p><img width=\"150\" height=\"150\" src=\"https://www.somkiat.cc/wp-content/uploads/2024/02/go-1.22-150x150.jpeg\" loading=\"lazy\" srcset=\"https://www.somkiat.cc/wp-content/uploads/2024/02/go-1.22-150x150.jpeg 150w, https://www.somkiat.cc/wp-content/uploads/2024/02/go-1.22-75x75.jpeg 75w\" /></p>\n<figure><a href=\"https://www.somkiat.cc/wp-content/uploads/2024/02/go-1.22.jpeg\"><img src=\"https://www.somkiat.cc/wp-content/uploads/2024/02/go-1.22-1024x576.jpeg\" width=\"606\" height=\"340\" /></a></figure>\n\n\n\n<p>มาดูความสามารถที่น่าสนใจใน <strong><a href=\"https://go.dev/doc/go1.22\" target=\"_blank\">Go 1.22</a></strong> กัน ว่ามีอะไรบ้าง</p>\n\n\n\n<ul>\n<li>For loop</li>\n\n\n\n<li>math/rand/v2 package ใหม่ สำหรับการ random </li>\n\n\n\n<li><a href=\"https://github.com/golang/go/issues/61716\" target=\"_blank\">go/version package ใหม่</a> สำหรับการตรวจสอบ version</li>\n\n\n\n<li>การเปลี่ยนแปลงของ <a href=\"https://go.dev/doc/go1.22#enhanced_routing_patterns\" target=\"_blank\">net/http package</a></li>\n</ul>\n\n\n\n<p>มาดูกันเลย</p>\n\n\n\n<span></span>\n\n\n\n<p><strong>เรื่องที่ 1 การเปลี่ยนแปลงของ For loop</strong></p>\n\n\n\n<p>เปลี่ยนเรื่องเดียวของ Go 1.22 กระทบต่อโครงสร้างของภาษา<br />เพิ่ม <a href=\"https://go.dev/wiki/RangefuncExperiment\" target=\"_blank\">range-over-function iterators</a> เข้ามา<br />ทำให้วน loop ผ่าน range เหมือนภาษา Python ได้<br />ตัวอย่าง code</p>\n\n\n\n[gist id=\"f754177e0687eb79e56a4c7fca9e1087\" file=\"demo.go\"]\n\n\n\n<p>ผลการ run เป็นดังนี้</p>\n\n\n\n[gist id=\"f754177e0687eb79e56a4c7fca9e1087\" file=\"1.txt\"]\n\n\n\n<p><strong>ต่อมาคือ loop variable ใน Go 1.22</strong><br />จากเดิมเป็น <a href=\"https://www.somkiat.cc/hello-go-1-21-rc2/\" target=\"_blank\">preview feature ใน Go 1.21</a><br />จะทำการสร้าง variable ขึ้นมาใหม่ ในแต่ละรอบของ loop<br />ที่ทำงานกับ go routine<br />เพื่อแก้ไขปัญหาการทำงานแบบ concurrent และ การ share ข้อมูลกันนั่นเอง<br />ตัวอย่าง code</p>\n\n\n\n[gist id=\"f754177e0687eb79e56a4c7fca9e1087\" file=\"demo2.go\"]\n\n\n\n<p>มาดูผลการทำงาน<br />จะพบว่าค่าของตัวแปร i นั้น จะเป็นคนละตัวกัน ไม่ได้ใช้งานร่วมกัน<br />และใน go vet ก็สนับสนุน loop variable ด้วยเช่นกัน</p>\n\n\n\n[gist id=\"f754177e0687eb79e56a4c7fca9e1087\" file=\"2.txt\"]\n\n\n\n<p><strong>เรื่องที่ 2 คือ math/rand/v2 package ทำการเพิ่ม global function N() เข้ามา</strong></p>\n\n\n\n[gist id=\"f754177e0687eb79e56a4c7fca9e1087\" file=\"ramdom.go\"]\n\n\n\n<p><strong>เรื่องที่ 3 การเปลี่ยนแปลงของ net/http package</strong></p>\n\n\n\n<p>สามารถทำการใส่ HTTP methods เข้าในไปการกำหนด router ได้เลย<br />ไม่ต้องมาเขียน if กันอีกแล้ว<br />ยกตัวอย่างการเขียนแบบเดิม</p>\n\n\n\n[gist id=\"f754177e0687eb79e56a4c7fca9e1087\" file=\"server1.go\"]\n\n\n\n<p>มาดู code ในGo 1.22 ที่เปลี่ยนแปลงกัน </p>\n\n\n\n[gist id=\"f754177e0687eb79e56a4c7fca9e1087\" file=\"server2.go\"]\n\n\n\n<p>ทำการ upgrade และใช้งานกันดูครับ<br />ขอให้สนุกกับการ coding</p>\n\n\n\n<p><strong>Reference Websites</strong></p>\n\n\n\n<ul>\n<li><a href=\"https://medium.com/@dmytro.misik/go-1-22-personal-top-features-57a4c95a2f56\" target=\"_blank\">https://medium.com/@dmytro.misik/go-1-22-personal-top-features-57a4c95a2f56</a></li>\n\n\n\n<li><a href=\"https://dev.to/douglasmakey/go-122s-http-package-updates-1e7o\" target=\"_blank\">https://dev.to/douglasmakey/go-122s-http-package-updates-1e7o</a></li>\n</ul>\n","author":"somkiat","siteTitle":"cc :: somkiat","siteHash":"3a23a5a4389e1e40c6fbb16520a8cc20df5b3591c25145ce72aaa18b19e48201","entryHash":"fca41dfd6b81a8dee532215c15f76235800558d7e1d1b8ea350a5db1ea692b5a","category":"Thai"}