{"title":"When CSS Isn‚Äôt Enough: JavaScript Requirements For Accessible Components","link":"https://smashingmagazine.com/2021/06/css-javascript-requirements-accessible-components/","date":1623666600000,"content":"<p>As the author of <a href=\"https://moderncss.dev\">ModernCSS.dev</a>, I‚Äôm a big proponent of CSS solutions. And, I love seeing the clever ways people use CSS for really out-of-the-box designs and interactivity! However, I‚Äôve noticed a trend toward promoting ‚ÄúCSS-only‚Äù components using methods like the ‚Äú<a href=\"https://css-tricks.com/the-checkbox-hack/\">checkbox hack</a>‚Äù. Unfortunately, hacks like these leave a significant amount of users unable to use your interface.</p>\n<p>This articles covers several common components and why CSS isn‚Äôt sufficient for covering accessibility by detailing the JavaScript requirements. These requirements are based on the <a href=\"https://www.w3.org/WAI/standards-guidelines/wcag/\">Web Content Accessibility Guidelines (WCAG)</a> and additional research from accessibility experts. I won‚Äôt prescribe JavaScript solutions or demo CSS, but rather examine what needs to be accounted for when creating each component. A JavaScript framework can certainly be used but is not necessary in order to add the events and features discussed.</p>\n<blockquote>The requirements listed are by and large not optional ‚Äî they are necessary to help ensure the accessibility of your components.</blockquote>\n\n<p>If you‚Äôre using a framework or component library, you can use this article to help evaluate if the provided components <strong>meet accessibility requirements</strong>. It‚Äôs important to know that many of the items noted are not going to be fully covered by automated accessibility testing tools like aXe, and therefore need some manual testing. Or, you can use a testing framework like <a href=\"https://www.cypress.io/\">Cypress</a> to create tests for the required functionality.</p>\n<p>Keep in mind that this article is focused on informing you of JavaScript considerations for each interface component. This is not a comprehensive resource for all the implementation details for creating fully accessible components, such as necessary aria or even markup. Resources are included for each type to assist you in learning more about the wider considerations for each component.</p>\nDetermining If CSS-Only Is An Appropriate Solution\n<p>Here are a few questions to ask before you proceed with a CSS-only solution. We‚Äôll cover some of the terms presented here in more context alongside their related components.</p>\n<ul>\n<li><strong>Is this for your own enjoyment?</strong><br />Then absolutely go all in on CSS, push the boundaries, and learn what the language can do! üéâ</li>\n<li><strong>Does the feature include showing and hiding of content?</strong><br />Then you need JS to at minimum toggle aria and to enable closing on <code>Esc</code>. For certain types of components that also change state, you may also need to communicate changes by triggering updates within an ARIA live region.</li>\n<li><strong>Is the natural focus order the most ideal?</strong><br />If the natural order loses the relationship between a trigger and the element it triggered, or a keyboard user can‚Äôt even access the content via natural tab order, then you need JS to assist in focus management.</li>\n<li><strong>Does the stylized control offer the correct information about the functionality?</strong><br />Users of assistive technology like screen readers receive information based on semantics and ARIA that helps them determine what a control does. And, users of speech recognition need to be able to identify the component‚Äôs label or type to work out the phrase to use to operate the controls. For example, if your component is styled like tabs but uses radio buttons to ‚Äúwork‚Äù like tabs, a screen reader may hear ‚Äúradio button‚Äù and a speech user may try to use the word ‚Äútab‚Äù to operate them. In these cases, you‚Äôll need JS to enable using the appropriate controls and semantics to achieve the desired functionality.</li>\n<li><strong>Does the effect rely on hover and/or focus?</strong><br />Then you may need JS to assist in an alternative solution for providing equal access or persistent access to the content especially for touch screen users and those using desktop zoom of 200%+ or magnification software.</li>\n</ul>\n<p><strong>Quick tip</strong>: <em>Another reference when you‚Äôre creating any kind of customized control is the <a href=\"https://w3c.github.io/using-aria/#checklist\">Custom Control Accessible Development Checklist</a> from the W3 ‚ÄúUsing ARIA‚Äù guide. This mentions several points above, with a few additional design and semantic considerations.</em></p>\nTooltips\n<p>Narrowing the definition of a tooltip is a bit tricky, but for this section we‚Äôre talking about small text labels that appear on mouse hover near a triggering element. They overlay other content, do not require interaction, and disappear when a user removes hover or focus.</p>\n<p><img src=\"https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/78e1ac78-4eb5-47f7-92cc-813bb40c540e/1-css-js-requirements-accessible-components.png\" /></p>\n<p>The CSS-only solution here may seem completely fine, and can be accomplished with something like:</p>\n<pre><code>&lt;button class=\"tooltip-trigger\"&gt;I have a tooltip&lt;/button&gt;\n&lt;span class=\"tooltip\"&gt;Tooltip&lt;/span&gt;\n\n.tooltip {\ndisplay: none;\n}\n\n.tooltip-trigger:hover + .tooltip,\n.tooltip-trigger:focus + .tooltip {\ndisplay: block;\n}\n</code></pre>\n\n<p>However, this ignores quite a list of accessibility concerns and excludes many users from accessing the tooltip content.</p>\n<p>A large group of excluded users are those using touch screens where <code>:hover</code> will possibly not be triggered since on touch screens, a <code>:hover</code>  event triggers in sync with a <code>:focus</code> event. This means that any related action connected to the triggering element ‚Äî such as a button or link ‚Äî will fire alongside the tooltip being revealed. This means the user may miss the tooltip, or not have time to read its contents.</p>\n<p>In the case that the tooltip is attached to an interactive element with no events, the tooltip may show but not be dismissible until another element gains focus, and in the meantime may block content and prevent a user from doing a task.</p>\n<p>Additionally, users who need to use zoom or magnification software to navigate also experience quite a barrier to using tooltips. Since tooltips are revealed on hover, if these users need to change their field of view by panning the screen to read the tooltip it may cause it to disappear. Tooltips also remove control from the user as there is often nothing to tell the user a tooltip will appear ahead of time. The <strong>overlay of content</strong> may prevent them from doing a task. In some circumstances such as a tooltip tied to a form field, mobile or other on-screen keyboards can obscure the tooltip content. And, if they are not appropriately connected to the triggering element, some assistive technology users may not even know a tooltip has appeared.</p>\n<p>Guidance for the behavior of tooltips comes from <a href=\"https://www.w3.org/WAI/WCAG21/Understanding/content-on-hover-or-focus.html\">WCAG Success Criterion 1.4.13 ‚Äî Content on Hover or Focus</a>. This criterion is intended to help low vision users and those using zoom and magnification software. The guiding principles for tooltip (and other content appearing on hover and focus) include:</p>\n<ul>\n<li><strong>Dismissible</strong><br />The tooltip can be dismissed without moving hover or focus</li>\n<li><strong>Hoverable</strong><br />The revealed tooltip content can be hovered without it disappearing</li>\n<li><strong>Persistent</strong><br />The additional content does not disappear based on a timeout, but waits for a user to remove hover or focus or otherwise dismiss it</li>\n</ul>\n<p>To fully meet these guidelines requires some JavaScript assistance, particularly to allow for dismissing the content.</p>\n<ul>\n<li>Users of assistive technology will assume that dismissal behavior is tied to the Esc key, which requires a JavaScript listener.</li>\n<li>According to Sarah Higley‚Äôs research described in the next section, adding a visible ‚Äúclose‚Äù button within the tooltip would also require JavaScript to handle its close event.</li>\n<li>It‚Äôs possible that JavaScript may need to augment your styling solution to ensure a user can hover over the tooltip content without it dismissing during the user moving their mouse.</li>\n</ul>\n<h3>Alternatives To Tooltips</h3>\n<p>Tooltips should be a last resort. Sarah Higley ‚Äî an accessibility expert who has a particular passion for dissuading the use of tooltips ‚Äî offers this simple test:</p>\n<blockquote>‚ÄúWhy am I adding this text to the UI? Where else could it go?‚Äù<br /><br />‚Äî Sarah Higley from the presentation ‚Äú<a href=\"https://www.youtube.com/watch?v=lb0_v7D4kbs\">Tooltips: Investigation Into Four Parts</a>‚Äù</blockquote>\n\n<p>Based on research Sarah was involved with for her role at Microsoft, an alternative solution is a dedicated ‚Äútoggletip‚Äù. Essentially, this means providing an additional element to allow a user to intentionally trigger the <strong>showing and hiding of extra content</strong>. Unlike tooltips, toggletips can retain semantics of elements within the revealed content. They also give the user back the control of toggling them, and retain discoverability and operability by more users and in particular touch screen users.</p>\n<p>If you‚Äôve remembered the <code>title</code> attribute exists, just know that it suffers all the same issues we noted from our CSS-only solution. In other words ‚Äî don‚Äôt use <code>title</code> under the assumption it‚Äôs an acceptable tooltip solution.</p>\n<p>For more information, check out <a href=\"https://www.youtube.com/watch?v=lb0_v7D4kbs\">Sarah‚Äôs presentation on YouTube</a> as well as her <a href=\"https://sarahmhigley.com/writing/tooltips-in-wcag-21/\">extensive article on tooltips</a>. To learn more about tooltips versus toggletips and a bit more info on why not to use <code>title</code>, review Heydon Pickering‚Äôs article from Inclusive Components: <a href=\"https://inclusive-components.design/tooltips-toggletips/\">Tooltips and Toggletips</a>.</p>\nModals\n<p>Modals ‚Äî aka lightboxes or dialogs ‚Äî are in-page windows that appear after a triggering action. They overlay other page content, may contain structured information including additional actions, and often have a semi-transparent backdrop to help distinguish the modal window from the rest of the page.</p>\n<p><img src=\"https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/e2c1b6ac-6c84-4cbc-9a9f-882fb8be0708/2-css-js-requirements-accessible-components.png\" /></p>\n<p>I have seen a few variations of a CSS-only modal (and am guilty of making one for an older version of my portfolio). They may use the ‚Äúcheckbox hack‚Äù, make use of the behavior of <code>:target</code>, or try to fashion it off of <code>:focus</code> (which is probably really an overlarge tooltip in disguise).</p>\n<p>As for the HTML <code>dialog</code> element, be aware that it is not considered to be comprehensively accessible. So, while I absolutely encourage folks to use native HTML before custom solutions, unfortunately this one breaks that idea. You can learn more about <a href=\"https://www.scottohara.me/blog/2019/03/05/open-dialog.html\">why the HTML <code>dialog</code> isn‚Äôt accessible</a>.</p>\n<p>Unlike tooltips, modals are intended to allow structured content. This means potentially a heading, some paragraph content, and interactive elements like links, buttons or even forms. In order for the most users to access that content, they must be able to use <strong>keyboard events</strong>, particularly tabbing. For longer modal content, arrow keys should also retain the ability to scroll. And like tooltips, they should be dismissible with the Esc key ‚Äî and there‚Äôs no way to enable that with CSS-only.</p>\n<p>JavaScript is required for focus management within modals. Modals should <em>trap</em> focus, which means once focus is within the modal, a user should <em>not</em> be able to tab out of it into the page content behind it. But first, focus has to get <em>inside</em> of the modal, which also requires JavaScript for a fully accessible modal solution.</p>\n<p>Here‚Äôs the <strong>sequence of modal related events</strong> that must be managed with JavaScript:</p>\n<ol>\n<li>Event listener on a button opens the modal</li>\n<li>Focus is placed within the modal; which element varies based on modal content (see decision tree)</li>\n<li>Focus is trapped within the modal until it is dismissed</li>\n<li>Preferably, a user is able to close a modal with the Esc key in addition to a dedicated close button <em>or</em> a destructive button action such as ‚ÄúCancel‚Äù if acknowledgement of modal content is required<ol>\n<li>If Esc is allowed, clicks on the modal backdrop should also dismiss the modal</li>\n</ol>\n</li>\n<li>Upon dismissal, if no navigation occurred, focus is placed back on the triggering button element</li>\n</ol>\n<h3>Modal Focus Decision Tree</h3>\n<p>Based on the <a href=\"https://www.w3.org/TR/wai-aria-practices-1.1/examples/dialog-modal/dialog.html\">WAI-ARIA Authoring Practices Modal Dialog Example</a>, here is a simplified decision tree for where to place focus once a modal is opened. Context will always dictate the choice here, and ideally focus is managed further than simply ‚Äúthe first focusable element‚Äù. In fact, sometimes non-focusable elements need to be selected.</p>\n<ul>\n<li><strong>Primary subject of the modal is a form.</strong><br />Focus first form field.</li>\n<li><strong>Modal content is significant in length and pushes modal actions out of view.</strong><br />Focus a heading if present, or first paragraph.</li>\n<li><strong>Purpose of the modal is procedural (example: confirmation of action) with multiple available actions.</strong><br />Focus on the ‚Äúleast destructive‚Äù action based on the context (example: ‚ÄúOK‚Äù).</li>\n<li><strong>Purpose of the modal is procedural with one action.</strong><br />Focus on the first focusable element</li>\n</ul>\n<p><strong>Quick tip</strong>: <em>In the case of needing to focus a non-focusable element, such as a heading or paragraph, add <code>tabindex=\"-1\"</code> which allows the element to become programmatically focusable with JS but does not add it to the DOM tab order.</em></p>\n<p>Refer to the <a href=\"https://www.w3.org/TR/wai-aria-practices-1.1/examples/dialog-modal/dialog.html\">WAI-ARIA modal demo</a> for more information on other requirements for setting up ARIA and additional details on how to select which element to add focus to. The demo also includes JavaScript to exemplify how to do focus management.</p>\n<p>For a ready-to-go solution, Kitty Giraudel has created <a href=\"https://a11y-dialog.netlify.app/\">a11y-dialog</a> which includes the feature requirements we discussed. Adrian Roselli also has <a href=\"https://adrianroselli.com/2020/10/dialog-focus-in-screen-readers.html\">researched managing focus of modal dialogs</a> and created a demo and compiled information on how different browser and screen reader combinations will communicate the focused element.</p>\nTabs\n<p>Tabbed interfaces involve a series of triggers that display corresponding content panels one at a time. The CSS ‚Äúhacks‚Äù you may find for these involve using stylized radio buttons, or <code>:target</code>, which both allow only revealing a single panel at a time.</p>\n<p><img src=\"https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/118262cd-04ee-4dfb-89dc-958995e5a0d6/3-css-js-requirements-accessible-components.png\" /></p>\n<p>Here are the tab features that require JavaScript:</p>\n<ol>\n<li>Toggling the <code>aria-selected</code> attribute to true for the current tab and false for unselected tabs</li>\n<li>Creating a <em>roving tabindex</em> to distinguish tab selection from focus</li>\n<li>Move focus between tabs by responding to arrow key events (and optionally <code>Home</code> and <code>End</code>)</li>\n</ol>\n<p>Optionally, you can make tab selection follow focus ‚Äî meaning when a tab is focused its also then selected and shows its associated tab panel. The WAI-ARIA Authoring Practices offers this <a href=\"https://www.w3.org/TR/wai-aria-practices-1.1/#kbd_selection_follows_focus\">guide to making a choice for whether selection should follow focus</a>.</p>\n<p>Whether or not you choose to have selection follow focus, you will also use JavaScript to listen for arrow key events to move focus between tab elements. This is an alternative pattern to allow <strong>navigation of tab options</strong> since the use of a roving tabindex (described next) alters the natural keyboard tab focus order.</p>\n<h3>About Roving <code>tabindex</code></h3>\n<p>The concept of a <a href=\"https://www.w3.org/TR/wai-aria-practices/#kbd_roving_tabindex\">roving tabindex</a> is that the value of the <code>tabindex</code> value is programmatically controlled to manage the focus order of elements. In regards to tabs, this means that only the selected tab is part of the focus order by way of setting <code>tabindex=\"0\"</code>, and unselected tabs are set to <code>tabindex=\"-1\"</code> which removes them from the natural keyboard focus order.</p>\n<p>The reason for this is so that when a tab is selected, the next tab will land a user‚Äôs focus within the associated tab panel. You may choose to make the element that is the tab panel focusable by assigning it <code>tabindex=\"0\"</code>, or that may not be necessary if there‚Äôs a guarantee of a <strong>focusable element within the tab panel</strong>. If your tab panel content will be more variable or complex, you may consider managing focus according to the decision tree we reviewed for modals.</p>\nExample Tab Patterns\n<p>Here are some reference patterns for creating tabs:</p>\n<ul>\n<li><a href=\"https://dequeuniversity.com/library/aria/tabpanel\">Tabpanel demo from Deque University</a></li>\n<li><a href=\"https://scottaohara.github.io/a11y_tab_widget/\">Tab widget tests from Scott O‚ÄôHara</a> (tests several functional patterns)</li>\n<li><a href=\"https://inclusive-components.design/tabbed-interfaces/\">Tabbed Interfaces</a> from Heydon Pickering‚Äôs <em>Inclusive Components</em>, which demonstrates how tabs can be a progressive enhancement of a table of contents</li>\n</ul>\nCarousels\n<p>Also called slideshows or sliders, carousels involve a series of rotating content panels (aka ‚Äúslides‚Äù) that include control mechanisms. You will find these in many configurations with a wide range of content. They are somewhat notoriously considered <a href=\"https://shouldiuseacarousel.com/\">a bad design pattern</a>.</p>\n<p><img src=\"https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/994ef747-b95d-4b02-9a10-65da686d5e3a/4-css-js-requirements-accessible-components.jpg\" /></p>\n<p>The tricky part about CSS-only carousels is that they may not offer controls, or they may use unexpected controls to manipulate the carousel movement. For example, you can again use the ‚Äúcheckbox hack‚Äù to cause the carousel to transition, but <strong>checkboxes impart the wrong type of information</strong> about the interaction to users of assistive tech. Additionally, if you style the checkbox labels to visually appear as forward and backward arrows, you are likely to give users of speech recognition software the wrong impression of what they should say to control the carousel.</p>\n<p>More recently, native <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Scroll_Snap\">CSS support for scroll snap</a> has landed. At first, this seems like the perfect CSS-only solution. But, even automated accessibility checking will <strong>flag these as un-navigable by keyboard users</strong> in case there is there no way to navigate them via interactive elements. There are other accessibility and user experience concerns with the default behavior of this feature, some of which I‚Äôve included in <a href=\"https://smolcss.dev/#smol-scroll-snap\">my scroll snap demo on SmolCSS</a>.</p>\n<p>Despite the wide range in how carousels look, there are some common traits. One option is to <a href=\"https://dequeuniversity.com/library/aria/carousel\">create a carousel using tab markup</a> since effectively it‚Äôs the same underlying interface with an altered visual presentation. Compared to tabs, carousels may offer extra controls for previous and next, and also pause if the carousel is auto-playing.</p>\n<p>The following are JavaScript considerations depending on your carousel features:</p>\n<ul>\n<li><strong>Using Paginated Controls</strong><br />Upon selection of a numbered item, programmatically focus the associated carousel slide. This will involve setting up slide containers using roving tabindex so that you can focus the current slide, but prevent access to off-screen slides.</li>\n<li><strong>Using Auto-Play</strong><br />Include a pause control, and also enable pausing when the slide is hovered or an interactive element within it is focused. Additionally, you can <a href=\"https://web.dev/prefers-reduced-motion/\">check for <code>prefers-reduced-motion</code> within JavaScript</a> to load the slideshow in a paused state to respect user preferences.</li>\n<li><strong>Using Previous/Next Controls</strong><br />Include a visually hidden element marked as <code>aria-live=\"polite\"</code> and upon these controls being activated, populate the live region with an indication of the current position, such as ‚ÄúSlide 2 of 4‚Äù.</li>\n</ul>\n<h3>Resources For Building Accessible Carousels</h3>\n<ul>\n<li>Thorough implementation details and considerations as well as a full code example from the <a href=\"https://www.w3.org/WAI/tutorials/carousels/\">W3C Web Accessibility tutorial on carousels</a></li>\n<li>Deque University‚Äôs example of <a href=\"https://dequeuniversity.com/library/aria/carousel\">enhancing a tab interface into a carousel</a></li>\n<li>The WAI-ARIA Authoring Practices example of an <a href=\"https://www.w3.org/TR/2019/NOTE-wai-aria-practices-1.1-20190814/examples/carousel/carousel-1.html\">auto-rotating image carousel</a></li>\n<li>A <a href=\"https://www.smashingmagazine.com/2021/03/complete-guide-accessible-front-end-components/#accessible-carousels-and-content-sliders\">selection of carousel resources</a> in Smashing‚Äôs roundup of accessible components</li>\n</ul>\nDropdown Menus\n<p>This refers to a component where a button toggles open a list of links, typically used for navigation menus. CSS implementations that stop at showing the menu on <code>:hover</code> or <code>:focus</code> only miss some important details. </p>\n<p><img src=\"https://cloud.netlifyusercontent.com/assets/344dbf88-fdf9-42bb-adb4-46f01eedd629/365cc532-dc82-49a3-8326-4ed2692519f9/5-css-js-requirements-accessible-components.png\" /></p>\n<p>I‚Äôll admit, I even thought that by using the newer <code>:focus-within</code> property we could safely implement a CSS-only solution. You‚Äôll see that <a href=\"https://moderncss.dev/css-only-accessible-dropdown-navigation-menu/\">my article on CSS dropdown menus</a> was amended to include notes and resources on the necessary JavaScript (I kept the title so that others seeking that solution will hopefully complete the JS implementation, too). Specifically, relying on only CSS means violating <a href=\"https://www.w3.org/WAI/WCAG21/Understanding/content-on-hover-or-focus.html\">WCAG Success Criterion 1.4.13: Content on Hover or Focus</a> which we learned about with tooltips.</p>\n<p>We need to add in JavaScript for some techniques that should sound familiar at this point:</p>\n<ul>\n<li>Toggling <code>aria-expanded</code> on the menu button between <code>true</code> and <code>false</code> by listening to  <code>click</code> events</li>\n<li>Closing an open menu upon use of the Esc key, and returning focus to the menu toggle button</li>\n<li>Preferably, closing open menus when focus is moved outside of the menu</li>\n<li><em>Optional</em>: Implement arrow keys as well as <code>Home</code> and <code>End</code> keys for keyboard navigation between menu toggle buttons and links within the dropdowns</li>\n</ul>\n<p><strong>Quick tip</strong>: <em>Ensure the correct implementation of the dropdown menu by associating the menu display to the selector of <code>.dropdown-toggle[aria-expanded=`</code>\"<code>true</code>\"<code></code>] + .dropdown<code>rather than basing the menu display on the presence of an additional JS-added class like</code>active`. This removes some complexity from your JS solution, too!</em></p>\n<p>This is also referred to as a ‚Äúdisclosure pattern‚Äù and you can find more details in the WAI-ARIA Authoring Practices‚Äôs <a href=\"https://w3c.github.io/aria-practices/examples/disclosure/disclosure-navigation.html\">Example Disclosure Navigation Menu</a>.</p>\n<h3>Additional resources on creating accessible components</h3>\n<ul>\n<li>Smashing‚Äôs <a href=\"https://www.smashingmagazine.com/2021/03/complete-guide-accessible-front-end-components/\">Complete Guide to Accessible Front-End Components</a></li>\n<li>Carie Fisher‚Äôs article <a href=\"https://www.smashingmagazine.com/2021/03/good-better-best-untangling-complex-world-accessible-patterns/\">Good, Better, Best: Untangling The Complex World Of Accessible Patterns</a></li>\n<li>Demos and information on common design patterns and widgets available from the <a href=\"https://www.w3.org/TR/wai-aria-practices-1.2/\">WAI-ARIA Authoring Practices 1.2</a></li>\n<li><a href=\"https://dequeuniversity.com/library/\">Deque University‚Äôs Code Library</a></li>\n<li><a href=\"https://github.com/scottaohara/accessible_components\">Scott O‚ÄôHara‚Äôs Accessible Components</a></li>\n<li>Heydon Pickering‚Äôs <a href=\"https://inclusive-components.design/\">Inclusive Components</a></li>\n</ul>","author":"","siteTitle":"Articles on Smashing Magazine ‚Äî For Web Designers And Developers","siteHash":"ab069ca35bf300e9db0da36f49701f66485a5b0d2db0471dfeee07cef6204939","entryHash":"f268a7042df9695df5e502f7a7aadb0cc450b8d4f4f17cc0fc512475fc2b72bf","category":"Tech"}