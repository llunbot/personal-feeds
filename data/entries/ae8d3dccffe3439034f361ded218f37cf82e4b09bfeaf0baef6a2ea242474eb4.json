{"title":"สรุปจากการดู SQL Query Optimization!","link":"https://www.somkiat.cc/note-sql-query-optimization/","date":1695273071000,"content":"<p><img width=\"150\" height=\"150\" src=\"https://www.somkiat.cc/wp-content/uploads/2023/09/Top-10-SQL-Query-Optimization-Techniques-150x150.jpg\" alt loading=\"lazy\" srcset=\"https://www.somkiat.cc/wp-content/uploads/2023/09/Top-10-SQL-Query-Optimization-Techniques-150x150.jpg 150w, https://www.somkiat.cc/wp-content/uploads/2023/09/Top-10-SQL-Query-Optimization-Techniques-75x75.jpg 75w\" /></p>\n<figure><a href=\"https://www.somkiat.cc/wp-content/uploads/2023/09/Top-10-SQL-Query-Optimization-Techniques.jpg\"><img src=\"https://www.somkiat.cc/wp-content/uploads/2023/09/Top-10-SQL-Query-Optimization-Techniques-1024x574.jpg\" alt width=\"649\" height=\"363\" /></a></figure>\n\n\n\n<p>เห็นใน feed มีการ share เรื่อง <a href=\"https://www.facebook.com/mltutblogs/posts/pfbid02jG3LEyP444wQQevSWyLFCTThUWozhduYDENqpMK733mJHVkiuw29jiK8mvswDz4l\" target=\"_blank\">SQL Query Optimization!</a> กันเยอะ<br />ซึ่งอธิบายการปรับปรุงประสิทธิภาพการทำงานของ SQL กัน<br />ยกตัวอย่างเช่น</p>\n\n\n\n<ul>\n<li>LIKE vs REGEXP_LIKE</li>\n\n\n\n<li>REGEXP_EXTRACT</li>\n\n\n\n<li>ใช้ temp table แทน IN สำหรับข้อมูลเยอะ ๆ</li>\n</ul>\n\n\n\n<span></span>\n\n\n\n<p>พอดูแล้วก็คิดว่า มันแปลก ๆ ไหมนะ<br />แต่สงสัยผมไม่ค่อยใช้คำสั่ง SQL เยอะเท่าไรเลยไม่ค่อยรู้มั้ง</p>\n\n\n\n<p><strong>แต่ที่ผมใช้งานจริง ๆ มักจะเป็นดังนี้</strong></p>\n\n\n\n<ul>\n<li>พวกการ LIKE ต่าง ๆ มักจะไม่ใช้เลย ไปใช้ database model สำหรับการ search ดีกว่าเยอะ แต่ถ้าข้อมูลไม่เยอะ คนใช้งานไม่เยอะ ก็ใช้ ๆ ไปก็ได้มั้ง !! แต่อย่าลืมทำ performacne test ดูด้วยละ หรือ explain ดูด้วยว่าใช้ cost ไปเท่าไร มันสำคัญมาก ๆ</li>\n\n\n\n<li>อีกอย่าง %X% แบบนี้ลด ละ เลิก ใช้ X% แบบนี้ยังพอทน !</li>\n\n\n\n<li>ลดการ join ลง โดยใช้การทำ pre-joined หรือเตรียมข้อมูลให้ง่ายต่อการ query ตั้งแต่การจัดเก็บดีกว่า ลด cost ได้เยอะ แถม performance ดีกว่ามาก ๆ (ลูกอีกชั่ง join ลดให้เยอะ ๆ ครับ มันเปลือง)</li>\n\n\n\n<li>เน้น design for write และ design for read จะมีความยากในการออกแบบพอสมควร แต่ได้ผลดี ลดงาน ลดเวลาไปเยอะ</li>\n\n\n\n<li>ถ้าต้องมี parameter หรือ ข้อมุลใน IN เยอะ ๆ ตรงนี้ ถ้าไม่เยอะ และ fixed size ถึงจะใช้ IN แต่ถ้าเยอะ และ ไม่รูปขนาดที่ชัดเจน แนะนำให้ใช้ EXISTS ดีกว่า</li>\n\n\n\n<li>พวก index ก็ใส่ให้ถูก และ มีประสิทธิภาพด้วย ไม่งั้น เดี๋ยวจะเจอปัญหา คือ ขนาดของ index ใหญ่กว่า data ที่เก็บกันอีก !!</li>\n\n\n\n<li>โลกนี้ไม่ใช่มีแต่ RDBMS นะครับ</li>\n</ul>\n\n\n\n<p>ไม่มีผิดมีถูก ต้องดูตามระบบที่ใช้งานด้วย<br />ว่า performance ตรงตาม business requirement หรือไม่<br />ถ้าไม่ น่าจะต้องปรับปรุงและเปลี่ยนแปลงกันแล้ว</p>\n","author":"somkiat","siteTitle":"cc :: somkiat","siteHash":"3a23a5a4389e1e40c6fbb16520a8cc20df5b3591c25145ce72aaa18b19e48201","entryHash":"ae8d3dccffe3439034f361ded218f37cf82e4b09bfeaf0baef6a2ea242474eb4","category":"Thai"}