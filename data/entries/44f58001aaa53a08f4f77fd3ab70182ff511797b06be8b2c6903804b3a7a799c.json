{"title":"ว่าด้วยเรื่องของ Cell-Based Architecture มันเป็นอย่างไร ?","link":"https://www.somkiat.cc/cell-based-architecture/","date":1707321634000,"content":"<p><img width=\"150\" height=\"150\" src=\"https://www.somkiat.cc/wp-content/uploads/2024/02/Cell-based-architecture.drawio-150x150.png\" loading=\"lazy\" srcset=\"https://www.somkiat.cc/wp-content/uploads/2024/02/Cell-based-architecture.drawio-150x150.png 150w, https://www.somkiat.cc/wp-content/uploads/2024/02/Cell-based-architecture.drawio-75x75.png 75w\" /></p>\n<figure><a href=\"https://www.somkiat.cc/wp-content/uploads/2024/02/Cell-based-architecture.drawio.png\"><img src=\"https://www.somkiat.cc/wp-content/uploads/2024/02/Cell-based-architecture.drawio.png\" width=\"627\" height=\"374\" /></a></figure>\n\n\n\n<p>อ่านบทความเรื่องของ <a href=\"https://slack.engineering/slacks-migration-to-a-cellular-architecture/\" target=\"_blank\">Slack’s Migration to a Cellular Architecture</a> <br />ซึ่งทางระบบของ Slack ทำการ migrate architecture ของระบบ<br />มาใช้ <strong><a href=\"https://docs.aws.amazon.com/wellarchitected/latest/reducing-scope-of-impact-with-cell-based-architecture/what-is-a-cell-based-architecture.html\" target=\"_blank\">cell-based architecture</a></strong> เป็นอีกหนึ่ง architecture pattern<br />โดยอธิบายรายละเอียดจาก AWS นั่นเอง<br />มีเป้าหมายเพื่อ</p>\n\n\n\n<ul>\n<li>รองรับผู้ใช้งานจำนวนสูง</li>\n\n\n\n<li>ในมุมมองของผู้ใช้งานหรือลูกค้า ระบบต้องสามารถใช้งานได้ตลอดเวลา </li>\n\n\n\n<li>ถ้าระบบมีปัญหาขึ้นมา ต้องสามารถเกิดผลกระทบในกรอบที่จำกัดเท่านั้น ไม่ใช่พังทั้งระบบ (Isolated failure)</li>\n</ul>\n\n\n\n<span></span>\n\n\n\n<figure><a href=\"https://www.somkiat.cc/wp-content/uploads/2024/02/failure-isolation-using-bulkheads.jpg\"><img src=\"https://www.somkiat.cc/wp-content/uploads/2024/02/failure-isolation-using-bulkheads.jpg\" width=\"407\" height=\"298\" /></a></figure>\n\n\n\n<p><strong>เป้าหมายหลัก ๆ ของ Slack นั้น ทำการ migrate เฉพาะ service ที่สำคัญ ๆ เท่านั้น</strong></p>\n\n\n\n<p>ทำการย้ายจาก monolith มายัง cell-based architecture<br />แน่นอนว่า แนวคิดนี้มีทั้งข้อดีและข้อเสียที่ต้องทำความเข้าใจ</p>\n\n\n\n<p><strong>มาทำความรู้จักกับ component ต่าง ๆ ของ cell-based architecture</strong></p>\n\n\n\n<ul>\n<li><strong>Cell</strong> คือส่วนการทำงานหลัก โดยในแต่ละ cell จะทำงานจบในตัวเอง เป็นอิสระ ทั้งข้อมูล การพัฒนา การ deploy  การ monitor/observe รวมทั้ง resource ต่าง ๆ ที่ใช้งาน ใน cell จะมี service ที่จำเป็นต่อการใช้งานใน cell ไปเลย</li>\n\n\n\n<li><strong>Interface</strong> คือ ช่องทางการติดต่อของแต่ละ cell ทั้งขาเข้าและออก</li>\n\n\n\n<li><strong>Inter-cell component</strong> สำหรับการติดต่อสื่อสารกับ cell จำนวนมาก เช่น Router, Load balance และ Messaging เป็นต้น</li>\n</ul>\n\n\n\n<figure><a href=\"https://www.somkiat.cc/wp-content/uploads/2024/02/cell-components.png\"><img src=\"https://www.somkiat.cc/wp-content/uploads/2024/02/cell-components-1024x939.png\" width=\"554\" height=\"508\" /></a></figure>\n\n\n\n<p>เมื่อทำตามนี้แล้วจะได้ระบบตามที่ต้องการข้างต้น<br />ทั้ง scalability, performance และ resilience<br />รวมทั้งขอบเขตของปัญหาและการทดสอบก็เล็กลง</p>\n\n\n\n<figure><a href=\"https://www.somkiat.cc/wp-content/uploads/2024/02/scope-of-impact.jpg\"><img src=\"https://www.somkiat.cc/wp-content/uploads/2024/02/scope-of-impact-1024x669.jpg\" width=\"562\" height=\"366\" /></a></figure>\n\n\n\n<p><strong>แต่ก่อให้เกิดปัญหาตามมาเช่นกัน</strong></p>\n\n\n\n<ul>\n<li>ความซับซ้อนในการสร้างและจัดการ อย่าลืมว่า แต่ละ cell ต้องมี redundant ด้วยนะ (ทั้งใน zone และต่าง zone)</li>\n\n\n\n<li>เพิ่ม overhead ของระบบงาน รวมทั้งค่าใช้จ่ายของ resource ที่ใช้งาน เพราะว่าต้องแยกเป็นอิสระต่อกัน</li>\n</ul>\n\n\n\n<p>อีกทั้งเรื่องของการ Isolate หรือแยกกันนั้น<br />ต้องดูให้ครบทุกมุมมองว่าจะ Isolate แบบไหนบ้าง เช่น</p>\n\n\n\n<ul>\n<li>Physical</li>\n\n\n\n<li>Virtual</li>\n\n\n\n<li>Process</li>\n\n\n\n<li>Network</li>\n</ul>\n\n\n\n<figure><a href=\"https://www.somkiat.cc/wp-content/uploads/2024/02/Screenshot-2567-02-07-at-22.58.43.png\"><img src=\"https://www.somkiat.cc/wp-content/uploads/2024/02/Screenshot-2567-02-07-at-22.58.43.png\" width=\"532\" height=\"349\" /></a></figure>\n\n\n\n<p><strong>จะเห็นได้ว่าทุก ๆ  pattern นั้นล้วนมีข้อดีและข้อเสีย</strong></p>\n\n\n\n<p>เลือกใช้ให้เหมาะกับงาน หรือ requirement ด้วยเสมอ<br />อย่าลืมว่า เรานำมาใช้งานเพื่อแก้ไขปัญหา หรือ ต้องมีประโยชน์นะครับ !!!</p>\n\n\n\n<p><strong><em>ระวังปัญหาที่อาจจะเกิดขึ้นจาก gap ระหว่าง business, architecture, development และ deployment</em></strong><br />อย่าให้เป็นดังรูป</p>\n\n\n\n<figure><a href=\"https://www.somkiat.cc/wp-content/uploads/2024/02/gap-architecture.jpg\"><img src=\"https://www.somkiat.cc/wp-content/uploads/2024/02/gap-architecture.jpg\" width=\"620\" height=\"326\" /></a></figure>\n\n\n\n<p><strong>Reference Websites</strong></p>\n\n\n\n<ul>\n<li><a href=\"https://docs.aws.amazon.com/wellarchitected/latest/reducing-scope-of-impact-with-cell-based-architecture/what-is-a-cell-based-architecture.html\" target=\"_blank\">What is a cell-based architecture ?</a></li>\n\n\n\n<li><a href=\"https://slack.engineering/slacks-migration-to-a-cellular-architecture/\" target=\"_blank\">Slack’s Migration to a Cellular Architecture</a></li>\n\n\n\n<li><a href=\"https://www.linkedin.com/pulse/cell-based-architecture-pattern-pratik-pandey/\" target=\"_blank\">Cell-Based Architecture — Architecture Pattern</a></li>\n</ul>\n","author":"somkiat","siteTitle":"cc :: somkiat","siteHash":"3a23a5a4389e1e40c6fbb16520a8cc20df5b3591c25145ce72aaa18b19e48201","entryHash":"44f58001aaa53a08f4f77fd3ab70182ff511797b06be8b2c6903804b3a7a799c","category":"Thai"}