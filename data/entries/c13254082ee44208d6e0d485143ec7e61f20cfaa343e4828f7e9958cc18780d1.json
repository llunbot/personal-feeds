{"title":"ทำการสร้าง API mocking และ Testing ด้วย Microcks กัน","link":"https://www.somkiat.cc/api-mocking-with-microcks/","date":1721984359000,"content":"<p><img width=\"150\" height=\"150\" src=\"https://www.somkiat.cc/wp-content/uploads/2024/07/microcks-01-150x150.jpg\" loading=\"lazy\" srcset=\"https://www.somkiat.cc/wp-content/uploads/2024/07/microcks-01-150x150.jpg 150w, https://www.somkiat.cc/wp-content/uploads/2024/07/microcks-01-75x75.jpg 75w\" /></p>\n<figure><a href=\"https://www.somkiat.cc/wp-content/uploads/2024/07/microcks-01.jpg\"><img src=\"https://www.somkiat.cc/wp-content/uploads/2024/07/microcks-01.jpg\" width=\"628\" height=\"349\" /></a></figure>\n\n\n\n<p><strong>Microcks</strong> คือเครื่องมือสำหรับการทดสอบระบบงาน และ สร้าง API Mocking ขึ้นมาแบบง่าย<br />โดยสนับสนุน protocol หรือ tool ที่หลากหลาย ทั้ง HTTP/HTTPs, gRPC, AMQP, MQTT, Apache Kafka<br />ช่วยให้จำลอง API server (Mock server) ได้ง่าย<br />ช่วยให้สร้าง automation test ได้ง่ายขึ้น<br />สามารถทำงานร่วมกับ CI/CD tool ต่าง ๆ ได้อีก<br />นั่นคือช่วยอำนวยความสะดวกตั้งแต่การพัฒนา ทดสอบ ไปถึงการ deploy ระบบงานเลย<br />ดังนั้นมาลองใช้งานกันดูนิดหน่อย</p>\n\n\n\n<span></span>\n\n\n\n<p><strong>เริ่มต้นการใช้งาน Microcks นั้น รองรับเอกสารในรูปแบบต่าง ๆ ที่ใช้ในปัจุบัน</strong></p>\n\n\n\n<ul>\n<li>Swagger หรือ OpenAPI</li>\n\n\n\n<li>AsyncAPI</li>\n\n\n\n<li>GraphQL</li>\n\n\n\n<li>Postman</li>\n\n\n\n<li>gRPC</li>\n\n\n\n<li>SOAP UI</li>\n</ul>\n\n\n\n<p>สามารถทำการ import มาใช้ใน <strong>Microcks</strong> ได้เลย<br />ซึ่งสะดวกมาก ๆ</p>\n\n\n\n<figure><a href=\"https://www.somkiat.cc/wp-content/uploads/2024/07/microcks-02.jpg\"><img src=\"https://www.somkiat.cc/wp-content/uploads/2024/07/microcks-02.jpg\" width=\"469\" height=\"248\" /></a></figure>\n\n\n\n<p><strong>จากนั้นสามารถสร้าง Mock server สำหรับ API ในรูปแบบต่าง ๆ ได้เลย</strong></p>\n\n\n\n<figure><a href=\"https://www.somkiat.cc/wp-content/uploads/2024/07/microcks-03.jpg\"><img src=\"https://www.somkiat.cc/wp-content/uploads/2024/07/microcks-03.jpg\" width=\"463\" height=\"192\" /></a></figure>\n\n\n\n<p><strong>ดังนั้นมาลองใช้งานเพื่อสร้าง Mock server จาก Postman collection กันดู</strong></p>\n\n\n\n<p>เพื่อให้เข้าใจมากยิ่งขึ้น</p>\n\n\n\n<p>เริ่มด้วยการติดตั้งผ่าน <a href=\"https://microcks.io/documentation/guides/installation/docker-compose/\" target=\"_blank\">Docker compose</a> กันเลย<br />ซึ่งติดตั้ง software หลายตัว ทั้ง MongoDb, KeyCloak และ Postman runtime (ทำงานร่วมกับ Postman ได้เลย)</p>\n\n\n\n[gist id=\"7cf40fe0a2056b9e9986e8185ed59d82\" file=\"1.txt\"]\n\n\n\n<p>เข้าใช้งานกันดูผ่าน web browser</p>\n\n\n\n<ul>\n<li>http://localhost:8080</li>\n\n\n\n<li>user=admin</li>\n\n\n\n<li>password=microcks123</li>\n</ul>\n\n\n\n<p>เข้ามายังระบบดังรูป</p>\n\n\n\n<figure><a href=\"https://www.somkiat.cc/wp-content/uploads/2024/07/microcks-04.jpg\"><img src=\"https://www.somkiat.cc/wp-content/uploads/2024/07/microcks-04.jpg\" width=\"669\" height=\"316\" /></a></figure>\n\n\n\n<p>จากนั้นทำการเพิ่ม APIs/Services เข้ามาได้เลย เช่น OpenAPI หรือ AsyncAPI<br />หรือเพิ่มความง่ายไปยังส่วนของ Microcks Hub ได้ เพื่อติดตั้งจากตัวอย่างได้เลย</p>\n\n\n\n<figure><a href=\"https://www.somkiat.cc/wp-content/uploads/2024/07/micorocks-05.jpg\"><img src=\"https://www.somkiat.cc/wp-content/uploads/2024/07/micorocks-05.jpg\" width=\"665\" height=\"268\" /></a></figure>\n\n\n\n<p>ซึ่งในตัวอย่างทำการเลือก Petstore API เข้ามาเล่น (Postman collection)<br />เมื่อเข้าไปดูข้างในจะพบว่า Microcks นั้นจะสร้าง Mock API ให้เลยดังนี้<br />ถ้ามี example response ของแต่ละ case จะขึ้น tab แยกใน mocks section ให้เลย</p>\n\n\n\n<figure><a href=\"https://www.somkiat.cc/wp-content/uploads/2024/07/microcks-06.jpg\"><img src=\"https://www.somkiat.cc/wp-content/uploads/2024/07/microcks-06.jpg\" width=\"668\" height=\"358\" /></a></figure>\n\n\n\n<p>เพียงเท่านี้ก็ใช้งานได้แล้ว<br />อีกอย่างเราสามารถเพิ่ม testing คือการ call api ตามที่เราต้องการใน Microcks ได้อีกด้วย</p>\n\n\n\n<figure><a href=\"https://www.somkiat.cc/wp-content/uploads/2024/07/Screenshot-2567-07-26-at-15.56.31.png\"><img src=\"https://www.somkiat.cc/wp-content/uploads/2024/07/Screenshot-2567-07-26-at-15.56.31.png\" width=\"325\" height=\"218\" /></a></figure>\n\n\n\n<p>ใช้งานง่ายมาก ๆ ที่สำคัญยังมีความสามารถอื่น ๆ อีก<br />ลองเล่นกันดูครับ</p>\n","author":"somkiat","siteTitle":"cc :: somkiat","siteHash":"3a23a5a4389e1e40c6fbb16520a8cc20df5b3591c25145ce72aaa18b19e48201","entryHash":"c13254082ee44208d6e0d485143ec7e61f20cfaa343e4828f7e9958cc18780d1","category":"Thai"}