{"title":"Meta สนับสนุนให้ใช้เขตเวลา TAI เลิกใช้ leap second ตั้งแต่วันนี้ ไม่ต้องรอปี 2035","link":"https://www.blognone.com/node/144495","date":1738685835000,"content":"<div><div><div><p>Meta เขียนบล็อกถึงความยากลำบากในการจัดการ \"อธิกวินาที\" (leap second) กระบวนการเติมวินาทีเข้าไปในวันที่มีมาตั้งแต่ปี 1972 เพื่อปรับให้เวลา UTC มีเวลาตรงกับการหมุนของโลก พร้อมกับสนับสนุนให้ไปใช้<a href=\"https://en.wikipedia.org/wiki/International_Atomic_Time\">เขตเวลา TAI</a> (temps atomique international เป็นภาษาฝรั่งเศสของ  International Atomic Time) ที่ไม่มี leap second มาตั้งแต่ปี 2017</p>\n<p>ความลำบากในการจัดการ leap second นั้นเกิดจากตัวเทียบเวลาที่แท้จริงเป็นนาฬิกาอะตอมในดาวเทียม Stratum 0 แต่การปรับเวลาชดเชยนั้นมักจะจัดการในเซิร์ฟเวอร์ NTP ที่ Stratum 2 ช่วงเวลาที่ชดเชย แต่การเติมเวลาหนึ่งวินาทีเข้าไปในหนึ่งวันนั้นทำไม่ได้เพราะระบบปฎิบัติการแบบ POSIX เช่น ลินุกซ์หรือแมคนั้นต้องการให้หนึ่งวันมี 86,400 วินาทีพอดี จึงต้องค่อยๆ \"หยอด\" (smear) เวลาเติมเข้าไปให้ครบหนึ่งวินาที กระบวนการนี้สร้างความซับซ้อนเพิ่มเติม เพราะเซิร์ฟเวอร์ NTP อาจจะคอนฟิกให้หยอดเวลาไว้หรือไม่ได้คอนฟิกไว้ก็ได้ ทำให้วันที่มี leap second จะเกิดความผิดปกติเวลาที่ได้แต่ละเซิร์ฟเวอร์ไม่ตรงกัน</p>\n<p>ฝั่ง Meta เองนั้นพยายามสร้าง<a href=\"https://www.blognone.com/node/138128\">โปรโตคอลเทียบเวลาที่แม่นระดับนาโนวินาที</a> กระบวนการ smear จึงอาศัยการแอบเติมวินาทีในตัวเอง (self-smearing) โดยไลบรารี fbclock จะแอบเติมเวลา 1 นาโนวินาทีเข้าไปทุกๆ 62.5 ไมโครวินาที แต่ปัญหาก็ยังอยู่ คือเซิร์ฟเวอร์ที่ใช้เทคนิคต่างกันอาจจะพบว่ามีเวลาต่างกันถึง 100 ไมโครวินาทีในช่วงเวลาที่ต้องเติมเวลานี้</p>\n<p>Meta เองเป็นผู้ผลักดันหนึ่งที่ทำให้<a href=\"https://www.blognone.com/node/131570\">หน่วยงานมาตรฐานชั่งตวงนานาชาติประกาศเลิกใช้ leap second ในปี 2035</a> อย่างไรก็ดีทาง Meta สนับสนุนให้เลิกใช้งานตั้งแต่วันนี้โดยเปลี่ยนเขตเวลาเป็น TAI แทน ซึ่งก็ทำให้จะไม่มี leap second ตั้งแต่วันนี้เลย</p>\n<p>ที่มา - <a href=\"https://engineering.fb.com/2025/02/03/production-engineering/how-precision-time-protocol-ptp-handles-leap-seconds/\">Meta</a></p>\n<p><img alt=\"No Description\" src=\"https://www.blognone.com/sites/default/files/externals/f19e12623e10ece0c6f21faa5c69a356.png\" /></p>\n</div></div></div><div><div>Topics: </div><div><div><a href=\"/topics/meta\">Meta</a></div><div><a href=\"/topics/timestamp\">Timestamp</a></div></div></div>","author":"lew","siteTitle":"Blognone","siteHash":"ededadcf18490b3937e7dd89ebe8c00dc129addbdf1ebe4aff1f458146693da0","entryHash":"4fbb7aa39294481b45d0819393507dc0e48c232f0959fd52eca36fef5094af74","category":"Thai"}