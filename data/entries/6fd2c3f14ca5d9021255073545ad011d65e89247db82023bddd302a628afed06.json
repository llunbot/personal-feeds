{"title":"JUnit 5 :: ปรับปรุงการทดสอบด้วยการ run แบบ parallel","link":"https://www.somkiat.cc/junit-5-run-in-parallel/","date":1633261446000,"content":"<p><img src=\"https://www.somkiat.cc/wp-content/uploads/2021/10/JUnit5-1-NoText-150x150.jpg\" /></p>\n<figure><img src=\"https://www.somkiat.cc/wp-content/uploads/2021/10/JUnit5-1-NoText.jpg\" /></figure>\n\n\n\n<p>จาก course เกี่ยวกับ TDD with Java <br />มีคำถามเกี่ยวกับการปรับปรุงการทดสอบด้วย JUnit 5 ให้ดีและเร็วขึ้น<br />โดยความสามารถของ JUnit 5 ก็มีไว้ให้ประกอบไปด้วย</p>\n\n\n\n<ul><li><strong><a href=\"https://junit.org/junit5/docs/current/user-guide/#writing-tests-tagging-and-filtering\" target=\"_blank\">Tagging</a></strong> สำหรับแบ่งกลุ่มของ test case</li><li><strong><a href=\"https://junit.org/junit5/docs/current/user-guide/#writing-tests-parallel-execution\" target=\"_blank\">Parellel execution</a></strong> สำหรับทำการ run test case แบบขนาน เนื่องจากกติแล้วจะทำการแบบ sequential</li></ul>\n\n\n\n<p>มาดูตัวอย่างการใช้งานกัน</p>\n\n\n\n<span></span>\n\n\n\n<p><strong>ก่อนอื่นถ้า test case มีจำนวนมาก ๆ แล้ว</strong></p>\n\n\n\n<p>จำเป็นต้องจัดกลุ่มของ test case ด้วย Tag ก่อน<br />ช่วยทำให้เราเลือกได้ว่าจะ run กลุ่ม หรือ tag ไหนก่อน<br />หรืออาจจะทดสอบแบบ parallel<br />หรือไปทดสอบแบบ distributed ได้ง่ายอีกด้วย<br />ตัวอย่างของการใช้งาน tag<br />ทั้งในระดับ class และ method</p>\n\n\n\n[gist id=\"facb56b3acba828cdba137396f6f96de\" file=\"FirstGroupTest.java\"]\n\n\n\n<p><strong>ทำการ run ดังนี้</strong></p>\n\n\n\n[gist id=\"facb56b3acba828cdba137396f6f96de\" file=\"1.md\"]\n\n\n\n<p><strong>จากนั้นมาลองใช้งาน Parellel execution ใน JUnit 5</strong></p>\n\n\n\n<p>ซึ่งยังเป็น experiment feature เท่านั้นนะ<br />ปกติจะทำงานแบบ sequential<br />โดยที่เราสามารถเปิด feature นี้<br />ด้วยการ config ในไฟล์ <strong><em>src/test/resources/junit-platform.properties </em></strong><br />กำหนดให้ run แบบ parallel ทั้งหมด หรือ แยกเป็นระดับ class ก็ได้ดังนี้</p>\n\n\n\n[gist id=\"facb56b3acba828cdba137396f6f96de\" file=\"junit-platform.properties \"]\n\n\n\n<p>เพียงเท่านี้ก็สามารถปรับปรุงความเร็วของการทดสอบได้แล้ว<br />ยิ่งทำร่วมกับ distributed testing <br />ด้วยการแยกกลุ่มทดสอบไปทดสอบหลาย ๆ เครื่อง<br />ก็ยิ่งช่วยให้การทดสอบเร็วขึ้นไปอีก<br />แต่ก่อนอื่น เขียนก่อน และเขียนให้ดี</p>\n","author":"somkiat","siteTitle":"cc :: somkiat","siteHash":"3a23a5a4389e1e40c6fbb16520a8cc20df5b3591c25145ce72aaa18b19e48201","entryHash":"6fd2c3f14ca5d9021255073545ad011d65e89247db82023bddd302a628afed06","category":"Thai"}