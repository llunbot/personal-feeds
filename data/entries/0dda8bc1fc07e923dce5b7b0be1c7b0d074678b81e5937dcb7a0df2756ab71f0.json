{"title":"Infinite-Scrolling Logos In Flat HTML And Pure CSS","link":"https://smashingmagazine.com/2024/04/infinite-scrolling-logos-html-css/","date":1712059200000,"content":"<p>When I was asked to make an auto-scrolling logo farm, I had to ask myself: “You mean, like a <code>&lt;marquee&gt;</code>?” It’s not the weirdest request, but the thought of a <code>&lt;marquee&gt;</code> conjures up the “old” web days when Geocities ruled. What was next, a repeating sparkling unicorn GIF background?</p>\n<p>If you’re tempted to reach for the <code>&lt;marquee&gt;</code> element, don’t. <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/marquee\">MDN has a stern warning about it right at the top of the page</a>:</p>\n<blockquote>“<strong>Deprecated:</strong> This feature is no longer recommended. Though some browsers might still support it, it may have already been removed from the relevant web standards, may be in the process of being dropped, or may only be kept for compatibility purposes. Avoid using it, and update existing code if possible […] Be aware that this feature may cease to work at any time.”</blockquote>\n\n<p>That’s fine because whatever infinite scrolling feature <code>&lt;marquee&gt;</code> is offered, we can most certainly pull off in CSS. But when I researched examples to help guide me, I was surprised to find very little on it. Maybe auto-scrolling elements aren’t the rage these days. Perhaps the sheer nature of auto-scrolling behavior is enough of an accessibility red flag to scare us off.</p>\n<p>Whatever the case, we have the tools to do this, and I wanted to share how I went about it. This is one of those things that can be done in lots of different ways, leveraging lots of different CSS features. Even though I am not going to exhaustively explore all of them, I think it’s neat to see someone else’s thought process, and that’s what you’re going to get from me in this article.</p>\nWhat We’re Making\n<p>But first, here's an example of the finished result:</p>\n<p>See the Pen <a href=\"https://codepen.io/smashingmag/pen/YzMQMXe\">CSS only marquee without HTML duplication [forked]</a> by <a href=\"https://codepen.io/CiTA\">Silvestar Bistrović</a>.</p>\n<p>The idea is fairly straightforward. We want some sort of container, and in it, we want a series of images that infinitely scroll without end. In other words, as the last image slides in, we want the first image in the series to directly follow it in an infinite loop.</p>\n<p>So, here’s the plan: <strong>We’ll set up the HTML first, then pick at the container and make sure the images are correctly positioned in it before we move on to writing the CSS animation that pulls it all together.</strong></p>\nExisting Examples\n<p>Like I mentioned, I tried searching for some ideas. While I didn’t find exactly what I was looking for, I did find a few demos that provided a spark of inspiration. What I really wanted was to use CSS only while not having to “clone” the marquee items.</p>\n<p>Geoff Graham’s “<a href=\"https://css-tricks.com/creating-a-css-sliding-background-effect/\">Sliding Background Effect</a>” is close to what I wanted. While it is dated, it did help me see how I could intentionally use <code>overflow</code> to allow images to “slide” out of the container and an animation that loops forever. It’s a background image, though, and relies on super-specific numeric values that make it tough to repurpose in other projects.</p>\n<p>See the Pen <a href=\"https://codepen.io/smashingmag/pen/LYvLvGz\">Untitled [forked]</a> by <a href=\"https://codepen.io/team/css-tricks\">@css-tricks</a>.</p>\n<p>There’s another great example from <a href=\"https://codepen.io/Coding_Journey\">Coding Journey</a> over at CodePen:</p>\n<p>See the Pen <a href=\"https://codepen.io/smashingmag/pen/yLrXrVY\">Marquee-like Content Scrolling [forked]</a> by <a href=\"https://codepen.io/Coding_Journey\">Coding Journey</a>.</p>\n<p>The effect is what I’m after for sure, but it uses some JavaScript, and even though it’s just a light sprinkle, I would prefer to leave JavaScript out of the mix.</p>\n<p>Ryan Mulligan’s “<a href=\"https://codepen.io/hexagoncircle/pen/wvmjomb?editors=1000\">CSS Marquee Logo Wall</a>” is the closest thing. Not only is it a logo farm with individual images, but it demonstrates how CSS masking can be used to hide the images as they slide in and out of the container. I was able to integrate that same idea into my work.</p>\n<p>See the Pen <a href=\"https://codepen.io/smashingmag/pen/ExJXJZm\">CSS Marquee Logo Wall [forked]</a> by <a href=\"https://codepen.io/hexagoncircle\">Ryan Mulligan</a>.</p>\n<p>But there’s still something else I’m after. What I would like is the smallest amount of HTML possible, namely markup that does not need to be duplicated to create the impression that there’s an unending number of images. In other words, we should be able to create an infinite-scrolling series of images where the images are the only child elements in the “marquee” container.</p>\n<p>I did find a few more examples in other places, but these were enough to point me in the right direction. Follow along with me.</p>\nThe HTML\n<p>Let's set up the HTML structure first before anything else. Again, I want this to be as “simple” as possible, meaning very few elements with the shortest family tree possible. We can get by with nothing but the “marquee” container and the logo images in it.</p>\n<div>\n<pre><code>&lt;figure class=\"marquee\"&gt;\n  &lt;img class=\"marquee__item\" src=\"logo-1.png\" width=\"100\" height=\"100\" alt=\"Company 1\"&gt;\n  &lt;img class=\"marquee__item\" src=\"logo-2.png\" width=\"100\" height=\"100\" alt=\"Company 2\"&gt;\n  &lt;img class=\"marquee__item\" src=\"logo-3.png\" width=\"100\" height=\"100\" alt=\"Company 3\"&gt;\n&lt;/figure&gt;\n</code></pre>\n</div>\n\n<p>This keeps things as “flat” as possible. There shouldn’t be anything else we need in here to make things work.</p>\nSetting Up The Container\n<p>Flexbox might be the simplest approach for establishing a row of images with a gap between them. We don’t even need to tell it to flow in a row direction because that’s the default.</p>\n<pre><code>.marquee {\n  display: flex;\n}\n</code></pre>\n\n<p>I already know that I plan on using absolute positioning on the image elements, so it makes sense to set relative positioning on the container to, you know, <em>contain</em> them. And since the images are in an absolute position, they have no reserved height or width dimensions that influence the size of the container. So, we’ll have to declare an explicit <code>block-size</code> (the logical equivalent to <code>height</code>). We also need a maximum width so we have a boundary for the images to slide in and out of view, so we’ll use <code>max-inline-size</code> (the logical equivalent to <code>max-width</code>):</p>\n<pre><code>.marquee {\n  --marquee-max-width: 90vw;\n\n  display: flex;\n  block-size: var(--marquee-item-height);\n  max-inline-size: var(--marquee-max-width);\n  position: relative;\n}\n</code></pre>\n\n<p>Notice I’m using a couple of CSS variables in there: one that defines the marquee’s height based on the height of one of the images (<code>--marquee-item-height</code>) and one that defines the marquee’s maximum width (<code>--marquee-max-width</code>). We can give the marquee’s maximum width a value now, but we’ll need to formally register and assign a value to the image height, which we will do in a bit. I just like knowing what variables I am planning to work with as I go.</p>\n<p>Next up, we want the images to be hidden when they are outside of the container. We’ll set the horizontal overflow accordingly:</p>\n<pre><code>.marquee {\n  --marquee-max-width: 90vw;\n\n  display: flex;\n  block-size: var(--marquee-item-height);\n  max-inline-size: var(--marquee-max-width);\n  overflow-x: hidden;\n  position: relative;\n}\n</code></pre>\n\n<p>And I <em>really</em> like the way Ryan Mulligan used a CSS mask. It creates the impression that images are fading in and out of view. So, let’s add that to the mix:</p>\n<pre><code>.marquee {\n  display: flex;\n  block-size: var(--marquee-item-height);\n  max-inline-size: var(--marquee-max-width);\n  overflow-x: hidden;\n  position: relative;\n  mask-image: linear-gradient(\n    to right,\n    hsl(0 0% 0% / 0),\n    hsl(0 0% 0% / 1) 20%,\n    hsl(0 0% 0% / 1) 80%,\n    hsl(0 0% 0% / 0)\n  );\n  position: relative;\n}\n</code></pre>\n\n<p>Here’s what we have so far:</p>\n<p>See the Pen <a href=\"https://codepen.io/smashingmag/pen/LYvjLLG\">CSS only marquee without HTML duplication, example 0 [forked]</a> by <a href=\"https://codepen.io/CiTA\">Silvestar Bistrović</a>.</p>\nPositioning The Marquee Items\n<p>Absolute positioning is what allows us to yank the images out of the document flow and manually position them so we can start there.</p>\n<pre><code>.marquee__item {\n  position: absolute;\n}\n</code></pre>\n\n<p>That makes it look like the images are completely gone. But they’re there — the images are stacked directly on top of one another.</p>\n<p>Remember that CSS variable for our container, <code>--marquee-item-height</code>? Now, we can use it to match the marquee item height:</p>\n<pre><code>.marquee__item {\n  position: absolute;\n  inset-inline-start: var(--marquee-item-offset);\n}\n</code></pre>\n\n<p>To push marquee images outside the container, we need to define a <code>--marquee-item-offset</code>, but that calculation is not trivial, so we will learn how to do it in the next section. We know what the <code>animation</code> needs to be: something that moves linearly for a certain duration after an initial delay, then goes on infinitely. Let’s plug that in with some variables as temporary placeholders.</p>\n<div>\n<pre><code>.marquee__item {\n  position: absolute;\n  inset-inline-start: var(--marquee-item-offset);\n  animation: go linear var(--marquee-duration) var(--marquee-delay, 0s) infinite;\n}\n</code></pre>\n</div>\n\n<p>To animate the marquee items infinitely, we have to define two CSS variables, one for the duration (<code>--marquee-duration</code>) and one for the delay (<code>--marquee-delay</code>). The duration can be any length you want, but the delay should be calculated, which is what we will figure out in the next section.</p>\n<div>\n<pre><code>.marquee__item {\n  position: absolute;\n  inset-inline-start: var(--marquee-item-offset);\n  animation: go linear var(--marquee-duration) var(--marquee-delay, 0s) infinite;\n  transform: translateX(-50%);\n}\n</code></pre>\n</div>\n\n<p>Finally, we will translate the marquee item by <code>-50%</code> horizontally. This small “hack” handles situations when the image sizes are uneven.</p>\n<p>See the Pen <a href=\"https://codepen.io/smashingmag/pen/ExJXJMQ\">CSS only marquee without HTML duplication, example 2 [forked]</a> by <a href=\"https://codepen.io/CiTA\">Silvestar Bistrović</a>.</p>\nAnimating The Images\n<p>To make the animation work, we need the following information:</p>\n<ul>\n<li>Width of the logos,</li>\n<li>Height of the logos,</li>\n<li>Number of items, and</li>\n<li>Duration of the animation.</li>\n</ul>\n<p>Let’s use the following configurations for our set of variables:</p>\n<pre><code>.marquee--8 {\n  --marquee-item-width: 100px;\n  --marquee-item-height: 100px;\n  --marquee-duration: 36s;\n  --marquee-items: 8;\n}\n</code></pre>\n\n<p><strong>Note</strong>: <em>I’m using the BEM modifier <code>.marquee--8</code> to define the animation of the eight logos. We can define the animation keyframes now that we know the <code>--marquee-item-width</code> value.</em></p>\n<pre><code>@keyframes go {\n  to {\n    inset-inline-start: calc(var(--marquee-item-width) * -1);\n  }\n}\n</code></pre>\n\n<p>The animation moves the marquee item from right to left, allowing each one to enter into view from the right as it travels out of view over on the left edge and outside of the marquee container.</p>\n<p>Now, we need to define the <code>--marquee-item-offset</code>. We want to push the marquee item all the way to the right side of the marquee container, opposite of the animation end state. </p>\n<p>You might think the offset should be <code>100% + var(--marquee-item-width)</code>, but that would make the logos overlap on smaller screens. To prevent that, we need to know the minimum width of all logos combined. We do that in the following way:</p>\n<pre><code>calc(var(--marquee-item-width) * var(--marquee-items))\n</code></pre>\n\n<p>But that is not enough. If the marquee container is too big, the logos would take less than the maximum space, and the offset would be within the container, which makes the logos visible inside the marquee container. To prevent that, we will use the <code>max()</code> function like the following:</p>\n<pre><code>--marquee-item-offset: max(\n  calc(var(--marquee-item-width) * var(--marquee-items)),\n  calc(100% + var(--marquee-item-width))\n);\n</code></pre>\n\n<p>The <code>max()</code> function checks which of the two values in its arguments is bigger, the overall width of all logos or the maximum width of the container plus the single logo width, which we defined earlier. The latter will be true on bigger screens and the former on smaller screens.</p>\n<p>See the Pen <a href=\"https://codepen.io/smashingmag/pen/BaEZEXN\">CSS only marquee without HTML duplication, example 3 [forked]</a> by <a href=\"https://codepen.io/CiTA\">Silvestar Bistrović</a>.</p>\n<p>Finally, we will define the complicated animation delay (<code>--marquee-delay</code>) with this formula:</p>\n<div>\n<pre><code>--marquee-delay: calc(var(--marquee-duration) / var(--marquee-items) * (var(--marquee-items) - var(--marquee-item-index)) * -1);\n</code></pre>\n</div>\n\n<p>The delay equals the animation duration divided by a quadratic polynomial (that’s what ChatGPT tells me, at least). The quadratic polynomial is the following part, where we multiply the number of items and number of items minus the current item index:</p>\n<div>\n<pre><code>var(--marquee-items) * (var(--marquee-items) - var(--marquee-item-index))\n</code></pre>\n</div>\n\n<p>Note that we are using a negative delay (<code>* -1</code>) to make the animation start in the “past,” so to speak. The only remaining variable to define is the <code>--marquee-item-index</code> (the current marquee item position):</p>\n<pre><code>.marquee--8 .marquee__item:nth-of-type(1) {\n  --marquee-item-index: 1;\n}\n.marquee--8 .marquee__item:nth-of-type(2) {\n  --marquee-item-index: 2;\n}\n\n/* etc. */\n\n.marquee--8 .marquee__item:nth-of-type(8) {\n  --marquee-item-index: 8;\n}\n</code></pre>\n\n<p>Here’s that final demo once again:</p>\n<p>See the Pen <a href=\"https://codepen.io/smashingmag/pen/xxerNKz\">CSS only marquee without HTML duplication [forked]</a> by <a href=\"https://codepen.io/CiTA\">Silvestar Bistrović</a>.</p>\nImprovements\n<p>This solution could be better, especially when the logos are not equal widths. To adjust the gaps between inconsistently sized images, we could calculate the delay of the animation more precisely. That is possible because the animation is linear. I’ve tried to find a formula, but I think it needs more fine-tuning, as you can see:</p>\n<p>See the Pen <a href=\"https://codepen.io/smashingmag/pen/NWmgVWN\">CSS only marquee without HTML duplication, example 4 [forked]</a> by <a href=\"https://codepen.io/CiTA\">Silvestar Bistrović</a>.</p>\n<p>Another improvement we can get with a bit of fine-tuning is to prevent big gaps on wide screens. To do that, set the <code>max-inline-size</code> and declare <code>margin-inline: auto</code> on the <code>.marquee</code> container:</p>\n<p>See the Pen <a href=\"https://codepen.io/smashingmag/pen/qBwjGBJ\">CSS only marquee without HTML duplication, example 5 [forked]</a> by <a href=\"https://codepen.io/CiTA\">Silvestar Bistrović</a>.</p>\nConclusion\n<p>What do you think? Is this something you can see yourself using on a project? Would you approach it differently? I am always happy when I land on something with a clean HTML structure and a pure CSS solution. You can see the final implementation on the <a href=\"https://heyflow.com\">Heyflow website</a>.</p>\n<h3>Further Reading On SmashingMag</h3>\n<ul>\n<li><a href=\"https://www.smashingmagazine.com/2022/03/designing-better-infinite-scroll/\">Infinite Scroll UX Done Right: Guidelines and Best Practices</a>, Vitaly Friedman</li>\n<li><a href=\"https://www.smashingmagazine.com/2022/11/document-object-model-geometry-guide/\">Document Object Model (DOM) Geometry: A Beginner’s Introduction And Guide</a>, Pearl Akpan</li>\n<li><a href=\"https://www.smashingmagazine.com/2020/03/infinite-scroll-lazy-image-loading-react/\">Implementing Infinite Scroll And Image Lazy Loading In React</a>, Chidi Orji</li>\n<li><a href=\"https://www.smashingmagazine.com/2023/12/css-scroll-snapping-aligned-global-page-layout-case-study/\">CSS Scroll Snapping Aligned With Global Page Layout: A Full-Width Slider Case Study</a>, Brecht De Ruyte</li>\n</ul>","author":"","siteTitle":"Articles on Smashing Magazine — For Web Designers And Developers","siteHash":"ab069ca35bf300e9db0da36f49701f66485a5b0d2db0471dfeee07cef6204939","entryHash":"0dda8bc1fc07e923dce5b7b0be1c7b0d074678b81e5937dcb7a0df2756ab71f0","category":"Tech"}