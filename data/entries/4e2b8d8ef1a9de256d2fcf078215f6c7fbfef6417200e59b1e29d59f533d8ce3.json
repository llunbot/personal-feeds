{"title":"Announcing HashiCorp Waypoint 0.6","link":"https://www.hashicorp.com/blog/announcing-hashicorp-waypoint-0-6","date":1634238000000,"content":"<p>We are pleased to announce the general availability of <a href=\"https://www.waypointproject.io/downloads\">HashiCorp Waypoint 0.6</a>. Waypoint is an application deployment tool that aims to deliver a PaaS-like experience for Kubernetes, ECS, and other platforms. Kubernetes is one of the world's most popular deployment platforms, but there's still too much work to go from an empty Kubernetes cluster to production-ready application deployments.</p>\n<p>In this release, we’ve shipped a Helm-based installation method to install Waypoint with familiar tools in a couple of commands. We now support Helm as an application deployment option to make adopting Waypoint easier in existing environments.</p>\n<p>For our YAML-free deployment options, we now support horizontal pod auto-scaling, sidecars, and Kubernetes Ingress. The result of all this work is that whether you're writing a new application or optimizing an existing one, you can get up and running with Waypoint quickly, and it feels <em>great</em> on Kubernetes.</p>\n<p>Here are some of the significant features in this release:</p>\n<ul>\n<li><strong>Helm-based server install:</strong> The Waypoint server can now be installed into Kubernetes clusters using an official Helm chart. Installations on other platforms remain unchanged.</li>\n<li><strong>Docker builds in Kubernetes:</strong> Waypoint can now build Docker images directly in Kubernetes pods, enabling a secure, self-hosted remote Docker build environment.</li>\n<li><strong>Helm-based application deployment:</strong> You can now deploy your applications from Helm charts. If you already use Helm, this lets you adopt Waypoint with almost no additional work.</li>\n<li><strong>Kubernetes resources in the UI:</strong> The Kubernetes resources created for a deployment (by Waypoint, Helm, or any other plugin) are now listed in the UI along with their health status.</li>\n<li><strong>Kubernetes auto-scaling deployments:</strong> Allow users to configure an autoscaler in Kubernetes with Waypoint and its deployments when using a <a href=\"https://kubernetes.io/docs/tasks/run-application/horizontal-pod-autoscale-walkthrough/#before-you-begin\">metrics server</a>.</li>\n<li><strong>Kubernetes Ingress for releases:</strong> Waypoint will support releasing deployments using an <a href=\"https://kubernetes.io/docs/concepts/services-networking/ingress-controllers/\">ingress controller</a> and configuring an ingress resource for your deployments.</li>\n</ul>\n<p>This release includes many additional new features, workflow enhancements, general improvements, and bug fixes. The <a href=\"https://github.com/hashicorp/waypoint/blob/main/CHANGELOG.md\">Waypoint 0.6 changelog</a> contains a detailed list of all changes in this release.</p>\n<h2><a href=\"#helm-based-server-install\">»</a><a></a>Helm-Based Server Install</h2>\n<p>Waypoint 0.6 comes with a new, official Helm chart to help facilitate a Kubernetes-native way to install the Waypoint server. The Waypoint Helm chart also allows for external implementations like Terraform, using the Helm provider, to install and configure Waypoint into your Kubernetes cluster.</p>\n<p>Helm provides a direct experience to install Waypoint on Kubernetes:</p><pre><code>$ helm repo add hashicorp https://helm.releases.hashicorp.com\n\"hashicorp\" has been added to your repositories\n\n$ helm install waypoint hashicorp/waypoint</code></pre><p>Once the installation has been completed and Waypoint server is up and running, you can log in and set up your local CLI with an authentication token. From the same machine that ran the <code>helm install</code>, run the following command to perform an initial login to the newly installed Waypoint server:</p><pre><code>$ waypoint login -from-kubernetes</code></pre><p>You can then run <code>waypoint ui</code> to open the web UI. Please see the <a href=\"https://tip.waypointproject.io/docs/kubernetes/install#installing-the-waypoint-server-with-helm\">Installing Waypoint for Kubernetes documentation</a> for more details.</p>\n<h2><a href=\"#docker-builds-in-kubernetes-pods\">»</a><a></a>Docker Builds in Kubernetes Pods</h2>\n<p>Waypoint now integrates with <a href=\"https://github.com/GoogleContainerTools/kaniko\">Kaniko</a> to support building Docker images directly within unprivileged Kubernetes pods and enable remote Docker builds within a trusted environment. When paired with <a href=\"https://www.waypointproject.io/docs/projects/git\">our GitOps workflow</a>, this allows an entire build-to-deploy lifecycle powered by Waypoint.</p><img src=\"https://www.datocms-assets.com/2885/1634158202-waypoint-server-blog-inline.png\" /><p>Waypoint previously required a privileged execution environment that could be difficult to configure within hosted Kubernetes providers. Now, Waypoint works out of the box with all major Kubernetes providers. This requires no additional configuration and automatically happens for Waypoint build operations triggered by Git or the <code>-remote</code> flag.</p>\n<p>We also added a guide to using Waypoint with <a href=\"https://waypointproject.io/docs/kubernetes/external-build\">externally built images</a>. Many people adopting Waypoint already have a workflow to build container images, such as through CI. In this scenario, Waypoint doesn't need to build the image, but it still needs to know the name of the resulting image so it can be used for deployment. This guide explains how to integrate externally built images into a Waypoint workflow.</p>\n<h2><a href=\"#helm-based-application-deployment\">»</a><a></a>Helm-Based Application Deployment</h2>\n<p>Waypoint now supports deploying applications using Helm. If you already use Helm or prefer to use Helm, this is the perfect option for deploying to Kubernetes with Waypoint. For people adopting Waypoint with existing applications, this is a great way to get started with Waypoint without feeling like you're going \"all-in.\"</p>\n<p>Configuring Waypoint to deploy with Helm only requires a few lines of configuration:</p><pre><code>app \"my-app\" {\n  deploy {\n    use \"helm\" {\n      name  = \"my-app\"\n      chart = \"${path.app}/helm\"\n\n      set {\n        name  = \"image.repository\"\n        value = artifact.image\n      }\n\n      set {\n        name  = \"image.tag\"\n        value = artifact.tag\n      }\n    }\n  }\n}</code></pre><p>One big benefit of using Helm with Waypoint is access to dynamic information such as the artifact image and tag, as noted above. This artifact may come from a Waypoint run build step or an externally built image.</p>\n<p>Another benefit of Helm is that it enables you to use any available Kubernetes resource since you can write any YAML resource description you want. While Waypoint provides an opinionated Kubernetes plugin that allows deployments without YAML and minimal configuration, this plugin comes at the cost of not supporting every feature of Kubernetes. Having access to Helm provides an additional first-class option.</p>\n<p>And, you can always use different deployment plugins for other applications. One application may use Helm, another may use our opinionated Kubernetes plugin, and another may not be on Kubernetes at all. But within the Waypoint workflow, it is all uniform.</p>\n<h2><a href=\"#resource-listing-in-the-ui\">»</a><a></a>Resource Listing in the UI</h2>\n<p>The Waypoint web UI now shows a listing of all of the platform resources created by a deployment and release. This works with <a href=\"https://www.waypointproject.io/plugins\">all deployment plugins</a>. All resources created will be shown in the listing, regardless of which instantiation method is used in Kubernetes</p><img src=\"https://www.datocms-assets.com/2885/1634174505-waypointresourcelisting.png\" /><p>This allows users of Waypoint to quickly diagnose any issues. A common scenario we found in earlier versions of Waypoint was that the Waypoint deployment succeeded, but a configuration error caused the deployed application to be broken. For example, an environment variable to connect to the database might be missing. Now, users can see that while the Waypoint deployment succeeded, the launched resources may still have errors they need to resolve.</p>\n<p>Future versions of Waypoint will continue to add additional functionality to the resource listing, such as the ability to view more details, see diffs between deployment versions, notify on status changes, and more.</p>\n<h2><a href=\"#kubernetes-auto-scaling-deployments\">»</a><a></a>Kubernetes Auto-Scaling Deployments</h2>\n<p>In earlier versions of Waypoint, only a single pod was generated when using the opinionated Kubernetes plugin. With 0.6, Waypoint gains the ability to scale an application horizontally (increase or decrease the number of pods) by setting values for <code>min_replicas</code> and <code>max_replicas</code> fields within the <code>autoscale</code> stanza in a Waypoint configuration file.</p>\n<p>A basic use case of this feature can be implemented as follows:</p><pre><code>app “my-app” {\n  build { ... }\n\n  deploy {\n    use “kubernetes” {\ncpu {\n        request = \"250m\"\n        limit   = \"500m\"\n      }\n\n      autoscale {\n        min_replicas = 2\n        max_replicas = 5\n        cpu_percent  = 75\n      }\n\n    }\n  }\n\n  release { ... }\n}</code></pre><p>As you can see, configuring horizontal pod autoscaling required only about eight lines of configuration. This highlights a huge benefit of using our opinionated Kubernetes plugin: for typical applications such as web services, you can avoid writing hundreds of lines of YAML and focus on just getting your application deployed.</p>\n<p>If you require more flexibility and configuration, we always support Helm and <code>kubectl apply</code> as first-class deployment plugins, but you have to manually configure features such as pod autoscaling.</p>\n<h2><a href=\"#kubernetes-ingress-for-releases\">»</a><a></a>Kubernetes Ingress for Releases</h2>\n<p>Waypoint now has an additional way to configure and release your deployments in Kubernetes when using our opinionated Kubernetes deployment plugin. Users can now create an <a href=\"https://kubernetes.io/docs/concepts/services-networking/ingress-controllers/\">ingress resource</a> for a release.</p>\n<p>Unlike the other options Waypoint supports for release, an ingress resource can be configured to match certain inbound traffic that should be routed through the ingress controller to an application’s deployment. The ingress resource will use an existing ingress controller for routing traffic per release, rather than spinning up an additional load balancer, which may cost extra money and take longer to initialize.</p>\n<p>Configuring an ingress resource for a release is as simple as defining an <code>ingress</code> stanza:</p><pre><code>app “my-microservice” {\n  build { ... }\n\n  deploy {\n    use \"kubernetes\" {\n      probe_path = \"/\"\n    }\n  }\n\n  release {\n    use \"kubernetes\" {\n      ingress \"http\" {\n        path_type = \"Prefix\"\n        path      = \"/\"\n      }\n    }\n  }\n}</code></pre><h2><a href=\"#what-s-next-for-waypoint\">»</a><a></a>What’s Next for Waypoint?</h2>\n<p>There are many more features and improvements in Waypoint 0.6, but they are too numerous to detail in this post. For a complete listing of changes in Waypoint 0.6, please see the <a href=\"https://github.com/hashicorp/waypoint/blob/main/CHANGELOG.md\">CHANGELOG</a>.</p>\n<p>One of our primary focuses is improving workflows around multiple environments (staging, production, etc.) in future releases. Working with various environments using Kubernetes today is a very manual and error-prone process. We hope that we can bring significant automation and opinionated workflows to streamline this process better.</p>\n<p>We hope you enjoy Waypoint 0.6!</p>\n<h2><a href=\"#next-steps\">»</a><a></a>Next Steps</h2>\n<ul>\n<li><a href=\"https://www.waypointproject.io/downloads\">Download Waypoint 0.6</a> from the project website.</li>\n<li>Learn more about Waypoint with tutorials on the <a href=\"https://learn.hashicorp.com/waypoint\">HashiCorp Learn</a> site.</li>\n<li><a href=\"https://www.waypointproject.io/community\">Contribute to the Waypoint project</a> and participate in its community.</li>\n<li><a href=\"https://www.waypointproject.io/docs/extending-waypoint\">Extend Waypoint</a> by creating a plugin.</li>\n</ul>","author":"Taylor Dolezal","siteTitle":"HashiCorp Blog","siteHash":"219aa6310b3388f2335eba49871f4df9581f2c58eaeb5e498363b54e835b7001","entryHash":"4e2b8d8ef1a9de256d2fcf078215f6c7fbfef6417200e59b1e29d59f533d8ce3","category":"Tech"}