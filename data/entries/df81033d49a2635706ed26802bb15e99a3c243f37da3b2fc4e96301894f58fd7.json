{"title":"HashiCorp and Google Cloud announce GKE Autopilot support for Consul","link":"https://www.hashicorp.com/blog/hashicorp-and-google-cloud-announce-gke-autopilot-support-for-consul","date":1708966800000,"content":"<p>As more customers use multiple cloud services or microservices, they face the difficulty of consistently managing and connecting their services across various environments, including on-premises, different clouds, and existing legacy systems. HashiCorp Consul's service mesh addresses this challenge by securely and consistently connecting applications on any runtime, network, cloud platform, or on-premises setup. </p>\n\n<p>In the Google Cloud ecosystem, Consul can be deployed across <a href=\"https://developer.hashicorp.com/consul/tutorials/kubernetes/kubernetes-gke-google?in=consul%2Fkubernetes\">Google Kubernetes Engine (GKE)</a> and Anthos GKE. Now, Consul 1.16 is also supported on GKE Autopilot, Google Cloud’s fully managed Kubernetes platform for containerized workloads. Consul 1.17 is currently on track to be supported on GKE Autopilot later this year. </p>\n\n<h2>Benefits of GKE Autopilot</h2>\n\n<p>In 2021, Google Cloud introduced <a href=\"https://cloud.google.com/blog/products/containers-kubernetes/introducing-gke-autopilot\">GKE Autopilot</a>, a streamlined configuration for Kubernetes that follows GKE best practices, with Google managing the cluster configuration. Reducing the complexity that comes with workloads using Kubernetes, Google’s GKE Autopilot simplifies operations by managing infrastructure, control plane, and nodes, while reducing operational and maintenance costs. Consul is the latest partner product to be generally available, fleet-wide, on GKE Autopilot. </p>\n\n<p>By deploying Consul on GKE Autopilot, customers can connect services and applications across clouds, platforms, and services while realizing the benefits of a simplified Kubernetes experience. The key benefits of using Autopilot include more time to focus on building your application, a strong security posture out-of-the-box, and reduced pricing — paying only for what you use: </p>\n\n<p><strong>Focus on building and deploying your applications:</strong> With Autopilot, Google manages the infrastructure using best practices for GKE. Using Consul, customers can optimize operations through centralized management and automation, saving valuable time and resources for developers. </p>\n\n<p><strong>Out-of-the-box security:</strong> With years of Kubernetes experience, GKE Autopilot implements GKE-hardening guidelines and security best practices, while blocking features deemed less safe (i.e. privileged pod- and host-level access). As a part of <a href=\"https://www.hashicorp.com/solutions/zero-trust-security\">HashiCorp’s zero trust security </a>solution, Consul enables least-privileged access by using identity-based authorization and service-to-service encryption.</p>\n\n<p><strong>Pay-as-you-go:</strong> GKE Autopilot’s pricing model simplifies billing forecasts and attribution because it's based on resources requested by your pods. Visit the Google Cloud and HashiCorp websites to learn more about <a href=\"https://cloud.google.com/kubernetes-engine/pricing#autopilot_mode\">GKE Autopilot pricing</a> and <a href=\"https://www.hashicorp.com/products/consul/pricing\">HashiCorp Consul pricing</a>.</p>\n\n<h2>Deploying Consul on GKE Autopilot</h2>\n\n<p>Deploying Consul on GKE Autopilot facilitates service networking across a multi-cloud environment or microservices architecture, allowing customers to quickly and securely deploy and manage Kubernetes clusters. With Consul integrated across Google Cloud Kubernetes, including GKE, GKE Autopilot, and Anthos GKE, Consul helps bolster application resilience, increase uptime, accelerate application deployment, and improve security across service-to-service communications for clusters, while reducing overall operational load. </p>\n\n<p>Today, you can deploy Consul service mesh on GKE Autopilot using the following configuration for Helm in your <code>values.yaml</code> file: </p>\n<pre><code>global:\n  name: consul\nconnectInject:\n  enabled: true\ncni:\n  enabled: true\n  logLevel: info\n  cniBinDir: \"/home/kubernetes/bin\"\n  cniNetDir: \"/etc/cni/net.d\"</code></pre><p>In addition, if you are using a Consul <a href=\"https://developer.hashicorp.com/consul/docs/connect/gateways/api-gateway\">API gateway</a> for north-south traffic, you will need to configure the Helm chart so you can leverage the existing <a href=\"https://gateway-api.sigs.k8s.io/\">Kubernetes Gateway API</a>  resources provided by default when provisioning GKE Autopilot. We recommend the configuration shown below for most deployments on GKE Autopilot as it provides the greatest flexibility by allowing both API gateway and service mesh workflows. Refer to <a href=\"https://developer.hashicorp.com/consul/docs/k8s/installation/install#install-consul-on-gke-autopilot\">Install Consul on GKE Autopilot</a> for more information. </p>\n<pre><code>global:\n  name: consul\nconnectInject:\n  enabled: true\n  apiGateway:\n    manageExternalCRDs: false\n    manageNonStandardCRDs: true\ncni:\n  enabled: true\n  logLevel: info\n  cniBinDir: \"/home/kubernetes/bin\"\n  cniNetDir: \"/etc/cni/net.d\"</code></pre><h2>Learn more</h2>\n\n<p>You can learn more about the process that Google Cloud uses to support HashiCorp Consul workloads on GKE Autopilot clusters with this <a href=\"https://cloud.google.com/kubernetes-engine/docs/resources/autopilot-partners\">GKE documentation and resources page</a>. </p>\n\n<p>Here’s how to get started on Consul:</p>\n\n<ul>\n<li>Learn more in the <a href=\"https://developer.hashicorp.com/consul/docs\">Consul documentation</a>.</li>\n<li>Begin using Consul 1.16 by installing the latest Helm chart, and learn how to <a href=\"https://developer.hashicorp.com/consul/docs/k8s/multiport\">use a multi-port service in Consul on Kubernetes deployments</a>. Try Consul Enterprise by starting a <a href=\"https://www.hashicorp.com/products/consul/trial\">free trial</a>.</li>\n<li>Sign up for HashiCorp-managed <a href=\"https://portal.cloud.hashicorp.com/sign-up?ajs_aid=926749b0-06a3-4daa-a16b-25b562d8289b&amp;product_intent=consul\">HCP Consul</a>.</li>\n</ul>\n","author":"Mike Doheny","siteTitle":"HashiCorp Blog","siteHash":"219aa6310b3388f2335eba49871f4df9581f2c58eaeb5e498363b54e835b7001","entryHash":"df81033d49a2635706ed26802bb15e99a3c243f37da3b2fc4e96301894f58fd7","category":"Tech"}