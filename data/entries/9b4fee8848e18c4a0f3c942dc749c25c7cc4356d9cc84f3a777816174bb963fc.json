{"title":"[แจ้งเตือน] root CA แรกของ Let's Encrypt หมดอายุ อาจมีปัญหากับไคลเอนต์เก่าหรือเซิร์ฟเวอร์ที่คอนฟิกผิด","link":"https://www.blognone.com/node/125042","date":1633066010000,"content":"<div><div><div><p>เมื่อคืนที่ผ่านมาใบรับรอง DST Root CA X3 ของ IdenTrust หมดอายุไป ทำให้เว็บบางส่วนมีปัญหาขึ้นคำเตือนว่าใบรับรองไม่ถูกต้อง โดยสาเหตุมีได้ทั้งจากไคลเอนต์และเซิร์ฟเวอร์เอง เท่าที่ผมรวบรวมมามีสาเหตุได้ดังนี้</p>\n<ul>\n<li><strong>ไคลเอนต์เก่าไม่รองรับใบรับรองของ Let's Encrypt:</strong> แม้ว่า Let's Encrypt จะเริ่มต้นด้วยการออกใบรับรองที่ cross-sign กับ IdenTrust ที่ไคลเอนต์จำนวนมากรองรับ แต่ก็พยายามผลักดันใบรับรอของตัวเองให้ไคลเอนต์รวมเข้าไว้ในระบบเรื่อยมา ทุกวันนี้ฐานข้อมูล root CA แทบทั้งหมดรองรับ ISRG Root X1 แทบทั้งหมดแล้ว</li>\n<li><strong>ไคลเอนต์เฉพาะทาง ไม่รองรับ Let's Encrypt:</strong> มีรายงานเช่น Web Hook จากบริการต่างๆ อาจจะไม่ทำงานเนื่องจากเซิร์ฟเวอร์ไม่ได้อัพเดตฐานข้อมูล หรือไลบรารีของผู้ผลิตบางรายที่มีฐานข้อมูล</li>\n<li><strong>เซิร์ฟเวอร์คอนฟิกผิด ไม่ใส่ Intermediate CA:</strong> เวลาที่ไคลเอนต์ ACME ขอใบรับรองจาก Let's Encrypt นั้นจะได้ไฟล์ออกมา 4 ไฟล์ ได้แก่ cert.pem, chain.pem, fullchain.pem, และ privkey.pem โดยท่าปกติแล้วเซิร์ฟเวอร์ควรใช้เพียงสองไฟล์ คือ fullchain.pem ที่ระบุเส้นทางอ้างอิงการรับรองกลับไปยัง ISRG Root X1 ได้ แต่หากเซิร์ฟเวอร์ใส่เพียง cert.pem ที่ไม่ระบุ Intermediate CA จะทำให้ไคลเอนต์หาเส้นทางอ้างอิงไม่เจอ</li>\n</ul>\n<p>กระบวนการอัพเดตฐานข้อมูล root CA นั้นเป็นกระบวนการที่ค่อนข้างยุ่งยากเนื่องจากฐานข้อมูลมักมากับระบบปฎิบัติการหรือเฟิร์มแวร์อุปกรณ์ ที่ผ่านมา Let's Encrypt ถูกรวมเข้าฐานข้อมูลไปนวนมากแล้ว เช่น Windows XP SP3, macOS 10.12.1, iOS 10, Firefox 50, Ubuntu 16.04, Debian 8, Java 7/8 เป็นต้น</p>\n<p>ที่มา - <a href=\"https://community.letsencrypt.org/t/help-thread-for-dst-root-ca-x3-expiration-september-2021/149190/308\">Let's Encrypt</a></p>\n<p><img src=\"https://www.blognone.com/sites/default/files/externals/7b673989b087df977d01f6036f88f67f.png\" /></p>\n<p>เส้นทางรับรอง Let's Encrypt เส้นสีแดงคือเส้นที่หมดอายุ</p>\n</div></div></div><div><div>Topics: </div><div><div><a href=\"/topics/lets-encrypt\">Let's Encrypt</a></div></div></div>","author":"lew","siteTitle":"Blognone","siteHash":"ededadcf18490b3937e7dd89ebe8c00dc129addbdf1ebe4aff1f458146693da0","entryHash":"9b4fee8848e18c4a0f3c942dc749c25c7cc4356d9cc84f3a777816174bb963fc","category":"Thai"}