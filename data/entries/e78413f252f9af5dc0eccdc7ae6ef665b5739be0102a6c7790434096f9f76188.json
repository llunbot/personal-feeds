{"title":"Terraform, Packer, Nomad, and Waypoint updates help scale ILM at HashiConf 2024","link":"https://www.hashicorp.com/blog/terraform-packer-nomad-and-waypoint-updates-help-scale-ilm-at-hashiconf-2024","date":1728995400000,"content":"<p>Today at HashiConf in Boston, we are pleased to announce our latest capabilities across our <a href=\"https://www.hashicorp.com/infrastructure-cloud/infrastructure-lifecycle-management\">Infrastructure Lifecycle Management (ILM)</a> portfolio, including HashiCorp Terraform, Packer, Nomad, and Waypoint, to help customers build, deploy, and manage infrastructure at scale. </p>\n\n<p>Our latest ILM capabilities help organizations manage infrastructure across Day 0, 1, and 2+.:</p>\n\n<ul>\n<li><strong>Day 0</strong>\n\n<ul>\n<li><strong>HCP Packer CI/CD pipeline metadata (GA)</strong> to track critical CI/CD information in build pipelines through integrations with GitHub and GitLab</li>\n<li><strong>HCP Packer bucket-level RBAC (GA)</strong> to gain further control over image permissions management</li>\n</ul></li>\n<li><strong>Day 1</strong>\n\n<ul>\n<li><strong>HCP Terraform Stacks (public beta)</strong> to simplify infrastructure management at scale</li>\n</ul></li>\n<li><strong>Day 2+</strong>\n\n<ul>\n<li><strong>HCP Terraform module lifecycle management (public beta)</strong> to reduce the overhead of module management</li>\n<li><strong>Terraform migrate (public beta)</strong> to accelerate migration from the community edition to HCP Terraform and Terraform Enterprise</li>\n<li><strong>HCP Waypoint</strong> (GA) with templates (GA) and add-ons (GA), now with API support and an upgrade workflow for templates</li>\n<li><strong>Nomad enhanced GPU support (GA)</strong></li>\n</ul></li>\n</ul>\n\n<p>This blog looks at how each of these new features contribute to speeding, securing, and simplifying the full lifecycle management of infrastructure.</p>\n\n<h2>Day 0: Build securely with infrastructure as code</h2>\n\n<p>As organizations plan and define the requirements of their services, Day 0 is the time to lay a strong foundation for ILM. Organizations need a programmatic approach to defining and provisioning application environments quickly and securely. They must prevent vulnerabilities in the software supply chain, including their base images and build artifacts, and ensure users have appropriate access based on their roles to mitigate security risks.</p>\n\n<h3>HCP Packer improves metadata visibility and access control</h3>\n\n<p>HCP Packer recently added <a href=\"https://developer.hashicorp.com/hcp/docs/packer/reference/build-pipeline-metadata?ajs_aid=b819fe94-ab52-42b0-8dc3-183a8dacd6e9&amp;product_intent=packer&amp;utm_source=google&amp;utm_medium=sem&amp;utm_offer=signup&amp;utm_campaign=CLOUD_AMER_USA_ENG_BOFU_PRACTITIONER_SEM_A_ALL_TERRAFORM_CLD_GG_BRAND_-_Obility&amp;utm_content=hashicorp+terraform-147137975932-625396954924&amp;utm_channel_bucket=paid\">CI/CD pipeline metadata</a> views that give users even more visibility into artifact creation by letting them track critical CI/CD information such as pipeline IDs, job names, details on the operating system, VCS commits, and more. This addition grants HCP Packer level 1 SLSA compliance by providing a basic level of source code identification that can help organizations make risk-based security decisions. With this visibility, organizations can address risks earlier in the infrastructure deployment process.</p>\n\n<p>Another key addition to HCP Packer is <a href=\"https://developer.hashicorp.com/hcp/docs/packer/reference/permissions?ajs_aid=b819fe94-ab52-42b0-8dc3-183a8dacd6e9&amp;product_intent=packer&amp;utm_source=google&amp;utm_medium=sem&amp;utm_offer=signup&amp;utm_campaign=CLOUD_AMER_USA_ENG_BOFU_PRACTITIONER_SEM_A_ALL_TERRAFORM_CLD_GG_BRAND_-_Obility&amp;utm_content=hashicorp+terraform-147137975932-625396954924&amp;utm_channel_bucket=paid\">bucket-level RBAC</a>, which helps admins define user access at the bucket level. This increased access granularity lets developers create buckets within the same project that they can access, while still being walled off from full-project access when they don’t need it. Specific permission can be assigned at the bucket level for actions such as creating, updating, and deleting artifact versions and more. With this improvement, organizations can now ensure sensitive <a href=\"https://developer.hashicorp.com/packer/tutorials/cloud-production/golden-image-with-hcp-packer?ajs_aid=be7881e6-b440-478c-b915-210e5a9895b9\">golden images</a> remain protected from unauthorized modifications while giving developers the self-service capabilities they need to be agile and efficient.</p>\n\n<h2>Day 1: Deploy infrastructure at scale without complexity</h2>\n\n<p>On Day 1, when developers are ready to provision the infrastructure needed to deploy an application, they want to scale quickly to meet business needs without complexity. They don’t want to waste valuable time repeating complex workarounds or repetitive manual processes.</p>\n\n<h3>HCP Terraform Stacks provide a built-in way to scale</h3>\n\n<p>Last October, we announced the private preview of <a href=\"https://www.hashicorp.com/blog/terraform-stacks-explained\">HCP Terraform Stacks</a>, a new way to simplify infrastructure provisioning and management at scale, reducing the time and overhead of managing infrastructure. Stacks empower users to rapidly create and modify consistent infrastructure setups with differing inputs, all with one simple action. Stacks also eliminate the need to manually track and manage cross-configuration dependencies as multiple Terraform modules can be organized and deployed together in a Stack.</p>\n\n<p>Today, we’re excited to announce the public beta of Terraform Stacks for all <a href=\"https://www.hashicorp.com/blog/terraform-cloud-updates-plans-with-an-enhanced-free-tier-and-more-flexibility\">new HCP Terraform plans</a> based on <a href=\"https://developer.hashicorp.com/terraform/cloud-docs/overview/estimate-hcp-terraform-cost#what-is-a-managed-resource\">resources under management (RUM)</a>. During the public beta, HCP Terraform users can experiment with Stacks to provision and manage up to 500 resources for free, including <a href=\"https://developer.hashicorp.com/terraform/tutorials/cloud/stacks-eks-deferred\">a new Kubernetes use case</a> and two new features: deferred changes and orchestration rules. Go to HashiCorp Developer to learn how to <a href=\"https://developer.hashicorp.com/terraform/cloud-docs/stacks/create#create-a-stack\">create a Stack in HCP Terraform</a>.</p>\n\n<p>The <a href=\"https://developer.hashicorp.com/terraform/tutorials/cloud/stacks-eks-deferred\">new Kubernetes use case</a> streamlines the provisioning and management of Kubernetes workloads by allowing customers to deploy Kubernetes in one single configuration instead of managing multiple, independent Terraform configurations. We see Kubernetes deployments that often have this challenge where there are too many unknown variables to properly complete a plan. With Stacks, customers can drive a faster time-to-market with Kubernetes deployments at scale without going through a layered approach that is hard to complete within Terraform. </p>\n\n<p>The reason we can enable the Kubernetes use case hinges on a new feature: <a href=\"https://developer.hashicorp.com/terraform/cloud-docs/stacks/deploy/plans#deferred-changes\">deferred changes</a>. This feature allows Terraform to produce a partial plan when it encounters too many unknown values — without halting operations. This helps users work through unknown-value situations more easily, accelerating the deployment of certain workloads with Terraform, most notably Kubernetes.</p>\n\n<p><a href=\"https://developer.hashicorp.com/terraform/language/stacks/deploy/conditions\">Orchestration rules</a>, defined in HCL, allow customers to automate repetitive actions. For example, at the launch of the public beta, users can auto-approve a plan when certain orchestration checks and criteria are met. This simplifies the management of large numbers of deployments by codifying orchestration checks that are aware of plan context in the Terraform workflow. </p>\n\n<p>To learn more, read our updated blog <a href=\"https://www.hashicorp.com/blog/terraform-stacks-explained\">Terraform Stacks, explained</a>, refer to our <a href=\"https://developer.hashicorp.com/terraform/language/stacks/\">Stacks documentation</a>, and get hands-on experience in our <a href=\"https://developer.hashicorp.com//terraform/tutorials/cloud/stacks-deploy\">Terraform Stacks tutorials</a>.</p>\n<p><em>*Stacks orchestration rules will be available to all HCP Terraform RUM plans during public beta</em></p>\n\n<h2><strong>Day 2+: Manage and optimize infrastructure operations continuously</strong></h2>\n\n<p>After deployment, on Day 2 and beyond, organizations need to manage their environments and optimize their operations continuously. End-of-life clean-up is a key part of that story, whether it's for Terraform workspaces or modules. Ephemeral workspaces have continued to advance their utility for resource clean-up, with the <a href=\"https://www.hashicorp.com/blog/hcp-terraform-adds-run-queue-visibility-and-new-ephemeral-workspace-features\">recent project-scoped auto-destroy setting enhancement</a>. Terraform also provides excellent tools for managing the creation and organization of golden modules, but visibility and end-of-life operations are also important to consider here as well. And when teams are ready to scale golden patterns and workflows, they’ll need tools that help them build an internal developer platform (IDP) to make infrastructure easily accessible for developers at any skill level.</p>\n\n<h3>HCP Terraform module lifecycle management provides comprehensive module visibility and controls</h3>\n\n<p>The HCP Terraform private registry makes it easy to publish and discover modules internally, but doesn’t fully address the end-of-life states of the module lifecycle. As a consequence, deprecating outdated versions and controlling their distribution could become difficult, especially with large quantities.</p>\n\n<p>From a management perspective, without a native workflow to provide visibility, like usage reports, and communication mechanisms with the right module consumers, organizations struggle to know how much any particular module version is being used, and who to ask for upgrades. From a security and compliance perspective, without a proper way to signal the deprecation of outdated modules, organizations are at risk of using obsolete and out-of-compliance configurations. </p>\n\n<p>Today, we are introducing module lifecycle management improvements in public beta to provide a systematic way to provide visibility, improve communication, and gain control throughout the module lifecycle. These improvements will simplify the complexity of module version management and reduce its overhead while also reducing security and compliance risks. </p>\n\n<p>To take advantage of new module lifecycle management features, the platform team can use <a href=\"https://developer.hashicorp.com/terraform/cloud-docs/workspaces/change-requests\">change requests</a> in the <a href=\"https://developer.hashicorp.com/terraform/cloud-docs/workspaces/explorer\">HCP Terraform explorer</a>, to communicate infrastructure lifecycle events such as:</p>\n\n<ul>\n<li>Module deprecation</li>\n<li>Drift remediation</li>\n<li>Provider upgrades</li>\n<li>Infrastructure changes</li>\n</ul>\n\n<p>For example, platform teams can use <a href=\"https://developer.hashicorp.com/terraform/cloud-docs/registry/manage-module-versions\">module deprecation</a> in the private registry to provide customized warnings about outdated module versions without interruption.</p>\n<img src=\"https://www.datocms-assets.com/2885/1728680835-deprecated-modules.png\" alt=\"Deprecated\" /><p>Combined with <a href=\"https://developer.hashicorp.com/terraform/cloud-docs/users-teams-organizations/teams/notifications\">team notifications</a> in Terraform’s teams settings, which help configure a destination per-team communication channel, the requests always get to the right owners proactively in addition to showing up in the HCP Terraform workspace UI. Then users can use <em>saved views</em> in HCP Terraform explorer to track the progress of change requests for follow-up.</p>\n\n<p>To learn more about each feature, refer to our documentation on <a href=\"https://developer.hashicorp.com/terraform/cloud-docs/registry/manage-module-versions\">module deprecation</a>, <a href=\"https://developer.hashicorp.com/terraform/cloud-docs/workspaces/change-requests\">change requests</a>, and <a href=\"https://developer.hashicorp.com/terraform/cloud-docs/users-teams-organizations/teams/notifications\">team notifications</a>. Change requests, team notifications, and module deprecation are only available in the HCP Terraform Plus tier. Saved views are available for all Terraform plans based on RUM.</p>\n<h3>Terraform migrate accelerates migration from the community edition</h3>\n\n<p>Some customers are interested in trying out HCP Terraform or Terraform Enterprise, but find the migration process from Terraform Community Edition manual, time-consuming, and daunting. This slows the time-to-value for teams that want to migrate and causes friction for organizations adopting a commercial edition of Terraform.</p>\n\n<p>To help simplify and accelerate migrations from Terraform Community Edition to HCP Terraform or Terraform Enterprise, we’ve released <a href=\"https://developer.hashicorp.com/terraform/cloud-docs/migrate/tf-migrate\">Terraform migrate</a> in public beta. Terraform migrate automates the tedious process of migrating workflows at scale in a way that is aligned with our best practices: HashiCorp Validated Designs. The Terraform migrate utility also reduces the risks of mistakes with a consistent migration process. All actions are previewed before changes are made, and Terraform migrate ultimately reduces the total cost of ownership by reducing the time spent performing manual migrations. To learn how Terraform migrate works, please refer to our <a href=\"https://developer.hashicorp.com/terraform/cloud-docs/migrate/tf-migrate\">documentation for Terraform migrate</a>.</p>\n\n<h3>HCP Waypoint is now generally available to help provide self-service infrastructure to developers</h3>\n\n<p>As organizations quickly grow their infrastructure footprint across cloud environments, it can result in an overwhelming increase in scope and complexity in a short period of time. Enterprises can have thousands of downstream developers who need infrastructure to build applications, many of which are not well-versed in the specifics of infrastructure configuration. To scale effectively, organizations can set up an internal developer platform (IDP) that gives platform teams a central control point through which they can provide golden infrastructure workflows. This gives developers an easy way to consume these patterns in a self-service fashion.</p>\n\n<p>HCP Waypoint, a product for creating an IDP to make infrastructure easily accessible, is now generally available. With this release comes <em><a href=\"https://developer.hashicorp.com/hcp/docs/waypoint/concepts/templates\">templates</a></em> for provisioning underlying infrastructure and <em><a href=\"https://developer.hashicorp.com/hcp/docs/waypoint/concepts/add-ons\">add-ons</a></em> to manage application dependencies. These components are also GA as of today.</p>\n\n<p>The GA release of HCP Waypoint also includes a new <em>upgrade workflow</em> that pushes updates to Waypoint applications when the Waypoint template is updated, including updates to the underlying Terraform module version. We also support using the <a href=\"https://developer.hashicorp.com/hcp/api-docs/waypoint\">HCP API</a> to access Waypoint resources such as templates, add-ons, and applications. </p>\n\n<p>We’re also releasing variable support for <em><a href=\"https://www.hashicorp.com/blog/hcp-waypoint-actions-is-now-in-public-beta\">actions</a></em> (currently in public beta) to allow platform teams to specify input variables and their values when creating actions.</p>\n\n<p>HCP Waypoint is now available to all HCP Terraform Plus users. Variable support for actions will be available to HCP Terraform RUM Plus plans during public beta. To learn more, refer to our <a href=\"https://www.hashicorp.com/products/waypoint\">Waypoint product page</a> and see our blog post: <a href=\"https://www.hashicorp.com/blog/hcp-waypoint-now-ga-with-enhancements-to-golden-workflow-capabilities\">HCP Waypoint now GA with enhancements to golden workflow capabilities</a>.</p>\n\n<h3>Nomad adds support for Multi-Instance GPU (MIG), quotas for device resources, golden job versions, and more</h3>\n\n<p>Today we’re announcing Nomad 1.9, which now has the ability to schedule workloads onto an NVIDIA Multi-Instance GPU (A100 and H100 GPUs). As GPUs become more critical in high-performance computing tasks such as machine learning and generative AI, Nomad’s ability to schedule GPU workloads has continued to evolve and improve alongside the technology. Nomad’s MIG support now allows operators to partition GPU resources across multiple users for optimal GPU utilization. In addition, we now provide the ability to assign quotas to GPUs and GPU instances to help restrict aggregate usage of resources by namespace or region.</p>\n\n<p>Nomad 1.9 also brings NUMA awareness and quotas for device resources, improving Nomad’s device orchestration capabilities. In addition, Nomad also introduces golden job versions, which allow operators to tag and track their Nomad jobs for reuse. By reusing the “golden” jobs that follow organization best practices, orchestration with Nomad becomes more efficient and secure. </p>\n\n<p>To learn more, see our blog post: <a href=\"https://www.hashicorp.com/blog/nomad-1-9-adds-nvidia-mig-support-golden-job-versions-and-more\">Nomad 1.9 adds NVIDIA MIG support, golden job versions, and more</a>.</p>\n\n<h2>Get started today</h2>\n\n<p>With thousands of customers, our Infrastructure Lifecycle Management portfolio, including HashiCorp Terraform, Packer, Nomad, and Waypoint, offers a blueprint to cloud success as organizations are rethinking their cloud programs. For some organizations who have struggled with the transition to cloud, it’s a second chance to do cloud right.</p>\n\n<p>You can try many of these new features now and customers on the HashiCloud Cloud Platform can get them applied automatically with no disruption to existing workflows. HCP customers can also begin using the integrated product workflows that combine our ILM products with solutions from our Security Lifecycle Management (SLM) portfolio to simplify common use cases like image management within infrastructure provisioning and privileged access management.</p>\n\n<p>If you are new to our ILM products, you can get started in minutes using the <a href=\"https://portal.cloud.hashicorp.com/sign-up\">HashiCorp Cloud Platform</a> or sign up for <a href=\"https://app.terraform.io/public/signup/account\">HCP Terraform</a>, <a href=\"https://www.hashicorp.com/products/packer\">HCP Packer</a> and <a href=\"https://portal.cloud.hashicorp.com/sign-up\">HCP Waypoint</a> to get started for free today. To learn more about Nomad, check out our <a href=\"https://developer.hashicorp.com/nomad/tutorials/cluster-setup\">tutorials</a>.</p>\n","author":"Yushuo Huang","siteTitle":"HashiCorp Blog","siteHash":"219aa6310b3388f2335eba49871f4df9581f2c58eaeb5e498363b54e835b7001","entryHash":"e78413f252f9af5dc0eccdc7ae6ef665b5739be0102a6c7790434096f9f76188","category":"Tech"}