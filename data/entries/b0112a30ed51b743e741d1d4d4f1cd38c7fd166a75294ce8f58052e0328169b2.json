{"title":"Waypoint 0.11 strengthens Terraform integrations and allows user API access","link":"https://www.hashicorp.com/blog/waypoint-0-11-strengthens-terraform-integrations-and-allows-user-api-access","date":1676568600000,"content":"<p>We are excited to announce the general availability of HashiCorp Waypoint 0.11. Waypoint allows teams to deploy, manage, and observe their applications through a consistent abstraction of underlying infrastructure.</p>\n<p>Waypoint 0.11 adds several significant new features, including an improved experience with variables in the Terraform Cloud configsourcer plugin, a user-facing API to allow easier creation of integration with Terraform providers, and a new integrations library experience for finding and using Waypoint plugins.</p>\n<h2><a href=\"#improved-terraform-integration-points\">»</a><a></a>Improved Terraform integration points</h2>\n<p>Terraform users now have new options to connect to Waypoint and promote smoother operations during the application release process.</p>\n<h3><a href=\"#ecs-terraform-module\">»</a><a></a>ECS Terraform module</h3>\n<p>For customers looking to sustainably manage their application infrastructure with Terraform, Waypoint is introducing Terraform modules that correspond to plugins, starting with <a href=\"https://registry.terraform.io/modules/hashicorp/waypoint-ecs/aws/latest\">waypoint-ecs</a> for <a href=\"https://aws.amazon.com/ecs/\">Amazon Elastic Container Service (ECS)</a>.</p>\n<p>This module instantiates the ECS infrastructure an application will require, such as load balancers, security groups, IAM roles, etc. You can then use the module outputs as ECS plugin parameters (see <a href=\"https://registry.terraform.io/modules/hashicorp/waypoint-ecs/aws/latest/examples/single-env\">example</a>), or consume them dynamically via the <a href=\"https://developer.hashicorp.com/waypoint/plugins/terraform-cloud#terraform-cloud-configsourcer\">Terraform Cloud configsourcer</a>.</p>\n<p>This lets Terraform do what it does best — manage long-lived infrastructure — and Waypoint do what it does best — orchestrate builds, deployments, and releases. That makes it easier to build out a HashiCorp stack.</p>\n<h3><a href=\"#simplified-variable-stanzas-for-configsourcer-plugins\">»</a><a></a>Simplified variable stanzas for configsourcer plugins</h3>\n<p>Previously, configsourcer plugins structured outputs as individual items of data. We found that was limiting for users, since it meant that for each value a plugin outputs for the waypoint.hcl to consume, the waypoint.hcl needed an individual variable stanza. For example, the new ECS Terraform module provides 11 outputs. For a multi-environment deployment, the waypoint.hcl would need 22 or more variable stanzas.</p>\n<p>We've improved this experience by allowing configsourcers to produce structured data, rather than just a string, and make all that structured data available as a waypoint.hcl variable. Building on that, we updated the Terraform Cloud configsourcer to be able to pull all the outputs from a <a href=\"https://app.terraform.io/\">Terraform Cloud</a> workspace into a single variable stanza. Now instead of the 22 variable stanzas in the above hypothetical, you provide just 2, and Waypoint handles the rest.</p>\n<p>To see the new, simplified waypoint.hcl and how it works better together with Terraform, check out <a href=\"https://github.com/hashicorp/waypoint-examples/tree/main/terraform/variables\">this example</a>.</p>\n<h2><a href=\"#user-facing-api\">»</a><a></a>User-facing API</h2>\n<p>Waypoint’s API has always been open to public use but was not officially supported as a community feature. With the 0.11 release, the Waypoint team has given our community the tools needed to interact with our official HTTP API. This includes full API documentation and a <a href=\"https://github.com/hashicorp/waypoint-client\">Golang API client</a> that can be used as a library in your applications to interact with the Waypoint API server.</p>\n<p>Building integrations with Waypoint is now more accessible. See <a href=\"https://developer.hashicorp.com/waypoint/docs/extending-waypoint/api\">our documentation</a> for more information on this feature.</p><pre><code>//Example usage of Waypoint client library with self-managed Waypoint\n\nfunc main() {\n\n clientConfig, err := client.NewWithSelfManaged(\"waypoint-user-token\", \"localhost:9702\", true)\n  if err != nil {\n     panic(err)\n  }\n\n  client, err := client.New(*clientConfig)\n  if err != nil {\n     log.Fatal(\"Unable to setup client\", err)\n  }\n\n  resp, err := client.WaypointListProjects(waypoint.NewWaypointListProjectsParams())\n  if err != nil {\n     log.Fatal(\"An error occurred while fetching projects\", err)\n  }\n\n  projects := resp.GetPayload().Projects\n\n  for _, proj := range projects {\n     fmt.Println(proj.Project)\n  }\n}</code></pre><h2><a href=\"#new-library-for-plugins\">»</a><a></a>New library for plugins</h2>\n<p>With 0.11, Waypoint is launching a new user interface for plugin discoverability. Users can now view <a href=\"https://developer.hashicorp.com/waypoint/integrations\">Waypoint integrations</a> and specify filters or search terms to help them find the best plugin to meet their needs. The initial release of this new experience only contains official Waypoint built-in plugins, as designated by the Official tier.</p>\n<p>Moving forward, we plan to work with partners and community contributors to add their plugins to the collection as well. Users will then be able to filter plugins by Partner and Community tiers. Similar to the Terraform Registry and other HashiCorp products’ integration collections, these tiers inform users of the level of verification a plugin has gone through before they choose to include it in their Waypoint workflow.</p>\n<h2><a href=\"#use-cases\">»</a><a></a>Use cases</h2>\n<p>The Waypoint team worked on sharing use cases with the community during this release cycle. Documentation now includes examples such as <a href=\"https://developer.hashicorp.com/waypoint/docs/use-cases/hcp-hashistack-quickstart\">A complete cloud ecosystem built with Terraform, HCP Waypoint, HCP Vault, HCP Consul, and Nomad</a>; <a href=\"https://developer.hashicorp.com/waypoint/docs/use-cases/dynamic-config-vault-dynamic-secrets\">Dynamic secrets for Waypoint with Vault</a>; and <a href=\"https://developer.hashicorp.com/waypoint/docs/use-cases/waypoint-gh-actions\">Using GitHub actions to unlock GitOps workflows with HashiCorp Waypoint</a>. Check out more use cases in the <a href=\"https://developer.hashicorp.com/waypoint/docs\">Waypoint documentation</a>.</p>\n<h2><a href=\"#other-waypoint-0-11-highlights\">»</a><a></a>Other Waypoint 0.11 highlights</h2>\n<ul>\n<li>Pagination is now implemented in the CLI for <a href=\"https://github.com/hashicorp/waypoint/pull/4276\">jobs</a> and <a href=\"https://github.com/hashicorp/waypoint/pull/4203\">projects</a>, allowing users to display them in their entirety.</li>\n<li><a href=\"https://github.com/hashicorp/waypoint/issues/4328\">The AWS Lambda plugin has been improved</a> to allow the deployment configuration to be injected into Lambda function environments, allowing the waypoint-entrypoint to authenticate with the Waypoint server.</li>\n<li><a href=\"https://github.com/hashicorp/waypoint/issues/4457\">An updated Amazon ECS plugin</a> allows you to bring your own application load balancer to ECS deployments.</li>\n</ul>\n<h2><a href=\"#next-steps\">»</a><a></a>Next steps</h2>\n<p>The full list of new features and improvements in Waypoint 0.11 can be found in the <a href=\"https://github.com/hashicorp/waypoint/blob/main/CHANGELOG.md\">changelog</a>. Finally, don’t miss these useful Waypoint resources:</p>\n<ul>\n<li><a href=\"https://www.waypointproject.io/downloads\">Download Waypoint 0.11</a> from the project website.</li>\n<li>See <a href=\"https://developer.hashicorp.com/waypoint/docs/upgrading/version-guides/0.11.0\">the upgrade guide</a> to upgrade your Waypoint server from 0.10.x to 0.11.</li>\n<li>Learn more about Waypoint with tutorials on the <a href=\"https://developer.hashicorp.com/waypoint\">HashiCorp Developer</a> site.</li>\n<li>Contribute to the Waypoint open source project and <a href=\"https://www.waypointproject.io/community\">participate in the Waypoint community</a>.</li>\n<li><a href=\"https://www.waypointproject.io/docs/extending-waypoint\">Extend Waypoint</a> by creating a plugin.</li>\n</ul>","author":"Gerald Yerden","siteTitle":"HashiCorp Blog","siteHash":"219aa6310b3388f2335eba49871f4df9581f2c58eaeb5e498363b54e835b7001","entryHash":"b0112a30ed51b743e741d1d4d4f1cd38c7fd166a75294ce8f58052e0328169b2","category":"Tech"}