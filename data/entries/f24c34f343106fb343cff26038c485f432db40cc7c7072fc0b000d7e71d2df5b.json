{"title":"Tips :: การจัดการ tab ใน web browser ด้วย Cypress","link":"https://www.somkiat.cc/tips-cypress-manage-browser-tab/","date":1718096538000,"content":"<p><img width=\"150\" height=\"150\" src=\"https://www.somkiat.cc/wp-content/uploads/2024/06/cypress-tips-150x150.jpeg\" loading=\"lazy\" srcset=\"https://www.somkiat.cc/wp-content/uploads/2024/06/cypress-tips-150x150.jpeg 150w, https://www.somkiat.cc/wp-content/uploads/2024/06/cypress-tips-75x75.jpeg 75w\" /></p>\n<figure><a href=\"https://www.somkiat.cc/wp-content/uploads/2024/06/cypress-tips.jpeg\"><img src=\"https://www.somkiat.cc/wp-content/uploads/2024/06/cypress-tips-1024x535.jpeg\" width=\"570\" height=\"297\" /></a></figure>\n\n\n\n<p><strong>คำถามเกี่ยวกับการใช้งาน Cypress</strong></p>\n\n\n\n<p>ถ้าในระบบ web application ที่ทำการทดสอบแบบอัตโนมัติด้วย <a href=\"https://www.cypress.io/\" target=\"_blank\">Cypress</a><br />มีการกด link หรือ ปุ่ม แล้วระบบทำการเปิด window หรือ tab ใหม่ขึ้นมา<br />เราจะทำการตรวจสอบการทำงานอย่างไรได้บ้าง ?</p>\n\n\n\n<span></span>\n\n\n\n<p><strong>คำตอบเป็นดังนี้</strong></p>\n\n\n\n<p>ก่อนอื่นต้องดูก่อนว่าทำการเปิด window หรือ tab เหล่านั้นอย่างไรบ้าง<br />ยกตัวอย่างเช่น เป็นการเปิด link แบบเปิดหน้าใหม่ขึ้นมา คือ target=blank<br />ซึ่งถามเขียน test case แบบปกติ จะเกิด error <br />เนื่องจาก cypress ไม่ได้ switch หรือเปลี่ยนไปยัง tab ใหม่ !!<br />เขียนได้ดังนี้</p>\n\n\n\n[gist id=\"291123784047e236542416dffe56d197\" file=\"1.txt\"]\n\n\n\n<p>การแก้ไขง่าย ๆ คือ การ remove attribute target ออกไปก่อนทำการ click เท่านั้นเอง<br />แก้ไขปัญหาแบบน่าเกลียดสุด ๆ แต่ทำได้ง่าย ๆ ดังนี้</p>\n\n\n\n[gist id=\"291123784047e236542416dffe56d197\" file=\"2.js\"]\n\n\n\n<p><strong>ถ้าเป็นการกดปุ่ม แล้วเปิด tab/window ใหม่ ทำอย่างไร ?</strong></p>\n\n\n\n<p>สามารถทำได้หลายแบบ เช่น <br />ทำการตรวจสอบว่า หลังจากที่กดปุ่มแล้ว ทำการเปิด tab หรือ window ใหม่หรือไม่<br />ด้วยการทำ stub ของ window.open() นั่นเอง<br />ขึ้นอยู๋กับการ implement อีกด้วย<br />จากนั้นตรวจสอบว่า ถูกเรียกหรือไม่ และเปิดไปยัง url ของหน้าที่ต้องการหรือไม่<br />ซึ่งไม่ทำการเปิดขึ้นมาจริง ๆ</p>\n\n\n\n[gist id=\"291123784047e236542416dffe56d197\" file=\"3.js\"]\n\n\n\n<p><strong>Reference Websites</strong></p>\n\n\n\n<ul>\n<li><a href=\"https://testersdock.com/cypress-new-window/\" target=\"_blank\">How to handle window and tab ?</a></li>\n\n\n\n<li><a href=\"https://glebbahmutov.com/blog/cypress-tips-and-tricks/#deal-with-windowopen\" target=\"_blank\">TRick :: Window open</a></li>\n</ul>\n","author":"somkiat","siteTitle":"cc :: somkiat","siteHash":"3a23a5a4389e1e40c6fbb16520a8cc20df5b3591c25145ce72aaa18b19e48201","entryHash":"f24c34f343106fb343cff26038c485f432db40cc7c7072fc0b000d7e71d2df5b","category":"Thai"}