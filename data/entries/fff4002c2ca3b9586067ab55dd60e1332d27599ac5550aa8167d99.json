{"title":"Allowing Web Share on Third-Party Sites","link":"https://webkit.org/blog/13708/allowing-web-share-on-third-party-sites/","date":1675186034000,"content":"<p>As of <a href=\"https://webkit.org/blog/13639/release-notes-for-safari-technology-preview-160/\">Safari Technology Preview 160</a>, it is no longer possible to use the W3C’s <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Web_Share_API\">Web Share API</a> with third-party sites within an iframe without including an <code>allow</code> attribute. All browser vendors <a href=\"https://github.com/w3c/web-share/pull/252\">agreed to this change</a> as part of the W3C’s standardization process, and it is being rolled out in all major browser engines (including Chrome, Edge, Firefox, on mobile and desktop browsers).</p>\n<p>The Web Share API allows web developers to enable the native sharing functionality of a device, such as sharing a link via email or social media. Prior to this change, the API could be used on any website within an iframe without restriction. However, due to concerns about privacy and security, browser vendors at the W3C have decided to limit the use of the API to only those sites that have explicitly been given permission to use it.</p>\n<p>Web developers must now include an <code>allow</code> attribute in the iframe HTML element to use the Web Share API within an iframe on a third-party site. The attribute accepts a value of <code>web-share</code> and optionally the origin of the site that is allowed to use the API.</p>\n<pre><code><span>&lt;<span>iframe</span> <span>allow</span>=<span>\"web-share\"</span> <span>src</span>=<span>\"https://example.com\"</span>&gt;</span>\n<span>&lt;/<span>iframe</span>&gt;</span>\n</code></pre>\n<p>or</p>\n<pre><code><span>&lt;<span>iframe</span> <span>allow</span>=<span>\"web-share https://example.com\"</span> <span>src</span>=<span>\"https://example.com\"</span>&gt;</span>\n<span>&lt;/<span>iframe</span>&gt;</span>\n</code></pre>\n<p>Without the <code>allow</code>  attribute, the API will throw an exception and will not function within the iframe. The syntax of the <code>allow</code> attribute is defined by the W3C’s <a href=\"https://www.w3.org/TR/permissions-policy/\">Permissions Policy</a> specification. You can <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/iframe#attr-allow\">learn more about the syntax on MDN</a>.</p>\n<p>This change is a necessary step in protecting user privacy and security. It helps ensure that the Web Share API is only used by sites that the developer signals is trustworthy. However, that means web developers will need to make some code changes to continue using the API within third-party iframes.</p>","author":"","siteTitle":"Blog – WebKit","siteHash":"f53db2e11a2faa08c6dca9954c01638d09a2ce585b77a60d10f7a1","entryHash":"fff4002c2ca3b9586067ab55dd60e1332d27599ac5550aa8167d99","category":"Tech"}