{"title":"สรุปจากบทความเรื่อง Guide: How To Detect and Mitigate the Log4Shell Vulnerability (CVE-2021-44228)","link":"https://www.somkiat.cc/summary-from-how-to-detect-and-mitigate-the-log4shell-vulnerability/","date":1639454355000,"content":"<div id=\"readability-page-1\" class=\"page\"><div id=\"page\"><article><div id=\"content_box\"><header></header><div><figure><img src=\"https://www.somkiat.cc/wp-content/uploads/2021/12/log4shell-logo-1024x460.png\" alt=\"\" srcset=\"https://www.somkiat.cc/wp-content/uploads/2021/12/log4shell-logo-1024x460.png 1024w, https://www.somkiat.cc/wp-content/uploads/2021/12/log4shell-logo-300x135.png 300w, https://www.somkiat.cc/wp-content/uploads/2021/12/log4shell-logo-768x345.png 768w, https://www.somkiat.cc/wp-content/uploads/2021/12/log4shell-logo.png 1200w\" sizes=\"(max-width: 1024px) 100vw, 1024px\"></figure><p>หลังจากอ่านบทความเรื่อง <strong><a href=\"https://www.lunasec.io/docs/blog/log4j-zero-day-mitigation-guide/\" target=\"_blank\" rel=\"noreferrer noopener\">Guide: How To Detect and Mitigate the Log4Shell Vulnerability (CVE-2021-44228)</a></strong><br>เกี่ยวกับแนวทางการแก้ไขปัญหาของ Log4j version 2 แล้ว<br>มีสิ่งที่น่าสนใจคือ</p><ul><li>คำแนะนำต่าง ๆ หรือบทความในโลก online มีทั้งผิดและล้าสมัย</li><li>มีคำแนะนำที่ไม่ดีมากมาย เช่น แก้ไขด้วย WAF หรือ ทำการ upgrade version ของ Java หรือ update format ของ log เป็นต้น</li></ul><p><strong>การตรวจสอบ</strong></p><div><p>เนื่องจากผลกระทบจาก log4j นี้<br>มีผลทั้ง Java, Scala, Groovy และ Clojure<br>ดังนั้น จึงทำการสร้างเครื่องมือชื่อว่า <strong><a rel=\"noreferrer noopener\" href=\"https://github.com/lunasec-io/lunasec/releases/tag/v1.0.0-log4shell\" target=\"_blank\">log4shell</a></strong> ขึ้นมาพัฒนาด้วยภาษา Go<br>เพื่อทำการ scan แบบอัตโนมัติให้<br>โดย scan ได้ทั้ง JAR แล WAR file<br>ซึ่งจะทำการ scan หา <a rel=\"noreferrer noopener\" href=\"https://github.com/lunasec-io/lunasec/blob/master/tools/log4shell/constants/vulnerablehashes.go\" target=\"_blank\">library จาก checksums</a> ดังนี้</p><p>หรือจะทำการตรวจสอบพวก vendor software ต่าง ๆ<br>ก็มีทำการสรุปไว้ให้เพียบ <a rel=\"noreferrer noopener\" href=\"https://gist.github.com/SwitHak/b66db3a06c2955a9cb71a8718970c592\" target=\"_blank\">เรียงตั้งแต่ A-Z กันไปเลย</a></p></div><p><strong>การแก้ไขที่ถูกต้อง</strong></p><ul><li><a href=\"https://logging.apache.org/log4j/2.x/download.html\" target=\"_blank\" rel=\"noreferrer noopener\">Upgrade log4j เป็น version 2.15.0</a></li><li>ทำการ config formatMsgNoLookups=true หรือกำหนดใน environment variable ชื่อว่า LOG4J_FORMAT_MSG_NO_LOOKUPS=true หรือใน JVM argument variable ชื่อว่า JAVA_OPTS=-Dlog4j2.formatMsgNoLookups=true</li><li>สาย Hacker สามารถทำการแก้ไข jar file เลย ด้วยการแก้ไข class org.apache.logging.log4j.core.lookup.JndiLookup แต่ไม่แนะนำ</li></ul><p>ลองอ่านเพิ่มเติมได้ครับ น่าจะพอมีประโยชน์</p></div><div><p><img alt=\"\" src=\"https://secure.gravatar.com/avatar/e5cb9aad7bf4f0e43462bd51d6ff7021?s=90&amp;d=mm&amp;r=g\" srcset=\"https://secure.gravatar.com/avatar/e5cb9aad7bf4f0e43462bd51d6ff7021?s=180&amp;d=mm&amp;r=g 2x\" height=\"90\" width=\"90\"></p><h4>Article by <a href=\"https://www.facebook.com/somkiatspns\">Somkiat Puisungnoen</a></h4><p>To be Craftmanship</p></div></div></article></div></div>","author":"somkiat","siteTitle":"cc :: somkiat","siteHash":"3a23a5a4389e1e40c6fbb16520a8cc20df5b3591c25145ce72aaa18b19e48201","entryHash":"775147edf3b3c9fac3f4e8ad9b5a85020eb8f9f1a78ce7439c9e29c8a2862783","category":"Thai"}