{"title":"ทำความรู้จักกับ Twemproxy เพื่อการ scale Redis แบบง่าย ๆ","link":"https://www.somkiat.cc/hello-twemproxy-to-scale-redis/","date":1627915824000,"content":"<p><img src=\"https://www.somkiat.cc/wp-content/uploads/2021/08/twemproxy-150x150.png\" /></p>\n<p>ปัญหาการ scale Redis บน <a href=\"https://cloud.google.com/blog/products/databases/running-redis-on-gcp-four-deployment-scenarios\" target=\"_blank\">Google Cloud Memorystore for Redis</a><br />เนื่องจาก Redis ทำงานแบบ Single thread<br />ทำให้ถ้ามีการทำงานที่ช้า ๆ อาจจะส่งผลต่อการทำงานอื่น ๆ ได้<br />แต่ละ scale ด้วยการขยายเครื่อง ก็ไม่การันตีว่าจะดีขึ้น<br />หนึ่งในคำแนะนำคือ การใช้งาน Proxy มาช่วย<br />โดยตัวที่น่าสนใจคือ <strong><a href=\"https://github.com/twitter/twemproxy\" target=\"_blank\">Twemproxy</a></strong> <br />ซึ่งพัฒนาจาก Twitter<br />ดังนั้นจึงมาลองทำความรู้จักกันหน่อย</p>\n\n\n\n<span></span>\n\n\n\n<p>การทำงานแสดงดังรูป</p>\n\n\n\n<figure><img src=\"https://www.somkiat.cc/wp-content/uploads/2021/08/twemproxy.png\" /></figure>\n\n\n\n<p><strong>เป้าหมายของ Twemproxy</strong></p>\n\n\n\n<ul><li>Scale redis ได้ง่ายขึ้น โดยไม่ต้องทำ cluster ใด ๆ เพียงแค่ใสเพิ่ม Redis server เท่านั้น</li><li>ลดจำนวน connection ไปยัง Redis</li><li>ทำการ sharding data ให้แบบอัตโนมัติไปยัง Redis server หลาย ๆ ได้เลย โดยใช้ consistency hashing รวมทั้งใส่ค่า weight ได้</li><li>สามารถ configuration ได้ง่าย</li><li>มีค่า metric ต่าง ๆ สำหรับการ <a href=\"https://github.com/twitter/twemproxy#utils\" target=\"_blank\">monitoring</a> ต่อไป ซึ่งเชื่อมต่อได้เยอะ</li><li>สนับสนุนทั้ง Redis และ Memcached</li></ul>\n\n\n\n<p><strong><em>ไว้ลองใช้งานดูหน่อย</em></strong></p>\n","author":"somkiat","siteTitle":"cc :: somkiat","siteHash":"3a23a5a4389e1e40c6fbb16520a8cc20df5b3591c25145ce72aaa18b19e48201","entryHash":"6b8ac7ed991fe2f00e8dbb8ffe8efa64cd3cf99d126b28c6ba4c8531a05ff590","category":"Thai"}