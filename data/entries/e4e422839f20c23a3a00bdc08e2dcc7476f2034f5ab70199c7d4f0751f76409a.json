{"title":"Knowledge Bases for Amazon Bedrock now supports Amazon Aurora PostgreSQL and Cohere embedding models","link":"https://aws.amazon.com/blogs/aws/knowledge-bases-for-amazon-bedrock-now-supports-amazon-aurora-postgresql-and-cohere-embedding-models/","date":1707774078000,"content":"<p>During <a href=\"https://reinvent.awsevents.com/\">AWS re:Invent</a> 2023, we announced the general availability of <a href=\"https://aws.amazon.com/bedrock/knowledge-bases/\">Knowledge Bases for Amazon Bedrock</a>. With a knowledge base, you can securely connect foundation models (FMs) in <a href=\"https://aws.amazon.com/bedrock/\">Amazon Bedrock</a> to your company data for Retrieval Augmented Generation (RAG).</p> \n<p>In my <a href=\"https://aws.amazon.com/blogs/aws/knowledge-bases-now-delivers-fully-managed-rag-experience-in-amazon-bedrock/\">previous post</a>, I described how Knowledge Bases for Amazon Bedrock manages the end-to-end RAG workflow for you. You specify the location of your data, select an embedding model to convert the data into vector embeddings, and have Amazon Bedrock create a vector store in your AWS account to store the vector data, as shown in the following figure. You can also customize the RAG workflow, for example, by specifying your own custom vector store.</p> \n<p><a href=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/01/15/2024-bedrock-kb-rag-1-1.png\"><img loading=\"lazy\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/01/15/2024-bedrock-kb-rag-1-1.png\" alt=\"Knowledge Bases for Amazon Bedrock\" width=\"901\" height=\"377\" /></a></p> \n<p>Since my previous post in November, there have been a number of updates to Knowledge Bases, including the availability of <a href=\"https://aws.amazon.com/rds/aurora/\">Amazon Aurora PostgreSQL-Compatible Edition</a> as an additional custom vector store option next to <a href=\"https://aws.amazon.com/opensearch-service/serverless-vector-engine/\">vector engine for Amazon OpenSearch Serverless</a>, <a href=\"https://www.pinecone.io/\">Pinecone</a>, and <a href=\"https://redis.com/\">Redis Enterprise Cloud</a>. But that’s not all. Let me give you a quick tour of what’s new.</p> \n<p><strong><u>Additional choice for embedding model<br /> </u></strong>The embedding model converts your data, such as documents, into vector embeddings. Vector embeddings are numeric representations of text data within your documents. Each embedding aims to capture the semantic or contextual meaning of the data.</p> \n<p><strong>Cohere Embed v3 </strong>– In addition to <a href=\"https://aws.amazon.com/bedrock/titan/\">Amazon Titan Text Embeddings</a>, you can now also choose from two additional embedding models, <a href=\"https://aws.amazon.com/bedrock/cohere-command-embed/\">Cohere Embed English</a> and <a href=\"https://aws.amazon.com/bedrock/cohere-command-embed/\">Cohere Embed Multilingual</a>, each supporting 1,024 dimensions.</p> \n<p><a href=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/01/18/2024-bedrock-kb-cohere-2.png\"><img loading=\"lazy\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/01/18/2024-bedrock-kb-cohere-2.png\" alt=\"Knowledge Bases for Amazon Bedrock\" width=\"1447\" height=\"838\" /></a></p> \n<p>Check out the Cohere Blog to learn more about <a href=\"https://txt.cohere.com/introducing-embed-v3/\">Cohere Embed v3 models</a>.</p> \n<p><strong><u>Additional choice for vector stores<br /> </u></strong>Each vector embedding is put into a vector store, often with additional metadata such as a reference to the original content the embedding was created from. The vector store indexes the stored vector embeddings, which enables quick retrieval of relevant data.</p> \n<p>Knowledge Bases gives you a fully managed RAG experience that includes creating a vector store in your account to store the vector data. You can also select a custom vector store from the list of supported options and provide the vector database index name as well as index field and metadata field mappings.</p> \n<p>We have made three recent updates to vector stores that I want to highlight: The addition of Amazon Aurora PostgreSQL-Compatible and Pinecone serverless to the list of supported custom vector stores, as well as an update to the existing Amazon OpenSearch Serverless integration that helps to reduce cost for development and testing workloads.</p> \n<p><strong>Amazon Aurora PostgreSQL – </strong>In addition to vector engine for Amazon OpenSearch Serverless, Pinecone, and Redis Enterprise Cloud, you can now also choose Amazon Aurora PostgreSQL as your vector database for Knowledge Bases.</p> \n<p><a href=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/01/18/2024-bedrock-kb-aurora-2.png\"><img loading=\"lazy\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/01/18/2024-bedrock-kb-aurora-2.png\" alt=\"Knowledge Bases for Amazon Bedrock\" width=\"1442\" height=\"1132\" /></a></p> \n<p>Aurora is a relational database service that is fully compatible with MySQL and PostgreSQL. This allows existing applications and tools to run without the need for modification. Aurora PostgreSQL supports the open source <a href=\"https://github.com/pgvector/pgvector\">pgvector</a> extension, which allows it to store, index, and query vector embeddings.</p> \n<p>Many of Aurora’s features for general database workloads also apply to vector embedding workloads:</p> \n<ul> \n <li>Aurora offers up to 3x the database throughput when compared to open source PostgreSQL, extending to vector operations in Amazon Bedrock.</li> \n <li><a href=\"https://docs.aws.amazon.com/AmazonRDS/latest/AuroraUserGuide/aurora-serverless-v2.html\">Aurora Serverless v2</a> provides elastic scaling of storage and compute capacity based on real-time query load from Amazon Bedrock, ensuring optimal provisioning.</li> \n <li><a href=\"https://docs.aws.amazon.com/AmazonRDS/latest/AuroraUserGuide/aurora-global-database.html\">Aurora global database</a> provides low-latency global reads and disaster recovery across multiple AWS Regions.</li> \n <li><a href=\"https://docs.aws.amazon.com/AmazonRDS/latest/AuroraUserGuide/blue-green-deployments.html\">Blue/green deployments</a> replicate the production database in a synchronized staging environment, allowing modifications without affecting the production environment.</li> \n <li><a href=\"https://docs.aws.amazon.com/AmazonRDS/latest/AuroraUserGuide/AuroraPostgreSQL.optimized.reads.html\">Aurora Optimized Reads</a> on Amazon EC2 <a href=\"https://aws.amazon.com/ec2/instance-types/r6g/\">R6gd</a> and <a href=\"https://aws.amazon.com/ec2/instance-types/r6i/\">R6id</a> instances use local storage to enhance read performance and throughput for complex queries and index rebuild operations. With vector workloads that don’t fit into memory, Aurora Optimized Reads can offer up to 9x better query performance over Aurora instances of the same size.</li> \n <li>Aurora seamlessly integrates with AWS services such as Secrets Manager, IAM, and RDS Data API, enabling secure connections from Amazon Bedrock to the database and supporting vector operations using SQL.</li> \n</ul> \n<p>For a detailed walkthrough of how to configure Aurora for Knowledge Bases, <a href=\"https://aws.amazon.com/blogs/database/build-generative-ai-applications-with-amazon-aurora-and-knowledge-bases-for-amazon-bedrock/\">check out this post on the AWS Database Blog</a> and the <a href=\"https://docs.aws.amazon.com/AmazonRDS/latest/AuroraUserGuide/AuroraPostgreSQL.VectorDB.html\">User Guide for Aurora</a>.</p> \n<p><strong>Pinecone serverless – </strong>Pinecone recently introduced <a href=\"https://www.pinecone.io/blog/serverless/\">Pinecone serverless</a>. If you choose Pinecone as a custom vector store in Knowledge Bases, you can provide either Pinecone or Pinecone serverless configuration details. Both options are supported.</p> \n<p><strong><u>Reduce cost for development and testing workloads in Amazon OpenSearch Serverless<br /> </u></strong>When you choose the option to quickly create a new vector store, Amazon Bedrock creates a vector index in Amazon OpenSearch Serverless in your account, removing the need to manage anything yourself.</p> \n<p>Since becoming generally available in November, vector engine for Amazon OpenSearch Serverless gives you the choice to disable redundant replicas for development and testing workloads, reducing cost. You can start with just two OpenSearch Compute Units (OCUs), one for indexing and one for search, cutting the costs in half compared to using redundant replicas. Additionally, fractional OCU billing further lowers costs, starting with 0.5 OCUs and scaling up as needed. For development and testing workloads, a minimum of 1 OCU (split between indexing and search) is now sufficient, reducing cost by up to 75 percent compared to the 4 OCUs required for production workloads.</p> \n<p><strong>Usability improvement –</strong> Redundant replicas disabled is now the default selection when you choose the quick-create workflow in Knowledge Bases for Amazon Bedrock. Optionally, you can create a collection with redundant replicas by selecting <strong>Update to production workload</strong>.</p> \n<p><a href=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/01/18/2024-bedrock-aoss-2.png\"><img loading=\"lazy\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/01/18/2024-bedrock-aoss-2.png\" alt=\"Knowledge Bases for Amazon Bedrock\" width=\"1446\" height=\"644\" /></a></p> \n<p>For more details on vector engine for Amazon OpenSearch Serverless, check out <a href=\"https://aws.amazon.com/blogs/aws/vector-engine-for-amazon-opensearch-serverless-is-now-generally-available/\">Channy’s post</a>.</p> \n<p><strong><u>Additional choice for FM<br /> </u></strong>At runtime, the RAG workflow starts with a user query. Using the embedding model, you create a vector embedding representation of the user’s input prompt. This embedding is then used to query the database for similar vector embeddings to retrieve the most relevant text as the query result. The query result is then added to the original prompt, and the augmented prompt is passed to the FM. The model uses the additional context in the prompt to generate the completion, as shown in the following figure.</p> \n<p><a href=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/01/15/2024-bedrock-kb-rag-2.png\"><img loading=\"lazy\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/01/15/2024-bedrock-kb-rag-2.png\" alt=\"Knowledge Bases for Amazon Bedrock\" width=\"910\" height=\"326\" /></a></p> \n<p><strong>Anthropic Claude 2.1</strong> – In addition to Anthropic Claude Instant 1.2 and Claude 2, you can now choose Claude 2.1 for Knowledge Bases. Compared to previous Claude models, Claude 2.1 doubles the supported context window size to 200 K tokens.</p> \n<p><a href=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/01/16/2024-bedrock-kb-claude-21.png\"><img loading=\"lazy\" src=\"https://d2908q01vomqb2.cloudfront.net/da4b9237bacccdf19c0760cab7aec4a8359010b0/2024/01/16/2024-bedrock-kb-claude-21.png\" alt=\"Knowledge Bases for Amazon Bedrock\" width=\"981\" height=\"799\" /></a></p> \n<p>Check out the Anthropic Blog to learn more about <a href=\"https://www.anthropic.com/news/claude-2-1\">Claude 2.1</a>.</p> \n<p><strong><u>Now available<br /> </u></strong>Knowledge Bases for Amazon Bedrock, including the additional choice in embedding models, vector stores, and FMs, is available in the AWS Regions US East (N. Virginia) and US West (Oregon).</p> \n<p><strong><u>Learn more</u></strong></p> \n<ul> \n <li><a href=\"https://aws.amazon.com/bedrock/knowledge-bases/\">Knowledge Bases for Amazon Bedrock product page</a></li> \n <li><a href=\"https://community.aws/tags/Knowledge%20Bases%20for%20Bedrock\">Knowledge Bases for Amazon Bedrock on community.aws</a></li> \n <li><a href=\"https://console.aws.amazon.com/bedrock/home\">Amazon Bedrock in the console</a></li> \n</ul> \n<p><strong><u>Read more about Knowledge Bases for Amazon Bedrock</u></strong></p> \n<ul> \n <li><a href=\"https://aws.amazon.com/blogs/database/build-generative-ai-applications-with-amazon-aurora-and-knowledge-bases-for-amazon-bedrock/\">Build generative AI applications with Amazon Aurora and Knowledge Bases for Amazon Bedrock</a> (blog post)</li> \n <li><a href=\"https://aws.amazon.com/blogs/aws/vector-engine-for-amazon-opensearch-serverless-is-now-generally-available/\">Vector engine for Amazon OpenSearch Serverless is now available</a> (blog post)</li> \n</ul> \n<p>— <a href=\"https://www.linkedin.com/in/antje-barth/\" target=\"_blank\">Antje</a></p>","author":"Antje Barth","siteTitle":"AWS News Blog","siteHash":"6093e072e4117ec22616e844cb857d03ca62c57a411a8affc77cb5e8b6b15bf6","entryHash":"e4e422839f20c23a3a00bdc08e2dcc7476f2034f5ab70199c7d4f0751f76409a","category":"Tech"}