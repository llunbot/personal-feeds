{"title":"The web just gets better with Interop 2024","link":"https://webkit.org/blog/14955/the-web-just-gets-better-with-interop/","date":1706806825000,"content":"<p>The web is amazing. It makes collaborating, learning, and connecting easy for billions of people, because it’s intentionally designed to run on radically different devices.</p>\n<p>It’s your job as a web developer to ensure your project works in every browser and for every user — and that can be hard to do. It’s a far easier undertaking when browsers have identical implementations of the web technology you use.</p>\n<p>Identical implementations are accomplished through the web standards process, where people collaborate together to write extremely detailed technical documents that define each new web technology — right down to how website bugs should work.</p>\n<p>One way to check and see if browsers follow the web standards is through automated testing. There are several shared repositories of such tests, including <a href=\"https://web-platform-tests.org/\">Web Platform Tests</a>. WPT contains over 1.8 million tests, of which over 95% pass in all of the major browsers.</p>\n<h2><a name=\"the-interop-project\"></a>The Interop Project</h2>\n<p>The Interop project aims to improve interoperability by encouraging browser engine teams to look deeper into specific focus areas. Now, for a third year, Apple, <a href=\"https://bocoup.com/blog/interop-2024\">Bocoup</a>, <a href=\"https://web.dev/blog/interop-2024\">Google</a>, <a href=\"https://www.igalia.com/2024/interop-2024-launches.html\">Igalia</a>, <a href=\"https://blogs.windows.com/msedgedev/2024/02/01/microsoft-edge-and-interop-2024/\">Microsoft</a>, and <a href=\"https://hacks.mozilla.org/2024/02/announcing-interop-2024/\">Mozilla</a> pooled our collective expertise and selected a specific subset of automated tests for 2024.</p>\n<p>Some of the technologies chosen have been around for a long time. Other areas are brand new. By selecting some of the highest priority features that developers have avoided for years because of their bugs, we can get them to a place where they can finally be relied on. And by selecting exciting new technology, we can ensure it’s interoperable from the beginning.</p>\n<p>To better understand where interoperability is going in the future, let’s first take a look at the impact of Interop 2023.</p>\n<h2><a name=\"interop-2023\"></a>Interop 2023</h2>\n<p><a href=\"https://webkit.org/blog/13706/interop-2023/\">Interop 2023</a> was even more of an overwhelming success than <a href=\"https://webkit.org/blog/12288/working-together-on-interop-2022/\">Interop 2022</a>. In January 2023, 48% of the chosen tests passed in all three of the major browser engines (in those shipped to users: Chrome and Firefox for desktop Linux, and Safari on macOS Monterey). A year later, that pass rate rose to 95% (in Chrome Dev and Firefox Nightly for desktop Linux, and Safari Technology Preview on macOS Ventura).</p>\n<figure>\n<img src=\"https://webkit.org/wp-content/uploads/Interop-2023-graph.png\" alt=\"Screenshot of the graph of results from January to December 2023, available at https://wpt.fyi/interop-2023\" width=\"1010\" height=\"648\" srcset=\"https://webkit.org/wp-content/uploads/Interop-2023-graph.png 1010w, https://webkit.org/wp-content/uploads/Interop-2023-graph-300x192.png 300w, https://webkit.org/wp-content/uploads/Interop-2023-graph-768x493.png 768w\" /><figcaption>The success of Interop 2023, seen on the <a href=\"https://wpt.fyi/interop-2023\">“Experimental” dashboard</a>. The “Interop” line, in dark green, shows the percentage of tests that passed in all three — Chrome Dev, Firefox Nightly, and Safari Technology Preview.</figcaption></figure>\n<p>What did Interop 2023 accomplish?</p>\n<ul>\n<li>It ensured that all browsers have full support for P3 color, seven years after it started shipping. </li>\n<li>Form controls now support vertical writing modes, for the first time in the web’s history. </li>\n<li>CSS  <code>border-image</code> now works as originally intended. </li>\n<li>Subgrid, Container Queries, <code>:has()</code>, Motion Path, CSS Math Functions, <code>inert</code> and <code>@property</code> are now supported in every modern browser. </li>\n<li>Improved Web APIs include Offscreen Canvas, Modules in Web Workers, Import Maps, Import Assertions, and JavaScript Modules. </li>\n<li>The entire Media Queries 4 specification is now supported everywhere, with easier to use syntax. </li>\n<li>Web Components got a boost with <code>adoptedStyleSheets</code>, <code>ElementInternals</code>, Form-Associated Custom Elements, and the basic behavior of Shadow DOM and Custom Elements. </li>\n<li>Useful CSS pseudo-classes can now be relied on, with consistent cross-browser support for <code>:nth-child()</code>, <code>:nth-last-child()</code>, <code>:modal</code>, <code>:user-valid</code>, and <code>:user-invalid</code>. </li>\n<li>Feature queries now have new support for detecting font features. </li>\n<li>Font Palettes provide robust support for color fonts. </li>\n<li>Significant progress made improving CSS Masking, HTML Forms, Pointer and Mouse Events, Scrolling, Transforms, URL, WebCodecs, and a bucket of bugs causing web compat issues. </li>\n<li><a href=\"https://webkit.org/blog/13706/interop-2023/#focus-areas\">And more</a>.</li>\n</ul>\n<p>We hope this work gives you a renewed sense of confidence to use these technologies. If you found any of them hard-to-use in the past, give them another try.</p>\n<p>Interop 2023 had twenty-six focus areas, twenty of which are being retired as a success. Work will continue on Custom Properties, Pointer and Mouse Events, URL, and a new grouping called “Layout” — consisting of Flexbox, Grid, and Subgrid.</p>\n<h2><a name=\"interop-2024\"></a>Interop 2024</h2>\n<p>Now, we are doing it all again for 2024. Ninety-six focus area proposals were submitted for consideration. Ultimately, sixteen were chosen. Grouping some of the new proposals together, and continuing some of the work from 2023, gives Interop 2024 a total of seventeen focus areas.</p>\n<figure>\n<img src=\"https://webkit.org/wp-content/uploads/interop-2024-dashboard-6.png\" alt=\"The Interop 2024 dashboard\" width=\"1600\" height=\"1501\" srcset=\"https://webkit.org/wp-content/uploads/interop-2024-dashboard-6.png 1600w, https://webkit.org/wp-content/uploads/interop-2024-dashboard-6-300x281.png 300w, https://webkit.org/wp-content/uploads/interop-2024-dashboard-6-1024x961.png 1024w, https://webkit.org/wp-content/uploads/interop-2024-dashboard-6-768x720.png 768w, https://webkit.org/wp-content/uploads/interop-2024-dashboard-6-1536x1441.png 1536w\" /><figcaption>The Interop 2024 dashboard, looking at the “stable” browsers (those currently in the hands of everyday people). Coincidentally, the overall Interop score is once again starting at 48%.</figcaption></figure>\n<p>New this year, Microsoft Edge now has its own column on the <a href=\"https://wpt.fyi/interop-2024?stable\">Interop dashboard</a>. This currently represents Edge and Edge Dev running on Windows 10.</p>\n<h2><a name=\"the-2024-focus-areas\"></a>The 2024 Focus Areas</h2>\n<ul>\n<li><a href=\"#accessibility\">Accessibility </a></li>\n<li><a href=\"#css-nesting\">CSS Nesting</a></li>\n<li><a href=\"#custom-properties\">Custom Properties</a></li>\n<li><a href=\"#declarative-shadow-dom\">Declarative Shadow DOM</a></li>\n<li><a href=\"#font-size-adjust\">Font size adjust</a></li>\n<li><a href=\"#https-urls-for-websocket\">HTTPS URLs for WebSocket</a></li>\n<li><a href=\"#indexeddb\">IndexedDB</a></li>\n<li><a href=\"#layout\">Layout</a></li>\n<li><a href=\"#pointer-and-mouse-events\">Pointer and Mouse Events</a></li>\n<li><a href=\"#popover\">Popover</a></li>\n<li><a href=\"#relative-color-syntax\">Relative Color Syntax</a></li>\n<li><a href=\"#requestvideoframecallback\">requestVideoFrameCallback</a></li>\n<li><a href=\"#scrollbar-styling\">Scrollbar Styling</a></li>\n<li><a href=\"#starting-style-and-transition-behavior\">@starting-style and transition-behavior</a></li>\n<li><a href=\"#text-directionality\">Text Directionality</a></li>\n<li><a href=\"#text-wrap-balance\">text-wrap: balance</a></li>\n<li><a href=\"#url\">URL</a></li>\n</ul>\n<h3><a name=\"accessibility\"></a>Accessibility</h3>\n<p>Interop 2023 included an Accessibility Investigation project. Led by Apple’s accessibility team, the group worked diligently to create new accessibility testing infrastructure for WPT, and write over <a href=\"https://wpt.fyi/results/?label=master&amp;label=experimental&amp;aligned&amp;q=label%3Aaccessibility\">1300 new accessibility tests</a>. These tests have now been included in Interop 2024 as a focus area, encouraging browsers to increase their support.</p>\n<p>The majority of new accessibility tests cover <a href=\"https://w3c.github.io/aria/\">WAI-ARIA</a>, in particular, <a href=\"https://w3c.github.io/aria/#roles\">the Roles Model</a> and the <a href=\"https://w3c.github.io/accname/\">Accessible Name and Description Computation</a> (AccName). Together, these provide a consistent mechanism for conveying the purpose or intent of an element so assistive technology users understand what it is and what they can do with it.</p>\n<p>Other new accessibility tests cover how those technologies are incorporated into host languages. For example, the <a href=\"https://w3c.github.io/html-aam/\">HTML Accessibility API Mappings specification (HTML-AAM)</a> defines the default accessibility semantics of HTML elements, along with related rules for how browsers work with features like the <code>&lt;label&gt;</code> element and image <code>alt</code> text. (See the <a href=\"https://wpt.fyi/results/html-aam/roles.html?label=master&amp;label=experimental&amp;aligned&amp;q=label%3Aaccessibility\">html-aam/roles WPT tests</a> as an example.)</p>\n<p>Another new set of tests cover the accessibility of <code>display: contents</code>. This display mode in CSS provides a useful mechanism for removing the box around content — helpful when wanting to adjust the parent/child/grandchild relationships of content for the purposes of Flexbox or Grid. But it was off limits for use for years, because of the <a href=\"https://caniuse.com/css-display-contents\">lack of accessibility in early implementations</a>. Removing the box on an item completely removed all the contents of that box from the accessibility tree. Sighted users could still see the child content, but many users of assistive technology experienced it completely disappearing. Most of these problems have been fixed in browsers, but not all, not for every situation. These new tests are the next step toward full accessibility and interoperability.</p>\n<p>By including these new Accessibility tests in Interop 2024, the hope is to fix every issue in all browsers. We want it to be easier for developers to create accessible sites and make the web better for everyone, including people with disabilities.</p>\n<h3><a name=\"css-nesting\"></a>CSS Nesting</h3>\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_nesting/Using_CSS_nesting\">CSS Nesting</a> is a focus area for Interop 2024 to ensure any differences are ironed out, and to provide you with the confidence to use it. The ability to nest CSS <a href=\"https://caniuse.com/css-nesting\">shipped in all four major browsers</a> in 2023 — first in Chrome, Edge, and Safari in April/May. And then in Firefox in August.</p>\n<p>The web standard changed slightly between May and August, relaxing the original requirement that every nested selector start with a symbol. Developers can now simply write <code>article</code>, rather than needing to use  <code>&amp; article</code>.</p>\n<p>All of the implementations have since been updated, but there are still small bits that could benefit from attention to interoperability, especially as the final complex details of how Nesting works are settled in the CSS Working Group. Most of Safari’s test failures, for example, are about how nested CSS <a href=\"https://github.com/w3c/csswg-drafts/issues/9509\">interacts</a> with the Shadow DOM via <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/:host\"><code>:host</code></a>.</p>\n<h3><a name=\"custom-properties\"></a>Custom Properties</h3>\n<p>The <code>@property</code> at-rule started <a href=\"https://caniuse.com/mdn-css_at-rules_property\">shipping in browsers</a> over the last few years. As part of Interop 2023, the Custom Properties focus area rose from 4% of tests passing in all stable browsers to 7.6% passing — with 90.7% passing in all of the preview browsers. Firefox is the last browser to add support, which is currently in progress in Firefox Nightly. Since this work isn’t done yet, the focus area is being continued in 2024.</p>\n<p>With <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/@property\"><code>@property</code></a>, developers can declare CSS custom properties in a fashion similar to how browser engines define CSS properties — specifying its syntax, inheritance behavior, and initial value.</p>\n<pre><code>@property --size {\n  syntax: \"&lt;length&gt;\";\n  inherits: false;\n  initial-value: 0px;\n}\n</code></pre>\n<p>This allows you to do things in CSS that were impossible before, like animating gradients or certain parts of transforms.</p>\n<h3><a name=\"declarative-shadow-dom\"></a>Declarative Shadow DOM</h3>\n<p><a href=\"https://webkit.org/blog/13851/declarative-shadow-dom/\">Declarative Shadow DOM</a> is a declarative API that lets you create reusable widgets and components by using only HTML — no JavaScript is necessary. It’s been <a href=\"https://caniuse.com/?search=Declarative%20Shadow%20DOM\">supported</a> in Safari 16.4 since March 2023, and in Chrome 90 since April 2021. Firefox has an implementation in Firefox Nightly.</p>\n<p>Declarative Shadow DOM was one of the often-asked-for features in the <a href=\"https://stateofhtml.com/en-US\">State of HTML 2023</a> survey, so it was chosen to be part of Interop 2024 to ensure it becomes interoperable across all browsers.</p>\n<h3><a name=\"font-size-adjust\"></a>Font size adjust</h3>\n<p>The <code>font-size-adjust</code> property is a great example of the usefulness of placing attention on older technology. Firefox first <a href=\"https://caniuse.com/?search=font-size-adjust\">implemented</a> font size adjust in 2008, but it was rarely used or even discussed by web designers and developers. The early spec evolved over time, adding support for more languages through the two-value syntax, and becoming easier to use with the <code>from-font</code> value.</p>\n<p>The WebKit team implemented the basic version in Safari 16.4 and added the updates in September’s Safari 17.0. Mozilla updated their implementation in Firefox 118, also in September 2023. Both Safari and Firefox now pass 100% of all tests. Chrome began an experimental implementation in 2015, but has yet to ship it. Now with Interop 2024, it’s likely every browser will gain complete support.</p>\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/font-size-adjust\">Font size adjust</a> provides a simple way to conform all the fonts used in a string of text to be the same visual size — so every character in <code>1.4rem</code>-sized text, for example, has the same x-height — or cap height, <code>ch</code> width, <code>ic</code> width, or <code>ic</code> height. The two value syntax allows you to choose which measurement to conform.</p>\n<p>This property is especially useful when you are mixing code with regular text, or mixing multiple languages together, and the different fonts within the same sentence have different sizes. With font size adjust you can avoid weirdly-big letters. No more fussing with font metrics to find a magic number that makes them all look the same size.</p>\n<figure>\n<img loading=\"lazy\" src=\"https://webkit.org/wp-content/uploads/font-size-adjust-from-WWDC23.png\" alt=\"a code demo showing the visual consistency of the inked x-height of multiple font families\" width=\"2658\" height=\"1494\" srcset=\"https://webkit.org/wp-content/uploads/font-size-adjust-from-WWDC23.png 2658w, https://webkit.org/wp-content/uploads/font-size-adjust-from-WWDC23-300x169.png 300w, https://webkit.org/wp-content/uploads/font-size-adjust-from-WWDC23-1024x576.png 1024w, https://webkit.org/wp-content/uploads/font-size-adjust-from-WWDC23-768x432.png 768w, https://webkit.org/wp-content/uploads/font-size-adjust-from-WWDC23-1536x863.png 1536w, https://webkit.org/wp-content/uploads/font-size-adjust-from-WWDC23-2048x1151.png 2048w\" /><figcaption>The CSS `font-size-adjust: from font` makes the Courier font adjust its size to match its x-height with that from Iowan Old Style, instead of typesetting the code to be visually larger. The size uniformity holds even when fallback fonts are used instead.</figcaption></figure>\n<p>Learn more about <code>font-size-adjust</code> by watching <em><a href=\"https://developer.apple.com/videos/play/wwdc2023/10121/?time=1338\">What’s new in CSS</a></em> from WWDC23.</p>\n<h3><a name=\"https-urls-for-websocket\"></a>HTTPS URLs for WebSocket</h3>\n<p>A quirky aspect of the WebSocket API is that you need to use non-HTTP(S) schemes: <code>ws:</code> (insecure) and <code>wss:</code>. As the URLs function otherwise identically to HTTP(S) URLs, this makes the API a bit frustrating to deal with. Based on web developer feedback the WebKit team decided to address this last year by making the API support HTTP(S) URLs as well. We shipped support in Safari 17.0.</p>\n<p>This means that instead of writing:</p>\n<pre><code>function webSocketHandle(path) {\n  const url = new URL(path, location);\n  url.protocol = location.protocol === \"https:\" ? \"wss:\" : \"ws:\";\n  return new WebSocket(url);\n}\n// ...\nconst ws = webSocketHandle(path);\n</code></pre>\n<p>You can now write the much more ergonomic:</p>\n<pre><code>const ws = new WebSocket(path);\n</code></pre>\n<p>By bringing this to Interop 2024, we hope other browsers will adopt it as well, making it universally available for web developers.</p>\n<h3><a name=\"indexeddb\"></a>IndexedDB</h3>\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API\">IndexedDB</a> is an API that provides powerful ways to store data client-side, in an object-oriented database. It started shipping in browsers in 2011, and over the years the web standard has kept evolving. Both version 2 and <a href=\"https://www.w3.org/TR/IndexedDB/\">version 3</a> are supported by all major browsers. Version 2 is fully interoperable, but version 3 needs a bit of attention to bring up the quality of implementations. Being part of Interop 2024 will help ensure implementations are completed and aligned.</p>\n<h3><a name=\"layout\"></a>Layout</h3>\n<p>CSS <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Grid_Layout/Basic_Concepts_of_Grid_Layout\">Grid</a> and <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_flexible_box_layout/Basic_concepts_of_flexbox\">Flexbox</a> were both included in the original Interop project in 2021. <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_grid_layout/Subgrid\">Subgrid</a> was added in Interop 2023. While all three layout methods are now in great shape, they still aren’t quite perfect. The tests for these three areas are now being combined into one Focus Area called Layout. Work will continue to ensure complex edge cases are more interoperable. Meanwhile, developers should absolutely feel confident using these three technologies, since all browsers have solid support for <a href=\"https://caniuse.com/flexbox\">Flexbox</a>, <a href=\"https://caniuse.com/css-grid\">Grid</a>, and now <a href=\"https://caniuse.com/css-subgrid\">Subgrid</a>.</p>\n<h3><a name=\"pointer-and-mouse-events\"></a>Pointer and Mouse Events</h3>\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Pointer_events\">Pointer events</a> are DOM events that are fired for a pointing device. They create a single DOM event model to handle pointing input devices such as a mouse, pen/stylus, or touch with one or more fingers. This API first started <a href=\"https://caniuse.com/pointer\">shipping</a> in browsers in 2012, and landed everywhere by 2019, but still had rocky interoperability.</p>\n<p>In 2022, the Interop team launched an Investigation Project to look deeper into the current state of Pointer and Mouse Events, in an effort to clarify consensus and write tests that captured the state of that consensus. For Interop 2023, those tests enabled Pointer and Mouse Events to be a Focus Area, where the test pass rate was part of the Interop 2023 dashboard and score. Over the year, Pointer and Mouse Events rose from a test pass rate of 34% to 81% — the most significant progress of any area.</p>\n<p>While passing 81% of tests is a significant improvement, there is more work to do, therefore Pointer and Mouse Events will continue to be a Focus Area for 2024.</p>\n<h3><a name=\"popover\"></a>Popover</h3>\n<p>The new <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/popover\"><code>popover</code></a> attribute in HTML provides a built-into-the-browser way to have an element pop into view on the top layer of a page. If you are creating an overlay over the entire web page, the <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/dialog\"><code>dialog</code></a> element is the best option. But when you want to turn any other element into a popup message, user interface, or other kind of content that appears and disappears, the <code>popover</code> element provides a framework to do it.</p>\n<p>Support for <code>popover</code> shipped in Chrome 114 and Safari 17.0 in 2023. Firefox currently has support in progress in Firefox Nightly. Being part of Interop 2024 will ensure this highly desired feature has a fantastic start.</p>\n<h3><a name=\"relative-color-syntax\"></a>Relative Color Syntax</h3>\n<p>Relative Color Syntax is a new way to define colors in CSS that allows you do so while referring to another color. You can, for instance, lighten or darken an existing color by a certain amount. You can take a color variable, adjust the saturation, and assign the new color to a second variable. Relative Color Syntax can be especially powerful when creating a design system.</p>\n<figure>\n<img loading=\"lazy\" src=\"https://webkit.org/wp-content/uploads/relative-color-syntax-from-WWDC23.png\" alt=\"a still from the WWDC session teach how relative color syntax works\" width=\"2970\" height=\"1672\" srcset=\"https://webkit.org/wp-content/uploads/relative-color-syntax-from-WWDC23.png 2970w, https://webkit.org/wp-content/uploads/relative-color-syntax-from-WWDC23-300x169.png 300w, https://webkit.org/wp-content/uploads/relative-color-syntax-from-WWDC23-1024x576.png 1024w, https://webkit.org/wp-content/uploads/relative-color-syntax-from-WWDC23-768x432.png 768w, https://webkit.org/wp-content/uploads/relative-color-syntax-from-WWDC23-1536x865.png 1536w, https://webkit.org/wp-content/uploads/relative-color-syntax-from-WWDC23-2048x1153.png 2048w\" /><figcaption>Learn more about Relative Color Syntax by watching <i><a href=\"https://developer.apple.com/videos/play/wwdc2023/10121/?time=623\">What’s new in CSS</a></i> from WWDC23. </figcaption></figure>\n<p>Safari 16.4 was the first browser to ship support, in March 2023. Chrome 119 and Edge 119 shipped support in Oct and Nov 2023. Currently, none of the implementations have support for using <code>currentcolor</code> with Relative Color Syntax.</p>\n<p>The Relative Color Syntax focus area for Interop 2024 doesn’t test overall support of Relative Color Syntax. It’s narrowly focused on whether or not <code>currentcolor</code> is supported, and includes tests of out-of-gamut behavior — checking to see what happens on displays that don’t have support for P3 color. Inclusion in Interop 2024 will help these final bits get done.</p>\n<h3><a name=\"requestvideoframecallback\"></a>requestVideoFrameCallback</h3>\n<p>The <code>&lt;video&gt;</code> element provides powerful functionality for putting video on the web. But often, developers want and need to do more. The <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/HTMLVideoElement\"><code>HTMLVideoElement</code></a> interface provides special properties and methods for manipulating video objects in JavaScript. And one of those methods is <code>requestVideoFrameCallback()</code>. It lets you perform per-video-frame operations on video in an efficient manner — operations like video processing or analysis, painting to canvas, and synchronization with audio sources.</p>\n<p><a href=\"https://caniuse.com/mdn-api_htmlvideoelement_requestvideoframecallback\">Supported</a> since Chrome 83 and Safari 15.4, inclusion in Interop 2024 will help browsers complete and polish our implementations.</p>\n<h3><a name=\"scrollbar-styling\"></a>Scrollbar styling</h3>\n<p>The scrollbar styling focus area includes two CSS properties that can be used to style scrollbars. The <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/scrollbar-width\"><code>scrollbar-width</code></a> property provides three values: <code>auto</code>, <code>thin</code>, and <code>none</code>. The <code>auto</code> value is the default width; <code>thin</code> provides a thinner scrollbar; and <code>none</code> hides the scrollbar while still allowing content to scroll. Firefox 64 <a href=\"https://caniuse.com/mdn-css_properties_scrollbar-width\">implemented</a> support in December 2018, and it just shipped in Chrome 121 and Edge 121.</p>\n<p>The <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/scrollbar-gutter\"><code>scrollbar-gutter</code></a> property lets you reserve space for the scrollbar, so the layout is the same whether or not a scrollbar is present. The <code>scrollbar-gutter: stable</code> rule lets you tell the browser to reserve space for a scrollbar, even when a scrollbar isn’t there. This can prevent layout shifts from happening between states where scrollbars are needed or not needed. It <a href=\"https://caniuse.com/mdn-css_properties_scrollbar-gutter\">shipped</a> in Chrome 94, Edge 94 and Firefox 97, in 2021–22.</p>\n<p>Safari has the most work to do to complete this Focus Area. Chrome and Firefox already pass 100% of the tests. Ironically, it was <a href=\"https://webkit.org/blog/363/styling-scrollbars/\">Safari who first provided</a> the ability to style scrollbars with nine pseudo-elements, <code>::-webkit-scrollbar-*</code>, <a href=\"https://caniuse.com/?search=%3A%3A-webkit-scrollbar\">back in 2009</a>. However that approach to styling scrollbars never became an official CSS web standard. The CSS Working Group instead <a href=\"https://drafts.csswg.org/css-scrollbars/#out-of-scope\">opted</a> for a far simpler approach.</p>\n<h3><a name=\"starting-style-and-transition-behavior\"></a>@starting-style and transition-behavior</h3>\n<p>This Focus Area brings attention to two new features for controlling animation. <a href=\"https://caniuse.com/mdn-css_at-rules_starting-style\">Both</a> <a href=\"https://caniuse.com/mdn-css_properties_transition-behavior\">shipped</a> in Chrome 117 and Edge 177 in Sept 2023.</p>\n<p>The <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/@starting-style\"><code>@starting-style</code></a> rule in CSS lets you define starting values for a particular element. This is needed when the element is about to go through a transition. It also provides a way for transitioning in or out of <code>display:none</code>.</p>\n<pre><code>.alert {\n  transition: background-color 2s;\n  background-color: green;\n  @starting-style {\n    background-color: transparent;\n  }\n}\n</code></pre>\n<p>In the above example, the <code>background-color</code> will transition from transparent to green when the element is appended to the document.</p>\n<p>Previously, only animations could animate <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_animated_properties#discrete\">discretely-animatable</a> properties. The <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/transition-behavior\"><code>transition-behavior</code></a> property in CSS expands that capability to CSS transitions, paving the way for transitioning the <code>display</code> property when showing or hiding elements.</p>\n<h3><a name=\"text-directionality\"></a>Text Directionality</h3>\n<p>The direction in which text flows is a vital aspect of typesetting on the web. Some languages flow from left-to-right, while others flow from <a href=\"https://www.w3.org/International/questions/qa-scripts\">right-to-left</a>. One of the many bits of technology supporting <a href=\"https://www.w3.org/International/articlelist#direction\">text direction</a> is the <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/dir\"><code>dir</code> attribute</a>. It lets you specifically mark any HTML element with the direction: <code>left</code>, <code>right</code>, or <code>auto</code> — where <code>auto</code> asks the browser to guess from the first letter. The interaction of directionality and shadow trees was not well-defined until recently. Now that it’s been addressed at a standards level, adding it to Interop 2024 helps us ensure implementations align as well.</p>\n<h3><a name=\"text-wrap-balance\"></a>text-wrap: balance</h3>\n<p>Web designers have long wished for a way to prevent very short or one-word lines of text — often known as widows or orphans. Since the advent of responsive web design and the lack of control over the width of columns, this desire has gotten even more challenging. The <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/text-wrap\"><code>text-wrap</code></a> property provides you with multiple options for telling the browser how to wrap text with different methods for calculating line breaks for specific use cases.</p>\n<p>The <code>text-wrap: balance</code> rule is a great solution for headlines. It balances a few lines of text so that each line has about the same amount of text as the others. It <a href=\"https://caniuse.com/css-text-wrap-balance\">shipped</a> in Chrome 114 and Firefox 121, and is implemented in Safari Technology Preview.</p>\n<p>Interop 2024 also includes tests of how <code>text-wrap-mode</code>, <code>text-wrap-style</code>, and <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/white-space-collapse\"><code>white-space-collapse</code></a> behave. The CSS Working Group recently changed to how these longhands interact with each other, so support is currently uneven between browsers. Interop 2024 will help ensure all browser engines update to the latest web standards.</p>\n<h3><a name=\"url\"></a>URL</h3>\n<p>URLs are one of the most fundamental parts of the web. Without them, the web would not exist. But like many things invented very early in the history of the web, support has yet to be fully interoperable. To improve this, the WHATWG wrote the <a href=\"https://url.spec.whatwg.org/\">URL Living Standard</a> packed with details on exactly how URLs should work. The tests supporting this web standard were a focus area for Interop 2023, improving the pass rate from 77% to 85%. To ensure interoperability, the work in this area will continue in 2024.</p>\n<p>Safari is proud to lead the pack, passing 99.7% of the tests. Improvements in other browsers will help ensure websites work correctly everywhere.</p>\n<h2><a name=\"the-2024-investigation-projects\"></a>The 2024 Investigation projects</h2>\n<p>Interop 2024 also includes three investigation areas. These are “homework projects” for the Interop team to work on. All three this year are about writing and making it possible to run more tests — Accessibility Testing, Mobile Testing, and WebAssembly Testing. The Mobile Testing investigation project aims to complete the infrastructure needed at WPT to be able to test browsers on mobile operating systems, potentially to include those scores on the Interop project dashboard in the future.</p>\n<p>While two of the three investigations are projects continuing from last year, they all are starting 2024 at zero percent done. Each team involved will set new goals for this year, and the dashboard will report progress on those goals.</p>\n<h2><a name=\"track-the-progress\"></a>Track the progress</h2>\n<p>Keep up with the progress of Interop 2024 throughout the year, on the <a href=\"https://wpt.fyi/interop-2024\">Interop 2024 dashboard</a>.</p>\n<h2><a name=\"our-commitment\"></a>Our Commitment</h2>\n<p>We continue to believe that interoperability is one of the fundamental pillars that makes the web such a success. Our efforts in Interop 2022 and 2023 demonstrate how deeply we care about the web. We are excited to again collaborate with our colleagues in seizing this opportunity help the web work better for everyone.</p>","author":"","siteTitle":"Blog – WebKit","siteHash":"7f8dbea0b8f53db2e11a2faa08c6dca9954c01638d09a2ce585b77a60d10f7a1","entryHash":"3bc149c5d44773c43d529b902833bec4f38c13cb5650d3e1c4456a3d2d35eb6c","category":"Tech"}