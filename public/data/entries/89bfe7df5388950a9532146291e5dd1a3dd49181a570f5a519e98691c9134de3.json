{"title":"Facebook’s iOS App Architecture","link":"https://engineering.fb.com/2023/02/06/ios/facebook-ios-app-architecture/","date":1675809598000,"content":"\n<p>Dustin Shahidehpour, writing for Facebook’s engineering blog:</p>\n\n<blockquote>\n  <p>Facebook for iOS (FBiOS) is the oldest mobile codebase at Meta.\n<a href=\"https://engineering.fb.com/2012/08/23/ios/under-the-hood-rebuilding-facebook-for-ios/\">Since the app was rewritten in 2012</a>, it has been worked on\nby thousands of engineers and shipped to billions of users, and it\ncan support hundreds of engineers iterating on it at a time.</p>\n</blockquote>\n\n<p><a href=\"https://social.pixels.pizza/@pixel/109819707434268308\">As Eric Vitiello commented</a> on Mastodon regarding this post, if we assume “thousands of engineers” means just 2,000, that means a new engineer has started adding code to Facebook’s iOS app every two days, nonstop, for a decade. It’s closer to one new engineer <em>every day</em> if we count only weekdays. Someone should check if <a href=\"https://daringfireball.net/linked/2022/11/19/fred-brooks-rip\">Fred Brooks</a> is rolling over in his grave.</p>\n\n<blockquote>\n  <p><a href=\"https://engineering.fb.com/2012/08/23/ios/under-the-hood-rebuilding-facebook-for-ios/\">After years of iteration</a>, the Facebook codebase does not\nresemble a typical iOS codebase:</p>\n\n<ul>\n<li>It’s full of C++, Objective-C(++), and Swift.</li>\n<li>It has dozens of <a href=\"https://developer.apple.com/library/archive/documentation/DeveloperTools/Conceptual/DynamicLibraries/100-Articles/UsingDynamicLibraries.html\">dynamically loaded libraries\n(dylibs)</a>, and so many classes that they can’t be loaded\ninto Xcode at once.</li>\n<li>There is almost zero raw usage of Apple’s SDK — everything has\nbeen wrapped or replaced by an in-house abstraction.</li>\n<li>The app makes heavy use of code generation, spurred by\n<a href=\"https://www.buck.build/\">Buck</a>, our custom build system.</li>\n<li>Without heavy caching from our build system, engineers would\nhave to spend an entire workday waiting for the app to build.</li>\n</ul>\n\n<p>FBiOS was never intentionally architected this way. The app’s\ncodebase reflects 10 years of <em>evolution</em>, spurred by technical\ndecisions necessary to support the growing number of engineers\nworking on the app, its stability, and, above all, the user\nexperience.</p>\n</blockquote>\n\n<p>I believe Shahidehpour’s post is an attempt at bragging, but to me it reads like a cry for help.</p>\n\n<p>My thoughts turn to <a href=\"https://duckduckgo.com/?q=conway’s+law\">Melvin Conway’s eponymous law</a>: “Any organization that designs a system (defined broadly) will produce a design whose structure is a copy of the organization’s communication structure.” If that’s true regarding Facebook’s system design for their iOS app, it’s a miracle the company ever gets anything done.</p>\n\n<div>\n<a href=\"https://daringfireball.net/linked/2023/02/07/facebook-ios-app\"> ★ </a>\n</div>\n\n\t","author":"John Gruber","siteTitle":"Daring Fireball","siteHash":"fc569638025dadf22a867470f8215f38855cf50e975782a6c989909474292a36","entryHash":"89bfe7df5388950a9532146291e5dd1a3dd49181a570f5a519e98691c9134de3","category":"Tech"}